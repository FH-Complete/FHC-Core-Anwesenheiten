{"version":3,"file":"AnwesenheitApp.js","sources":["../../../../../js/components/Fetch.js","../../../../../js/components/filter/Filter/Config.js","../../../../../js/components/filter/Filter/Columns.js","../../../../../js/components/filter/Table/Download.js","../../../../../js/directives/collapseAutoClose.js","../../../../../js/tabulator/layouts/fitDataStretchFrozen.js","../../../../../js/api/factory/filter.js","../../../../../js/components/filter/Filter.js","../../../../../js/api/factory/navigation.js","../../../../../js/components/navigation/Navigation.js","../../../../../js/components/layout/BaseLayout.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/formatters/formatters.js","../../../../../js/components/Bootstrap/Modal.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/LehreinheitenDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/MaUIDDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/KontrollenDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/TermineDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/AnwCountDisplay.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/KontrolleDisplay.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/Statuslegende.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/kontrolle.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/profil.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/info.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/StudentByLvaComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/LektorComponent.js","../../../../../js/api/search.js","../../../../../js/api/phrasen.js","../../../../../js/api/navigation.js","../../../../../js/api/filter.js","../../../../../js/api/studstatus.js","../../../../../js/api/profil.js","../../../../../js/api/profilUpdate.js","../../../../../js/api/lvPlan.js","../../../../../js/api/stv.js","../../../../../js/api/stv/verband.js","../../../../../js/api/stv/students.js","../../../../../js/api/stv/filter.js","../../../../../js/api/stv/konto.js","../../../../../js/api/stv/group.js","../../../../../js/api/stv/kontakt.js","../../../../../js/api/stv/prestudent.js","../../../../../js/api/stv/status.js","../../../../../js/api/stv/details.js","../../../../../js/api/stv/exam.js","../../../../../js/api/stv/abschlusspruefung.js","../../../../../js/api/stv/grades.js","../../../../../js/api/stv/mobility.js","../../../../../js/api/stv/archiv.js","../../../../../js/api/stv/documents.js","../../../../../js/api/stv/exemptions.js","../../../../../js/api/stv/jointstudies.js","../../../../../js/api/stv/courselist.js","../../../../../js/api/notiz.js","../../../../../js/api/notiz/person.js","../../../../../js/api/betriebsmittel.js","../../../../../js/api/betriebsmittel/person.js","../../../../../js/api/checkperson.js","../../../../../js/api/ort.js","../../../../../js/api/cms.js","../../../../../js/api/lehre.js","../../../../../js/api/addons.js","../../../../../js/api/messages.js","../../../../../js/api/messages/person.js","../../../../../js/api/vorlagen.js","../../../../../js/api/studium.js","../../../../../js/api/fhcapifactory.js","../../../../../js/api/dashboard.js","../../../../../js/api/bookmark.js","../../../../../js/api/ampeln.js","../../../../../js/api/studiengang.js","../../../../../js/api/menu.js","../../../../../js/api/authinfo.js","../../../../../js/api/language.js","../../../../../js/plugin/OldFhcApi.js","../../../../../js/plugins/Api.js","../../../../../js/api/factory/phrasen.js","../../../../../js/plugins/Phrasen.js","../../../../../js/RESTClient.js","../../../../../js/plugins/FhcAlert.js","../../../../../js/plugin/FhcApi.js","../../../../../js/plugin/Phrasen.js","../../../../../js/components/Tabs.js","../../../../../js/directives/accessibility.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/StudentDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentAnwesenheitComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudiensemesterDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/Range.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AnwTimeline.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentComponent.js","../../../../../js/components/Form/Upload/Dms/Item.js","../../../../../js/components/Form/Upload/Dms.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentEntschuldigungComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/ScanComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudiengangDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/EntschuldigungEdit.js","../../../../../js/tabulator/filters/Dates.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/administration.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AssistenzComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/LandingPage/LandingPageComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/apps/AnwesenheitApp.js"],"sourcesContent":["/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const CoreFetchCmpt = {\n\temits: ['dataFetched'], // this component can emit the event dataFetched that it is catched by this component itself\n\tprops: {\n\t\trefresh: { // to refresh this component\n\t\t\ttype: Boolean\n\t\t},\n\t\tapiFunction: { // the function to call, must return a Promise\n\t\t\trequired: true,\n\t\t\ttype: Function\n\t\t},\n\t\tapiFunctionParameters: {} // parameters for the apiFunction, type mixed, optional\n\t},\n\twatch: {\n\t\t/**\n\t\t * If the refresh property is changed then call fetchData\n\t\t */\n\t\trefresh: function (newValue, oldValue) {\n\t\t\tthis.fetchData();\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tloading: false, // if in loading or not\n\t\t\terror: false, // if an error occurred while loading data\n\t\t\terrorMessage: null // the error message\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.fetchData();\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchData: function() {\n\t\t\tthis.loading = true; // loader started\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = null;\n\n\t\t\t// Checks if the apifunction is a callable function\n\t\t\tif (typeof this.apiFunction == \"function\")\n\t\t\t{\n\t\t\t\t// Call the function stored in apiFunction\n\t        \t\tlet apiFunctionResult = this.apiFunction(this.apiFunctionParameters);\n\n\t\t\t\t// It is expected that the function returns a Promise\n\t\t\t\tif (apiFunctionResult instanceof Promise)\n\t\t\t\t{\n\t\t\t\t\tapiFunctionResult\n\t\t\t\t\t\t.then(this.successHandler) // on success\n\t\t\t\t\t\t.catch(this.errorHandler) // on error\n\t\t\t\t\t\t.finally(this.finallyHandler); // finally in any case\n\t\t\t\t}\n\t\t\t\telse // otherwise display an error\n\t\t\t\t{\n\t\t\t\t\tthis.setError(\"The called apiFunction does not return a Promise\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // otherwise display an error\n\t\t\t{\n\t\t\t\tthis.setError(\"Property apiFunction is not a function\");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsetError: function(errorMessage) {\n\t\t\tthis.loading = false; // loading ended\n\t\t\tthis.error = true; // error occurred\n\t\t\tthis.errorMessage = errorMessage; // save the error message\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsuccessHandler: function(response) {\n\t\t\tthis.$emit('dataFetched', response ? response.data : undefined); // trigger the event dataFetched\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\terrorHandler: function(error) {\n\t\t\tif (error.response?.data?.retval)\n\t\t\t\tthis.setError(error.response.data.retval);\n\t\t\telse if (error.data?.message)\n\t\t\t\tthis.setError(error.data.message);\n\t\t\telse\n\t\t\t\tthis.setError(error.message);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfinallyHandler: function() {\n\t\t\tthis.loading = false; // loading ended\n\t\t}\n\t},\n\ttemplate: `\n\t\t<slot v-if=\"loading\" name=\"loading\">\n\t\t\t<div class=\"fetch-loader\">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if=\"error\" name=\"error\" :error-message=\"errorMessage\">\n\t\t\t<div class=\"fetch-error\">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t`\n};\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfilters: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\temits: {\n\t\tswitchFilter: ['filterId'],\n\t\tapplyFilterConfig: ['filterFields'],\n\t\tsaveCustomFilter: ['customFilterName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tcurrentFields: []\n\t\t};\n\t},\n\tcomputed: {\n\t\ttypes() {\n\t\t\treturn this.columns.reduce((a,c) => {\n\t\t\t\tlet type = c.type.toLowerCase();\n\t\t\t\tif (type.indexOf('int') >= 0)\n\t\t\t\t\ta[c.name] = 'Numeric';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('varchar') >= 0 || \n\t\t\t\t\ttype.indexOf('text') >= 0 || \n\t\t\t\t\ttype.indexOf('bpchar') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Text';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('timestamp') >= 0 || \n\t\t\t\t\ttype.indexOf('date') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Date';\n\t\t\t\telse\n\t\t\t\t\ta[c.name] = '';\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t}\n\t},\n\twatch: {\n\t\tfields(n) {\n\t\t\tthis.currentFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchFilter(evt) {\n\t\t\tthis.$emit('switchFilter', evt.currentTarget.value);\n\t\t},\n\t\tapplyFilterConfig() {\n\t\t\tconst filteredFields = this.currentFields.filter(el => el.name != FILTER_COMPONENT_NEW_FILTER);\n\t\t\tif (filteredFields.filter(el => el.condition == \"\").length)\n\t\t\t\talert(\"Please fill all the filter options\");\n\t\t\telse\n\t\t\t\tthis.$emit('applyFilterConfig', filteredFields);\n\t\t},\n\t\taddField(evt) {\n\t\t\tthis.currentFields.push({\n\t\t\t\tname: FILTER_COMPONENT_NEW_FILTER\n\t\t\t});\n\t\t},\n\t\tremoveField(index) {\n\t\t\tthis.currentFields.splice(index, 1);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-config\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<div v-if=\"filters.length\" class=\"mb-4\">\n\t\t\t\t\t<select class=\"form-select\" @change=\"switchFilter\">\n\t\t\t\t\t\t<option value=\"\">Bitte auswählen...</option>\n\t\t\t\t\t\t<option v-for=\"filter in filters\" :value=\"filter.id\">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-outline-dark\" type=\"button\" @click=addField>\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filter-config-fields my-3\">\n\t\t\t\t\t<div v-for=\"(filterField, index) in currentFields\" class=\"filter-config-field row\">\n\n\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t<span class=\"input-group-text\">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\"form-select\"\n\t\t\t\t\t\t\t\t\tv-model=\"filterField.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Feld zum Filter hinzufügen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"col in columns\" :value=\"col.name\">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Numeric -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Numeric'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Text'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"contains\">Enthält</option>\n\t\t\t\t\t\t\t\t\t<option value=\"ncontains\">Enthält nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Timestamp and date -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Date'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"set\">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nset\">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.option\">\n\t\t\t\t\t\t\t\t\t<option value=\"minutes\">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value=\"hours\">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value=\"days\">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value=\"months\">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"col text-end\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"btn btn-outline-dark\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"removeField(index)\"\n\t\t\t\t\t\t\t\ttitle=\"Filter entfernen\"\n\t\t\t\t\t\t\t\taria-title=\"Filter entfernen\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa-solid fa-minus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Filter save options -->\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-7\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<input ref=\"filterName\" type=\"text\" class=\"form-control\" placeholder=\"Filternamen eingeben...\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"$emit('saveCustomFilter', $refs.filterName.value)\">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-dark\" @click=\"applyFilterConfig\">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfields: Array,\n\t\tselected: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tnames: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\temits: {\n\t\thide: ['fieldName'],\n\t\tshow: ['fieldName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tselectedFields: []\n\t\t};\n\t},\n\twatch: {\n\t\tselected(n) {\n\t\t\tthis.selectedFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle(field) {\n\t\t\tif (this.selectedFields.indexOf(field) != -1)\n\t\t\t{\n\t\t\t\tthis.selectedFields.splice(this.selectedFields.indexOf(field), 1);\n\t\t\t\tthis.$emit('hide', field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedFields.push(field);\n\t\t\t\tthis.$emit('show', field);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-columns\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"d-flex flex-wrap gap-2 p-3 justify-content-center\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"fieldToDisplay in fields\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:class=\"selectedFields.indexOf(fieldToDisplay) != -1 ? 'btn-dark' : 'btn-outline-dark' \"\n\t\t\t\t\t@click=\"toggle(fieldToDisplay)\"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_ICONS = {\n\tjsonLines: 'fa-file-lines',\n\txlsx: 'fa-file-excel',\n\tpdf: 'fa-file-pdf',\n\thtml: 'fa-file-code',\n\tjson: 'fa-file',\n\tcsv: 'fa-file-csv'\n};\nconst DEFAULT_LABELS = {\n\tjsonLines: 'Download as JSONLINES',\n\txlsx: 'Download as XLSX',\n\tpdf: 'Download as PDF',\n\thtml: 'Download as HTML',\n\tjson: 'Download as JSON',\n\tcsv: 'Download as CSV '\n};\n\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\ttabulator: Object,\n\t\tconfig: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\ticonClass: [String, Array, Object]\n\t},\n\tcomputed: {\n\t\tcurrentConfig() {\n\t\t\tif (!this.config)\n\t\t\t\treturn false;\n\n\t\t\tlet config = this.config;\n\n\t\t\tif (config instanceof Function)\n\t\t\t\treturn [config];\n\n\t\t\tif (config === null)\n\t\t\t\treturn [];\n\n\t\t\tif (this.config === true)\n\t\t\t\tconfig = ['csv'];\n\n\t\t\tif (Object.prototype.toString.call(config) === \"[object String]\")\n\t\t\t\tconfig = config.split(',');\n\n\t\t\tif (typeof config === 'object' && !Array.isArray(config)) {\n\t\t\t\tlet newConfig = [];\n\t\t\t\tfor (var k in config) {\n\t\t\t\t\tvar v = config[k], type;\n\t\t\t\t\t\n\t\t\t\t\tif (!v)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\n\t\t\t\t\tif (Object.prototype.toString.call(v) === \"[object String]\") {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(v);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: v === k ? DEFAULT_LABELS[type] : k,\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\t\tif(type !== null) {\n\t\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert('neither ' + k + ' nor ' + v + ' are supported download file types');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof v === 'object' && !Array.isArray(v)) {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tif (v.formatter === undefined)\n\t\t\t\t\t\t\t\tv.formatter = type;\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = DEFAULT_LABELS[type];\n\t\t\t\t\t\t\tif (v.icon === undefined)\n\t\t\t\t\t\t\t\tv.icon = DEFAULT_ICONS[type];\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = k;\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[type],\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(k + ' is not a supported download file type');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig = newConfig;\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t{\n\t\t\t\tconfig = config.map(el => {\n\t\t\t\t\tif (Object.prototype.toString.call(el) === \"[object String]\") {\n\t\t\t\t\t\tlet formatter = this.stringToFileFormatter(el);\n\t\t\t\t\t\tif (formatter === null)\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[formatter],\n\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[formatter],\n\t\t\t\t\t\t\tformatter\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el instanceof Function)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformatter: el\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (typeof el === 'object' && !Array.isArray(el) && el !== null) {\n\t\t\t\t\t\tif (el.formatter instanceof Function)\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\tif (this.validateFileFormatter(el.formatter))\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(el => el !== null);\n\n\t\t\t\tif (config.length < 2)\n\t\t\t\t\treturn config;\n\n\t\t\t\tif (config.filter(el => el.label || el.icon).length == config.length)\n\t\t\t\t\treturn config;\n\n\t\t\t\talert('Config not valid');\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\tmethods: {\n\t\tstringToFileFormatter(input) {\n\t\t\tlet lcInput = input.toLowerCase();\n\t\t\t\n\t\t\tif (lcInput == 'jsonlines')\n\t\t\t\treturn 'jsonLines';\n\t\t\t\n\t\t\tif (['xlsx', 'pdf', 'html', 'json', 'csv'].includes(lcInput))\n\t\t\t\treturn lcInput;\n\n\t\t\treturn null;\n\t\t},\n\t\tvalidateFileFormatter(input) {\n\t\t\tlet formatter = this.stringToFileFormatter(input);\n\t\t\tif (!formatter) {\n\t\t\t\talert(input + ' is not a supported file formatter');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (formatter == 'xlsx') {\n\t\t\t\tif (!window.XLSX) {\n\t\t\t\t\talert('XLSX Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formatter == 'pdf') {\n\t\t\t\tif (!window.jspdf) {\n\t\t\t\t\talert('jsPDF Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar doc = new jspdf.jsPDF({});\n\t\t\t\tif (!doc.autoTable) {\n\t\t\t\t\talert('jsPDF-AutoTable Plugin not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tdownload(config) {\n\t\t\tthis.tabulator.download(config.formatter, config.file, config.options)\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"currentConfig\">\n\t\t<template v-if=\"currentConfig.length == 1\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\t@click.prevent=\"download(currentConfig[0])\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class=\"dropdown d-inline\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\trole=\"button\"\n\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-end\">\n\t\t\t\t<li v-for=\"(conf, i) in currentConfig\" :key=\"i\">\n\t\t\t\t\t<a class=\"dropdown-item\" href=\"#\" @click.prevent=\"download(conf)\">\n\t\t\t\t\t\t<span v-if=\"conf.icon\" :class=\"conf.icon\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t`\n};\n\n","const elementDataMap = new WeakMap();\n\nexport default {\n\tmounted(el, binding) {\n\t\tlet open = false;\n\t\telementDataMap.set(el, evt => {\n\t\t\tif (!open)\n\t\t\t\treturn;\n\n\t\t\tif (el.contains(evt.target))\n\t\t\t\treturn;\n\n\t\t\tconst collapse = bootstrap.Collapse.getInstance(el)\n\t\t\tif (collapse)\n\t\t\t\tcollapse.hide();\n\t\t});\n\t\tel.addEventListener('shown.bs.collapse', () => {\n\t\t\topen = true;\n\t\t});\n\t\tel.addEventListener('hide.bs.collapse', () => {\n\t\t\topen = false;\n\t\t});\n\t\tdocument.addEventListener('click', elementDataMap.get(el), true);\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tdocument.removeEventListener('click', elementDataMap.get(el));\n\t\tdelete el.collapsibleAutoHideFunc;\n\t}\n}","/**\n * This may need changes if Tabulator gets updated!\n *\n * Current working Version: 5.5.2\n * \n * This is a copy of the fitDataStretch function. The only difference\n * is the check for frozen columns on line 22.\n */\n\nexport default window.Tabulator?.extendModule(\"layout\", \"modes\", {\n\tfitDataStretchFrozen(columns, forced) {\n\t\tvar colsWidth = 0,\n\t\ttableWidth = this.table.rowManager.element.clientWidth,\n\t\tgap = 0,\n\t\tlastCol = false;\n\n\t\tcolumns.forEach((column, i) => {\n\t\t\tif (!column.widthFixed) {\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible && !column.definition.frozen) {\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol){\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tlastCol.setWidth(0);\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n});\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/saveCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t};\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/applyFilterFields',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t};\n\t},\n\taddFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/addFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tgetFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport FilterConfig from './Filter/Config.js';\nimport FilterColumns from './Filter/Columns.js';\nimport TableDownload from './Table/Download.js';\nimport collapseAutoClose from '../../directives/collapseAutoClose.js';\n\nimport moduleLayoutFitDataStretchFrozen from '../../tabulator/layouts/fitDataStretchFrozen.js';\n\nimport ApiFilter from '../../api/factory/filter.js';\n\n//\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\nconst FILTER_COMPONENT_NEW_FILTER_TYPE = 'Filter Component New Filter Type';\n\nvar _uuid = 0;\n\n/**\n *\n */\nexport const CoreFilterCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt,\n\t\tFilterConfig,\n\t\tFilterColumns,\n\t\tTableDownload\n\t},\n\tdirectives: {\n\t\tcollapseAutoClose\n\t},\n\temits: [\n\t\t'nwNewEntry',\n\t\t'click:new',\n\t\t'tableBuilt',\n\t\t'uuidDefined'\n\t],\n\tprops: {\n\t\tonNwNewEntry: Function, // NOTE(chris): Hack to get the nwNewEntry listener into $props\n\t\ttitle: String,\n\t\tdescription: String,\n\t\tsideMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tfilterType: {\n\t\t\ttype: String\n\t\t},\n\t\ttabulatorOptions: Object,\n\t\ttabulatorEvents: Array,\n\t\ttableOnly: Boolean,\n\t\tnoColumnFilter:Boolean,\n\t\treload: Boolean,\n\t\treloadBtnInfotext: String,\n\t\tdownload: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\tnewBtnShow: Boolean,\n\t\tnewBtnClass: [String, Array, Object],\n\t\tnewBtnDisabled: Boolean,\n\t\tnewBtnLabel: String,\n\t\tuniqueId: String,\n\n\t\tidField: String,\n\t\tparentIdField: String,\n\t\tcountOnly: Boolean,\n\t\tuseSelectionSpan: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tuuid: 0,\n\t\t\t// FilterCmpt properties\n\t\t\tfilterName: null,\n\t\t\tfilterActive: false,\n\t\t\tfields: null,\n\t\t\tdataset: null,\n\t\t\tdatasetMetadata: null,\n\t\t\tselectedFields: null,\n\t\t\tfilterFields: null,\n\n\t\t\tavailableFilters: null,\n\t\t\tselectedFilter: null,\n\n\t\t\t// FetchCmpt binded properties\n\t\t\tfetchCmptRefresh: false,\n\t\t\tfetchCmptApiFunction: null,\n\t\t\tfetchCmptApiFunctionParams: null,\n\t\t\tfetchCmptDataFetched: null,\n\n\t\t\tfetchResult: null,\n\n\t\t\ttabulator: null,\n\t\t\ttableBuilt: false,\n\t\t\ttabulatorHasSelector: false,\n\t\t\tselectedData: [],\n\t\t\tpersistence: {\n\t\t\t\tsort: true,\n\t\t\t\tcolumns: true,\n\t\t\t\tfilter: false,\n\t\t\t\theaderFilter: false,\n\t\t\t\tgroup: false,\n\t\t\t\tpage: false,\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotSelectedFields() {\n\t\t\tif (!this.fields || !this.selectedFields)\n\t\t\t\treturn null;\n\t\t\treturn this.fields.filter(x => this.selectedFields.indexOf(x) === -1)\n\t\t},\n\t\tfilteredData() {\n\t\t\tif (!this.dataset)\n\t\t\t\treturn [];\n\t\t\treturn JSON.parse(JSON.stringify(this.dataset));\n\t\t},\n\t\tfilteredColumns() {\n\t\t\tlet fields = JSON.parse(JSON.stringify(this.fields)) || [];\n\t\t\tlet selectedFields = JSON.parse(JSON.stringify(this.selectedFields)) || [];\n\n\t\t\tlet columns = null;\n\n\t\t\t// If the tabulator options has been provided and it contains the property columns\n\t\t\tif (this.tabulatorOptions && this.tabulatorOptions.hasOwnProperty('columns'))\n\t\t\t\tcolumns = this.tabulatorOptions.columns;\n\n\t\t\t// If columns is not an array or it is an array with less elements then the array fields\n\t\t\tif (!Array.isArray(columns) || (Array.isArray(columns) && columns.length < fields.length))\n\t\t\t{\n\t\t\t\tcolumns = []; // set it as an empty array\n\n\t\t\t\t// Loop throught all the retrieved columns from database\n\t\t\t\tfor (let field of fields)\n\t\t\t\t{\n\t\t\t\t\t// Create a new column having the title equal to the field name\n\t\t\t\t\tlet column = {\n\t\t\t\t\t\ttitle: field,\n\t\t\t\t\t\tfield: field\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\tcolumn.visible = selectedFields.indexOf(field) >= 0;\n\n\t\t\t\t\t// Add the new column to the list of columns\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // the property columns has been provided in the tabulator options\n\t\t\t{\n\t\t\t\t// Loop throught the property columns of the tabulator options\n\t\t\t\tfor (let col of columns)\n\t\t\t\t{\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\t/* fields.indexOf(col.field) == -1; ensures displaying formatter colums\n\t\t\t\t\te.g. column with rowSelection checkboxes or with custom formatted action buttons */\n\t\t\t\t\tcol.visible = selectedFields.indexOf(col.field) >= 0 || fields.indexOf(col.field) == -1;\n\n\t\t\t\t\tif (col.hasOwnProperty('resizable'))\n\t\t\t\t\t\tcol.resizable = col.visible;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns;\n\t\t},\n\t\tfieldIdsForVisibilty() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn [];\n\t\t\treturn this.tabulator.getColumns().filter(col => {\n\t\t\t\tlet def = col.getDefinition();\n\t\t\t\treturn !def.frozen && def.title && def.formatter != \"responsiveCollapse\";\n\t\t\t}).map(col => col.getField());\n\t\t},\n\t\tfieldNames() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn {};\n\t\t\treturn this.tabulator.getColumns().reduce((res, col) => {\n\t\t\t\tres[col.getField()] = col.getDefinition().title;\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t\t},\n\t\tidExtra() {\n\t\t\tif (!this.uuid)\n\t\t\t\treturn '';\n\t\t\treturn '-' + this.uuid;\n\t\t},\n\t\tcolumnsForFilter() {\n\t\t\tif (!this.filteredColumns || !this.datasetMetadata)\n\t\t\t\treturn [];\n\t\t\tconst filterTitles = this.filteredColumns.reduce((a,c) => {\n\t\t\t\ta[c.field] = c.title;\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t\treturn this.datasetMetadata.map(el => ({...el, ...{title: filterTitles[el.name]}}));\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable() {\n\t\t\tif (this.tableOnly)\n\t\t\t\tthis.tabulator.setData();\n\t\t\telse\n\t\t\t\tthis.getFilter();\n\t\t},\n\t\tasync initTabulator() {\n\t\t\tlet placeholder = '< Phrasen Plugin not loaded! >';\n\t\t\tif (this.$p) {\n\t\t\t\tawait this.$p.loadCategory('ui');\n\t\t\t\tplaceholder = this.$p.t('ui/keineDatenVorhanden');\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\t// prefetch data to get fields & selectedFields for filteredColumns & filteredData\n\t\t\t\tawait new Promise(resolve => {\n\t\t\t\t\tconst filterId = window.location.hash ? window.location.hash.slice(1) : null;\n\n\t\t\t\t\tconst resolvePromiseFunc = data => {\n\t\t\t\t\t\tthis.setRenderData(data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\t// get the filter data\n\t\t\t\t\tif (filterId === null)\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t\t\t{ filterId },\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Define a default tabulator options in case it was not provided\n\t\t\tlet tabulatorOptions = {...{\n\t\t\t\t\tlayout: \"fitDataStretchFrozen\",\n\t\t\t\t\tmovableColumns: true,\n\t\t\t\t\tcolumnDefaults:{\n\t\t\t\t\t\ttooltip: true\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tpersistence: this.persistence,\n\t\t\t\t}, ...(this.tabulatorOptions || {})};\n\n\t\t\t// set default height if no height property is set\n\t\t\tif (tabulatorOptions.height === undefined &&\n\t\t\t\ttabulatorOptions.minHeight === undefined &&\n\t\t\t\ttabulatorOptions.maxHeight === undefined) {\n\t\t\t\ttabulatorOptions.height = 500;\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\ttabulatorOptions.data = this.filteredData;\n\t\t\t\ttabulatorOptions.columns = this.filteredColumns;\n\t\t\t} else {\n\t\t\t\ttabulatorOptions.columns.forEach(col => {\n\t\t\t\t\tif (col.visible === undefined)\n\t\t\t\t\t\tcol.visible = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tabulatorOptions.selectable || (tabulatorOptions.columns && tabulatorOptions.columns.filter(el => el.formatter == 'rowSelection').length))\n\t\t\t\tthis.tabulatorHasSelector = true;\n\n\t\t\tif (this.idField) {\n\t\t\t\t// enable nested tabulator if parent Id given\n\t\t\t\tif (this.parentIdField) tabulatorOptions.dataTree = true;\n\t\t\t\t// set tabulator index\n\t\t\t\ttabulatorOptions.index = this.idField;\n\t\t\t}\n\n\t\t\t// Start the tabulator with the build options\n\t\t\tthis.tabulator = new Tabulator(\n\t\t\t\tthis.$refs.table,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n\t\t\t// If event handlers have been provided\n\t\t\tif (Array.isArray(this.tabulatorEvents) && this.tabulatorEvents.length > 0)\n\t\t\t{\n\t\t\t\t// Attach all the provided event handlers to the started tabulator\n\t\t\t\tfor (let evt of this.tabulatorEvents)\n\t\t\t\t\tthis.tabulator.on(evt.event, evt.handler);\n\t\t\t}\n\t\t\tthis.tabulator.on('tableBuilt', () => {this.tableBuilt = true; this.$emit('tableBuilt');});\n\t\t\tthis.tabulator.on(\"rowSelectionChanged\", data => {\n\t\t\t\tthis.selectedData = data;\n\t\t\t});\n\n\t\t\t// if nested tabulator, restructure data\n\t\t\tif (this.parentIdField && this.idField) {\n\t\t\t\tthis.tabulator.on(\"dataLoading\", data => {\n\t\t\t\t\tlet toDelete = [];\n\n\t\t\t\t\t// loop through all data\n\t\t\t\t\tfor (let childIdx = 0; childIdx < data.length; childIdx++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet child = data[childIdx];\n\n\t\t\t\t\t\t// if it has parent id, it is a child\n\t\t\t\t\t\tif (child[this.parentIdField])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// append the child on the right place. If parent found, mark original sw child on 0 level for deleting\n\t\t\t\t\t\t\tif (this.appendChild(data, child)) toDelete.push(childIdx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete the marked children from 0 level\n\t\t\t\t\tfor (let counter = 0; counter < toDelete.length; counter++)\n\t\t\t\t\t{\n\t\t\t\t\t\t// decrease index by counter as index of data array changes after every deletion\n\t\t\t\t\t\tdata.splice(toDelete[counter] - counter, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.tableOnly) {\n\t\t\t\tthis.tabulator.on('tableBuilt', () => {\n\t\t\t\t\tconst cols = this.tabulator.getColumns();\n\t\t\t\t\tthis.fields = cols.map(col => col.getField());\n\t\t\t\t\tthis.selectedFields = cols.filter(col => col.isVisible()).map(col => col.getField());\n\t\t\t\t\tif (this.tabulator.options.persistence.headerFilter)\n\t\t\t\t\t\tthis._setHeaderFilter();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.tabulator.on(\"dataFiltered\", filters => {\n\t\t\t\tthis.filterActive = filters.length > 0;\n\t\t\t});\n\t\t},\n\t\tupdateTabulator() {\n\t\t\tif (this.tabulator) {\n\t\t\t\tif (this.tableBuilt)\n\t\t\t\t\tthis._updateTabulator();\n\t\t\t\telse\n\t\t\t\t\tthis.tabulator.on('tableBuilt', this._updateTabulator);\n\t\t\t}\n\t\t},\n\t\t_updateTabulator() {\n\t\t\tthis.tabulatorHasSelector = this.tabulatorOptions.selectable || this.filteredColumns.filter(el => el.formatter == 'rowSelection').length;\n\t\t\tthis.tabulator.setColumns(this.filteredColumns);\n\t\t\tthis.tabulator.setData(this.filteredData);\n\t\t\tthis._setHeaderFilter()\n\t\t},\n\t\tclearFilters()\n\t\t{\n\t\t\tlet existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, \"\");\n\t\t\t});\n\t\t\tthis.tabulator.clearFilter();\n\t\t\tthis.filterActive = false;\n\t\t},\n\t\t_setHeaderFilter()\n\t\t{\n\t\t\tconst existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, filter.value);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetFilter() {\n\t\t\tif (this.selectedFilter === null)\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterId: this.selectedFilter\n\t\t\t\t\t},\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t},\n\t\tsetRenderData(data) {\n\t\t\tthis.fetchResult = data;\n\t\t\tthis.filterName = data.filterName;\n\t\t\tthis.dataset = data.dataset;\n\t\t\tthis.datasetMetadata = data.datasetMetadata;\n\n\t\t\tthis.fields = data.fields;\n\t\t\tthis.selectedFields = data.selectedFields;\n\t\t\tthis.filterFields = [];\n\n\t\t\tfor (let i = 0; i < data.datasetMetadata.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < data.filters.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (data.datasetMetadata[i].name == data.filters[j].name)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet filter = data.filters[j];\n\t\t\t\t\t\tfilter.type = data.datasetMetadata[i].type;\n\n\t\t\t\t\t\tthis.filterFields.push(filter);\n\t\t\t\t\t\t//break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\trender(response) {\n\t\t\tlet data = response;\n\n\t\t\tthis.setRenderData(data);\n\n\t\t\t// If the side menu is active\n\t\t\tif (this.sideMenu === true)\n\t\t\t{\n\t\t\t\tthis.setSideMenu(data);\n\t\t\t}\n\t\t\telse // otherwise use the dropdown in the filter options\n\t\t\t{\n\t\t\t\tthis.setDropDownMenu(data);\n\t\t\t}\n\t\t\tthis.updateTabulator();\n\t\t},\n\t\t/**\n\t\t * Set the menu\n\t\t */\n\t\tsetSideMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc,\n\t\t\t\t\tsubscriptDescription: personalFilters[filtersCount].subscriptDescription,\n\t\t\t\t\tsubscriptLinkClass: personalFilters[filtersCount].subscriptLinkClass,\n\t\t\t\t\tsubscriptLinkValue: personalFilters[filtersCount].subscriptLinkValue,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById,\n\t\t\t\t\tonClickSubscriptCall: this.handlerRemoveCustomFilter\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\n\t\t\tthis.$emit(\n\t\t\t\t'nwNewEntry',\n\t\t\t\t{\n\t\t\t\t\tlink: \"#\",\n\t\t\t\t\tdescription: \"Filters\",\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\tchildren: filtersArray\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Set the drop down menu\n\t\t */\n\t\tsetDropDownMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\toption: filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\toption: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\t\t},\n\t\t/**\n\t\t * Used to start/refresh the FetchCmpt\n\t\t */\n\t\tstartFetchCmpt(apiFunction, apiFunctionParameters, dataFetchedCallback) {\n\t\t\t// Assign the function api of the FetchCmpt binded property\n\t\t\tthis.fetchCmptApiFunction = apiFunction;\n\n\t\t\t// In case a null value is provided set the parameters as an empty object\n\t\t\tif (apiFunctionParameters == null) apiFunctionParameters = {};\n\n\t\t\t// Always needed parameters\n\t\t\tapiFunctionParameters.filterUniqueId = FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t\tapiFunctionParameters.filterType = this.filterType;\n\n\t\t\tif (this.uniqueId)\n\t\t\t\tapiFunctionParameters.filterUniqueId += '_' + this.uniqueId;\n\n\t\t\t// Assign parameters to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptApiFunctionParams = apiFunctionParameters;\n\t\t\t// Assign data fetch callback to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptDataFetched = dataFetchedCallback;\n\t\t\t// Set the FetchCmpt binded property refresh to have the component to refresh\n\t\t\t// NOTE: this should be the last one to be called because it triggers the FetchCmpt to start to refresh\n\t\t\tthis.fetchCmptRefresh === true ? this.fetchCmptRefresh = false : this.fetchCmptRefresh = true;\n\t\t},\n\n\t\t// ------------------------------------------------------------------------------------------------------------------\n\t\t// Event handlers\n\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerSaveCustomFilter(customFilterName) {\n\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.saveCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tcustomFilterName\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerRemoveCustomFilter(event) {\n\t\t\tlet filterId = event.currentTarget.getAttribute(\"href\").substring(1);\n\t\t\tif (filterId === this.selectedFilter)\n\t\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.removeCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterId: filterId\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t/*\n\t\t *\n\t\t */\n\t\thandlerGetFilterById: function(event) {\n\n\t\t\tlet filterId = null;\n\n\t\t\t// Get the attribute href if side menu is rendered\n\t\t\tlet attr = event.currentTarget.getAttribute(\"href\");\n\n\t\t\t// Otherwise get the value of the drop down menu\n\t\t\tif (attr == null)\n\t\t\t{\n\t\t\t\tfilterId = event.currentTarget.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfilterId = attr.substring(1);\n\t\t\t}\n\n\t\t\tthis.switchFilter(filterId);\n\t\t},\n\t\tswitchFilter(filterId) {\n\t\t\tthis.selectedFilter = filterId;\n\t\t\tthis.getFilter();\n\t\t},\n\t\tapplyFilterConfig(filterFields) {\n\t\t\tthis.selectedFilter = null;\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.applyFilterFields(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterFields\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t// append child to it's parent\n\t\tappendChild(data, child) {\n\t\t\t// get parent id\n\t\t\tlet parentId = child[this.parentIdField];\n\n\t\t\t// loop thorugh all data\n\t\t\tfor (let parentIdx = 0; parentIdx < data.length; parentIdx++)\n\t\t\t{\n\t\t\t\tlet parent = data[parentIdx];\n\n\t\t\t\t// if it's the parent\n\t\t\t\tif (parent[this.idField] == parentId)\n\t\t\t\t{\n\t\t\t\t\t// create children array if not done yet\n\t\t\t\t\tif (!parent._children) parent._children = [];\n\n\t\t\t\t\t// if child is not included in children array, append the child\n\t\t\t\t\tif (!parent._children.includes(child)) parent._children.push(child);\n\n\t\t\t\t\t// parent found\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// search children for parents\n\t\t\t\telse if (parent._children) this.appendChild(parent._children, child);\n\t\t\t}\n\n\t\t\t// parent not found\n\t\t\treturn false;\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tif (!this.tableOnly == !this.filterType)\n\t\t\talert('You can not have a filter-type in table-only mode!');\n\t},\n\tcreated() {\n\t\tif (this.sideMenu && (!this.$props.onNwNewEntry || !(this.$props.onNwNewEntry instanceof Function)))\n\t\t\talert('\"nwNewEntry\" listener is mandatory when sideMenu is true');\n\t\tthis.uuid = _uuid++;\n\t\tthis.$emit('uuidDefined', this.uuid)\n\t},\n\tmounted() {\n\t\tthis.initTabulator().then(() => {\n\t\t\tif (!this.tableOnly) {\n\t\t\t\tthis.selectedFilter = window.location.hash ? window.location.hash.slice(1) : null;\n\t\t\t\tthis.render(this.fetchResult);\n\t\t\t}\n\t\t});\n\n\t},\n\ttemplate: `\n\t\t<!-- Load filter data -->\n\t\t<core-fetch-cmpt\n\t\t\tv-if=\"!tableOnly && fetchCmptApiFunction\"\n\t\t\tv-bind:api-function=\"fetchCmptApiFunction\"\n\t\t\tv-bind:api-function-parameters=\"fetchCmptApiFunctionParams\"\n\t\t\tv-bind:refresh=\"fetchCmptRefresh\"\n\t\t\t@data-fetched=\"fetchCmptDataFetched\">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class=\"row\" v-if=\"title != null && title != ''\">\n\t\t\t<div class=\"col-lg-12\">\n\t\t\t\t<h3 class=\"page-header mt-1 mb-4\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"'filterCollapsables' + idExtra\">\n\n\t\t\t<div class=\"d-flex flex-row justify-content-between flex-wrap\">\n\t\t\t\t<div v-if=\"newBtnShow || reload || $slots.search || $slots.actions\" class=\"d-flex gap-2 align-items-baseline flex-wrap\">\n\t\t\t\t\t<button v-if=\"newBtnShow\" class=\"btn btn-primary\" :class=\"newBtnClass\" :title=\"newBtnLabel ? undefined : 'New'\" :aria-label=\"newBtnLabel ? undefined : 'New'\" @click=\"$emit('click:new', $event)\" :disabled=\"newBtnDisabled\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if=\"reload\" class=\"btn btn-outline-secondary\" aria-label=\"Reload\" @click=\"reloadTable\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-rotate-right\" aria-hidden=\"true\"  :title=\"reloadBtnInfotext ? reloadBtnInfotext : 'Reload'\" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if=\"$slots.actions && tabulatorHasSelector && useSelectionSpan\">\n\t\t\t\t\t\t<span v-if=\"countOnly\">{{ selectedData.length }} ausgewählt</span>\n\t\t\t\t\t\t<span v-else id=\"selected-info-text\"> Mit {{ selectedData.length }} ausgewählten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"actions\" v-bind=\"{selected: tabulatorHasSelector ? selectedData : []}\"></slot>\n\t\t\t\t\t<slot name=\"search\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end\">\n\t\t\t\t\t<span v-if=\"!tableOnly\">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if=\"description\" v-html=\"description\"></span>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"!tableOnly || $slots.filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseFilters' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"filterActive\"  class=\"btn btn-link px-0 fhc-text\" :title=\"$p.t('ui','filterdelete')\" @click=\"clearFilters\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter-circle-xmark\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseColumns' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-table-columns\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class=\"btn btn-link px-0 fhc-text\" :tabulator=\"tabulator\" :config=\"download\"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id=\"'collapseColumns' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:fields=\"fieldIdsForVisibilty\"\n\t\t\t\t:selected=\"selectedFields\"\n\t\t\t\t:names=\"fieldNames\"\n\t\t\t\t@hide=\"tabulator.hideColumn($event)\"\n\t\t\t\t@show=\"tabulator.showColumn($event)\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if=\"!tableOnly\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:filters=\"!sideMenu ? (availableFilters || []) : []\"\n\t\t\t\t:columns=\"columnsForFilter\"\n\t\t\t\t:fields=\"filterFields || []\"\n\t\t\t\t@switch-filter=\"switchFilter\"\n\t\t\t\t@apply-filter-config=\"applyFilterConfig\"\n\t\t\t\t@save-custom-filter=\"handlerSaveCustomFilter\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$slots.filter\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name=\"filter\"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tabulator -->\n\t\t<div ref=\"table\" :id=\"'filterTableDataset' + idExtra\" class=\"filter-table-dataset\"></div>\n\t`\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/header',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t},\n\tgetMenu(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/menu',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport ApiNavigation from '../../api/factory/navigation.js';\n\n/**\n *\n */\nexport const CoreNavigationCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt\n\t},\n\tprops: {\n\t\taddHeaderMenuEntries: Object, // property used to add new header menu entries from another app/component\n\t\taddSideMenuEntries: Object, // property used to add new side menu entries from another app/component\n\t\thideTopMenu: Boolean,\n\t\tleftNavCssClasses: {\n\t\t\ttype: String,\n\t\t\tdefault: 'navbar navbar-left-side'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\theaderMenu: {}, // header menu entries\n\t\t\tsideMenu: {} // side menu entries\n\t\t};\n\t},\n\tcomputed: {\n\t\t/**\n\t\t *\n\t\t */\n\t\theaderMenuEntries() {\n\t\t\t//\n\t\t\tlet hm = this.headerMenu ? {...this.headerMenu} : {};\n\t\t\tif (this.headerMenu != null && this.addHeaderMenuEntries != null && Object.keys(this.addHeaderMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\thm[this.addHeaderMenuEntries.description] = this.addHeaderMenuEntries;\n\t\t\t}\n\t\t\treturn hm;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsideMenuEntries() {\n\t\t\t//\n\t\t\tlet sm = this.sideMenu ? {...this.sideMenu} : {};\n\t\t\tif (this.sideMenu != null && this.addSideMenuEntries != null && Object.keys(this.addSideMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\tsm[this.addSideMenuEntries.description] = this.addSideMenuEntries;\n\t\t\t}\n\t\t\treturn sm;\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetNavigationPage() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionHeader() {\n\t\t\treturn this.$api.call(ApiNavigation.getHeader(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionSideMenu() {\n\t\t\treturn this.$api.call(ApiNavigation.getMenu(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedHeader(data) {\n\t\t\tthis.headerMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedMenu(data) {\n\t\t\tthis.sideMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetDataBsToggle(header) {\n\t\t\treturn !header.children ? null : 'dropdown';\n\t\t}\n\t},\n\ttemplate: `\n\t\t<!-- Load head menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionHeader\" @data-fetched=\"fetchCmptDataFetchedHeader\"></core-fetch-cmpt>\n\t\t<!-- Load side menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionSideMenu\" @data-fetched=\"fetchCmptDataFetchedMenu\"></core-fetch-cmpt>\n\n\t\t<!-- Top menu -->\n\t\t<nav class=\"navbar navbar-expand-lg navbar-header\" v-if=\"!hideTopMenu\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"header in headerMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item dropdown\">\n\t\t\t\t\t\t<a class=\"nav-link header-menu-link-entry\"\n\t\t\t\t\t\t\tv-bind:data-bs-toggle=\"this.getDataBsToggle(header)\"\n\t\t\t\t\t\t\tv-bind:class=\"{ 'dropdown-toggle': header.children }\"\n\t\t\t\t\t\t\tv-bind:href=\"header.link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-fw header-menu-icon\" v-bind:class=\"'fa-' + header.icon\" v-if=\"header.icon\"></i> {{ header.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" v-if=\"header.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in header.children\">\n\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item\" v-bind:href=\"child.link\">{{ child.description }}</a></li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t\t<slot></slot>\n\t\t</nav>\n\n\t\t<!-- Left side menu -->\n\t\t<nav :class=\"leftNavCssClasses\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"menu in sideMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item\">\n\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"menu.link\" @click=menu.onClickCall>\n\t\t\t\t\t\t\t<i class=\"fa fa-fw\" v-bind:class=\"'fa-'+ menu.icon\"></i> {{ menu.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"nav-link left-side-menu-second-level\" v-if=\"menu.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in menu.children\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"child.link\" @click=child.onClickCall>\n\t\t\t\t\t\t\t\t\t\t&emsp;&emsp;{{ child.description }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"nav-link left-side-menu-link-entry\"\n\t\t\t\t\t\t\t\t\t\tv-bind:class=\"child.subscriptLinkClass\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"child.subscriptDescription\"\n\t\t\t\t\t\t\t\t\t\tv-bind:href=\"child.link\"\n\t\t\t\t\t\t\t\t\t\t@click=child.onClickSubscriptCall\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ child.subscriptDescription }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t</nav>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tprops: {\n\t\ttitle: '',\n\t\tsubtitle: '',\n\t\tmainCols: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tasideCols: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t},\n\tcomputed: {\n\t\tmainGridCols() {\n\t\t\treturn this.mainCols.length > 0 ? `col-md-${this.mainCols[0]}` : \"col-md-12\";\n\t\t},\n\t\tasideGridCols() {\n\t\t\treturn this.asideCols.length > 0 ? `col-md-${this.asideCols[0]}` : \"\";\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"overflow-hidden\">\n\t\t<header v-if=\"title\">\n\t\t\t<h1 class=\"h2 mb-5\">{{ title }}<span class=\"fhc-subtitle\">{{ subtitle }}</span></h1>\n\t\t</header>\n\t\t<div class=\"row gx-5\">\n\t\t\t<main :class=\"mainGridCols\">\n\t\t\t\t<slot name=\"main\">{{ mainGridCols }}</slot>\n\t\t\t</main>\n\t\t\t<aside v-if=\"asideCols.length > 0\" :class=\"asideGridCols\">\n\t\t\t\t<slot name=\"aside\">{{ asideGridCols }}</slot>\n\t\t\t</aside>\n\t\t</div>\n\t</div>\n\t`\n};","export const lektorFormatters = {\n\tcenteredFormatter: function(cell) {\n\t\tconst val = cell.getValue()\n\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+val+'</div>'\n\t},\n\tformDateOnly: function (cell) {\n\t\tvar value = cell.getValue();\n\n\t\tif (value) {\n\t\t\tvar date = new Date(value);\n\n\t\t\tvar formattedDate = date.getDate().toString().padStart(2, '0') + '.' +\n\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '.' +\n\t\t\t\tdate.getFullYear()\n\n\t\t\treturn formattedDate;\n\t\t}\n\n\t\treturn value\n\t},\n\tfotoFormatter: function (cell) {\n\t\tlet value = cell.getValue();\n\t\tif(value === undefined) return\n\n\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><img src=\"'+value+'\" style=\"max-height: 64px\"></img></div>'\n\t},\n\tdateOnlyTimeFormatter: function (cell) {\n\t\tconst value = cell.getValue();\n\n\t\tif(value === undefined) return ''\n\n\t\tconst date = new Date(value);\n\t\tlet hours = date.getHours();\n\t\tlet minutes = date.getMinutes();\n\n\t\thours = (hours < 10) ? '0' + hours : hours;\n\t\tminutes = (minutes < 10) ? '0' + minutes : minutes;\n\t\treturn hours + ':' + minutes\n\t}\n}\n\nexport const studentFormatters = {\n\tformFile: function(cell) {\n\t\tvar value = cell.getValue();\n\n\t\tif(value) {\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%; cursor: pointer;\">' +\n\t\t\t\t'<a><i class=\"fa fa-file-pdf\" style=\"color:#00649C\"></i></a></div>'\n\t\t} else return '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t'<a>-</a></div>'\n\n\t},\n\tformDate: function(cell)\n\t{\n\t\tvar value = cell.getValue();\n\n\t\tif (value)\n\t\t{\n\t\t\tvar date = new Date(value);\n\n\t\t\tvar formattedDate = date.getDate().toString().padStart(2, '0') + '.' +\n\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '.' +\n\t\t\t\tdate.getFullYear() + ' ' +\n\t\t\t\tdate.getHours().toString().padStart(2, '0') + ':' +\n\t\t\t\tdate.getMinutes().toString().padStart(2, '0');\n\n\t\t\treturn formattedDate;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\tformStudiengangKz: function (cell) {\n\t\tconst rowData = cell.getRow().getData()\n\t\treturn rowData.kurzbzlang + ' ' + rowData.bezeichnung\n\t},\n\n\tcustomGroupHeader: function(value, count, data)\n\t{\n\t\treturn '<div style=\"display:flex; justify-content: space-between;\">' +\n\t\t\t'<div>' + value + '</div>' +\n\t\t\t'<div style=\"flex-grow: 1; text-align: right;\">Anwesenheit ' + data[0].anwesenheit + \" %\" + '</div>' +\n\t\t\t'</div>';\n\t},\n\n\n}","//import Phrasen from '../../plugin/Phrasen.js';\n\nexport default {\n\tname: 'BootstrapModal',\n\tdata: () => ({\n\t\tmodal: null,\n\t\tfullscreen: false\n\t}),\n\tprops: {\n\t\tbackdrop: {\n\t\t\ttype: [Boolean,String],\n\t\t\tdefault: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn ['static', true, false].includes(value);\n\t\t\t}\n\t\t},\n\t\tfocus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tkeyboard: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tnoCloseBtn: Boolean,\n\t\tdialogClass: [String,Array,Object],\n\t\theaderClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tbodyClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: 'px-4 py-5'\n\t\t},\n\t\tfooterClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tallowFullscreenExpand: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\temits: [\n\t\t\"hideBsModal\",\n\t\t\"hiddenBsModal\",\n\t\t\"hidePreventedBsModal\",\n\t\t\"showBsModal\",\n\t\t\"shownBsModal\"\n\t],\n\tmethods: {\n\t\tdispose() {\n\t\t\treturn this.modal.dispose();\n\t\t},\n\t\thandleUpdate() {\n\t\t\treturn this.modal.handleUpdate();\n\t\t},\n\t\thide() {\n\t\t\treturn this.modal.hide();\n\t\t},\n\t\tshow(relatedTarget) {\n\t\t\treturn this.modal.show(relatedTarget);\n\t\t},\n\t\ttoggle() {\n\t\t\treturn this.modal.toggle();\n\t\t},\n\t\ttoggleFullscreen() {\n\t\t\tthis.fullscreen = !this.fullscreen\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.$refs.modal)\n\t\t\tthis.modal = new bootstrap.Modal(this.$refs.modal, {\n\t\t\t\tbackdrop: this.backdrop,\n\t\t\t\tfocus: this.focus,\n\t\t\t\tkeyboard: this.keyboard\n\t\t\t});\n\t},\n\tpopup(body, options, title, footer) {\n\t\tconst BsModal = this,\n\t\t\tslots = {};\n\t\tif (body !== undefined)\n\t\t\tslots.default = () => body;\n\t\tif (title !== undefined)\n\t\t\tslots.title = () => title;\n\t\tif (footer !== undefined)\n\t\t\tslots.footer = () => footer;\n\n\t\t// little hack to check whether primevue is included in the app or not\n\t\tlet includedPrimevue = false;\n\t\tif(typeof primevue !== 'undefined'){\n\t\t\tincludedPrimevue = true;\n\t\t}\n\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tconst instance = Vue.createApp({\n\t\t\t\tname: 'ModalTmpApp',\n\t\t\t\tsetup() {\n\t\t\t\t\treturn () => Vue.h(BsModal, {...{\n\t\t\t\t\t\tclass: 'fade'\n\t\t\t\t\t},...options, ...{\n\t\t\t\t\t\tref: 'modal',\n\t\t\t\t\t\t'onHidden.bs.modal': instance.unmount\n\t\t\t\t\t}}, slots);\n\t\t\t\t},\n\t\t\t\tmounted() {\n\t\t\t\t\tthis.$refs.modal.show();\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tbeforeUnmount() {\n\t\t\t\t\tif (this.$refs.modal)\n\t\t\t\t\t\tthis.$refs.modal.result !== false ? resolve(this.$refs.modal.result) : reject();\n\t\t\t\t},\n\t\t\t\tunmounted() {\n\t\t\t\t\twrapper.parentElement.removeChild(wrapper);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst wrapper = document.createElement(\"div\");\n\t\t\t\n\t\t\t// if(primevue) --> won't work because primevue is not defined in this scope and promise would be rejected\n\t\t\tif (includedPrimevue){\n\t\t\t\tinstance.use(primevue.config.default, {zIndex: {overlay: 9999}})\n\t\t\t}\n\t\t\t\t \n\t\t\t//instance.use(Phrasen); // TODO(chris): find a more dynamic way\n\t\t\timport('../../plugins/Phrasen.js').then((Phrasen) => {\n\t\t\t\tinstance.use(Phrasen.default);\n\t\t\t\tinstance.mount(wrapper);\n\t\t\t\tdocument.body.appendChild(wrapper);\n\t\t\t});\n\t\t});\n\t},\n\ttemplate: `<div ref=\"modal\" class=\"bootstrap-modal modal\" tabindex=\"-1\" @[\\`hide.bs.modal\\`]=\"$emit('hideBsModal')\" @[\\`hidden.bs.modal\\`]=\"$emit('hiddenBsModal')\" @[\\`hidePrevented.bs.modal\\`]=\"$emit('hidePreventedBsModal')\" @[\\`show.bs.modal\\`]=\"$emit('showBsModal')\" @[\\`shown.bs.modal\\`]=\"$emit('shownBsModal')\">\n\t\t<div class=\"modal-dialog\" :class=\"fullscreen ? 'modal-fullscreen' : dialogClass\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div v-if=\"$slots.title\" class=\"modal-header\" :class=\"headerClass\">\n\t\t\t\t\t<h5 class=\"modal-title\"><slot name=\"title\"/></h5>\n\t\t\t\t\t<div class=\"d-flex align-items-center ms-auto\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn ms-auto\" style=\"filter: invert(1)\" v-if=\"allowFullscreenExpand\" @click=\"toggleFullscreen\">\n\t\t\t\t\t\t  <i v-if=\"!fullscreen\" class=\"fa-solid fa-expand\"></i>\n\t\t\t\t\t\t  <i v-else class=\"fa-solid fa-compress\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-if=\"!noCloseBtn\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name=\"modal-header-content\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal-body\" :class=\"bodyClass\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"$slots.footer\" class=\"modal-footer\" :class=\"footerClass\">\n\t\t\t\t\t<slot name=\"footer\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n}\n","export const LehreinheitenDropdown = {\n\tname: \"LehreinheitenDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'leChanged'\n\t],\n\tprops: {\n\t\ttitle: ''\n\t},\n\tmethods: {\n\t\tleChanged(e) {\n\t\t\tthis.$entryParams.selected_le_id.value = e.value.lehreinheit_id\n\t\t\tthis.$entryParams.selected_le_info.value = e.value\n\n\t\t\tthis.$emit('leChanged')\n\t\t},\n\t\tgetSelected(option) {\n\t\t\treturn option?.infoString === this.$entryParams.selected_le_info.value?.infoString\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.infoString\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<Dropdown @change=\"leChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"this.$entryParams.selected_le_info.value\" :options=\"$entryParams.available_le_info.value\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.infoString }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const MaUIDDropdown = {\n\tname: \"MaUIDDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'maUIDChanged'\n\t],\n\tprops: {\n\t\ttitle: ''\n\t},\n\tmethods: {\n\t\tmaUIDChanged(e) {\n\n\t\t\t// reload LEs\n\t\t\tthis.$entryParams.selected_maUID.value = e.value\n\t\t\tthis.$entryParams.handleLeSetup(\n\t\t\t\tthis.$entryParams.lv_id,\n\t\t\t\tthis.$entryParams.selected_maUID.value.mitarbeiter_uid,\n\t\t\t\tthis.$entryParams.sem_kurzbz,\n\t\t\t\t[]\n\t\t\t).then(() => {\n\t\t\t\tthis.$emit('maUIDchanged')\n\t\t\t})\n\t\t},\n\t\tgetSelected(option) {\n\t\t\treturn option.mitarbeiter_uid === this.$entryParams.selected_maUID.value?.mitarbeiter_uid\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.infoString\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<Dropdown @change=\"maUIDChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\t\tv-model=\"this.$entryParams.selected_maUID.value\" :options=\"$entryParams.available_maUID.value\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.infoString }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const KontrollenDropdown = {\n\tname: \"KontrollenDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'kontrolleChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\terrors: null,\n\t\t\tinternal_available_kontrolle: [],\n\t\t\tinternal_selected_kontrolle: null\n\t\t};\n\t},\n\tmethods: {\n\t\tsetKontrollen(data){\n\t\t\tthis.internal_available_kontrolle = data\n\t\t\tthis.internal_selected_kontrolle = data[0]\n\n\t\t\tthis.$emit('kontrolleChanged', this.internal_selected_kontrolle)\n\t\t},\n\t\tkontrolleChanged(e) {\n\t\t\tthis.internal_selected_kontrolle = e.value\n\t\t\tthis.$emit('kontrolleChanged', this.internal_selected_kontrolle)\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.datum + ': ' + option.von + ' - ' + option.bis\n\t\t},\n\t\tcheckDisabled(option) {\n\t\t\t// disable dates older than threshhold if only lektor berechtigung, admin/assistenz can delete all\n\t\t\t\n\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst date = new Date();\n\t\t\tdate.setDate(date.getDate() - this.$entryParams.permissions.kontrolleDeleteMaxReach)\n\t\t\tconst optDate = new Date(option.datum)\n\t\t\treturn optDate < date\n\t\t}\n\t},\n\tmounted() {\n\t},\n\ttemplate: `\n\t\t<div class=\"mt-2\">\n\t\t\t<Dropdown @change=\"kontrolleChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"internal_selected_kontrolle\" :options=\"internal_available_kontrolle\" :optionDisabled=\"checkDisabled\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{kontrolle.datum}}: {{kontrolle.von}} - {{kontrolle.bis}} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const TermineDropdown = {\n\tname: \"TermineDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'terminChanged'\n\t],\n\tmethods: {\n\t\tterminChanged(e) {\n\t\t\tthis.$entryParams.selected_termin.value = e.value\n\t\t\tthis.$emit('terminChanged')\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.datumFrontend + ': ' + option.beginn + ' - ' + option.ende\n\t\t}\n\t},\n\tmounted() {\n\t},\n\ttemplate: `\n\t\t<div class=\"mt-2\">\n\t\t\t<Dropdown @change=\"terminChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"this.$entryParams.selected_termin.value\" :options=\"$entryParams.available_termine.value\" :placeholder=\"$p.t('global/termineAusStundenplanV2')\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{option.datumFrontend}}: {{option.beginn}} - {{option.ende}} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","\nexport const AnwCountDisplay = {\n\tname: 'AnwCountDisplay',\n\tdata: function() {\n\t\treturn {\n\t\t\tanwHovered: false,\n\t\t\tabwHovered: false,\n\t\t\tentHovered: false\n\t\t}\n\t},\n\tprops: {\n\t\tanwesend: '/',\n\t\tabwesend: '/',\n\t\tentschuldigt: '/'\n\t},\n\ttemplate:`\t\n\t\t<div class=\"text-center\">\n\t\t\t<div style=\"display: flex; justify-content: center; align-items: center;\">\n\t\t\t\t<div @mouseover=\"anwHovered = true\" @mouseleave=\"anwHovered = false\" style=\"position: relative; display: inline-block; color: #28a745;\">\n\t\t\t\t\t<h3>{{anwesend}} <i class=\"fa fa-check\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"anwHovered\"> {{$capitalize($p.t('global/anwesend'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div @mouseover=\"abwHovered = true\" @mouseleave=\"abwHovered = false\" style=\"position: relative; display: inline-block; color: #dc3545; margin-left: 36px;\">\n\t\t\t\t\t<h3>{{abwesend}} <i class=\"fa fa-xmark\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"abwHovered\"> {{$capitalize($p.t('global/abwesend'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div @mouseover=\"entHovered = true\" @mouseleave=\"entHovered = false\" \n\t\t\t\tv-if=\"this.$entryParams.permissions.entschuldigungen_enabled\" \n\t\t\t\tstyle=\"position: relative; display: inline-block; color: #0335f5; margin-left: 36px;\">\n\t\t\t\t\t<h3>{{entschuldigt}} <i class=\"fa-solid fa-user-shield\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"entHovered\"> {{$capitalize($p.t('global/entschuldigt'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t\n\t`\n};","\nexport const KontrolleDisplay = {\n\tname: 'KontrolleDisplay',\n\tdata: function() {\n\t\treturn {\n\t\t\thovered: false,\n\t\t}\n\t},\n\tprops: {\n\t\tkontrolle: null,\n\t},\n\ttemplate:`\n\t\t<div v-if=\"kontrolle\" class=\"row\">\n\t\t\t<div class=\"col-1 ml-4 d-flex align-items-center\">\n\t\t\t\t<div style=\"position: relative; display: inline-block;\">\n\t\t\t\t\t<h6 @mouseover=\"hovered = true\" @mouseleave=\"hovered = false\">\n\t\t\t\t\t\t<i class=\"fa-solid fa-circle-info\"></i> \n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"hovered\" style=\"min-width: 400px; z-index: 8500;\">\n\t\t\t\t\t\t\t<div class=\"row\"><p>Anwesenheit_id: {{kontrolle.anwesenheit_id}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>Lehreinheit_id: {{kontrolle.lehreinheit_id}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>insertvon: {{kontrolle.insertvon}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>insertamum: {{kontrolle.insertamum}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>updatevon: {{kontrolle.updatevon}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>updateamum: {{kontrolle.updateamum}}</p></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"col-11\"><h4>{{kontrolle.datum}}: {{kontrolle.von}} - {{kontrolle.bis}}</h4></div>\n\t\t\t\n\t\t</div>\n\t\t\n\t\n\t`\n};","\nexport const Statuslegende = {\n\tname: 'Statuslegende',\n\ttemplate:`\t\n\t\t<div class=\"text-center\">\n\t\t\t<div class=\"col\">\n\t\t\t\t<div class=\"row\" style=\"color: #28a745;\"><h3>{{$capitalize($p.t('global/anwesend'))}} = <i class=\"fa fa-check\"></i></h3></div>\n\n\t\t\t\t<div class=\"row\" style=\"color: #dc3545;\"><h3>{{$capitalize($p.t('global/abwesend'))}} = <i class=\"fa fa-xmark\"></i></h3></div>\n\n\t\t\t\t<div v-if=\"this.$entryParams.permissions.entschuldigungen_enabled\" class=\"row\" style=\"color: #0335f5;\"><h3>{{$capitalize($p.t('global/entschuldigt'))}} = <i class=\"fa-solid fa-user-shield\"></i></h3></div>\n\n\t\t\t\t<div class=\"row\"><h3>{{$capitalize($p.t('global/studentenInLVTeil'))}} = 👥</h3></div>\n\t\t\t\t<div class=\"row\"><h3>{{$capitalize($p.t('global/termineAusStundenplanV2'))}} = 📅</h3></div>\n\t\t\t\t<div class=\"row\" style=\"color: #0335f5\"><h3>Name -> {{$capitalize($p.t('global/entschuldigtLegendeBlau'))}}</h3></div>\n\t\t\t\t<div class=\"row\" style=\"color: #12d5d5\"><h3>Name -> {{$capitalize($p.t('global/entschuldigtLegendeTuerkis'))}}</h3></div>\n\n\t\t\t</div>\n\t\t</div>\t\n\t`\n};\n\nexport default Statuslegende;","export default {\n\tfetchAllAnwesenheitenByLvaAssigned(lv_id, sem_kurzbz, le_id, ma_uid, date) {\n\t\t\n\t\tconst params = { lv_id, sem_kurzbz, le_id, ma_uid, date} \n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/fetchAllAnwesenheitenByLvaAssigned';\n\t\t\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAllAnwesenheitenByStudentByLva(prestudent_id, lv_id, sem_kurzbz) {\n\t\t\n\t\tconst params = { prestudent_id, lv_id, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getAllAnwesenheitenByStudentByLva`;//`?prestudent_id=${prestudent_id}&lv_id=${lv_id}&sem_kurzbz=${sem_kurzbz}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tupdateAnwesenheiten(le_id, changedAnwesenheiten) {\n\n\t\tconst params = {le_id, changedAnwesenheiten}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/updateAnwesenheiten';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetExistingQRCode(le_id) {\n\n\t\tconst params = {le_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getExistingQRCode';\n\t\t\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tregenerateQRCode(anwesenheit_id) {\n\n\t\tconst params = {anwesenheit_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/regenerateQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdegenerateQRCode(anwesenheit_id, zugangscode) {\n\n\t\tconst params = {anwesenheit_id, zugangscode}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/degenerateQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetNewQRCode(le_id, datum, beginn, ende) {\n\n\t\tconst params = {le_id, datum, beginn, ende}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getNewQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdeleteQRCode(anwesenheit_id, lv_id) {\n\n\t\tconst params = {anwesenheit_id, lv_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/deleteQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdeleteAnwesenheitskontrolle(le_id, date, anwesenheit_id) {\n\n\t\tconst params = {le_id, date, anwesenheit_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/deleteAnwesenheitskontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tpollAnwesenheiten(anwesenheit_id, lv_id) {\n\n\t\tconst params = {anwesenheit_id, lv_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/pollAnwesenheiten';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwQuoteForPrestudentIds(ids, lv_id, sem_kurzbz) {\n\n\t\tconst params = {ids, lv_id, sem_kurzbz}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getAnwQuoteForPrestudentIds';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\trestartKontrolle(anwesenheit_id, le_id, datum) {\n\n\t\tconst params = {anwesenheit_id, le_id, datum}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/restartKontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tupdateKontrolle(anwesenheit_id, von, bis, le_id) {\n\n\t\tconst params = {anwesenheit_id, von, bis, le_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/updateKontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetLehreinheitenForLehrveranstaltungAndMaUid(lva_id, ma_uid, sem_kurzbz) {\n\n\t\tconst params = { lva_id, ma_uid, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getLehreinheitenForLehrveranstaltungAndMaUid`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tinsertAnwWithoutQR(le_id, datum, beginn, ende) {\n\n\t\tconst params = {le_id, datum, beginn, ende}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/insertAnwWithoutQR';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t}\n\t\n}","export default {\n\tgetAllAnwQuotasForLvaByUID(studiensemester, uid) {\n\n\t\tconst params = { studiensemester, uid }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwQuotasForLvaByUID`//?studiensemester=${studiensemester}&uid=${uid}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAllAnwByUID(studiensemester, uid, person_id) {\n\n\t\tconst params = { studiensemester, uid, person_id}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwByUID`//?studiensemester=${studiensemester}&uid=${uid}&person_id=${person_id}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetProfileViewData(uid) {\n\n\t\tconst params = {uid}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getProfileViewData';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tcheckInAnwesenheit(zugangscode) {\n\n\t\tconst params = {zugangscode}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/checkInAnwesenheit';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\taddEntschuldigung(formData) {\n\n\t\tconst params = formData;\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/addEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\teditEntschuldigung(formData) {\n\t\tconst params = formData\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/editEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\tdeleteEntschuldigung(entschuldigung_id, person_id) {\n\n\t\tconst params = {entschuldigung_id, person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/deleteEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\tgetEntschuldigungenByPersonID(person_id) {\n\n\t\tconst params = {person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getEntschuldigungenByPersonID';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwesenheitSumByLva(lv_id, sem_kz, prestudent_id) {\n\n\t\tconst params = {lv_id, sem_kz, id: prestudent_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAnwesenheitSumByLva';\n\t\t// return this.$fhcApi.post(url, payload, null)\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwesenheitenByLva(sem_kurzbz, lv_id, prestudent_id, uid) {\n\n\t\tconst params = {sem_kurzbz, lv_id, prestudent_id, uid}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwesenheitenByStudentByLva`;\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t}\n}","export default {\n\tgetAktuellesSemester() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getAktuellesSemester';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetViewDataStudent() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getViewDataStudent';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetEntschuldigungFile(dms_id) {\n\t\t\n\t\tconst params = { dms_id }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetStunden() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStunden';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetStudiensemester() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudiensemester';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetStudentInfo(prestudent_id, lva_id, sem_kurzbz) {\n\t\t\n\t\tconst params = { prestudent_id, lva_id, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudentInfo`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetStudiengaenge(allowed_stg = [], admin) {\n\t\t\n\t\tconst params = {allowed_stg, admin}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudiengaenge`;\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tgetLektorsForLvaInSemester(lva_id, sem) {\n\n\t\tconst params = { lva_id, sem }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getLektorsForLvaInSemester`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t},\n\tgetStudentsForLvaInSemester(lva_id, sem) {\n\t\t\n\t\tconst params = { lva_id, sem }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudentsForLvaInSemester`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t},\n\tgetLvViewDataInfo(lv_id) {\n\n\t\tconst params = { lv_id }\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getLvViewDataInfo'\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t}\n};","import {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {lektorFormatters} from \"../../formatters/formatters.js\";\n\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\nimport ApiProfil from '../../api/factory/profil.js';\nimport ApiInfo from '../../api/factory/info.js';\n\nexport const StudentByLvaComponent = {\n\tname: 'StudentByLvaComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreNavigationCmpt,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tappSideMenuEntries: {},\n\t\t\theaderMenuEntries: {},\n\t\t\ttableBuiltPromise: null,\n\t\t\tcellEditing: null,\n\t\t\tanwesenheitenByStudentByLvaTabulatorOptions: {\n\t\t\t\theight: this.$entryParams?.tabHeights?.studentByLva ?? 400,\n\t\t\t\tindex: 'datum',\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tselectableCheck: this.selectableCheck,\n\t\t\t\trowFormatter: this.unselectableFormatter,\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tselectable: true,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tformatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatterParams: {\n\t\t\t\t\t\t\trowRange: \"active\" // Only toggle the values of the active filtered rows\n\t\t\t\t\t\t},\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\tfrozen: true,\n\t\t\t\t\t\twidth: 70\n\t\t\t\t\t},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/datum')), field: 'datum', headerFilter: true, formatter: lektorFormatters.formDateOnly, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/status')), field: 'status', formatter: this.anwesenheitFormatterValue,  widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anteilAnw')), field: 'anteil', bottomCalcFormatter: this.sumBottomCalcFormatter, bottomCalc: this.anwCalc, formatter: this.percentFormatter},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: lektorFormatters.dateOnlyTimeFormatter, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: lektorFormatters.dateOnlyTimeFormatter, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/lehreinheit_id')), field: 'lehreinheit_id', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/kontrolle') + ' ' + this.$p.t('global/insertvon')), field: 'kinsertvon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/kontrolle') + ' ' + this.$p.t('global/updatevon')), field: 'kupdatevon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwUserEntry') + ' ' + this.$p.t('global/insertvon')), field: 'ainsertvon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwUserEntry') + ' ' + this.$p.t('global/updatevon')), field: 'aupdatevon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/einheiten')), field: 'dauer', visible: false, bottomCalc: this.einheitenCalc, formatter: this.einheitenFormatter, widthGrow: 1, minWidth: 250},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/notiz')), field: 'notiz', editor: \"input\", tooltip:false, minWidth: 150}\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-lektorDetailViewStudentByLva\"\n\t\t\t},\n\t\t\tanwesenheitenByStudentByLvaTabulatorEventHandlers: [\n\t\t\t{\n\t\t\t\tevent: \"rowSelected\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.selected++\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"rowDeselected\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.selected--\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEditing\",\n\t\t\t\thandler: (cell) => {\n\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\tthis.cellEditing = {...data}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEdited\",\n\t\t\t\thandler: (cell) => {\n\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\t\n\t\t\t\t\tif(this.cellEditing?.notiz === null && data?.notiz === '') {\n\t\t\t\t\t\t// do nothing when just clicking edit input and not typing\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, [data]))\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif(res.meta.status === \"success\") {\n\t\t\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwNotizUpdated'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cellEditing = null\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}\n\t\t\t],\n\t\t\tfilterTitle: \"\",\n\t\t\tfilterSubtitle: \"\",\n\t\t\tchangedData: [],\n\t\t\ttableData: null,\n\t\t\tinitialTableData: null,\n\t\t\tvorname: null,\n\t\t\tnachname: null,\n\t\t\tsemester: null,\n\t\t\tverband: null,\n\t\t\tgruppe: null,\n\t\t\tsum: '',\n\t\t\tfoto: null,\n\t\t\tselected: 0\n\t\t}\n\t},\n\temits: [\n\t\t'titleSet',\n\t\t'anwesenheitenUpdated'\n\t],\n\tprops: {\n\t\tpermissions: [],\n\t\tid: null,\n\t\tlv_id: null,\n\t\tsem_kz: null,\n\n\t},\n\tmethods: {\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ??  data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+ val + ' %</div>'\n\t\t},\n\t\tanwCalc(){\n\t\t\treturn this.sum + ' %'\n\t\t},\n\t\tsumBottomCalcFormatter(cell) {\n\t\t\tconst val = Number.parseFloat(cell.getValue())\n\t\t\tif(Number.isNaN(val)) return cell.getValue()\n\t\t\tif (val < (this.$entryParams.permissions.positiveRatingThreshold * 100)) {\n\t\t\t\tconst el = cell.getElement()\n\t\t\t\tel.style.setProperty('color', 'red')\n\t\t\t}\n\n\t\t\treturn cell.getValue()\n\t\t},\n\t\teinheitenCalc(values) {\n\n\t\t\treturn this.formatMinutes(values.reduce((acc, cur) => cur+=acc,0))\n\t\t},\n\t\tselectableCheck(row) {\n\t\t\treturn row.getData().status !== this.$entryParams?.permissions?.entschuldigt_status\n\t\t},\n\t\tformatMinutes(minutes) {\n\t\t\tlet valInEh = (minutes / 60 / this.$entryParams.permissions.einheitDauer)\n\t\t\tconst rest = valInEh % 1\n\t\t\tif(rest > 0) valInEh = valInEh.toFixed(2).replace('.', ',')\n\n\t\t\treturn minutes+' '+this.$p.t('global/minuten')+' / '+valInEh+' '+this.$p.t('global/einheiten')\n\t\t},\n\t\teinheitenFormatter: function (cell) {\n\t\t\tconst valInMin = Number(cell.getValue())\n\t\t\tconst content = this.formatMinutes(valInMin)\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'\n\t\t\t\t\t+content+\n\t\t\t\t'</div>'\n\t\t},\n\t\tunselectableFormatter(row) {\n\t\t\tconst data = row.getData()\n\n\t\t\tif(data.status === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\trow.getElement().children[0]?.children[0]?.remove()\n\t\t\t}\n\n\t\t},\n\t\tsetRowStatus(cell, row, status) {\n\t\t\tif(cell.getData().status === status || cell.getData().status === this.$entryParams.permissions.entschuldigt_status) return\n\n\t\t\tconst newRow = {\n\t\t\t\tanwesenheit_user_id: cell.getData().anwesenheit_user_id,\n\t\t\t\tdatum: cell.getData().datum,\n\t\t\t\tstatus: status\n\t\t\t}\n\t\t\tthis.handleChange(newRow)\n\t\t\trow.update(newRow)\n\t\t},\n\t\thandleChange(row){\n\t\t\tconst existingEntryIndex = this.changedData.findIndex(element => element.datum === row.datum)\n\t\t\tif(existingEntryIndex >= 0) this.changedData.splice(existingEntryIndex, 1)\n\t\t\telse this.changedData.push(row)\n\t\t},\n\t\tformAction: function(cell)\n\t\t{\n\t\t\tconst wrapper = document.createElement('div');\n\t\t\twrapper.className = \"d-flex gap-3\";\n\n\t\t\tconst setCheckedButton = document.createElement('button');\n\t\t\tsetCheckedButton.className = 'btn btn-outline-secondary';\n\t\t\tsetCheckedButton.innerHTML = '<i class=\"fa fa-check\"></i>';\n\t\t\tsetCheckedButton.addEventListener('click', () => this.setRowStatus(cell, cell.getRow(), this.$entryParams.permissions.anwesend_status));\n\t\t\twrapper.append(setCheckedButton);\n\n\t\t\tconst setCrossedButton = document.createElement('button');\n\t\t\tsetCrossedButton.className = 'btn btn-outline-secondary';\n\t\t\tsetCrossedButton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\tsetCrossedButton.addEventListener('click', () => this.setRowStatus(cell, cell.getRow(), this.$entryParams.permissions.abwesend_status));\n\t\t\twrapper.append(setCrossedButton);\n\n\t\t\treturn wrapper;\n\t\t},\n\t\tasync saveChanges(changedData){\n\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, changedData)).then(res => {\n\t\t\t\tif(res.meta.status === \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwUserUpdateSuccess'))\n\t\t\t\t\tthis.$emit('anwesenheitenUpdated')\n\t\t\t\t} else {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwUserUpdate'))\n\t\t\t\t}\n\n\t\t\t\tthis.$api.call(ApiProfil.getAnwesenheitSumByLva(this.lv_id, this.sem_kz, this.id))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\tif(res.meta.status === \"success\" && res.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sum = res.data[0].sum\n\t\t\t\t\t\tconst student = this.$entryParams.lektorState.students.find(s => s.prestudent_id === this.prestudent_id && s.person_id === this.person_id)\n\t\t\t\t\t\tstudent.sum = this.sum\n\n\t\t\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.recalc();\n\n\t\t\t\t\t\tthis.setFilterTitle()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsetSelectedRowsAnwesend() {\n\t\t\tconst selectedData = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedData()\n\t\t\tconst selectedRows = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedRows()\n\n\t\t\tconst changedData = []\n\t\t\tconst changedRows = []\n\t\t\tselectedData.forEach((data,i) => {\n\t\t\t\tif(data.status !== this.$entryParams.permissions.entschuldigt_status || data.status === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\t\tconst newData = {\n\t\t\t\t\t\tanwesenheit_user_id: data.anwesenheit_user_id,\n\t\t\t\t\t\tdatum: data.datum,\n\t\t\t\t\t\tstatus: this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\tnotiz: data.notiz\n\t\t\t\t\t}\n\t\t\t\t\tselectedRows[i].update(newData)\n\t\t\t\t\tchangedData.push(newData)\n\t\t\t\t\tchangedRows.push(selectedRows[i])\n\t\t\t\t}\n\n\t\t\t})\n\n\n\t\t\tthis.saveChanges(changedData)\n\n\t\t\tchangedRows.forEach(row => row.toggleSelect())\n\t\t},\n\t\tasync setSelectedRowsAbwesend(){\n\t\t\tconst selectedData = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedData()\n\t\t\tconst selectedRows = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedRows()\n\n\t\t\tconst changedData = []\n\t\t\tconst changedRows = []\n\t\t\tselectedData.forEach((data,i) => {\n\t\t\t\tif(data.status !== this.$entryParams.permissions.entschuldigt_status || data.status === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\t\tconst newData = {\n\t\t\t\t\t\tanwesenheit_user_id: data.anwesenheit_user_id,\n\t\t\t\t\t\tdatum: data.datum,\n\t\t\t\t\t\tstatus: this.$entryParams.permissions.abwesend_status\n\t\t\t\t\t}\n\t\t\t\t\tselectedRows[i].update(newData)\n\t\t\t\t\tchangedData.push(newData)\n\t\t\t\t\tchangedRows.push(selectedRows[i])\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\tthis.saveChanges(changedData)\n\n\t\t\tchangedRows.forEach(row => row.toggleSelect())\n\t\t},\n\t\tsetFilterTitle() {\n\t\t\tthis.filterTitle = this.vorname + ' ' + this.nachname + ' ' + this.semester\n\t\t\t\t+ this.verband + this.gruppe + ' '\n\t\t\tthis.filterSubtitle = this.$p.t('global/summe')\n\t\t\t\t+ ': ' + this.sum+ ' %'\n\t\t\t\n\t\t\tthis.$emit('titleSet', this.filterTitle)\n\t\t},\n\t\trouteToLandingPage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'LandingPage'\n\t\t\t})\n\t\t},\n\t\tanwesenheitFormatterValue(cell) {\n\t\t\tconst data = cell.getValue()\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-check\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-xmark\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tcell.getElement().style.color = \"#0335f5\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa-solid fa-user-shield\"></i></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setupMounted() {\n\t\t\t\n\t\t\tif(!this.tableBuiltPromise) {\n\t\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\t\tawait this.tableBuiltPromise\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.getAllAnwesenheitenByStudentByLva(this.id, this.lv_id, this.sem_kz))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status !== \"success\" || !res.data) {\n\t\t\t\t\treturn []\n\t\t\t\t} else {\n\t\t\t\t\tconst arr = res?.data?.retval ?? []\n\t\t\t\t\t// calculate total time of anw\n\t\t\t\t\tconst sum = arr.reduce((acc, cur) => acc + cur.dauer, 0)\n\t\t\t\t\tarr.forEach(row => {\n\t\t\t\t\t\trow.anteil = (row.dauer / sum * 100).toFixed(2)\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.tableData = res.data.retval\n\t\t\t\t\tthis.initialTableData = [...res.data.retval]\n\t\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.setData(res.data.retval)\n\t\t\t\t\t// return res.data.retval\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\tthis.$api.call(ApiInfo.getStudentInfo(this.id, this.lv_id, this.sem_kz))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status !== \"success\" || !res.data) return\n\n\t\t\t\tthis.prestudent_id = res.data[0].prestudent_id\n\t\t\t\tthis.person_id = res.data[0].person_id\n\t\t\t\tthis.vorname = res.data[0].vorname\n\t\t\t\tthis.nachname = res.data[0].nachname\n\t\t\t\tthis.semester = res.data[0].semester\n\t\t\t\tthis.verband = res.data[0].verband\n\t\t\t\tthis.gruppe = res.data[0].gruppe\n\t\t\t\tthis.sum = res.data[0].sum\n\t\t\t\tthis.foto = res.data[0].foto\n\n\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.recalc();\n\t\t\t\tthis.setFilterTitle()\n\t\t\t})\n\n\t\t},\n\t\tisLowResolution(imgSrc) {\n\t\t\tconst img = new Image()\n\t\t\timg.src = imgSrc\n\t\t\treturn img.width < 150 || img.height < 200\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight : window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentByLva'].value = screenY - rect.top - 100 // approx for calc row on bottom\n\n\t\t\tif(this.$refs.anwesenheitenByStudentByLvaTable.tabulator) this.$refs.anwesenheitenByStudentByLvaTable.tabulator.redraw(true)\n\n\t\t},\n\t\tload(){\n\t\t\tthis.setupMounted()\n\n\t\t\t// this.calculateTableHeight()\n\t\t\t// window.addEventListener('resize', this.calculateTableHeight)\n\t\t\t// window.addEventListener('orientationchange', this.calculateTableHeight)\n\t\t}\n\t},\n\tmounted() {\n\t\t// this.setupMounted()\n\t\t//\n\t\t// this.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\t\n\t},\n\tcomputed: {\n\t\tdataChanged() {\n\t\t\treturn this.changedData.length\n\t\t},\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentByLva'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate:`\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-10\" style=\"mx-width: 80%\">\n\t\t\t\t<core-filter-cmpt\n\t\t\t\t\tref=\"anwesenheitenByStudentByLvaTable\"\n\t\t\t\t\ttitle=\"\"\n\t\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t\t:tabulator-options=\"anwesenheitenByStudentByLvaTabulatorOptions\"\n\t\t\t\t\t:tabulator-events=\"anwesenheitenByStudentByLvaTabulatorEventHandlers\"\n\t\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t\t:sideMenu=\"false\" \n\t\t\t\t\tnoColumnFilter>\n\t\t\t\t\t<template #actions>\n\n\t\t\t\t\t\t<button @click=\"setSelectedRowsAnwesend\" role=\"button\" class=\"btn btn-success align-self-end\" :disabled=\"!selected\">\n\t\t\t\t\t\t\t{{ $capitalize($p.t('global/anwesend')) }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button @click=\"setSelectedRowsAbwesend\" role=\"button\" class=\"btn btn-primary align-self-end\" :disabled=\"!selected\">\n\t\t\t\t\t\t\t{{ $capitalize($p.t('global/abwesend')) }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t\t<h5><i class=\"fa fa-circle-question\"></i></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</core-filter-cmpt>\n\t\t\t</div>\n\t\t\t<div class=\"col-2\">\n\t\t\t\t<img v-if=\"foto\" :src=\"foto\" :class=\"isLowResolution(foto) ? 'image-low-resolution' : ''\" style=\"width: 100%\"/>\n\t\t\t</div>\n\t\t</div>`\n};\n\nexport default StudentByLvaComponent","import {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport { lektorFormatters } from \"../../formatters/formatters.js\";\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {LehreinheitenDropdown} from \"../Setup/LehreinheitenDropdown.js\";\nimport {MaUIDDropdown} from \"../Setup/MaUIDDropdown.js\";\nimport {KontrollenDropdown} from \"../Setup/KontrollenDropdown.js\";\nimport {TermineDropdown} from \"../Setup/TermineDropdown.js\";\nimport {AnwCountDisplay} from \"./AnwCountDisplay.js\";\nimport {KontrolleDisplay} from \"./KontrolleDisplay.js\";\nimport {Statuslegende} from \"./Statuslegende.js\";\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\nimport {StudentByLvaComponent} from \"./StudentByLvaComponent.js\"\n\nexport const LektorComponent = {\n\tname: 'LektorComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreNavigationCmpt,\n\t\tBsModal,\n\t\tDivider: primevue.divider,\n\t\tTermineDropdown,\n\t\tLehreinheitenDropdown,\n\t\tMaUIDDropdown,\n\t\tKontrollenDropdown,\n\t\tAnwCountDisplay,\n\t\t\"datepicker\": VueDatePicker,\n\t\tStatuslegende,\n\t\tKontrolleDisplay,\n\t\tStudentByLvaComponent\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowQRLoadingSpinner: false,\n\t\t\tselectedStudent: null,\n\t\t\tkontrolleVonBis: null,\n\t\t\teditKontrolle: null,\n\t\t\thighlightMode: 'allowed',\n\t\t\tselectedDateCount: 0,\n\t\t\texternalModalContainer: null,\n\t\t\texternalWindow: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tstunden: null,\n\t\t\tloading: false,\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\tlektorState: { // pretty much everything that is being set in setupData()\n\t\t\t\tstudents: [],\n\t\t\t\tstudentsData: null,\n\t\t\t\tanwEntries: [],\n\t\t\t\tstsem: [],\n\t\t\t\tentschuldigtStati: [],\n\t\t\t\tkontrollen: [],\n\t\t\t\tviewData: [],\n\t\t\t\tdates: [], // all\n\t\t\t\ttermine: [], // stundenplan\n\t\t\t\tshowAllVar: false,\n\t\t\t\ttableStudentData: [],\n\t\t\t\tbeginn: null,\n\t\t\t\tende: null,\n\t\t\t\ttabulatorCols: null,\n\t\t\t\tgruppen: null\n\t\t\t},\n\t\t\tkontrollZeitSourceStundenplanBeginn: false,\n\t\t\tkontrollZeitSourceStundenplanEnde: false,\n\t\t\tkontrollDatumSourceStundenplan: false,\n\t\t\tanwesenheitenTabulatorOptions: {\n\t\t\t\trowHeight: 44, // foto max-height + 2x padding\n\t\t\t\trowFormatter: this.entschuldigtColoring,\n\t\t\t\theight: this.$entryParams.tabHeights.lektor,\n\t\t\t\tindex: 'prestudent_id',\n\t\t\t\tdebugInvalidComponentFuncs: false,\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/foto')), field: 'foto', formatter: lektorFormatters.fotoFormatter, visible: true, minWidth: 100, maxWidth: 100, download: false, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/prestudentID')), field: 'prestudent_id', formatter: lektorFormatters.centeredFormatter, visible: false, minWidth: 150, download: true, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('person/vorname')), field: 'vorname', formatter: lektorFormatters.centeredFormatter, headerFilter: true, widthGrow: 1,  minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('person/nachname')), field: 'nachname', formatter: lektorFormatters.centeredFormatter, headerFilter: true, widthGrow: 1, minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('lehre/gruppe')), field: 'gruppe', headerFilter: 'list', tooltip: this.tooltipTableRow,\n\t\t\t\t\t\theaderFilterParams: {\n\t\t\t\t\t\t\tvaluesLookup: true,\n\t\t\t\t\t\t\tclearable: true,\n\t\t\t\t\t\t\tautocomplete: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformatter: lektorFormatters.centeredFormatter, widthGrow: 1, minWidth: 100},\n\t\t\t\t\t// {title: Vue.computed(() => this.$p.t('benotungstool/c4note')), field: 'note_vorschlag',\n\t\t\t\t\t// \teditor: 'list',\n\t\t\t\t\t// \teditorParams: {\n\t\t\t\t\t// \t\tvalues: Vue.computed(()=>this.notenOptions.map(opt => {\n\t\t\t\t\t// \t\t\treturn {\n\t\t\t\t\t// \t\t\t\tlabel: opt.bezeichnung,\n\t\t\t\t\t// \t\t\t\tvalue: opt.note\n\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t// \t\t}))\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tformatter: (cell) => {\n\t\t\t\t\t// \t\tconst value = cell.getValue()\n\t\t\t\t\t// \t\tconst match = this.notenOptions.find(opt => opt.note === value)\n\t\t\t\t\t// \t\treturn match ? match.bezeichnung : value\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \twidthGrow: 1},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.$capitalize(this.$p.t('global/datum')),\n\t\t\t\t\t\tfield: 'status',\n\t\t\t\t\t\teditor: 'list',\n\t\t\t\t\t\teditorParams: {\n\t\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\t\tminWidth: 150\n\t\t\t\t\t\t\n\t\t\t\t\t\t// title: this.$capitalize(this.$p.t('global/datum')),\n\t\t\t\t\t\t// field: 'status',\n\t\t\t\t\t\t// formatter: this.anwesenheitFormatterValue,\n\t\t\t\t\t\t// hozAlign:\"center\",\n\t\t\t\t\t\t// widthGrow: 1, \n\t\t\t\t\t\t// // tooltip: this.anwTooltip,\n\t\t\t\t\t\t// tooltip: this.tooltipTableRow,\n\t\t\t\t\t\t// minWidth: 150\n\t\t\t\t\t},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/summe')), field: 'sum', formatter: this.percentFormatter,widthGrow: 1, minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: false,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-lektorOverviewLe\"\n\t\t\t},\n\t\t\tanwesenheitenTabulatorEventHandlers: [{\n\t\t\t\tevent: \"cellClick\",\n\t\t\t\thandler: async (e, cell) => {\n\n\t\t\t\t\t// on non date fields route to student by lva component\n\t\t\t\t\tconst field = cell.getColumn().getField()\n\n\t\t\t\t\tconst row = cell.getRow()\n\t\t\t\t\tconst prestudent_id = Reflect.get(row.getData(), 'prestudent_id')\n\n\t\t\t\t\tif(field === \"gruppe\" || field === \"foto\" || field === \"prestudent_id\" ||\n\t\t\t\t\t\tfield === \"vorname\" || field === \"nachname\" || field === \"sum\") {\n\n\t\t\t\t\t\tif(this.changedData.length && await this.$fhcAlert.confirm({\n\t\t\t\t\t\t\tmessage: 'Ungespeicherte Änderungen werden verloren!',\n\t\t\t\t\t\t\tacceptLabel: 'Verwerfen und Fortfahren',\n\t\t\t\t\t\t\tacceptClass: 'btn btn-danger',\n\t\t\t\t\t\t\trejectLabel: 'Zurück',\n\t\t\t\t\t\t\trejectClass: 'btn btn-outline-secondary'\n\t\t\t\t\t\t}) === false) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// maybe incorporate more changes to dataState to avoid reloads\n\t\t\t\t\t\t//  in the future when performance is an issue\n\t\t\t\t\t\tif(!this.changes) this.$entryParams.lektorState = this.lektorState\n\n\t\t\t\t\t\tthis.selectedStudent = {id: prestudent_id, lv_id: this.lv_id, sem_kz: this.sem_kurzbz, title: ''}\n\t\t\t\t\t\tVue.nextTick(()=>{\n\t\t\t\t\t\t\tthis.$refs.studentByLva.load()\n\t\t\t\t\t\t\t// just show studentByLva component in a fullscreen modal, avoid the routing shenanigans here\n\t\t\t\t\t\t\tthis.$refs.modalContainerStudentByLva.show()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// this.$router.push({\n\t\t\t\t\t\t// \tname: 'StudentByLva',\n\t\t\t\t\t\t// \tparams: {id: prestudent_id, lv_id: this.lv_id, sem_kz: this.sem_kurzbz}\n\t\t\t\t\t\t// })\n\t\t\t\t\t}\n\t\t\t\t\t// else { // on date fields toggle state edit\n\t\t\t\t\t// \tthis.toggleAnwStatus(e, cell, prestudent_id)\n\t\t\t\t\t// \tconst el = cell.getElement()\n\t\t\t\t\t//\t\n\t\t\t\t\t// \tif(this.changedData.find(d => d.prestudent_id === prestudent_id)) {\n\t\t\t\t\t// \t\tel.style.backgroundColor = \"#E0BBE4\"\n\t\t\t\t\t// \t} else {\n\t\t\t\t\t// \t\tel.style.backgroundColor = null\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEdited\",\n\t\t\t\thandler: async (cell) => {\n\t\t\t\t\t\n\t\t\t\t\tconst row = cell.getRow()\n\t\t\t\t\tconst prestudent_id = Reflect.get(row.getData(), 'prestudent_id')\n\n\t\t\t\t\tthis.changeAnwStatus(cell, prestudent_id)\n\t\t\t\t\tconst el = cell.getElement()\n\n\t\t\t\t\tif(this.changedData.find(d => d.prestudent_id === prestudent_id)) {\n\t\t\t\t\t\tel.style.backgroundColor = \"#E0BBE4\"\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.style.backgroundColor = null\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tboundRegenerateQR: null,\n\t\t\tboundProgressCounter: null,\n\t\t\tchangedData: [],\n\t\t\tdeleteData: null,\n\t\t\tselectedDate: new Date(Date.now()),\n\t\t\tqr: null,\n\t\t\turl: null,\n\t\t\tcode: null,\n\t\t\ttimerIDPolling: null,\n\t\t\tprogressTimerID: null,\n\t\t\tregenerateProgress: 0,\n\t\t\tprogressMax: 0,\n\t\t\tpolling: false,\n\t\t\tcheckInCount: 0,\n\t\t\tabwesendCount: 0,\n\t\t\tentschuldigtCount: 0,\n\t\t\tstudentCount: 0,\n\t\t\tchanges: false // if something could have happened to dataset -> reload on mounted\n\t\t}\n\t},\n\tinject: {\n\t\tminDate: {\n\t\t\ttype: Object\n\t\t},\n\t\tmaxDate: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tprops: {\n\t\tpermissions: [],\n\t\ttranslateOffset: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60\n\t\t}\n\t},\n\tmethods: {\n\t\thandleAutoApply(date) {\n\t\t\tthis.selectedDate = date\n\t\t\tthis.$refs.outsideDateSelect.closeMenu()\t\n\t\t\tif(this.$refs.insideDateSelect) this.$refs.insideDateSelect.closeMenu()\n\t\t},\n\t\tanwColTitleFormatter(cell) {\n\t\t\tconst title = cell.getColumn().getDefinition().title;\n\t\t\tconst titleParts = title.split(\"|\")\n\t\t\t\n\t\t\tconst titledate = titleParts[0].trimEnd()\n\t\t\tconst dateParts = titledate.split(\"-\")\n\t\t\tconst selectedDateFrontendFormatted = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\n\t\t\tconst container = document.createElement(\"div\");\n\t\t\tcontainer.style.textAlign = \"center\";\n\t\t\tcontainer.innerHTML = `<span style=\"font-weight: bold;\">${selectedDateFrontendFormatted}</span><br><span style=\"color: gray;\">${titleParts[1]}</span>`;\n\t\t\treturn container;\n\t\t},\n\t\tcheckCellEditability(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\treturn val !== '-' // dont allow edit on empty cols \n\t\t},\n\t\ttooltipTableRow(e, cell, onRendered) { // tooltip formatter for whole row but used on every cell\n\t\t\tconst el = document.createElement('div')\n\n\t\t\tconst row = cell.getRow()\n\t\t\tconst data = row.getData()\n\t\t\tconst name = document.createElement('p')\n\t\t\t\n\t\t\tname.innerText = data.vorname + ' ' + data.nachname\n\t\t\tel.appendChild(name)\n\t\t\t\n\t\t\tdata?.entschuldigungen?.forEach(ent => {\n\t\t\t\tconst entschuldigung = document.createElement('p')\n\n\t\t\t\tentschuldigung.innerText += this.formatEntschuldigungZeit(ent) + ' Entschuldigung status: ' + this.formatAkzeptiertStatus(ent.akzeptiert) + '\\n'\n\t\t\t\tel.appendChild(entschuldigung)\n\t\t\t})\n\t\t\t\n\t\t\treturn el\n\t\t},\n\t\tformatEntschuldigungZeit(ent) {\n\t\t\tconst von = new Date(ent.von)\n\t\t\tconst bis = new Date(ent.bis)\n\t\t\t\n\t\t\tconst sameDay = this.areDatesSame(von, bis)\n\t\t\tif(sameDay) {\n\t\t\t\treturn String(von.getHours()).padStart(2, '0') + ':' + String(von.getMinutes()).padStart(2, '0') + ' - ' + String(bis.getHours()).padStart(2, '0') + ':' + String(bis.getMinutes()).padStart(2, '0')\n\t\t\t} else {\n\t\t\t\treturn (von.getMonth() + 1) + '.' + von.getDate() + ' ' + String(von.getHours()).padStart(2, '0') + ':' + String(von.getMinutes()).padStart(2, '0') + ' - ' + (bis.getMonth() + 1) + '.' + bis.getDate() + ' ' + String(bis.getHours()).padStart(2, '0') + ':' + String(bis.getMinutes()).padStart(2, '0')\n\t\t\t}\n\t\t},\n\t\tformatAkzeptiertStatus(akzeptiert) {\n\t\t\t// formats akzeptiert tri state logic (true => accepted, false => denied, null => open) into meaningful strings\n\t\t\t\n\t\t\tlet ret = ''\n\t\t\t\n\t\t\tif(akzeptiert === null) {\n\t\t\t\tret = 'Offen'\n\t\t\t} else if (akzeptiert === true) {\n\t\t\t\tret = 'Akzeptiert'\n\t\t\t} else if (akzeptiert === false) {\n\t\t\t\tret = 'Abgelehnt'\n\t\t\t}\n\t\t\t\n\t\t\treturn ret\n\t\t\t\n\t\t},\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ?? data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex;' + (val < (this.$entryParams.permissions.positiveRatingThreshold * 100) ? 'color: red; ' : '') + 'justify-content: center; align-items: center; height: 100%\">' + val + ' %</div>'\n\t\t},\n\t\tanwesenheitFormatterValue(cell) {\n\t\t\tconst data = cell.getValue()\n\t\t\t\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-check\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-xmark\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tcell.getElement().style.color = \"#0335f5\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa-solid fa-user-shield\"></i></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\tanwTooltip(e, cell) {\n\t\t\tconst value = cell.getValue()\n\t\t\tlet valueFormatted = ''\n\n\t\t\tif (value === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/anwesend'))\n\t\t\t} else if (value === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/abwesend'))\n\t\t\t} else if (value === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/entschuldigt'))\n\t\t\t}\n\n\t\t\treturn valueFormatted\n\t\t},\n\t\tgetExistingQRCode() {\n\t\t\tthis.$api.call(ApiKontrolle.getExistingQRCode(this.$entryParams.selected_le_id.value))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.svg) {\n\t\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tpollAnwesenheit() {\n\t\t\tthis.$api.call(ApiKontrolle.pollAnwesenheiten(this.anwesenheit_id, this.lv_id))\n\t\t\t\t.then(res => {\n\t\t\t\tthis.checkInCount = res.data.anwesend\n\t\t\t\tthis.abwesendCount = res.data.abwesend\n\t\t\t\tthis.entschuldigtCount = res.data.entschuldigt\n\t\t\t})\n\t\t},\n\t\tstartPollingAnwesenheiten() {\n\t\t\tthis.timerIDPolling = setInterval(this.boundPollAnwesenheit, 3000)\n\t\t},\n\t\tstopPollingAnwesenheiten() {\n\t\t\tclearInterval(this.timerIDPolling)\n\t\t\tthis.timerIDPolling = null\n\t\t},\n\t\thandleKontrolleChanged(kontrolle) {\n\t\t\tthis.deleteData = kontrolle\n\t\t},\n\t\thandleShowAllToggle() {\n\t\t\tif (!this.lektorState.dates.length) {\n\t\t\t\tthis.$fhcAlert.alertInfo(this.$p.t('global/anwInfoKeineKontrollenGefunden'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loading = true\n\t\t\tthis.toggleShowAll()\n\t\t\tthis.loading = false\n\t\t},\n\t\tasync setAllColsAndData() {\n\t\t\tthis.selectedDateCount = this.lektorState.dates.length\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(this.lektorState.tabulatorCols)\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData)\n\t\t},\n\t\ttoggleShowAll() {\n\t\t\t// set tabulator column definition to show every distinct date fetched\n\n\t\t\tif (!this.lektorState.showAllVar) {\n\t\t\t\tthis.setShowAll()\n\t\t\t} else {\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t\t\n\t\t\t\t// use selectedDate watcher to retrieve single column table state\n\t\t\t\tthis.selectedDate = new Date(this.selectedDate)\n\n\t\t\t\tthis.lektorState.showAllVar = false\n\t\t\t}\n\n\t\t},\n\t\tsetShowAll() {\n\t\t\tconst newCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\t\t\tthis.lektorState.dates.forEach(date => {\n\t\t\t\tnewCols.push({\n\t\t\t\t\ttitle: date,\n\t\t\t\t\tfield: date,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tnewCols.push(this.anwesenheitenTabulatorOptions.columns[6])\n\n\t\t\tthis.lektorState.tableStudentData = this.setupAllData(newCols)\n\t\t\tthis.lektorState.tabulatorCols = newCols\n\t\t\tthis.setAllColsAndData()\n\n\t\t\tthis.lektorState.showAllVar = true\n\t\t},\n\t\tsetupAllData() {\n\t\t\tconst data = []\n\n\t\t\tthis.lektorState.students.forEach(student => {\n\t\t\t\tconst allEntStudent = this.lektorState.entschuldigtStati.filter(status => {\n\t\t\t\t\tif(status.person_id === student.person_id) return true\n\t\t\t\t\telse return false\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tconst nachname = student.nachname + student.zusatz\n\t\t\t\tconst row = {\n\t\t\t\t\tprestudent_id: student.prestudent_id,\n\t\t\t\t\tfoto: student.foto,\n\t\t\t\t\tvorname: student.vorname,\n\t\t\t\t\tnachname: nachname,\n\t\t\t\t\tentschuldigungen: allEntStudent,\n\t\t\t\t\tgruppe: student.semester + student.verband + student.gruppe,\n\t\t\t\t\tsum: student.sum\n\t\t\t\t}\n\t\t\t\tconst studentDataEntry = this.lektorState.studentsData.get(student.prestudent_id)\n\t\t\t\tstudentDataEntry.forEach(entry => {\n\t\t\t\t\tconst d = entry.datum + ' | ' + entry.von + ' - ' + entry.bis\n\t\t\t\t\trow[d] = entry.status\n\t\t\t\t})\n\n\t\t\t\tdata.push(row)\n\t\t\t})\n\n\t\t\treturn data\n\t\t},\n\t\tareDatesSame(date1, date2) {\n\t\t\tconst date1Date = date1.getDate()\n\t\t\tconst date2Date = date2.getDate()\n\n\t\t\tconst date1Month = date1.getMonth()\n\t\t\tconst date2Month = date2.getMonth()\n\n\t\t\tconst date1Year = date1.getFullYear()\n\t\t\tconst date2Year = date2.getFullYear()\n\n\t\t\treturn date1Date === date2Date && date1Month === date2Month && date1Year === date2Year\n\t\t},\n\t\twait(ms) {\n\t\t\treturn new Promise(resolve => setTimeout(resolve, ms))\n\t\t},\n\t\tformatQRTime(kontrolle) {\n\t\t\tconst vp = kontrolle.von.split(\" \")\n\t\t\tconst datumParts = vp[0].split(\"-\")\n\t\t\tconst datum = datumParts[2] + '.' + datumParts[1] + '.' + datumParts[0]\n\t\t\tconst von = vp[1]\n\t\t\tconst bis = kontrolle.bis.split(\" \")[1]\n\t\t\treturn datum + ' | ' + von + ' - ' + bis\n\t\t},\n\t\tshowQR(data) {\n\t\t\tthis.qr = data.svg\n\t\t\tthis.url = data.url\n\t\t\tthis.code = data.code\n\t\t\tthis.kontrolleVonBis = this.formatQRTime(data.kontrolle)\n\t\t\tthis.checkInCount = data.count.anwesend\n\t\t\tthis.abwesendCount = data.count.abwesend\n\t\t\tthis.entschuldigtCount = data.count.entschuldigt\n\t\t\tthis.anwesenheit_id = data.anwesenheit_id\n\t\t\tthis.$refs.modalContainerQR.show()\n\t\t\tif (this.$entryParams.permissions.useRegenerateQR) this.startRegenerateQR()\n\t\t\tthis.startPollingAnwesenheiten()\n\t\t},\n\t\tgetNewQRCode() {\n\t\t\t// js months 0-11, php months 1-12\n\t\t\tconst date = {\n\t\t\t\tyear: this.selectedDate.getFullYear(),\n\t\t\t\tmonth: this.selectedDate.getMonth() + 1,\n\t\t\t\tday: this.selectedDate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.getNewQRCode(this.$entryParams.selected_le_id.value, date, this.lektorState.beginn, this.lektorState.ende))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.data) {\n\t\t\t\t\tthis.showQRLoadingSpinner = false\n\t\t\t\t\tthis.changes = true\n\t\t\t\t\tthis.$refs.modalContainerNewKontrolle.hide()\n\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t}\n\t\t\t}).finally(()=>{\n\t\t\t\t// just in case\n\t\t\t\tthis.showQRLoadingSpinner = false\n\t\t\t})\n\t\t\t\n\t\t},\n\t\thandleTerminChanged() {\n\t\t\tthis.setTimespanForKontrolleTermin(this.$entryParams.selected_termin.value)\n\t\t},\n\t\tregenerateQR() {\n\t\t\tthis.$api.call(ApiKontrolle.regenerateQRCode(this.anwesenheit_id))\n\t\t\t\t.then(async (res) => {\n\t\t\t\tconst oldCode = this.code\n\t\t\t\tthis.qr = res.data.svg\n\t\t\t\tthis.url = res.data.url\n\t\t\t\tthis.code = res.data.code\n\n\t\t\t\tawait this.wait(5000)\n\n\t\t\t\t\tthis.$api.call(ApiKontrolle.degenerateQRCode(this.anwesenheit_id, oldCode))\n\t\t\t})\n\t\t},\n\t\tprogressCounter() {\n\t\t\tif (this.regenerateProgress === this.progressMax) {\n\t\t\t\tthis.regenerateQR()\n\t\t\t}\n\t\t\tif (this.regenerateProgress >= this.progressMax) this.regenerateProgress = 0\n\t\t\tthis.regenerateProgress++\n\t\t},\n\t\tasync saveChanges() {\n\n\t\t\tconst changedStudents = new Set(this.changedData.map(e => e.prestudent_id))\n\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, this.changedData))\n\t\t\t\t.then((res) => {\n\t\t\t\tif (res.meta.status === \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwUserUpdateSuccess'))\n\t\t\t\t} else {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwUserUpdate'))\n\t\t\t\t}\n\n\t\t\t\tconst changedStudentsArr = [...changedStudents]\n\t\t\t\t// find and overwrite each entry in studentsData map from which showAll retrieves its values\n\t\t\t\tthis.changedData.forEach(change => {\n\t\t\t\t\tconst values = this.lektorState.studentsData.get(change.prestudent_id)\n\t\t\t\t\tconst valueToChange = values?.find(val => val.anwesenheit_user_id == change.anwesenheit_user_id)\n\t\t\t\t\t\n\t\t\t\t\tif(valueToChange) {\n\t\t\t\t\t\tconst oldVal = valueToChange.status\n\t\t\t\t\t\tvalueToChange.status = change.status\n\n\t\t\t\t\t\tconst kontrolleToUpdate = this.lektorState.kontrollen.find(k => k.anwesenheit_id == change.anwesenheit_id)\n\t\t\t\t\t\tkontrolleToUpdate[oldVal]--;\n\t\t\t\t\t\tkontrolleToUpdate[change.status]++;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$api.call(ApiKontrolle.getAnwQuoteForPrestudentIds(changedStudentsArr, this.$entryParams.lv_id, this.$entryParams.sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.updateSumData(res.data.retval)\n\t\t\t\t\t\tthis.changes = true\n\t\t\t\t\t})\n\t\t\t}).finally(() =>  {\n\t\t\t\tthis.changedData = []\n\t\t\t\tthis.setCurrentCountsFromTableData()\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tstartRegenerateQR() {\n\t\t\tthis.progressTimerID = setInterval(this.boundProgressCounter, this.progressTimerInterval) // track time passed for regenerate\n\t\t},\n\t\tstopRegenerateQR() {\n\t\t\tconst oldCode = this.code\n\n\t\t\tclearInterval(this.progressTimerID)\n\t\t\tthis.progressTimerID = null\n\t\t\tthis.regenerateProgress = 0\n\n\t\t\tthis.qr = null\n\t\t\tthis.url = null\n\t\t\tthis.code = null\n\n\t\t\t// attempt to degenerate one last time to not leave any codes in db\n\t\t\tthis.$api.call(ApiKontrolle.degenerateQRCode(this.anwesenheit_id, oldCode))\n\t\t},\n\t\thandleChangeDatum(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst searchStr = year + '-' + month + '-' + day\n\t\t\t\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.datum == searchStr)\n\t\t\tif(terminFound) this.kontrollDatumSourceStundenplan = true\n\t\t\telse this.kontrollDatumSourceStundenplan = false\n\t\t},\n\t\thandleChangeEnde(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst searchStr = `${padZero(date.hours)}:${padZero(date.minutes)}:${padZero(date.seconds)}`\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.ende == searchStr)\n\t\t\tif(terminFound) this.kontrollZeitSourceStundenplanEnde = true\n\t\t\telse this.kontrollZeitSourceStundenplanEnde = false\n\t\t},\n\t\thandleChangeBeginn(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst searchStr = `${padZero(date.hours)}:${padZero(date.minutes)}:${padZero(date.seconds)}`\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.beginn == searchStr)\n\t\t\tif(terminFound) this.kontrollZeitSourceStundenplanBeginn = true\n\t\t\telse this.kontrollZeitSourceStundenplanBeginn = false\n\t\t},\n\t\tqueryOnlyKontrolleShown() {\n\t\t\t// find kontrolle from column date\n\t\t\tconst sYear = this.selectedDate.getFullYear()\n\t\t\tconst sMonth = this.selectedDate.getMonth()\n\t\t\tconst sDate = this.selectedDate.getDate()\n\t\t\t\n\t\t\tconst kOnDate = this.lektorState.kontrollen.find(k => {\n\t\t\t\tconst kYear = k.jsDate.getFullYear()\n\t\t\t\tconst kMonth = k.jsDate.getMonth()\n\t\t\t\tconst kDate = k.jsDate.getDate()\n\t\t\t\t\n\t\t\t\treturn sYear === kYear && sMonth === kMonth && sDate === kDate\n\t\t\t})\n\n\t\t\tif(kOnDate) {\n\t\t\t\tthis.$api.call(ApiKontrolle.pollAnwesenheiten(kOnDate.anwesenheit_id, this.lv_id))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.checkInCount = res.data.anwesend\n\t\t\t\t\t\tthis.abwesendCount = res.data.abwesend\n\t\t\t\t\t\tthis.entschuldigtCount = res.data.entschuldigt\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tsetTimespanForKontrolleNow() {\n\t\t\t// no termine found to fill starting fields from, set to current hour + 1\n\t\t\tconst now = new Date()\n\n\t\t\tthis.lektorState.beginn = {\n\t\t\t\thours: now.getHours(),\n\t\t\t\tminutes: now.getMinutes(),\n\t\t\t\tseconds: now.getSeconds()\n\t\t\t}\n\t\t\tthis.lektorState.ende = {hours: now.getHours() + 1, minutes: now.getMinutes(), seconds: now.getSeconds()}\n\t\t},\n\t\tsetTimespanForKontrolleTermin(termin, setDate = true) {\n\t\t\tif (setDate) {\n\t\t\t\tthis.selectedDate = new Date(termin.datum)\n\t\t\t\tthis.kontrollDatumSourceStundenplan = true;\n\t\t\t}\n\n\t\t\tconst beginn = new Date('1995-10-16 ' + termin.beginn)\n\t\t\tconst ende = new Date('1995-10-16 ' + termin.ende)\n\n\t\t\tthis.lektorState.beginn = {\n\t\t\t\thours: beginn.getHours(),\n\t\t\t\tminutes: beginn.getMinutes(),\n\t\t\t\tseconds: beginn.getSeconds()\n\t\t\t}\n\t\t\tthis.kontrollZeitSourceStundenplanBeginn = true\n\t\t\tthis.kontrollDatumSourceStundenplan = (termin.isSameDay || setDate) ?? false\n\t\t\t\n\t\t\tthis.lektorState.ende = {hours: ende.getHours(), minutes: ende.getMinutes(), seconds: ende.getSeconds()}\n\t\t\t\n\t\t\tthis.kontrollZeitSourceStundenplanEnde = true\n\t\t},\n\t\tstartNewAnwesenheitskontrolle() {\n\t\t\tif (!this.lektorState.beginn || !this.lektorState.ende) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwStartAndEndSet'))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.validateTimespan(this.lektorState.beginn, this.lektorState.ende, this.selectedDate)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.showQRLoadingSpinner = true\n\t\t\tthis.qr = '' // indirectly set start button disabled\n\n\t\t\t// fetch some data from stundenplan what should be happening rn\n\t\t\t// if there is no stundenplan entry enter some hours of anwesenheit?\n\n\t\t\tthis.getNewQRCode()\n\t\t},\n\t\tinsertAnwWithoutQR() {\n\t\t\tif (!this.lektorState.beginn || !this.lektorState.ende) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwStartAndEndSet'))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.validateTimespan(this.lektorState.beginn, this.lektorState.ende, this.selectedDate)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst date = {\n\t\t\t\tyear: this.selectedDate.getFullYear(),\n\t\t\t\tmonth: this.selectedDate.getMonth() + 1,\n\t\t\t\tday: this.selectedDate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$refs.modalContainerNewKontrolle.hide()\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.insertAnwWithoutQR(this.$entryParams.selected_le_id.value, date, this.lektorState.beginn, this.lektorState.ende))\n\t\t\t\t.then(res => {\n\n\t\t\t\t\tconst datefetch = this.formatDateToDbString(this.selectedDate)\n\t\t\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\t\tthis.reloadState(ma_uid, datefetch)\n\t\t\t\t\t\n\t\t\t\t\tthis.changes = true\n\t\t\t\t\tthis.showQR(res.data)\n\n\t\t\t\t})\n\t\t},\n\t\tstopAnwesenheitskontrolle() {\n\t\t\tif(this.externalWindow) { // portal the modal back into our dom and close window\n\t\t\t\tthis.externalWindow.close() // triggers handleClose on beforeunload event listener\n\t\t\t}\n\t\t\t\n\t\t\tthis.$refs.modalContainerQR.hide()\n\n\t\t\tthis.stopPollingAnwesenheiten() // stops polling loop on server\n\t\t\tthis.qr = null\n\t\t\tthis.url = null\n\t\t\tthis.code = null\n\n\t\t\t// maybe only fetch new entries and merge\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\n\t\t\tthis.reloadState(ma_uid, date)\n\n\t\t\tthis.$api.call(ApiKontrolle.deleteQRCode(this.anwesenheit_id, this.lv_id))\n\t\t\t\t.then(\n\t\t\t\tres => {\n\t\t\t\t\tif (res.meta.status === \"success\" && res.data) {\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwKontrolleBeendet'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorDeleteQRCode'))\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$entryParams.permissions.useRegenerateQR) this.stopRegenerateQR()\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\treloadState(ma_uid, date) {\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(this.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, date)).then(res => {\n\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t}\n\t\t\t}).catch(() => {\n\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t},\n\t\tupdateSumData(data) {\n\t\t\tdata.forEach(e => {\n\t\t\t\tconst student = this.lektorState.students.find(s => s.prestudent_id === e.prestudent_id)\n\t\t\t\tstudent.sum = e.sum\n\t\t\t\tconst studentTable = this.lektorState.tableStudentData.find(s => s.prestudent_id === e.prestudent_id)\n\t\t\t\tstudentTable.sum = e.sum\n\t\t\t})\n\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData);\n\t\t},\n\t\topenEditModal() {\n\t\t\tthis.$refs.modalContainerEditKontrolle.show()\n\t\t},\n\t\topenLegend() {\n\t\t\tthis.$refs.modalContainerLegende.show()\n\t\t},\n\t\tasync deleteAnwesenheitskontrolle(kontrolle) {\n\t\t\tif (await this.$fhcAlert.confirmDelete() === false) return;\n\n\t\t\tconst dataparts = kontrolle.datum.split('.')\n\t\t\tconst dateobj = new Date(dataparts[2], dataparts[1] - 1, dataparts[0])\n\t\t\tconst date = {year: dateobj.getFullYear(), month: dateobj.getMonth() + 1, day: dateobj.getDate()}\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tconst dateAnwFormat = dataparts[2] + '-' + dataparts[1] + '-' + dataparts[0]\n\n\t\t\t\n\t\t\t\n\t\t\t\tthis.$api.call(ApiKontrolle.deleteAnwesenheitskontrolle(this.$entryParams.selected_le_id.value, date, kontrolle.anwesenheit_id))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status === \"success\" && res.data) {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/deleteAnwKontrolleConfirmation'))\n\n\t\t\t\t\tthis.reloadState(ma_uid, dateAnwFormat)\n\t\t\t\t} else if (res.meta.status === \"success\" && !res.data) {\n\t\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/noAnwKontrolleFoundToDelete'))\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\n\t\t},\n\t\teditAnwesenheitskontrolle(kontrolle) {\n\t\t\tconst vonSplit = kontrolle.von.split(':')\n\t\t\tkontrolle.editVon = {hours: vonSplit[0], minutes: vonSplit[1], seconds: vonSplit[2]}\n\t\t\tconst bisSplit = kontrolle.bis.split(':')\n\t\t\tkontrolle.editBis = {hours: bisSplit[0], minutes: bisSplit[1], seconds: bisSplit[2]}\n\t\t\tif(this.editKontrolle === null) {\n\t\t\t\tthis.editKontrolle = kontrolle\n\t\t\t} else {\n\t\t\t\tthis.editKontrolle = null\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tformatDateToDbString(date) {\n\t\t\treturn new Date(date.getTime() - (date.getTimezoneOffset() * 60000))\n\t\t\t\t.toISOString()\n\t\t\t\t.split(\"T\")[0];\n\t\t},\n\t\tformatZusatz(entry, stsem) {\n\t\t\tlet zusatz = ''\n\t\t\tconst stsemdatumvon = new Date(stsem.von)\n\t\t\tconst stsemdatumbis = new Date(stsem.bis)\n\t\t\t// if(entry.studienstatus === 'Abbrecher '||entry.studienstatus === 'Unterbrecher') {\n\t\t\t// \t// this should never come up anyways?\n\t\t\t// }\n\n\t\t\tif (entry.studienstatus === 'Incoming') zusatz = ' (i)'\n\t\t\tif (entry.bisio_id && entry.studienstatus !== 'Incoming'\n\t\t\t\t&& entry.bis > stsemdatumvon && entry.von < stsemdatumbis && ((entry.bis.getTime() - entry.von.getTime()) / 1000 * 3600 * 24) >= 30) {\n\t\t\t\tzusatz = ' (o) (ab ' + entry.von + ')'\n\t\t\t} else if (entry.bisio_id && entry.studienstatus !== 'Incoming' && entry.von && entry.von > stsemdatumvon) {\n\t\t\t\t// if bis datum is not yet known but von is available already\n\t\t\t\tzusatz = ' (o) (ab ' + entry.von + ')'\n\t\t\t}\n\n\t\t\tif (entry.lkt_ueberschreibbar === false) zusatz = ' (' + entry.anmerkung + ')'\n\t\t\tif (entry.mitarbeiter_uid !== null) zusatz = ' (ma)'\n\t\t\tif (entry.stg_kz_student == this.lektorState.a_o_kz) {\n\t\t\t\tzusatz = ' (a.o.)'\n\t\t\t}\n\t\t\tif (entry.mobilitaetstyp_kurzbz && entry.doubledegree === 1) {\n\t\t\t\tzusatz = ' (d.d.'\n\t\t\t\tif (entry.ddtype == 'Intern') zusatz += 'i.)';\n\t\t\t\telse if (entry.ddtype == 'Extern') zusatz += 'o.)';\n\t\t\t\telse zusatz += ')';\n\t\t\t}\n\n\t\t\treturn zusatz\n\t\t},\n\t\tlinkKontrollData() {\n\t\t\t// TODO: write Set of controlled groups into kontroll obj\n\n\t\t\tthis.lektorState.kontrollen.forEach(k => {\n\t\t\t\tk.sumAnw = 0\n\t\t\t\tk.anw = 0\n\t\t\t\tk.abw = 0\n\t\t\t\tk.ent = 0\n\t\t\t\tk.groupSet = new Set()\n\t\t\t})\n\t\t\tthis.lektorState.anwEntries.forEach(anw => {\n\t\t\t\tconst k = this.lektorState.kontrollen.find(k => k.anwesenheit_id === anw.anwesenheit_id)\n\t\t\t\tk.sumAnw++\n\t\t\t\tif (anw.status === this.$entryParams.permissions.anwesend_status) k.anw++\n\t\t\t\telse if (anw.status === this.$entryParams.permissions.abwesend_status) k.abw++\n\t\t\t\telse if (anw.status === this.$entryParams.permissions.entschuldigt_status) k.ent++\n\t\t\t})\n\n\t\t},\n\t\tsetEntries(anwEntries, kontrollen) {\n\n\t\t\t// from anw entries\n\t\t\tanwEntries.forEach(entry => {\n\t\t\t\tconst kontrolle = kontrollen.find(k => k.anwesenheit_id === entry.anwesenheit_id)\n\t\t\t\t// search for distinct kontrollento use for show all columns\n\t\t\t\tthis.lektorState.studentsData.get(entry.prestudent_id).push({\n\t\t\t\t\tdatum: entry.datum,\n\t\t\t\t\tstatus: entry.status,\n\t\t\t\t\tanwesenheit_user_id: entry.anwesenheit_user_id,\n\t\t\t\t\tanwesenheit_id: entry.anwesenheit_id,\n\t\t\t\t\tvon: kontrolle?.von,\n\t\t\t\t\tbis: kontrolle?.bis\n\t\t\t\t})\n\n\t\t\t\tconst datum = entry.datum + ' | ' + kontrolle.von + ' - ' + kontrolle.bis\n\t\t\t\tif (this.lektorState.dates.indexOf(datum) < 0) {\n\t\t\t\t\tthis.lektorState.dates.push(datum)\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\t// sort dates and termine\n\t\t\tthis.lektorState.dates.sort((a, b) => {\n\t\t\t\tconst as = a.split('|')\n\t\t\t\tconst bs = b.split('|')\n\t\t\t\treturn as > bs ? 1 : a < b ? -1 : 0\n\t\t\t})\n\t\t},\n\t\tasync setupLektorComponent() {\n\t\t\t\n\t\t\tthis.$entryParams.available_termine.value.forEach(termin => {\n\t\t\t\tconst dateParts = termin.datum.split(\"-\")\n\t\t\t\ttermin.datumFrontend = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\t\t\t})\n\n\t\t\tif (this.$entryParams.available_termine.value.length) {\n\t\t\t\tconst closestTermin = this.$entryParams.findClosestTermin(this.$entryParams.available_termine.value);\n\t\t\t\tconst termin = new Date(closestTermin.datum)\n\t\t\t\tconst closestTerminSameDay = this.selectedDate.getDate() === termin.getDate() && this.selectedDate.getMonth() === termin.getMonth && this.selectedDate.getFullYear() === termin.getFullYear()\n\t\t\t\tclosestTermin.isSameDay = closestTerminSameDay\n\t\t\t\tthis.setTimespanForKontrolleTermin(closestTermin, true)\n\n\t\t\t\tthis.$entryParams.available_termine.value.forEach(t => this.lektorState.dates.push(t.datum))\n\n\t\t\t} else {\n\t\t\t\tthis.setTimespanForKontrolleNow()\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.lektorState.dates = []\n\t\t\tthis.lektorState.studentsData = new Map()\n\t\t\t// format student zusatz and prepare entry map for anw data\n\t\t\tthis.lektorState.students.forEach(entry => {\n\t\t\t\tentry.zusatz = this.formatZusatz(entry, this.lektorState.stsem)\n\t\t\t\tthis.lektorState.studentsData.set(entry.prestudent_id, [])\n\t\t\t})\n\t\t\t\n\t\t\tthis.setEntries(this.lektorState.anwEntries, this.lektorState.kontrollen)\n\t\t\t// this.$refs.kontrolleDropdown.setKontrollen(this.lektorState.kontrollen)\n\t\t\t\n\t\t\t// datepicker only allows to select for distinct days but one day can lead to several\n\t\t\t// kontrollen on that day during different timespans -> find all from that date and postfix the von - bis times\n\t\t\t\n\t\t\t// determine if table goes with all available dates - kontrollen\n\t\t\t// or all kontrollen of a selected date if one or more are found\n\t\t\tconst dates = this.determineDates()\n\t\t\t\n\t\t\t// define VISIBLE tabulator columns with dynamic columns\n\t\t\tconst anwCols = this.buildColsForDates(dates)\n\t\t\t\n\t\t\tconst newCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\t\t\tthis.lektorState.dates.forEach(date => {\n\t\t\t\tnewCols.push({\n\t\t\t\t\ttitle: date,\n\t\t\t\t\tfield: date,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tnewCols.push(this.anwesenheitenTabulatorOptions.columns[6])\n\t\t\t// tableData prefilled with all dates & status\n\t\t\tthis.lektorState.tableStudentData = this.setupAllData(newCols)\n\t\t\tthis.studentCount = this.lektorState.students.length\n\t\t\t\n\t\t\t// // build together the tableData by iterating over each student and look for the status of every (datum | von - bis) entry\n\t\t\t// this.lektorState.students.forEach(student => {\n\t\t\t//\t\n\t\t\t// \tconst allEntStudentForCurrentDate = this.lektorState.entschuldigtStati.filter(status => {\n\t\t\t// \t\tconst vonDate = new Date(status.von)\n\t\t\t// \t\tconst bisDate = new Date(status.bis)\n\t\t\t// \t\tif(status.person_id === student.person_id && vonDate <= this.selectedDate && bisDate >= this.selectedDate) return true\n\t\t\t// \t\telse return false\n\t\t\t// \t})\n\t\t\t// \t// foundEntry.hasEntschuldigung = !!entschuldigungEntryStudent\n\t\t\t//\t\n\t\t\t// \tlet isEntschuldigt = null\n\t\t\t// \tallEntStudentForCurrentDate.forEach(entCurDate => {\n\t\t\t// \t\tif(entCurDate.akzeptiert === true) isEntschuldigt = true\n\t\t\t// \t})\n\t\t\t//\t\n\t\t\t// \tconst studentDataEntry = this.lektorState.studentsData.get(student.prestudent_id)\n\t\t\t// \tconst nachname = student.nachname + student.zusatz\n\t\t\t// \tconst gruppe = student.semester + student.verband + student.gruppe\n\t\t\t// \tconst newRow = {\n\t\t\t// \t\tprestudent_id: student.prestudent_id,\n\t\t\t// \t\tfoto: student.foto,\n\t\t\t// \t\tvorname: student.vorname,\n\t\t\t// \t\tnachname: nachname,\n\t\t\t// \t\tgruppe: gruppe,\n\t\t\t// \t\tentschuldigt: isEntschuldigt,\n\t\t\t// \t\tentschuldigungen: allEntStudentForCurrentDate,\n\t\t\t// \t\tsum: student.sum\n\t\t\t// \t}\n\n\t\t\tif (this.lektorState.showAllVar) {\n\t\t\t\tthis.setShowAll()\n\t\t\t} else {\n\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[0].title = this.$capitalize(await this.$p.t('global/foto'))\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[1].title = this.$capitalize(await this.$p.t('global/prestudentID'))\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[2].title = this.$capitalize(await this.$p.t('person/vorname'))\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[3].title = this.$capitalize(await this.$p.t('person/nachname'))\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[4].title = this.$capitalize(await this.$p.t('lehre/gruppe'))\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns[6].title = this.$capitalize(await this.$p.t('global/summe'))\n\t\t\t\t\n\t\t\t\tthis.lektorState.tabulatorCols = anwCols\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(anwCols)\n\t\t\t\t\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData);\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t\tsetCurrentCountsFromTableData() {\n\t\t\t\n\t\t\tif(this.selectedDateCount === 1) {\n\t\t\t\tthis.queryOnlyKontrolleShown()\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tsetupLektorState() {\n\t\t\tthis.lektorState.students = this.$entryParams.lektorState.students\n\t\t\tthis.lektorState.anwEntries = this.$entryParams.lektorState.anwEntries\n\t\t\tthis.lektorState.stsem = this.$entryParams.lektorState.stsem\n\t\t\tthis.lektorState.entschuldigtStati = this.$entryParams.lektorState.entschuldigtStati\n\t\t\tthis.lektorState.kontrollen = this.$entryParams.lektorState.kontrollen\n\t\t\tthis.lektorState.viewData = this.$entryParams.lektorState.viewData\n\t\t\tthis.lektorState.a_o_kz = this.$entryParams.lektorState.a_o_kz\n\t\t\tthis.lektorState.gruppen = new Set()\n\t\t\t\n\t\t\t// put query params back into url for expected f5 behaviour\n\t\t\tfunction updateQueryParam(key, value) {\n\t\t\t\tconst url = new URL(window.location);\n\t\t\t\turl.searchParams.set(key, value);\n\t\t\t\twindow.history.replaceState({}, '', url);\n\t\t\t}\n\t\t\t\n\t\t\tupdateQueryParam('stg_kz', this.$entryParams.stg_kz);\n\t\t\tupdateQueryParam('sem', this.$entryParams.sem);\n\t\t\tupdateQueryParam('lvid', this.$entryParams.lv_id);\n\t\t\tupdateQueryParam('sem_kurzbz', this.$entryParams.sem_kurzbz);\n\n\t\t\tthis.$entryParams.lektorState = null\n\t\t\tthis.setupLektorComponent()\n\t\t},\n\t\tsetupData(data) {\n\t\t\tthis.lektorState.students = data[0] ?? []\n\t\t\tthis.lektorState.anwEntries = data[1] ?? []\n\t\t\tthis.lektorState.stsem = data[2][0] ?? []\n\t\t\tthis.lektorState.entschuldigtStati = data[3] ?? []\n\t\t\tthis.lektorState.kontrollen = data[4] ?? []\n\t\t\tthis.lektorState.kontrollen.forEach(k => {\n\t\t\t\tconst dateparts = k.datum.split(\".\")\n\t\t\t\tk.jsDate = new Date(dateparts[2],dateparts[1] - 1,dateparts[0])\n\t\t\t})\n\t\t\tthis.lektorState.viewData = data[5] ?? []\n\t\t\tthis.$entryParams.available_termine.value = this.getAvailableTermine()\n\t\t\tthis.lektorState.a_o_kz = data[7] ?? []\n\t\t\tthis.lektorState.gruppen = new Set()\n\n\t\t\tthis.setupLektorComponent()\n\t\t},\n\t\tgetAvailableTermine() {\n\t\t\tif(this.$entryParams.allLeTermine && this.$entryParams.allLeTermine[this.$entryParams.selected_le_id.value]) {\n\t\t\t\treturn this.$entryParams.allLeTermine[this.$entryParams.selected_le_id.value] ?? []\n\t\t\t} else {\n\t\t\t\t// this should never happen since we always have termine setup before LE but still handling the odd case\n\t\t\t\tthis.$fhcAlert.alertError(\"Keine Termine gefunden\")\n\t\t\t\treturn  []\n\t\t\t}\n\t\t},\n\t\tasync maUIDchangedHandler() {\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t// this.$refs.LEDropdown.resetData()\n\n\t\t\tthis.$emit('maUIDChanged')\n\t\t\tthis.handleLEChanged()\n\t\t},\n\t\topenNewAnwesenheitskontrolleModal() {\n\t\t\tthis.$refs.modalContainerNewKontrolle.show()\n\t\t},\n\t\tchangeAnwStatus(cell, prestudent_id) {\n\t\t\tconst value = cell.getValue()\n\t\t\tif (value === undefined) return\n\t\t\tlet date = cell.getColumn().getField() // '2024-10-16' or 'status'\n\t\t\tif (date === 'status') {\n\t\t\t\tdate = this.formatDateToDbString(this.selectedDate)\n\t\t\t}\n\n\t\t\tconst arrWrapped = this.lektorState.studentsData.get(prestudent_id)\n\t\t\tconst arr = JSON.parse(JSON.stringify(arrWrapped))\n\t\t\tconst found = arr.find(e => (e.datum + ' | ' + e.von + ' - ' + e.bis) === date)\n\t\t\tconst anwesenheit_user_id = found?.anwesenheit_user_id\n\t\t\tconst anwesenheit_id = found?.anwesenheit_id\n\t\t\tconst newEntry = {\n\t\t\t\tprestudent_id, date, status: value, anwesenheit_user_id, anwesenheit_id\n\t\t\t}\n\t\t\tthis.handleChange(newEntry)\n\t\t},\n\t\thandleChange(newEntry) {\n\n\t\t\t// check if the entry is in the original tableData with the same status\n\t\t\tconst student = this.lektorState.studentsData.get(newEntry.prestudent_id)\n\t\t\tconst original = student.find(v => (Reflect.get(v, 'datum') + ' | ' + Reflect.get(v, 'von') + ' - ' + Reflect.get(v, 'bis')) === newEntry.date)\n\t\t\tconst updateFoundIndex = this.changedData.findIndex(e => e.prestudent_id === newEntry.prestudent_id && e.date === newEntry.date)\n\t\t\tif (updateFoundIndex >= 0) {\n\t\t\t\tthis.changedData.splice(updateFoundIndex, 1)\n\t\t\t}\n\t\t\t\t\n\t\t\tif (newEntry.status !== original.status) {\n\t\t\t\tthis.changedData.push(newEntry)\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tvalidateTimespan(beginn, ende, date, anwesenheit_id = null) {\n\t\t\tconst newAnwVonDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), beginn.hours, beginn.minutes, beginn.seconds)\n\t\t\tconst newAnwBisDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), ende.hours, ende.minutes, ende.seconds)\n\t\t\t\n\t\t\tif (newAnwBisDate <= newAnwVonDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorValidateTimes'));\n\t\t\t\treturn false\n\t\t\t} else if(newAnwBisDate > newAnwVonDate) {\n\t\t\t\t// timespan from von to bis needs to be 3/4 of a teaching unit\n\t\t\t\tconst minDiff = (newAnwBisDate - newAnwVonDate) / (1000 * 60)\n\t\t\t\tconst threshold = (this.$entryParams.permissions.einheitDauer ?? 0.75 ) * 60\n\t\t\t\tif(minDiff < threshold) {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrollDauerUnterMindestwert', [threshold]));\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// when editing dont compare with overlap with its own timespan, but on same date\n\t\t\tlet kontrollenToCheck = null\n\t\t\tif(anwesenheit_id !== null) { \n\t\t\t\tkontrollenToCheck = this.lektorState.kontrollen.filter(k => k.anwesenheit_id !== anwesenheit_id && k.jsDate.getFullYear() === date.getFullYear() && k.jsDate.getMonth() === date.getMonth() && k.jsDate.getDate() === date.getDate())\n\t\t\t} else {\n\t\t\t\tkontrollenToCheck = this.lektorState.kontrollen.filter(k => k.jsDate.getFullYear() === date.getFullYear() && k.jsDate.getMonth() === date.getMonth() && k.jsDate.getDate() === date.getDate())\n\t\t\t}\n\t\t\t\n\t\t\t// compare timespans\n\t\t\tconst len = kontrollenToCheck.length\n\t\t\tfor(let i = 0; i < len; i++) {\n\t\t\t\tconst k = kontrollenToCheck[i]\n\t\t\t\t\n\t\t\t\tconst kVonParts = k.von.split(\":\")\n\t\t\t\tconst kBisParts = k.bis.split(\":\")\n\t\t\t\t\n\t\t\t\tconst kVonDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), kVonParts[0], kVonParts[1], kVonParts[2])\n\t\t\t\tconst kBisDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), kBisParts[0], kBisParts[1], kBisParts[2])\n\n\t\t\t\tif(newAnwVonDate < kBisDate && newAnwBisDate > kVonDate) {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleTimeOverlap', [k.von, k.bis]));\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// date of kontrolle needs to be in range or a stundenplantermin\n\t\t\tif(!this.kontrollDatumSourceStundenplan && this.selectedDate <= this.minDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleDatumOutOfRange'));\n\t\t\t\treturn false\n\t\t\t} else if(this.selectedDate > this.maxDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleDatumOutOfRange'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\t// compare with other existing kontrollen of the same day for current LE\n\n\t\t\treturn true;\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setupMounted() {\n\t\t\tthis.loading = true\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.boundPollAnwesenheit = this.pollAnwesenheit.bind(this)\n\t\t\tthis.boundRegenerateQR = this.regenerateQR.bind(this)\n\t\t\tthis.boundProgressCounter = this.progressCounter.bind(this)\n\n\t\t\t// ceiling to check for inside progress calc\n\t\t\tthis.progressMax = this.$entryParams.permissions.regenerateQRTimer / 10\n\t\t\t// which is called in an interval\n\t\t\tthis.progressTimerInterval = 10\n\n\t\t\t// see if test is still running\n\t\t\tthis.getExistingQRCode()\n\n\t\t\t// fetch LE data\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\n\t\t\tthis.reloadState(ma_uid, date)\n\t\t},\n\t\thandleLEChanged() {\n\t\t\tthis.$refs.showAllTickbox.checked = false\n\t\t\tthis.lektorState.showAllVar = false\n\t\t\t\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tthis.reloadState(ma_uid, date)\n\n\t\t\tthis.getExistingQRCode()\n\t\t},\n\t\tdownloadCSV() {\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.download('csv', this.getCSVFilename, {bom: true})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tredrawTable() {\n\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.redraw(true)\n\t\t},\n\t\tentschuldigtColoring: function (row) {\n\t\t\tconst data = row.getData()\n\t\t\t\n\t\t\tif(!data.entschuldigungen?.length) return\n\n\t\t\t// filter for entschuldigungen relevant to selected date\n\t\t\tconst entForSelectedDate = data.entschuldigungen.filter(status => {\n\t\t\t\tconst vonDate = new Date(status.von)\n\t\t\t\tconst bisDate = new Date(status.bis)\n\t\t\t\tif(vonDate <= this.selectedDate && bisDate >= this.selectedDate) return true\n\t\t\t\telse return false\n\t\t\t})\n\n\t\t\tlet isEntschuldigt = null\n\t\t\tentForSelectedDate.forEach(entCurDate => {\n\t\t\t\tif(entCurDate.akzeptiert === true) isEntschuldigt = true\n\t\t\t})\n\t\t\t\n\t\t\tif (isEntschuldigt) {\n\t\t\t\trow.getElement().style.color = \"#0335f5\";\n\t\t\t} else if(entForSelectedDate.length) {\n\t\t\t\trow.getElement().style.color = \"#12d5d5\";\n\t\t\t}\n\t\t},\n\t\ttogglePopOut() {\n\t\t\t// todo: handle BS backdrop\n\t\t\t\n\t\t\tif (!this.externalWindow) {\n\t\t\t\tthis.externalWindow = window.open(\"\", \"\", \"width=1000,height=1000\");\n\n\t\t\t\tconst container = document.createElement(\"div\");\n\t\t\t\tcontainer.id = \"externalModalContainer\";\n\t\t\t\tcontainer.style.setProperty('min-width', '100%')\n\t\t\t\tcontainer.style.setProperty('min-height', '100%')\n\t\t\t\tthis.externalModalContainer = container;\n\n\t\t\t\tconst toClone = document.getElementById('qrwrap')\n\n\t\t\t\t// const toClone = document.getElementById('qrcontent')\n\t\t\t\t// container.appendChild(toClone.cloneNode(true)) // breaks vue reactivity\n\t\t\t\tcontainer.appendChild(toClone)\n\t\t\t\t\n\t\t\t\tthis.externalWindow.document.body.appendChild(container);\n\n\t\t\t\tfor (const el of document.head.querySelectorAll('style, link[rel=stylesheet]')) {\n\t\t\t\t\tconst clone = el.cloneNode(true)\n\t\t\t\t\tthis.externalWindow.document.head.appendChild(clone)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Handle window close event, called in the end of close browser window, stop kontrolle and move back qr modal\n\t\t\t\tthis.externalWindow.addEventListener(\"beforeunload\", () => {\n\t\t\t\t\tthis.handleCloseExternalWindow()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.externalWindow.close()\n\t\t\t}\n\t\t},\n\t\thandleCloseExternalWindow() {\n\t\t\tconst qr = this.externalWindow.document.getElementById('qrwrap')\n\t\t\tconst main = document.getElementById('lektorWrap')\n\t\t\tmain.appendChild(qr)\n\n\t\t\tthis.externalWindow.close();\n\t\t\tthis.externalWindow = null;\n\t\t\tthis.externalModalContainer = null;\n\t\t},\n\t\tcheckForBetreuungAndAlert() {\n\t\t\t// throw an alert when Betreuung is selected which usually should not be attendance checked\n\n\t\t\tconst alertConfig = this.$entryParams.permissions.alert_lehrform.find(a => a.lehrform_kurzbz === this.$entryParams.selected_le_info?.value?.lehrform_kurzbz)\n\t\t\tif(alertConfig) {\n\t\t\t\tconst text = this.$entryParams.permissions.lang === 'German' ? alertConfig.german_alert_text : alertConfig.english_alert_text\n\t\t\t\tthis.$fhcAlert.alertWarning(text)\n\t\t\t}\n\t\t},\n\t\tcalculateTableHeight() {\n\t\t\t\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight : window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['lektor'].value = screenY - rect.top\n\n\t\t\tif(this.$refs.anwesenheitenTable.tabulator) this.$refs.anwesenheitenTable.tabulator.redraw(true)\n\t\t},\n\t\tdetermineDates() {\n\t\t\t// date string formatting\n\t\t\tconst selectedDateDBFormatted = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst dateParts = selectedDateDBFormatted.split(\"-\")\n\t\t\tconst selectedDateFrontendFormatted = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\n\t\t\t// standard -> show all termine of a certain date\n\t\t\tconst datesFiltered = this.lektorState.dates.filter(d => d.startsWith(selectedDateDBFormatted))\n\n\t\t\t// // fall back to all termine if on selected date none are found\n\t\t\t// if(!datesFiltered.length && this.lektorState.dates.length) { // dont spam alerts when LE just has no kontrollen yet\n\t\t\t\n\t\t\t// \tthis.$fhcAlert.alertWarning(this.$p.t('global/keineKontrollenAnDatumFallback', [selectedDateFrontendFormatted]))\n\t\t\t// \treturn this.lektorState.dates\n\t\t\t// }\n\n\t\t\treturn datesFiltered\n\t\t},\n\t\tbuildColsForDates(dates) {\n\t\t\tconst anwCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\n\t\t\tdates.forEach(d => {\n\t\t\t\tanwCols.push({\n\t\t\t\t\ttitle: d,\n\t\t\t\t\tfield: d,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tanwCols.push(this.anwesenheitenTabulatorOptions.columns[6])\n\t\t\t\n\t\t\tthis.selectedDateCount = dates.length\n\t\t\t\n\t\t\treturn anwCols\n\t\t},\n\t\trestartKontrolle(kontrolle) {\n\t\t\tconst kdate = new Date(kontrolle.datum)\n\t\t\t// js months 0-11, php months 1-12\n\t\t\tconst date = {\n\t\t\t\tyear: kdate.getFullYear(),\n\t\t\t\tmonth: kdate.getMonth() + 1,\n\t\t\t\tday: kdate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.restartKontrolle(kontrolle.anwesenheit_id,\n\t\t\t\tthis.$entryParams.selected_le_id.value,\n\t\t\t\tdate))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data?.svg) {\n\t\t\t\t\t\tthis.changes = true\n\t\t\t\t\t\tthis.$refs.modalContainerEditKontrolle.hide()\n\t\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tupdateKontrolle() {\n\t\t\tconst dataparts = this.editKontrolle.datum.split('.')\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tconst dateAnwFormat = dataparts[2] + '-' + dataparts[1] + '-' + dataparts[0]\n\n\t\t\tif (!this.validateTimespan(this.editKontrolle.editVon, this.editKontrolle.editBis, this.editKontrolle.jsDate, this.editKontrolle.anwesenheit_id)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.updateKontrolle(\n\t\t\t\tthis.editKontrolle.anwesenheit_id,\n\t\t\t\tthis.editKontrolle.editVon,\n\t\t\t\tthis.editKontrolle.editBis,\n\t\t\t\tthis.$entryParams.selected_le_id.value))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.meta.status === 'success') {\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/successSave'))\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst k = this.lektorState.kontrollen.find(k => k.anwesenheit_id === this.editKontrolle.anwesenheit_id)\n\t\t\t\t\t\tk.von = this.editKontrolle.editVon.hours + ':' + this.editKontrolle.editVon.minutes + ':' + this.editKontrolle.editVon.seconds\n\t\t\t\t\t\tk.bis = this.editKontrolle.editBis.hours + ':' + this.editKontrolle.editBis.minutes + ':' + this.editKontrolle.editBis.seconds\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.editKontrolle = null\n\t\t\t\t\t\t\n\t\t\t\t\t\t// reload tableData since different kontroll times means different % for all students\n\t\t\t\t\t\tthis.$api.call(\n\t\t\t\t\t\t\tApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(\n\t\t\t\t\t\t\t\tthis.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, dateAnwFormat))\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\topenKontrolleInfo() {\n\t\t\t\n\t\t},\n\t\thandleTitleSet(title) {\n\t\t\tthis.selectedStudent.title = title\n\t\t},\n\t\thandleUpdateAnwesenheit() {\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t// reload tableData to get state back\n\t\t\tthis.$api.call(\n\t\t\t\tApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(\n\t\t\t\t\tthis.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, date))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t\t}).finally(() => {\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t}\n\t\t\n\t},\n\tcreated(){\n\t\tthis.lv_id = this.$entryParams.lv_id\n\t\tthis.sem_kurzbz = this.$entryParams.sem_kurzbz\n\t\tthis.ma_uid = this.$entryParams.permissions.authID\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t\t\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted(){\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t\t// anwesenheitskontrolle could be active\n\t\tthis.stopPollingAnwesenheiten()\n\t},\n\twatch: {\n\t\tselectedDate(newVal) {\n\t\t\tif(newVal === \"\") {\n\t\t\t\tthis.selectedDate = new Date(Date.now())\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tconst dates = this.determineDates()\n\t\t\tconst anwCols = this.buildColsForDates(dates)\n\t\t\t\n\t\t\tthis.setCurrentCountsFromTableData()\n\n\t\t\tthis.handleChangeDatum(this.selectedDate) // look up if datum is in termin list\n\t\t\t\n\t\t\t// todo: range status anzeigen irgendwo\n\t\t\t// if(!this.kontrollDatumSourceStundenplan && newVal <= this.minDate) this.$fhcAlert.alertWarning(this.$p.t('global/kontrolleDatumOutOfRange'))\n\t\t\t// else if (!this.kontrollDatumSourceStundenplan && newVal > this.maxDate) this.$fhcAlert.alertWarning(this.$p.t('global/kontrolleDatumOutOfRange'))\n\n\t\t\tthis.lektorState.tabulatorCols = anwCols\n\t\t\t\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(anwCols)\n\n\t\t},\n\t\tselectedDateCount(newVal, oldVal) {\n\t\t\t// watch the nr of columns rendered on any given date,\n\t\t\t// if the amount is equal to all avaialble kontrollen tick the showAll box to avoid confusion\n\t\t\tif(newVal == this.lektorState.kontrollen.length) {\n\t\t\t\tthis.$refs.showAllTickbox.checked = true\n\t\t\t\tthis.lektorState.showAllVar = true\n\t\t\t} else {\n\t\t\t\tthis.$refs.showAllTickbox.checked = false\n\t\t\t\tthis.lektorState.showAllVar = false\n\t\t\t}\n\t\t\t\n\t\t\t// if just one kontrolle is selected query counts for that kontrolle\n\t\t\tif(newVal === 1) {\n\t\t\t\t\n\t\t\t\tthis.queryOnlyKontrolleShown()\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentLEhasRightToSkipQR() {\n\t\t\tif(!this.$entryParams.permissions.no_qr_lehrform || !this.$entryParams.permissions.no_qr_lehrform.length) return false\n\t\t\tif(!this.$entryParams.selected_le_info?.value) return false\n\t\t\treturn this.$entryParams.permissions.no_qr_lehrform.includes(this.$entryParams.selected_le_info?.value?.lehrform_kurzbz)\n\t\t},\n\t\tgetTitle() {\n\t\t\treturn this.$entryParams.selected_le_info?.value?.infoString ?? ''\n\t\t},\n\t\tgetTabulatorStyle(){\n\t\t\treturn \"transform: translateY(-\"+this.translateOffset+\"px); overflow: hidden;\"\n\t\t},\n\t\tgetTooltipKontrolleLoeschen() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLektorDeleteKontrolle', [this.$entryParams.permissions.kontrolleDeleteMaxReach ]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipKontrolleNeu() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLektorStartKontrolleV4', [(this.$entryParams.permissions.einheitDauer ?? 0.75) * 60]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipZeitFromStundenplan() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipUnterrichtZeitCustomV2'),//'Zeiten wurden aus dem Stundenplan entnommen, nur in Ausnahmefällen überschreiben!',\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipDatumFromStundenplan() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipUnterrichtDatumCustomV2'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipLegende() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLegende'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipCsv() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipCsv'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipEdit() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipEdit'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipSaveChanges() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipSaveChanges'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipRestartKontrolle() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipRestartKontrolle'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipDeleteKontrolle() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipDeleteKontrolle'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipEditKontrollzeiten() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipEditKontrollzeiten'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetSaveBtnClass() {\n\t\t\treturn !this.changedData.length ? \"btn btn-secondary ml-2\" : \"btn btn-primary ml-2\"\n\t\t},\n\t\tgetEditBtnClass() {\n\t\t\treturn !this.lektorState.kontrollen.length ? \"btn btn-secondary ml-2\" : \"btn btn-success ml-2\"\n\t\t},\n\t\tgetCSVFilename() {\n\t\t\tlet str = this.$entryParams.selected_le_info?.value?.csvInfoString ?? ''\n\t\t\tstr += '_'+ this.$entryParams?.viewDataLv?.bezeichnung + '_'\n\t\t\tstr += this.lektorState.showAllVar ? 'AllDates' : this.selectedDate.toDateString()\n\t\t\treturn str\n\t\t},\n\t\thighlights() { // highlight either kontrollen/termine/allowedRange based on setting\n\t\t\tconst highlights = []\n\t\t\tif(this.highlightMode === 'allowed') {\n\t\t\t\tconst current = new Date(this.minDate)\n\n\t\t\t\twhile (current <= this.maxDate) {\n\t\t\t\t\thighlights.push(new Date(current))\n\t\t\t\t\tcurrent.setDate(current.getDate() + 1)\n\t\t\t\t}\n\n\t\t\t\tif(this.$entryParams.available_termine.value) this.$entryParams.available_termine.value.forEach(v => {\n\t\t\t\t\thighlights.push(new Date(v.datum))\n\t\t\t\t})\n\t\t\t} else if (this.highlightMode === 'kontrollen') {\n\t\t\t\tthis.lektorState.kontrollen.forEach(v => {\n\t\t\t\t\thighlights.push(v.jsDate)\n\t\t\t\t})\n\t\t\t} else if (this.highlightMode === 'termine') {\n\t\t\t\tif(this.$entryParams.available_termine.value) this.$entryParams.available_termine.value.forEach(v => {\n\t\t\t\t\thighlights.push(new Date(v.datum))\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\n\t\t\treturn highlights\n\t\t}\n\t},\n\ttemplate:`\n\t\t<div v-show=\"loading\" style=\"position: absolute; width: 100vw; height: 100vh; background: rgba(255,255,255,0.5); z-index: 8500;\"></div>\n\t\t\n\t\t<core-base-layout>\t\t\t\n\t\t\t<template #main>\n\t\t\t\t<div id=\"lektorWrap\">\n\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerNewKontrolle\" class=\"bootstrap-prompt\" dialogClass=\"modal-xl\">\n\t\t\t\t\t\t<template v-slot:title>\t\t\t\n\t\t\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipKontrolleNeu\">\n\t\t\t\t\t\t\t\t{{ $p.t('global/neueAnwKontrolle') }}\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<h5>{{ $p.t('global/unterrichtzeit') }}</h5>\n\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"beginn\" class=\"form-label\">{{ $p.t('global/anwKontrolleVon') }}</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"lektorState.beginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeBeginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\" v-show=\"!kontrollZeitSourceStundenplanBeginn\" v-tooltip.bottom=\"getTooltipZeitFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation\"></i>\n\t\t\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 4px;\">{{ $p.t('global/zeitNichtAusStundenplanBeginnV2') }}</i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mt-2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"von\" class=\"form-label\">{{ $capitalize($p.t('global/anwKontrolleBis')) }}</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"lektorState.ende\"\n\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeEnde\"\n\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\" v-show=\"!kontrollZeitSourceStundenplanEnde\" v-tooltip.bottom=\"getTooltipZeitFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation\"></i>\n\t\t\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 4px;\">{{ $p.t('global/zeitNichtAusStundenplanEndeV2') }}</i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"row mt-2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-3 d-flex\" style=\"height: 40px; align-items: start; justify-items: center;\"><label for=\"datum\" class=\"form-label\">{{ $p.t('global/kontrolldatumV2') }}</label></div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\" style=\"height: 40px\">\n\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\tref=\"insideDateSelect\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"selectedDate\"\n\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t@date-update=\"handleAutoApply\"\n\t\t\t\t\t\t\t\t\t\t\t\t:highlight=\"highlights\">\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<template #action-row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"margin-left: 12px;\">{{ $p.t('global/highlightsettings') }}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"justify-content-center align-items-center flex-nowrap overflow-hidden\" style=\"display: flex; height: 80px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'termine'\" @click=\"highlightMode = 'termine';\">{{$p.t('global/termineV2')}} </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'kontrollen'\" @click=\"highlightMode = 'kontrollen';\">{{$p.t('global/kontrollen')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'allowed'\" @click=\"highlightMode = 'allowed';\">{{$p.t('global/allowed')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\" v-show=\"!kontrollDatumSourceStundenplan\" v-tooltip.bottom=\"getTooltipDatumFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation\"></i>\n\t\t\t\t\t\t\t\t\t\t\t<i style=\"margin-left: 4px;\">{{ $p.t('global/datumNichtAusStundenplanV2') }}</i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<Divider/>\n\t\t\t\t\t\t\t\t\t<div class=\"row align items center mt-8\">\n\t\t\t\t\t\t\t\t\t\t<TermineDropdown ref=\"termineDropdown\" @terminChanged=\"handleTerminChanged\"></TermineDropdown>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<button v-if=\"currentLEhasRightToSkipQR\" type=\"button\" class=\"btn btn-primary\" @click=\"insertAnwWithoutQR\">{{ $p.t('global/kontrolleOhneQR') }}</button>\n\t\t\t\t\t\t\t<button v-show=\"!showQRLoadingSpinner\" :disabled=\"qr != null\" type=\"button\" class=\"btn btn-primary\" @click=\"startNewAnwesenheitskontrolle\">{{ $p.t('global/jetztStarten') }}</button>\n\t\t\t\t\t\t\t<div v-show=\"showQRLoadingSpinner\">\n\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerEditKontrolle\" class=\"bootstrap-prompt\"\n\t\t\t\t\tdialogClass=\"modal-xl\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t\t{{ $p.t('global/editAnwKontrolle') }}\n\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<template v-for=\"kontrolle in lektorState.kontrollen\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"row p-2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-5 d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<KontrolleDisplay :kontrolle=\"kontrolle\"></KontrolleDisplay>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t<AnwCountDisplay :anwesend=\"kontrolle.anwesend\" :abwesend=\"kontrolle.abwesend\" :entschuldigt=\"kontrolle.entschuldigt\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-3 d-flex justify-content-end\">\n\t\t\t\t\t\t\t\t\t\t\t<button @click=\"restartKontrolle(kontrolle)\" role=\"button\" class=\"btn btn-secondary\" v-tooltip.bottom=\"getTooltipRestartKontrolle\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-rotate-right\"></i>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<button style=\"margin-left: 12px;\" @click=\"deleteAnwesenheitskontrolle(kontrolle)\" role=\"button\" class=\"btn btn-danger\" v-tooltip.bottom=\"getTooltipDeleteKontrolle\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-trash\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<button style=\"margin-left: 12px;\" @click=\"editAnwesenheitskontrolle(kontrolle)\" role=\"button\" class=\"btn btn-success\" v-tooltip.bottom=\"getTooltipEditKontrollzeiten\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-pen\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div v-if=\"editKontrolle && editKontrolle === kontrolle\" class=\"row align-items-center p-4\" style=\"border: 0px;\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"beginn\" class=\"form-label\">{{ $p.t('global/anwKontrolleVon') }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-9\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<datepicker v-if=\"editKontrolle\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"editKontrolle.editVon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeBeginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"von\" class=\"form-label\">{{ $capitalize($p.t('global/anwKontrolleBis')) }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-9\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<datepicker v-if=\"editKontrolle\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"editKontrolle.editBis\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeEnde\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center w-100 btn\" @click=\"updateKontrolle\">Speichern</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Divider/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\t\t\n\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerLegende\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ $p.t('global/statusLegende') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t<Statuslegende></Statuslegende>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerStudentByLva\" class=\"bootstrap-prompt\" dialogClass=\"modal-xl\" :allowFullscreenExpand=\"true\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ selectedStudent?.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t<StudentByLvaComponent ref=\"studentByLva\" v-if=\"selectedStudent\" \n\t\t\t\t\t\t\t\t@anwesenheitenUpdated=\"handleUpdateAnwesenheit\"\n\t\t\t\t\t\t\t\t@titleSet=\"handleTitleSet\"\n\t\t\t\t\t\t\t\t:id=\"selectedStudent.id\" \n\t\t\t\t\t\t\t\t:lv_id=\"selectedStudent.lv_id\"\n\t\t\t\t\t\t\t\t:sem_kz=\"selectedStudent.sem_kz\"\n\t\t\t\t\t\t\t></StudentByLvaComponent>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"qrwrap\">\n\t\t\t\t\t\t<bs-modal ref=\"modalContainerQR\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\"  backdrop=\"static\" \n\t\t\t\t\t\t :keyboard=false :noCloseBtn=\"true\" :allowFullscreenExpand=\"true\">\n\t\t\t\t\t\t\t<template v-slot:title>{{ $capitalize($p.t('global/kontrolle')) }}: {{ kontrolleVonBis }}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t\t<div id=\"qrcontent\">\n\t\t\t\t\t\t\t\t\t<h1 class=\"text-center\">Code: {{code}}</h1>\n\t\t\t\t\t\t\t\t\t<div v-html=\"qr\" class=\"text-center\"></div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<AnwCountDisplay :anwesend=\"checkInCount\" :abwesend=\"abwesendCount\" :entschuldigt=\"entschuldigtCount\"/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"width: 80%; margin-left: 10%;\">\n\t\t\t\t\t\t\t\t\t\t<progress \n\t\t\t\t\t\t\t\t\t\t\tv-if=\"$entryParams.permissions.useRegenerateQR\"\n\t\t\t\t\t\t\t\t\t\t\t:max=\"progressMax\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"regenerateProgress\">\n\t\t\t\t\t\t\t\t\t\t</progress>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"stopAnwesenheitskontrolle\">{{ $capitalize($p.t('global/endAnwKontrolle')) }}</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</bs-modal>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\" id=\"lektorContentHeader\" ref=\"lektorContentHeader\">\n\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"col-6\">\t\t\t\t\n\t\t\t\t\t\t\t<div style=\"display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;\">\n\t\t\t\t\t\t\t\t<h1 class=\"h4\">{{ $entryParams.selected_le_info?.value?.infoString ? getTitle : '' }}</h1>\n\t\t\t\t\t\t\t\t<h6>{{$entryParams.viewDataLv.bezeichnung}}</h6>\t\t\n\t\t\t\t\t\t\t\t<AnwCountDisplay  v-if=\"selectedDateCount == 1 & !lektorState?.showAllVar\" :anwesend=\"checkInCount\" :abwesend=\"abwesendCount\" :entschuldigt=\"entschuldigtCount\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\n\t\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<div class=\"col-5\" v-if=\"$entryParams?.permissions?.admin\" >\n\t\t\t\t\t\t\t\t\t<MaUIDDropdown  :title=\"$capitalize($p.t('lehre/lektor') )\" \n\t\t\t\t\t\t\t\t\t id=\"maUID\" ref=\"MADropdown\" @maUIDchanged=\"maUIDchangedHandler\">\n\t\t\t\t\t\t\t\t\t</MaUIDDropdown>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div :class=\" $entryParams?.permissions?.admin ? 'col-5' : 'col-10'\">\n\t\t\t\t\t\t\t\t\t<LehreinheitenDropdown id=\"lehreinheit\" :title=\"$capitalize($p.t('lehre/lehreinheit'))\" ref=\"LEDropdown\" @leChanged=\"handleLEChanged\">\n\t\t\t\t\t\t\t\t\t</LehreinheitenDropdown>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"row mt-4\">\n\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"col-2\" style=\"height: 40px; align-self: start;\"><label for=\"datum\" class=\"form-label\">{{ $p.t('global/kontrolldatumV2') }}</label></div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"height: 40px;\">\n\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\tref=\"outsideDateSelect\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"selectedDate\"\n\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\t\t\t\t\t@date-update=\"handleAutoApply\"\n\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t:highlight=\"highlights\">\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<template #action-row>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"margin-left: 12px;\">{{ $p.t('global/highlightsettings') }}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"justify-content-center align-items-center flex-nowrap overflow-hidden\" style=\"display: flex; height: 80px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'termine'\" @click=\"highlightMode = 'termine';\">{{$p.t('global/termineV2')}} </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'kontrollen'\" @click=\"highlightMode = 'kontrollen';\">{{$p.t('global/kontrollen')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'allowed'\" @click=\"highlightMode = 'allowed';\">{{$p.t('global/allowed')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-5\" style=\"height: 40px; align-items: center; display: flex;\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"width: 100%; align-items: center; justify-content: center;\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" style=\"max-width: 5%;\" @click=\"handleShowAllToggle\" id=\"all\" ref=\"showAllTickbox\">\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"all\" style=\"max-width: 90%;\">{{ $p.t('global/showAllKontrollen') }} | {{ selectedDateCount }} / {{ lektorState.kontrollen.length }}</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<core-filter-cmpt\n\t\t\t\t\t\ttitle=\"\"\n\t\t\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t\t\tref=\"anwesenheitenTable\"\n\t\t\t\t\t\t:tabulator-options=\"anwesenheitenTabulatorOptions\"\n\t\t\t\t\t\t:tabulator-events=\"anwesenheitenTabulatorEventHandlers\"\n\t\t\t\t\t\t:id-field=\"'anwesenheiten_id'\"\n\t\t\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t\t\t:newBtnShow=\"true\"\n\t\t\t\t\t\t:newBtnLabel=\"$p.t('global/neueAnwKontrolle')\"\n\t\t\t\t\t\t:newBtnDisabled=\"!lektorState.students.length\"\n\t\t\t\t\t\t@click:new=openNewAnwesenheitskontrolleModal\n\t\t\t\t\t\t:sideMenu=\"false\"\n\t\t\t\t\t\tnoColumnFilter>\n\t\t\t\t\t\t\t<template #actions>\n\t\t\t\t\t\t\t\t<button @click=\"saveChanges\" :disabled=\"!changedData.length\" role=\"button\" :class=\"getSaveBtnClass\" v-tooltip.bottom=\"getTooltipSaveChanges\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-save\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"openEditModal\" :disabled=\"!lektorState.kontrollen.length\" role=\"button\" :class=\"getEditBtnClass\" v-tooltip.bottom=\"getTooltipEdit\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-pen\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"downloadCSV\" role=\"button\" class=\"btn btn-secondary ml-2\" v-tooltip.bottom=\"getTooltipCsv\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file-csv\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"openLegend\" role=\"button\" class=\"btn btn-secondary ml-2\" v-tooltip.bottom=\"getTooltipLegende\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-book\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t</core-filter-cmpt>\t\n\t\t\t\t</div>\n\n\t\t\t</template>\n\t\t</core-base-layout>`\n\n};\n\nexport default LektorComponent","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsearch(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/search';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchAdvanced(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/searchAdvanced';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchdummy(searchsettings) {\n\t\tconst url = 'public/js/apps/api/dummyapi.php/Search';\n\t\treturn this.$fhcApi.post(url, searchsettings);\n\t}\n};\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/loadModule/' + category);\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst payload = {categories, language}\n\t\treturn this.$fhcApi.post('/api/frontend/v1/phrasen/setLanguage', payload);\n\t},\n\tgetLanguage() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getLanguage', {});\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getAllLanguages', {});\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/header',\n\t\t\t{ navigation_page }\n\t\t);\n\t},\n\tgetMenu: function(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/menu',\n\t\t\t{ navigation_page }\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/saveCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t);\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/applyFilterFields',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t);\n\t},\n\taddFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/addFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tgetFilter(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tabmeldung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/abmeldung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(stdsem, prestudent_id, grund) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/abmeldung/createAntrag', {\n\t\t\t\tstudiensemester: stdsem,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\tif (!Array.isArray(antrag_id))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t\t{ antrag_id }\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag_id.map(antrag => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t{ antrag_id: antrag.studierendenantrag_id },\n\t\t\t\t{ errorHeader: '#' + antrag.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t},\n\tunterbrechung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/unterbrechung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(studiensemester, prestudent_id, grund, datum_wiedereinstieg, attachment) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/createAntrag', {\n\t\t\t\tstudiensemester,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund,\n\t\t\t\tdatum_wiedereinstieg,\n\t\t\t\tattachment\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/cancelAntrag', {\n\t\t\t\tantrag_id\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t}\n\t},\n\twiederholung: {\n\t\tgetDetails(prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/' + prestudent_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tgetLvs(antrag_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getLvs/' + antrag_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tcreate(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/createAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/cancelAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tsaveLvs(forbiddenLvs, mandatoryLvs) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/saveLvs', {\n\t\t\t\tforbiddenLvs,\n\t\t\t\tmandatoryLvs\n\t\t\t});\n\t\t}\n\t},\n\tleitung: {\n\t\tgetStgs() {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getActiveStgs');\n\t\t},\n\t\tgetAntraege(url, config, params) {\n\t\t\treturn this.$fhcApi\n\t\t\t\t.get('/api/frontend/v1/studstatus/leitung/getAntraege/' + url)\n\t\t\t\t.then(res => res.data); // Return data for tabulator\n\t\t},\n\t\tgetHistory(antrag_id) {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getHistory/' + antrag_id)\n\t\t},\n\t\tgetPrestudents(query, signal) {\n\t\t\treturn this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/getPrestudents',\n\t\t\t\t{ query },\n\t\t\t\t{\n                                    signal: signal,\n                                    timeout: 30000\n                                }\n\t\t\t);\n\t\t},\n\t\tapprove(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treopen(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tunpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tobject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tapproveObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tdenyObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t}\n};","export default {\n\n  getView: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getView/${uid}`,{}\n    );\n  },\n\n  fotoSperre: function (value) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/fotoSperre/${value}`,\n      {}\n    );\n    \n  },\n\n  isStudent: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isStudent`,\n      {\n        uid:uid,\n      }\n    );\n  },\n\n  isMitarbeiter: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isMitarbeiter/${uid}`,\n      {}\n    );\n  },\n\n  getZustellAdresse: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellAdresse`,{}\n    );\n  },\n\n  getZustellKontakt: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellKontakt`,{}\n    );\n  },\n\n  getGemeinden: function(nation,zip){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getGemeinden/${nation}/${zip}`,\n      {}\n    );\n    \n  },\n  getAllNationen:function(){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      \"/api/frontend/v1/Profil/getAllNationen\",{}\n    );\n  },\n}","export default {\n    //! API calls for profil update requests\n  \n    getStatus: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getStatus`,{});\n    },\n  \n    getTopic: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getTopic`,{});\n    },\n  \n    acceptProfilRequest: function ({profil_update_id, uid, status_message, topic, requested_change}) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/acceptProfilRequest\",{profil_update_id, uid, status_message, topic, requested_change});\n    },\n  \n    denyProfilRequest: function ({profil_update_id, uid, topic, status_message}) {\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/denyProfilRequest\",{profil_update_id,uid,topic,status_message});\n    },\n  \n    insertFile: function (dms, replace = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/insertFile/${replace}`,\n        dms);\n\n    },\n    \n    getProfilRequestFiles: function (requestID) {\n      return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${requestID}`,{});\n    },\n  \n    selectProfilRequest: function (uid = null, id = null) {\n\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/selectProfilRequest`,\n        {...(uid?{uid}:{}),\n          ...(id?{id}:{})\n        });\n    },\n  \n    insertProfilRequest: function (topic, payload, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/insertProfilRequest\",\n        {\n          topic,\n          payload,\n          ...(fileID ? { fileID } : {}),\n        });\n    },\n  \n    updateProfilRequest: function (topic, payload, ID, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/updateProfilRequest`,\n        {\n          topic,\n          payload,\n          ID,\n          ...(fileID ? { fileID: fileID } : {}),\n        });\n    },\n  \n    deleteProfilRequest: function (requestID) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/deleteProfilRequest`,\n        {\n          requestID,\n        });\n    },\n  };\n  ","\nexport default {\n\tgetRoomInfo(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getRoomplan',\n\t\t\t{  ort_kurzbz, start_date, end_date}\n\t\t);\n\t},\n\tgetStunden() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/Stunden',\n\t\t\t{}\n\t\t);\n\t},\n\tgetOrtReservierungen(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/LvPlan/getReservierungen/${ort_kurzbz}`,\n\t\t\t{ start_date, end_date}\n\t\t);\n\t},\n\tgetLvPlanReservierungen(start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getReservierungen',\n\t\t\t{ start_date, end_date }\n\t\t);\n\t},\n\tgetLehreinheitStudiensemester(lehreinheit_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${lehreinheit_id}`,\n\t\t\t{}\n\t\t);\n\t},\n\tstudiensemesterDateInterval(date) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${date}`,\n\t\t\t{}\n\t\t);\n\t},\n\tLvPlanEvents(start_date, end_date, lv_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/LvPlanEvents',\n\t\t\t{ start_date, end_date, lv_id }\n\t\t);\n\t},\n\t\n\t\n};","import verband from './stv/verband.js';\nimport students from './stv/students.js';\nimport filter from './stv/filter.js';\nimport konto from './stv/konto.js';\nimport group from './stv/group.js';\nimport kontakt from './stv/kontakt.js';\nimport prestudent from './stv/prestudent.js';\nimport status from './stv/status.js';\nimport details from './stv/details.js';\nimport exam from './stv/exam.js';\nimport abschlusspruefung from './stv/abschlusspruefung.js';\nimport grades from './stv/grades.js';\nimport mobility from './stv/mobility.js';\nimport archiv from './stv/archiv.js';\nimport documents from './stv/documents.js';\nimport exemptions from './stv/exemptions.js';\nimport jointstudies from \"./stv/jointstudies.js\";\nimport courselist from './stv/courselist.js';\n\nexport default {\n\tverband,\n\tstudents,\n\tfilter,\n\tkonto,\n\tgroup,\n\tkontakt,\n\tprestudent,\n\tstatus,\n\tdetails,\n\texam,\n\tabschlusspruefung,\n\tgrades,\n\tmobility,\n\tarchiv,\n\tdocuments,\n\texemptions,\n\tjointstudies,\n\tcourselist,\n\tconfigStudent() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/student');\n\t},\n\tconfigStudents() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/students');\n\t}\n};\n","export default {\n\tget() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/verband');\n\t},\n\tfavorites: {\n\t\tget() {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/stv/favorites');\n\t\t},\n\t\tset(favorites) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/stv/favorites/set', {\n\t\t\t\tfavorites\n\t\t\t});\n\t\t}\n\t}\n}","export default {\n\tuid(uid, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/uid/'\n\t\t\t+ encodeURIComponent(uid);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tprestudent(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/prestudent/'\n\t\t\t+ encodeURIComponent(prestudent_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tperson(person_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/person/'\n\t\t\t+ encodeURIComponent(person_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tverband(relative_path) {\n\t\treturn this.$fhcApi.getUri('api/frontend/v1/stv/students/' + relative_path);\n\t}\n}","export default {\n\tgetStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/filter/getStg');\n\t},\n\tsetStg(studiengang_kz) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/filter/setStg', {\n\t\t\tstudiengang_kz\n\t\t});\n\t}\n};","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/konto/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id),\n\t\t\t\tonly_open: self.filter,\n\t\t\t\tstudiengang_kz: self.studiengang_kz_intern ? self.stg_kz : ''\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tcheckDoubles(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/checkDoubles', data, {\n\t\t\tconfirmErrorHandler: error => true\n\t\t});\n\t},\n\tinsert(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/insert', data);\n\t},\n\tcounter(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/counter', data);\n\t},\n\tedit(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/update', data);\n\t},\n\tdelete(buchungsnr) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/delete', {buchungsnr});\n\t},\n\tgetBuchungstypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/konto/getBuchungstypen');\n\t}\n};","export default {\n\tgetGruppen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/Gruppen/getGruppen/' + params.id);\n\t},\n\tdeleteGroup(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/Gruppen/deleteGruppe/', params);\n\t}\n}","export default {\n\t//------------- address.js-----------\n\tgetAdressen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressen/' + params.id);\n\t},\n\taddNewAddress(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewAddress/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadAddress(address_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadAddress/', {address_id});\n\t},\n\tupdateAddress(form, address_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateAddress/' + address_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteAddress(address_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteAddress/', {address_id});\n\t},\n\tgetPlaces(plz) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getPlaces/' + plz);\n\t},\n\tgetFirmen(searchString) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getFirmen/' + searchString);\n\t},\n\tgetNations() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getNations/');\n\t},\n\tgetAdressentypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressentypen/');\n\t},\n\n\t//------------- bankverbindung.js-----------\n\tgetBankverbindung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getBankverbindung/' + params.id);\n\t},\n\taddNewBankverbindung(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewBankverbindung/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadBankverbindung(bankverbindung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadBankverbindung/', {bankverbindung_id});\n\t},\n\tupdateBankverbindung(form, bankverbindung_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateBankverbindung/' + bankverbindung_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteBankverbindung(bankverbindung_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteBankverbindung/', {bankverbindung_id});\n\t},\n\n\t//------------- contact.js-----------\n\tgetKontakte (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakte/' + params.id);\n\t},\n\taddNewContact(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewContact/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadContact(kontakt_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadContact/', {kontakt_id});\n\t},\n\tupdateContact(form, kontakt_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateContact/' + kontakt_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteContact(kontakt_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteContact/', {kontakt_id});\n\t},\n\tgetStandorteByFirma(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getStandorteByFirma/' + searchString);\n\t},\n\tgetKontakttypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakttypen/');\n\t}\n};","export default {\n\n//------------- Prestudent.js------------------------------------------------------\n\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\treturn \tthis.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/prestudent/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t);\n\t},\n\tupdatePrestudent(form, prestudent_id, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/prestudent/updatePrestudent/' + prestudent_id,\n\t\t\tdata\n\t\t);\n\t},\n\tgetBezeichnungZGV() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungZGV/');\n\t},\n\tgetBezeichnungMZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungMZgv/');\n\t},\n\tgetBezeichnungDZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungDZgv/');\n\t},\n\tgetStgs() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStgs/');\n\t},\n\tgetAusbildung() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAusbildung/');\n\t},\n\tgetAufmerksamdurch() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAufmerksamdurch/');\n\t},\n\tgetBerufstaetigkeit() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBerufstaetigkeit/');\n\t},\n\tgetTypenStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getTypenStg/');\n\t},\n\tgetBisstandort() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBisstandort/');\n\t},\n\n//------------- MultiStatus.js------------------------------------------------------\n\tgetHistoryPrestudent (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getHistoryPrestudent/' + params.id);\n\t},\n\tgetMaxSem(studiengang_kzs) {\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/status/getMaxSemester/', {studiengang_kzs});\n\t},\n\tadvanceStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/advanceStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tconfirmStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/confirmStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tisLastStatus(id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/isLastStatus/' + id);\n\t},\n\tdeleteStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/deleteStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tgetLastBismeldestichtag() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getLastBismeldestichtag/');\n\t},\n\n//------------- History.js------------------------------------------------------\n\tgetHistoryPrestudents (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getHistoryPrestudents/' + params.id);\n\t},\n\n}","export default {\n\n//------------- Modal.js------------------------------------------------------\n\n\tinsertStatus(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/status/insertStatus/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/status/loadStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tupdateStatus(form, {prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}, data) {\n\t\treturn this.$fhcApi.post(\n\t\t\tform,\n\t\t\t'api/frontend/v1/stv/status/updateStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester,\n\t\t\tdata\n\t\t);\n\t},\n\tgetStudienplaene(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudienplaene/' + prestudent_id);\n\t},\n\tgetStudiengang(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudiengang/' + prestudent_id);\n\t},\n\tgetStatusgruende() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusgruende/');\n\t},\n\tgetStati() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStati/');\n\t},\n\n//------------- Dropdown.js------------------------------------------------------\n\n\taddStudent(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/addStudent/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tchangeStatus(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/changeStatus/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tgetStatusarray() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusarray/');\n\t}\n}","export default {\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/student/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(url);\n\t},\n\tsave(form, prestudent_id, studiensemester_kurzbz, data) {\n\t\tlet url = 'api/frontend/v1/stv/student/save/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(form, url, data);\n\t},\n}\n","export default {\n\tgetPruefungen(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getPruefungen/' + params.id);\n\t},\n\tloadPruefung(pruefung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/loadPruefung/' + pruefung_id);\n\t},\n\tgetTypenPruefungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getTypenPruefungen');\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/getAllLehreinheiten/', data)\n\t},\n\tgetLvsByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsByStudent/' + uid)\n\t},\n\tgetLvsandLesByStudent(uid, semester){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsandLesByStudent/' + uid + '/' + semester);\n\t},\n\tgetLvsAndMas(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsAndMas/' + uid)\n\t},\n\tgetMitarbeiterLv(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getMitarbeiterLv/' + id)\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getNoten');\n\t},\n\tcheckZeugnisnoteLv(data){\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/', data)\n\t},\n\taddPruefung(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/insertPruefung/',  data);\n\t},\n\tupdatePruefung(form, id, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/updatePruefung/' + id,  data);\n\t},\n\tdeletePruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/deletePruefung/' + id)\n\t}\n}","export default {\n\n\tgetAbschlusspruefung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/' + params.id);\n\t},\n\taddNewAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/', data\n\t\t);\n\t},\n\tloadAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/', {id});\n\t},\n\tupdateAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/', data\n\t\t);\n\t},\n\tdeleteAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/', {id});\n\t},\n\tgetTypenAbschlusspruefung(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/');\n\t},\n\tgetTypenAntritte(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/');\n\t},\n\tgetBeurteilungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/');\n\t},\n\tgetAkadGrade(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getAkadGrade/', {studiengang_kz});\n\t},\n\tgetTypStudiengang(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/', {studiengang_kz});\n\t},\n\tgetMitarbeiter(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/' + searchString);\n\t},\n\tgetPruefer(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getPruefer/' + searchString);\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getNoten/');\n\t},\n\tcheckForExistingExams(uids) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/', {uids}\n\t\t);\n\t}\n}","export default {\n\tlist() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/grades/list');\n\t},\n\tgetCertificate(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getCertificate/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetTeacherProposal(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getTeacherProposal/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetRepeaterGrades(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getRepeaterGrades/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tupdateCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, note, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/updateCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz,\n\t\t\t\tnote\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tdeleteCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/deleteCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyTeacherProposalToCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyTeacherProposalToCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id, lv_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate',\n\t\t\t{\n\t\t\t\tstudierendenantrag_lehrveranstaltung_id\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lv_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tgetGradeFromPoints(points, lehrveranstaltung_id, studiensemester_kurzbz, manualErrorHandling) {\n\t\tconst config = manualErrorHandling ? {errorHandling: false} : {};\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/grades/getGradeFromPoints',\n\t\t\t{\n\t\t\t\t\"points\": points,\n\t\t\t\t\"lehrveranstaltung_id\": lehrveranstaltung_id,\n\t\t\t\t\"studiensemester_kurzbz\": studiensemester_kurzbz\n\t\t\t},\n\t\t\tconfig\n\t\t\t);\n\t}\n}","export default {\n\tgetMobilitaeten (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getMobilitaeten/' + params.id);\n\t},\n\tgetProgramsMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getProgramsMobility/');\n\t},\n\taddNewMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/insertMobility/', data);\n\t},\n\tloadMobility(bisio_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/loadMobility/' + bisio_id);\n\t},\n\tupdateMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/updateMobility/', data);\n\t},\n\tdeleteMobility(bisio_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobility/' + bisio_id);\n\t},\n\tgetLVList(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLVList/' + studiengang_kz);\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/getAllLehreinheiten/', data)\n\t},\n\tgetLvsandLesByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLvsandLesByStudent/' + uid);\n\t},\n\tgetPurposes(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getPurposes/' + params.id);\n\t},\n\tgetSupports(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getSupports/' + params.id);\n\t},\n\tgetListPurposes() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListPurposes/');\n\t},\n\tgetListSupports() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListSupports/');\n\t},\n\tdeleteMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilityPurpose/' + params.bisio_id, params);\n\t},\n\taddMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilityPurpose/' + params.bisio_id, params);\n\t},\n\tdeleteMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilitySupport/' + params.bisio_id, params);\n\t},\n\taddMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilitySupport/' + params.bisio_id, params);\n\t},\n\n}","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/archiv/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id)\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tgetArchivVorlagen() {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/getArchivVorlagen');\n\t},\n\tarchive(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archive',\n\t\t\tdata\n\t\t);\n\t},\n\tarchiveSigned(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archiveSigned',\n\t\t\tdata\n\t\t);\n\t},\n\tupdate(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/update', data);\n\t},\n\tdelete({akte_id, studiengang_kz}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/delete', {akte_id, studiengang_kz});\n\t}\n};\n","export default {\n\tgetDocumentsUnaccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tgetDocumentsAccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsAccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tdeleteZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteZuordnung/' + params.prestudent_id + '/' + params.dokument_kurzbz);\n\t},\n\tcreateZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/createZuordnung/'\n\t\t\t+ params.prestudent_id + '/'\n\t\t\t+ params.dokument_kurzbz);\n\t},\n\tloadAkte(akte_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/loadAkte/' + akte_id);\n\t},\n\tgetDoktypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDoktypen/');\n\t},\n\tupdateFile(akte_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/updateAkte/' + akte_id,\n\t\t\tdata);\n\t},\n\tdeleteFile(akte_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteAkte/' + akte_id);\n\t},\n\tuploadFile(prestudent_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/uploadDokument/' + prestudent_id,\n\t\t\tdata);\n\t},\n}","export default {\n\tgetAnrechnungen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getAnrechnungen/' + params.id);\n\t},\n\tgetLehrveranstaltungen(prestudent_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/' + prestudent_id);\n\t},\n\tgetBegruendungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getBegruendungen/');\n\t},\n\tgetLvsKompatibel(lv_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLvsKompatibel/' + lv_id);\n\t},\n\tgetLektoren(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLektoren/' + studiengang_kz);\n\t},\n\taddNewAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/insertAnrechnung/', data);\n\t},\n\tloadAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/loadAnrechnung/' + anrechnung_id);\n\t},\n\teditAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/updateAnrechnung/', data);\n\t},\n\tdeleteAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/anrechnungen/deleteAnrechnung/' + anrechnung_id);\n\t},\n}","export default {\n\tgetStudies(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudien/' + params.id);\n\t},\n\tgetTypenMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/');\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/');\n\t},\n\tgetStudyprograms(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/');\n\t},\n\tgetListPartner(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/');\n\t},\n\tgetStatiPrestudent(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/');\n\t},\n\tloadStudy(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/loadStudie/' + id);\n\t},\n\tinsertStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/insertStudie/', data);\n\t},\n\tupdateStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/updateStudie/', data);\n\t},\n\tdeleteStudy(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/GemeinsameStudien/deleteStudie/' + id);\n\t},\n\n}","export default {\n\tgetCourselist(url, config, params) {\n\t\t//corresponding logic controller Stundenplan.php\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStundenplan/'\n\t\t\t+ params.student_uid + '/'\n\t\t\t+ params.start_date + '/'\n\t\t\t+ params.end_date + '/'\n\t\t\t+ params.group_consecutiveHours + '/'\n\t\t\t+ params.dbStundenplanTable\n\t\t);\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStudiensemester/');\n\t},\n}","import person from \"./notiz/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetNotizen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getNotizen/' + params.id + '/' + params.type);\n\t},\n\tgetUid(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getUid/');\n\t},\n\taddNewNotiz(form, id, formData) {\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/addNewNotiz/' + id,\n\t\t\tformData\n\t\t);\n\t},\n\tloadNotiz(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadNotiz/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tloadDokumente(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadDokumente/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tdeleteNotiz(notiz_id, type_id, id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/deleteNotiz/', {\n\t\t\tnotiz_id,\n\t\t\ttype_id,\n\t\t\tid\n\t\t});\n\t},\n\tupdateNotiz(form, notiz_id, formData){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/updateNotiz/' + notiz_id,\n\t\t\tformData\n\t\t);\n\t},\n\tgetMitarbeiter(event){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getMitarbeiter/' + event);\n\t},\n\tisBerechtigt(id, type_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/isBerechtigt/');\n\t}\n}","import person from \"./betriebsmittel/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetAllBetriebsmittel(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/' + params.type + '/' + params.id);\n\t},\n\taddNewBetriebsmittel(form, person_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/' +\n\t\t\tperson_id, formData\n\t\t);\n\t},\n\tloadBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/' + betriebsmittelperson_id);\n\t},\n\tupdateBetriebsmittel(form, betriebsmittelperson_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/' + betriebsmittelperson_id,\n\t\t\tformData);\n\t},\n\tdeleteBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/' +\tbetriebsmittelperson_id);\n\t},\n\tgetTypenBetriebsmittel(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/');\n\t},\n\tloadInventarliste(query){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/' +\tquery);\n\t}\n}","export default {\n\tupdatePersonUnrulyStatus(person_id, unrulyParam) {\n\n\t\ttry {\n\t\t\tconst payload = {person_id, unruly: unrulyParam}\n\t\t\tconst url = '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus';\n\t\t\treturn this.$fhcApi.post(url, payload, null);\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t},\n\tfilterPerson(payload, base = ''){\n\n\t\ttry {\n\t\t\tconst url = base + '/api/frontend/v1/checkperson/CheckPerson/filterPerson';\n\t\t\treturn axios.post(url, payload)\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t}\n}","export default {\n  getContentID(ort_kurbz) {\n\t\treturn this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            \"/api/frontend/v1/Ort/ContentID\",\n\t\t\t{ ort_kurzbz: ort_kurbz }\n\t\t);\n\t},\n\tgetRooms(datum, von, bis, typ, personenanzahl = 0) {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getRooms\",\n\t\t\t{ datum, von, bis, typ, personenanzahl }\n\t\t);\n\t},\n\tgetRoomTypes() {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getTypes\"\n\t\t);\n\t}\n}","export default {\n    content(content_id, version=null, sprache=null, sichtbar=null) {\n        return this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/content\",\n\t\t\t{ \n\t\t\t\tcontent_id: content_id,\n\t\t\t\t...(version?{version}:{}),\n\t\t\t\t...(sprache?{sprache}:{}),\n\t\t\t\t...(sichtbar?{sichtbar}:{}),\n            }\n        );\n    },\n\t//api function used for the news View that renders the html\n\tgetNews(page = 1, page_size = 10, sprache) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNews\",\n\t\t\t{\n\t\t\t\tpage,\n\t\t\t\tpage_size,\n\t\t\t\tsprache,\n\t\t\t},\n\t\t);\n\t},\n\t//api function used for the widget component\n\tnews(limit) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/news\",\n\t\t\t{\n\t\t\t\tlimit: limit\n\t\t\t}\n\t\t);\n\t},\n\tgetNewsRowCount: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNewsRowCount\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetNewsExtra: function(){\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getStudiengangInfoForNews\",\n\t\t\t{}\n\t\t);\n\t}\n  }","export default {\n    getStudentenMail(lehreinheit_id) {\n          return this.$fhcApi.get(\n              FHC_JS_DATA_STORAGE_OBJECT.app_root +\n              FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n              \"/api/frontend/v1/Lehre/lvStudentenMail\",\n              { lehreinheit_id: lehreinheit_id }\n          );\n      },\n\tgetLvInfo(studiensemester_kurzbz, lehrveranstaltung_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/LV/${studiensemester_kurzbz}/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentPruefungen(lehrveranstaltung_id){\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/Pruefungen/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektarbeiten(uid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektarbeiten/${uid}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektabgaben(detail) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektabgaben`\n\t\t\t, {\n\t\t\t\tprojektarbeit_id: detail.projektarbeit_id,\n\t\t\t\tstudent_uid: detail.student_uid\n\t\t\t}\n\t\t);\n\t},\n\tpostStudentProjektarbeitEndupload(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitEndupload';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tpostStudentProjektarbeitZwischenabgabe(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitZwischenabgabe';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tgetStudentProjektarbeitAbgabeFile(paabgabe_id, student_uid) {\n\t\tconst url = `/Cis/Abgabetool/getStudentProjektarbeitAbgabeFile?paabgabe_id=${paabgabe_id}&student_uid=${student_uid}`;\n\n\t\twindow.location = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + url\n\t},\n\tgetMitarbeiterProjektarbeiten(uid, all) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getMitarbeiterProjektarbeiten?showall=${all}`\n\t\t\t, {}\n\t\t);\n\t},\n\tpostProjektarbeitAbgabe(termin) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id: termin.paabgabe_id,\n\t\t\tpaabgabetyp_kurzbz: termin.bezeichnung.paabgabetyp_kurzbz,\n\t\t\tdatum: termin.datum,\n\t\t\tfixtermin: termin.fixtermin,\n\t\t\tinsertvon: termin.insertvon,\n\t\t\tkurzbz: termin.kurzbz,\n\t\t\tprojektarbeit_id: termin.projektarbeit_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t\t\n\t},\n\tdeleteProjektarbeitAbgabe(paabgabe_id) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/deleteProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tpostSerientermin(datum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids) {\n\t\tconst payload = {\n\t\t\tdatum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postSerientermin';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tfetchDeadlines(person_id) {\n\t\tconst payload = {\n\t\t\tperson_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/fetchDeadlines';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t}\n  }","export default {\n    getLvMenu(lvid, studiensemester_kurzbz) {\n        return this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            `/api/frontend/v1/LvMenu/getLvMenu/${lvid}/${studiensemester_kurzbz}`,\n            {}\n        );\n    },\n\n      \n  }","import person from \"./messages/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\t\tgetMessages(url, config, params) {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessages/' + params.id + '/' + params.type + '/' + params.size + '/' + params.page);\n\t\t},\n\t\tgetVorlagen(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getVorlagen/');\n\t\t},\n\t\tgetMsgVarsLoggedInUser(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/');\n\t\t},\n\t\tgetMessageVarsPerson(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessageVarsPerson/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetMsgVarsPrestudent(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsPrestudent/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPersonId(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getPersonId/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetUid(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getUid/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetVorlagentext(vorlage_kurzbz){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getVorlagentext/' + vorlage_kurzbz);\n\t\t},\n\t\tgetNameOfDefaultRecipient(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getNameOfDefaultRecipient/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPreviewText(params, data){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/getPreviewText/' + params.id + '/' + params.type_id,\n\t\t\t\tdata);\n\t\t},\n\t\tgetReplyData(messageId){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getReplyData/' + messageId);\n\t\t},\n\t\tsendMessageFromModalContext(form, id, data) {\n\t\t\treturn this.$fhcApi.post(form,'api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tsendMessage(id, data) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tdeleteMessage(messageId){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/deleteMessage/' + messageId);\n\t\t}\n}","export default {\n\tgetVorlagen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagen/');\n\t},\n\tgetVorlagenByLoggedInUser() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/');\n\t}\n}","export default {\n\n\tgetStudiensemester: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/components/Cis/Mylv/Studiensemester',\n\t\t\t{}\n\t\t);\n\t},\n\n\tgetAllStudienSemester: function (studiensemester=undefined, studiengang=undefined, semester=undefined, studienplan=undefined) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/Studium/getStudienAllSemester',\n\t\t\t{studiensemester, studiengang, semester, studienplan}\n\t\t);\n\t},\n\n\tgetStudiengaengeForStudienSemester: function (studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${studiensemester}`,\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudienplaeneBySemester: function (studiengang, studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudienplaeneBySemester`,\n\t\t\t{\n\t\t\t\tstudiengang,\n\t\t\t\tstudiensemester,\n\t\t\t}\n\t\t);\n\t},\n\tgetLvPlanForStudiensemester: function (studiensemester, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${studiensemester}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\tgetLvEvaluierungInfo: function (studiensemester_kurzbz, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getLvEvaluierungInfo/${studiensemester_kurzbz}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\t\n}","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport search from \"./search.js\";\nimport phrasen from \"./phrasen.js\";\nimport navigation from \"./navigation.js\";\nimport filter from \"./filter.js\";\nimport studstatus from \"./studstatus.js\";\nimport profil from \"./profil.js\";\nimport profilUpdate from \"./profilUpdate.js\";\nimport lvPlan from \"./lvPlan.js\";\nimport bookmark from \"./bookmark.js\";\nimport stv from \"./stv.js\";\nimport notiz from \"./notiz.js\";\nimport betriebsmittel from \"./betriebsmittel.js\";\nimport checkperson from \"./checkperson.js\";\nimport ampeln from \"./ampeln.js\";\nimport ort from \"./ort.js\";\nimport cms from \"./cms.js\";\nimport lehre from \"./lehre.js\";\nimport addons from \"./addons.js\";\nimport messages from \"./messages.js\";\nimport vorlagen from \"./vorlagen.js\";\nimport studiengang from \"./studiengang.js\";\nimport menu from \"./menu.js\";\nimport dashboard from \"./dashboard.js\";\nimport authinfo from \"./authinfo.js\";\nimport studium from \"./studium.js\";\nimport language from \"./language.js\";\n\nexport default {\n    search,\n    phrasen,\n    navigation,\n    dashboard,\n    filter,\n    studstatus,\n    profil,\n    profilUpdate,\n    lvPlan,\n    bookmark,\n    stv,\n    notiz,\n    betriebsmittel,\n    checkperson,\n    ampeln,\n    ort,\n    cms,\n    lehre,\n    addons,\n    messages,\n    vorlagen,\n    addons,\n\tstudiengang,\n\tmenu,\n\tauthinfo,\n\tstudium,\n    language\n};\n","export default {\n\tasync getViewData() {\n\t\tconst url = `/api/frontend/v1/Cis4FhcApi/getViewData`;\n\t\treturn this.$fhcApi.get(url, null, null)\n\t},\n}","export default {\n\n    getBookmarks: function () {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/getBookmarks`\n        ,{}\n      );\n    },\n  \n    delete: function (bookmark_id) {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/delete/${bookmark_id}`\n        ,{}\n      ); \n    },\n\n\tupdate: function ({ bookmark_id, url, title, tag=null}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/Bookmark/update/${bookmark_id}`\n\t\t\t, {\n\t\t\t\turl: url,\n\t\t\t\ttitle: title\n\t\t\t}\n\t\t);\n\t},\n\n    insert: function ({url, title, tag}) {\n      return this.$fhcApi.post(\n        `/api/frontend/v1/Bookmark/insert`\n        ,{\n          url: url,\n          title: title,\n          tag: tag\n        }\n      ); \n    },\n}","export default {\n    \n    open: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/open`,{});\n    },\n\n    all: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/all`,{});\n    },\n\n    confirm: function (ampel_id) {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/confirm/${ampel_id}`,{});\n    },\n\n}","export default {\n\tstudiengangInformation: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Studgang/getStudiengangInfo\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudiengangByKz: function (studiengang_kz) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz\",\n\t\t\t{\n\t\t\t\t\"studiengang_kz\": studiengang_kz\n\t\t\t}\n\t\t);\n\t}\n}","export default {\n\tgetMenu: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/CisMenu/getMenu\",\n\t\t\t{}\n\t\t);\n\t}\n\n}","\nexport default {\n\tgetAuthUID() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthUID',\n\t\t\t{ }\n\t\t);\n\t},\n\tgetAuthInfo() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthInfo',\n\t\t\t{}\n\t\t);\n\t},\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetAll() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/language/get');\n\t}\n};","/** TODO(chris):\n * when deleting this file be sure to\n * remove line 1 & 90 from ../plugins/Phrasen.js\n */\nimport FhcApiFactory from '../api/fhcapifactory.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$fhcApi) {\n\t\t\t/* Deprecated Code start */\n\t\t\tif (options?.factory) {\n\t\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\t\tapp.config.globalProperties.$fhcApi.factory.addEndpoints(options.factory);\n\t\t\t}\n\t\t\t/* Deprecated Code end */\n\t\t\treturn;\n\t\t}\n\n\t\tfunction _get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\n\t\tfunction _clean_return_value(response) {\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = {response};\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tconst baseURL = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\";\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(response => {\n\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\treturn _clean_return_value(response);\n\n\t\t\t// NOTE(chris): loop through errors\n\t\t\tif (response.data.errors)\n\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t);\n\n\t\t\treturn _clean_return_value(response);\n\t\t}, error => {\n\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\n\t\t\tif (error.config?.errorHandling == 'off'\n\t\t\t\t|| error.config?.errorHandling === false\n\t\t\t\t|| error.config?.errorHandling == 'success')\n\t\t\t\treturn Promise.reject(error);\n\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL, true);\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t\t}\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\terror.response.data.errors = error.response.data.errors.filter(\n\t\t\t\t\terr => (error.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, error.config)\n\t\t\t\t);\n\t\t\t\tif (!error.response.data.errors.length)\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else if (error.request) {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertError(error.message);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t}\n\n\t\t\treturn Promise.reject(error);\n\t\t});\n\n\t\tapp.config.globalProperties.$fhcApi = {\n\t\t\tgetUri(url) {\n\t\t\t\tconsole.warn('$fhcApi.getUri is DEPRECATED! Use $api.getUri instead.');\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\tconsole.warn('$fhcApi.get is DEPRECATED! Use $api.get instead.');\n\t\t\t\t[uri, params, config] = _get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\tconsole.warn('$fhcApi.post is DEPRECATED! Use $api.post instead.');\n\t\t\t\t[uri, data, config] = _get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\t_defaultErrorHandlers: {\n\t\t\t\tvalidation(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form) {\n\t\t\t\t\t\tconfig.form.clearValidation();\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.messages);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(error.messages)) {\n\t\t\t\t\t\terror.messages.forEach($fhcAlert.alertError);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (typeof error.messages == 'object') {\n\t\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t\tObject.values(error.messages).forEach(\n\t\t\t\t\t\t\t\tvalue => $fhcAlert.alertDefault(\n\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tObject.entries(error.messages).forEach(\n\t\t\t\t\t\t\t\t([key, value]) => $fhcAlert.alertDefault('error', key, value, true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgeneral(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form)\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.message);\n\t\t\t\t\telse if (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertError(error.message);\n\t\t\t\t},\n\t\t\t\tphp(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('warn', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('info', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texception(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tdb(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tauth(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertDefault('error', error.message, message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/* Deprecated Code start */\n\t\tclass FhcApiFactoryWrapper {\n\t\t\tconstructor(factorypart, root) {\n\t\t\t\tif (root === undefined) {\n\t\t\t\t\tthis.$fhcApi = {\n\t\t\t\t\t\tgetUri(url) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.getUri(url);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(form, uri, params, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.get(form, uri, params, config);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpost(form, uri, data, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.post(form, uri, data, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tObject.defineProperty(this.$fhcApi, 'factory', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.factory;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.config.globalProperties.$fhcApi.factory = this;\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, '$fhcApi', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn (root || this).$fhcApi;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.addEndpoints(factorypart, true)\n\t\t\t}\n\n\t\t\taddEndpoints(factorypart, noWarn) {\n\t\t\t\tObject.keys(factorypart).forEach(key => {\n\t\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tif (typeof factorypart[key] == 'function')\n\t\t\t\t\t\t\t\treturn factorypart[key].bind(this);\n\t\t\t\t\t\t\treturn new FhcApiFactoryWrapper(factorypart[key], this.$fhcApi.factory);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (!noWarn) console.warn('$fhcApi.factory.addEndpoints() is DEPRECATED!');\n\t\t\t}\n\t\t}\n\n\t\tconst factory = new FhcApiFactoryWrapper(FhcApiFactory);\n\t\tif (options?.factory) {\n\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\tfactory.addEndpoints(options.factory);\n\t\t}\n\n\t\tapp.config.globalProperties.$fhcApi.factory = factory;\n\t\t/* Deprecated Code end */\n\t\t\n\t\tapp.provide('$fhcApi', app.config.globalProperties.$fhcApi);\n\t}\n};","import FhcAlert from './FhcAlert.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$api) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!app.config.globalProperties.$fhcAlert)\n\t\t\tapp.use(FhcAlert);\n\n\t\tfunction _send_array_or_object(errors, func) {\n\t\t\tif (Array.isArray(errors))\n\t\t\t\terrors.forEach(func);\n\t\t\telse\n\t\t\t\tObject.entries(errors).forEach(\n\t\t\t\t\t([title, errs]) => errs.forEach(\n\t\t\t\t\t\terror => func(error, title)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\t\tlet DEFAULT_ERROR_CONFIG = {\n\t\t\tsuccess: true,\n\t\t\tfail: true,\n\t\t\tcombine: {\n\t\t\t\tform: ['validation', 'general'],\n\t\t\t\ttoast: ['validation', 'general', 'not_found', 'site_failed']\n\t\t\t},\n\t\t\thandler: {\n\t\t\t\tform(form, errors) {\n\t\t\t\t\tform.clearValidation();\n\t\t\t\t\terrors.forEach(err => form.setFeedback(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\terr.messages || err.message\n\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t\tasync toast(errors) {\n\t\t\t\t\tconst $p = app.config.globalProperties.$p;\n\t\t\t\t\tif (!$p)\n\t\t\t\t\t\treturn Promise.reject('Phrasen plugin not loaded!');\n\t\t\t\t\n\t\t\t\t\tasync function _format_toast(errors) {\n\t\t\t\t\t\terrors = errors.reduce((result, err) => {\n\t\t\t\t\t\t\tswitch (err.type) {\n\t\t\t\t\t\t\tcase 'not_found':\n\t\t\t\t\t\t\tcase 'site_failed':\n\t\t\t\t\t\t\t\tif (err.message)\n\t\t\t\t\t\t\t\t\tresult[err.message] = [err.url];\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tresult._default = [err.url];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'general':\n\t\t\t\t\t\t\t\tif (!result._default)\n\t\t\t\t\t\t\t\t\tresult._default = [];\n\t\t\t\t\t\t\t\tresult._default.push(err.message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'validation':\n\t\t\t\t\t\t\t\tObject.entries(err.messages)\n\t\t\t\t\t\t\t\t\t.forEach(([field, msg]) => {\n\t\t\t\t\t\t\t\t\t\tif (!result[field])\n\t\t\t\t\t\t\t\t\t\t\tresult[field] = [];\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(msg))\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(...msg);\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(msg);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tlet counter = 0;\n\t\t\t\t\t\tconst msgs = await Promise.all(Object.entries(errors)\n\t\t\t\t\t\t\t.sort((a, b) => ['_default'].indexOf(b[0]) - ['_default'].indexOf(a[0])) // sort _default first\n\t\t\t\t\t\t\t.map(async ([field, msgs]) => {\n\t\t\t\t\t\t\t\tif (field == '_default') {\n\t\t\t\t\t\t\t\t\tawait $p.loadCategory('dashboard');\n\t\t\t\t\t\t\t\t\tconst general = $p.t('dashboard/general');\n\t\t\t\t\t\t\t\t\tfield = '<dt class=\"d-none\">' + general + '</dt>';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfield = '<dt>' + field + '</dt>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcounter += msgs.length;\n\t\t\t\t\t\t\t\treturn field\n\t\t\t\t\t\t\t\t\t+ '<dd>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('</dd><dd>')\n\t\t\t\t\t\t\t\t\t+ '</dd>';\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcounter,\n\t\t\t\t\t\t\tmsgs\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet counter, msgs;\n\t\t\t\t\tif (Array.isArray(errors)) {\n\t\t\t\t\t\t({ counter, msgs } = await _format_toast(errors));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t({ counter, msgs } = await Object.entries(errors)\n\t\t\t\t\t\t\t.reduce(async (res, [title, errs]) => {\n\t\t\t\t\t\t\t\tconst result = await res;\n\t\t\t\t\t\t\t\tconst { counter, msgs } = await _format_toast(errs);\n\t\t\t\t\t\t\t\tresult.counter += counter;\n\t\t\t\t\t\t\t\tresult.msgs.push('<dt>'\n\t\t\t\t\t\t\t\t\t+ title\n\t\t\t\t\t\t\t\t\t+ '</dt><dd><dl>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('')\n\t\t\t\t\t\t\t\t\t+ '</dl></dd>');\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}, Promise.resolve({ counter: 0, msgs: []})));\n\t\t\t\t\t}\n\n\t\t\t\t\tawait $p.loadCategory('ui');\n\t\t\t\t\tconst n_errors = $p.t('ui/n_errors', { n: counter });\n\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\tn_errors,\n\t\t\t\t\t\t'<dl>' + msgs.join('') + '</dl>',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tphp(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('warn', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('info', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\tmessage = title + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\texception(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tdb(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tauth(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\ttitle += ': ' + error.message;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttitle = error.message;\n\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options?.errorHandling !== undefined)\n\t\t\tDEFAULT_ERROR_CONFIG = _merge_error_config(options.errorHandling);\n\t\t\n\t\tfunction get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\t\tfunction clean_return_value(response) {\n\t\t\tif (typeof response.data === 'string' || response.data instanceof String)\n\t\t\t\treturn clean_return_value({ data: response });\n\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result)\n\t\t\t\treturn {meta: {response}, data: null};\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = { response };\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tfunction _merge_error_config(config) {\n\t\t\tif (config === false || config === 'off')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false, fail: false };\n\t\t\t\n\t\t\tif (!config || config === true)\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tif (config === 'success')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, fail: false };\n\t\t\t\n\t\t\tif (config === 'fail')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false };\n\t\t\t\n\t\t\tconst { success, fail, handler, combine } = config;\n\t\t\t\n\t\t\tconfig = { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tObject.entries({ fail, success }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = value;\n\t\t\t});\n\t\t\tObject.entries({ handler, combine }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = { ...config[key], ...value };\n\t\t\t});\n\n\t\t\treturn config;\n\t\t}\n\t\tfunction get_error_handler(config) {\n\t\t\tconst result = _merge_error_config(config?.errorHandling);\n\n\t\t\tif (!config?.form) {\n\t\t\t\tresult.combine = { ...result.combine, form: [] };\n\t\t\t} else {\n\t\t\t\tconst formHandler = result.handler.form;\n\t\t\t\tresult.handler = { ...result.handler, form: errors => formHandler(config.form, errors) };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tfunction get_error_list(error) {\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\ttype: 'not_found',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tif (error.response.data.errors == undefined) return [];\n\t\t\t\t\treturn error.response.data.errors;\n\t\t\t\t}\n\t\t\t} else if (error.request) {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'site_failed',\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'script',\n\t\t\t\t\tmessage: error.message\n\t\t\t\t}];\n\t\t\t}\n\t\t}\n\t\tfunction popHandleableErrors(errorHandling, errors) {\n\t\t\tconst result = {};\n\t\t\tconst copy = [];\n\n\t\t\tif (errors == undefined) return {};\n\n\t\t\twhile (errors.length)\n\t\t\t\tcopy.push(errors.pop());\n\t\t\tfor (var error of copy) {\n\t\t\t\tlet type = error.type;\n\t\t\t\tlet newType = null;\n\t\t\t\tfor (var t in errorHandling.combine) {\n\t\t\t\t\tlet newTypeCombinesType = errorHandling\n\t\t\t\t\t\t.combine[t]\n\t\t\t\t\t\t.includes(type);\n\t\t\t\t\tlet newTypeHasHandler = errorHandling.handler[t];\n\t\t\t\t\tif (newTypeCombinesType && newTypeHasHandler) {\n\t\t\t\t\t\tnewType = t;\n\t\t\t\t\t\tif (newType == 'form')\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (newType)\n\t\t\t\t\ttype = newType;\n\t\t\t\tconst handler = errorHandling.handler[type];\n\t\t\t\tif (handler) {\n\t\t\t\t\tif (!result[type])\n\t\t\t\t\t\tresult[type] = [];\n\t\t\t\t\tif (Array.isArray(error))\n\t\t\t\t\t\tresult[type].push(...error);\n\t\t\t\t\telse\n\t\t\t\t\t\tresult[type].push(error);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\terrors.push(error);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t+ FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(\n\t\t\tresponse => {\n\t\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\t\treturn clean_return_value(response);\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\tif (response.data.errors)\n\t\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$api._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t\t);\n\n\t\t\t\treturn clean_return_value(response);\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\n\t\t\t\tconst errorConfig = get_error_handler(error.config);\n\n\t\t\t\tif (!errorConfig.fail)\n\t\t\t\t\treturn Promise.reject(error);\n\n\t\t\t\tconst remaining = get_error_list(error);\n\n\t\t\t\tconst errors = popHandleableErrors(errorConfig, remaining);\n\n\t\t\t\tfor (var type in errors) {\n\t\t\t\t\terrorConfig.handler[type](errors[type]);\n\t\t\t\t}\n\n\t\t\t\tif (remaining.length)\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\n\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\t\t\t}\n\t\t);\n\n\t\tapp.config.globalProperties.$api = {\n\t\t\tgetUri(url) {\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\t[uri, params, config] = get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\t[uri, data, config] = get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\tcall(factory, configoverwrite, form) {\n\t\t\t\tif (Array.isArray(factory)) {\n\t\t\t\t\tconst $api = app.config.globalProperties.$api;\n\n\t\t\t\t\treturn Promise\n\t\t\t\t\t\t.allSettled(factory.map((config, index) => {\n\t\t\t\t\t\t\tif (!Array.isArray(config))\n\t\t\t\t\t\t\t\tconfig = ['#' + index, config];\n\t\t\t\t\t\t\treturn $api.call(config[1], {\n\t\t\t\t\t\t\t\terrorHeader: config[0],\n\t\t\t\t\t\t\t\terrorHandling: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\tconst [ , , config ] = get_config(form, undefined, undefined, configoverwrite || {});\n\t\t\t\t\t\t\tconst errorConfig = get_error_handler(config);\n\n\t\t\t\t\t\t\tif (!errorConfig.success && !errorConfig.fail) {\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst typedErrors = {};\n\t\t\t\t\t\t\tfor (var res of result) {\n\t\t\t\t\t\t\t\tconst [ allowed, item ] = res.status === 'fulfilled'\n\t\t\t\t\t\t\t\t\t? [ errorConfig.success, res.value ]\n\t\t\t\t\t\t\t\t\t: [ errorConfig.fail, res.reason ];\n\t\t\t\t\t\t\t\tif (!allowed)\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tconst errors = popHandleableErrors(errorConfig, get_error_list(item));\n\n\t\t\t\t\t\t\t\tfor (var type in errors) {\n\t\t\t\t\t\t\t\t\tif (!typedErrors[type])\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type] = {\n\t\t\t\t\t\t\t\t\t\t\t[item.config.errorHeader]: errors[type]\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type][item.config.errorHeader] = errors[type];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var errType in typedErrors) {\n\t\t\t\t\t\t\t\terrorConfig.handler[errType](typedErrors[errType]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet { method, url, params, config } = factory;\n\t\t\t\tif (configoverwrite !== undefined) {\n\t\t\t\t\tconfig = configoverwrite;\n\t\t\t\t}\n\t\t\t\tif (!method) {\n\t\t\t\t\tmethod = 'get';\n\t\t\t\t}\n\t\t\t\tif (method.toLowerCase)\n\t\t\t\t\tmethod = method.toLowerCase();\n\t\t\t\tif (method == 'get') {\n\t\t\t\t\treturn this.get(form, url, params, config);\n\t\t\t\t} else if (method == 'post') {\n\t\t\t\t\treturn this.post(form, url, params, config);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"FhcApi: method not allowed:\", method);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tapp.provide('$api', app.config.globalProperties.$api);\n\t}\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/loadModule/' + category\n\t\t};\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst params = {categories, language}\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/phrasen/setLanguage',\n\t\t\tparams\n\t\t};\n\t},\n\tgetLanguage() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getLanguage'\n\t\t};\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getAllLanguages'\n\t\t};\n\t}\n};","import OldFhcApi from '../plugin/OldFhcApi.js'; // TODO(chris): remove at some point\nimport PluginsApi from './Api.js';\nimport ApiPhrasen from '../api/factory/phrasen.js';\n\nconst categories = Vue.reactive({});\nconst loadingModules = {};\nlet user_language = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language);\nexport let user_locale = Vue.computed(()=>{\n\tif(!user_language.value) return null;\n\treturn FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(language => language.sprache == user_language.value).LC_Time;\n});\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\nconst phrasen = {\n\tuser_language,\n\tuser_locale,\n\tsetLanguage(language) {\n\t\tconst catArray = Object.keys(categories)\n\t\treturn this.config.globalProperties.$api\n\t\t\t.call(ApiPhrasen.setLanguage(catArray, language))\n\t\t\t.then(res => {\n\t\t\t\tres.data.forEach(row => {\n\t\t\t\t\tcategories[row.category][row.phrase] = row.text\n\t\t\t\t})\n\n\t\t\t\t// update the reactive data that holds the current active user_language\n\t\t\t\tuser_language.value = language;\n\n\t\t\t\treturn res\n\t\t\t})\n\t},\n\tloadCategory(category) {\n\t\tif (Array.isArray(category))\n\t\t\treturn Promise.all(category.map(this.config.globalProperties\n\t\t\t\t.$p.loadCategory));\n\n\t\tif (!loadingModules[category])\n\t\t\tloadingModules[category] = this.config.globalProperties.$api\n\t\t\t\t.call(ApiPhrasen.loadCategory(category))\n\t\t\t\t.then(res => res?.data ? extractCategory(res.data, category) : {})\n\t\t\t\t.then(res => {\n\t\t\t\t\tcategories[category] = res;\n\t\t\t\t});\n\t\treturn loadingModules[category];\n\t},\n\tt_ref(category, phrase, params) {\n\t\tconsole.warn('deprecated');\n\t\treturn Vue.computed(() => this.t(category, phrase, params));\n\t},\n\tt(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input', category, phrase, params);\n\t\t\treturn '';\n\t\t}\n\t\tlet val = Vue.computed(() => {\n\t\t\tif (!categories[category])\n\t\t\t\treturn '';\n\t\t\treturn getValueForLoadedPhrase(category, phrase, params);\n\t\t});\n\t\tif (!categories[category])\n\t\t\tthis.loadCategory(category);\n\t\treturn val.value;\n\t}\n};\n\nexport default {\n\tinstall(app, options) {\n\t\tif (!app.config.globalProperties.$fhcApi)\n\t\t\tapp.use(OldFhcApi); // TODO(chris): remove at some point\n\t\tif (!app.config.globalProperties.$api)\n\t\t\tapp.use(PluginsApi);\n\t\tapp.config.globalProperties.$p = {\n\t\t\tt: phrasen.t,\n\t\t\tloadCategory: cat => phrasen.loadCategory.call(app, cat),\n\t\t\tsetLanguage: lang => phrasen.setLanguage.call(app, lang),\n\t\t\tuser_language: user_language,\n\t\t\tuser_locale,\n\t\t\tt_ref: phrasen.t_ref\n\t\t};\n\t\tapp.provide('$p', app.config.globalProperties.$p);\n\t}\n}","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n//--------------------------------------------------------------------------------------------------------------------\n// Configs\n\n// To see debug messages into the browser console set this parameter as true\nconst CORE_REST_CLIENT_DEBUG = false;\n\n// Default timeout (milliseconds)\nconst CORE_REST_CLIENT_TIMEOUT = 5000;\n\n//--------------------------------------------------------------------------------------------------------------------\n// Constants\n\n// Success\nconst CORE_REST_CLIENT_SUCCESS = 0;\n\n// Properties present in a response\nconst CORE_REST_CLIENT_ERROR = \"error\";\nconst CORE_REST_CLIENT_RETVAL = \"retval\";\n\n// HTTP method parameters\nconst CRC_HTTP_GET_METHOD = \"get\";\nconst CRC_HTTP_POST_METHOD = \"post\";\n\n/**\n * Definition and initialization of the object CoreRESTClient\n */\nexport const CoreRESTClient = {\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Public methods\n\n\t/**\n\t * Performs a call using the HTTP GET method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tget: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_GET_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Performs a call using the HTTP POST method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tpost: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_POST_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Checks if the response is a success\n\t */\n\tisSuccess: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR)\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL) && response.error == CORE_REST_CLIENT_SUCCESS)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Checks if the response is an error\n\t */\n\tisError: function(response) {\n\t\treturn !CoreRESTClient.isSuccess(response);\n\t},\n\n\t/**\n\t * Checks if the response has data\n\t */\n\thasData: function(response) {\n\n\t\tif (CoreRESTClient.isSuccess(response))\n\t\t{\n\t\t\tif ((typeof response[CORE_REST_CLIENT_RETVAL] === \"object\" && Object.keys(response[CORE_REST_CLIENT_RETVAL]).length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"array\" && response[CORE_REST_CLIENT_RETVAL].length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"string\" && response[CORE_REST_CLIENT_RETVAL].trim() != \"\")\n\t\t\t\t|| typeof response[CORE_REST_CLIENT_RETVAL] === \"number\")\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Retrives data from response object\n\t */\n\tgetData: function(response) {\n\n\t\tif (CoreRESTClient.hasData(response))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Retrives error message from response object\n\t */\n\tgetError: function(response) {\n\n\t\tif (typeof response === \"object\"\n\t\t\t&& Object.keys(response).length > 0\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn \"Generic error\";\n\t},\n\n\t/**\n\t * Retrives code from response object\n\t */\n\tgetErrorCode: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_ERROR];\n\t\t}\n\n\t\treturn 1; // Generic error\n\t},\n\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Private methods\n\n\t/**\n\t * Generate the router URI using the connection parameters\n\t */\n\t_generateRouterURI: function(wsURL) {\n\t\tvar uri = null;\n\n\t\t// Checks if global JS object FHC_JS_DATA_STORAGE_OBJECT exists\n\t\tif (typeof FHC_JS_DATA_STORAGE_OBJECT !== \"undefined\")\n\t\t{\n\t\t\turi = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\" + wsURL;\n\t\t}\n\n\t\treturn uri;\n\t},\n\n\t/**\n\t * Method to print debug info after a controller has been called\n\t */\n\t_printDebug: function(parameters, response, errorThrown) {\n\n\t\tif (CORE_REST_CLIENT_DEBUG === true) // If global const CORE_REST_CLIENT_DEBUG is true, but really true!\n\t\t{\n\t\t\t// Print info about called controller\n\t\t\tconsole.log(\"Called controller: \" + parameters.remoteController);\n\t\t\tconsole.log(\"Call parameters:\"); // parameters given to this call\n\t\t\tconsole.log(parameters);\n\n\t\t\tif (response != null) // if there is a response...\n\t\t\t{\n\t\t\t\tconsole.log(\"Controller Response:\");\n\t\t\t\tconsole.log(response); // ...print it\n\t\t\t}\n\t\t\tif (errorThrown != null) // if there is a jQuery error...\n\t\t\t{\n\t\t\t\tconsole.log(\"jQuery error:\");\n\t\t\t\tconsole.log(errorThrown); // ...print it\n\t\t\t}\n\t\t\tconsole.log(\"--------------------------------------------------------------------------------------------\");\n\t\t}\n\t},\n\n\t/**\n\t * Performs a call to the server were the CI PHP layer is running\n\t * - wsURL: alias of the core controller to call\n\t * - wsParameters: parameters to give to the called controller\n\t * - type: POST or GET HTTP method\n\t * - axiosParameters: an object to configure the axios call\n\t */\n\t_axiosCall: function(wsURL, wsParameters, type, axiosParameters) {\n\n\t\t// Axios config object\n\t\tlet axiosCallObj = {\n\t\t\tmethod: type,\n\t\t\turl: CoreRESTClient._generateRouterURI(wsURL),\n\t\t\ttimeout: CORE_REST_CLIENT_TIMEOUT // default time out\n\t\t};\n\n\t\t// The ajax call is HTTP GET\n\t\tif (type == CRC_HTTP_GET_METHOD)\n\t\t{\n\t\t\taxiosCallObj.params = wsParameters;\n\t\t}\n\t\t// The ajax call is HTTP POST\n\t\telse\n\t\t{\n\t\t\taxiosCallObj.data = wsParameters;\n\t\t}\n\n\t\t// Check if axiosParameters is an object\n\t\tif (typeof axiosParameters === \"object\")\n\t\t{\n\t\t\t// And then copies the its properties into axiosCallObj\n\t\t\tfor (var prop in axiosParameters) axiosCallObj[prop] = axiosParameters[prop];\n\t\t}\n\n\t\t// Perform the ajax call via axios\n\t\treturn axios(axiosCallObj);\n\t}\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n * \n * @usage:\n * Preperations:\n * Be sure to have PrimeVue loaded  with the toast and confirmdialog\n * components as primevue variable\n * Install:\n * Import this Plugin and install it with the app.use() function.\n * Use:\n * In your component you can call now the global property $fhcAlert\n * which has the following functions:\n * \n * alertSuccess\n * ------------\n * Displays a success message\n * @param string\tmessage\n * @return void\n * \n * alertInfo\n * ---------\n * Displays an info message\n * @param string\tmessage\n * @return void\n * \n * alertWarning\n * ------------\n * Displays a warning\n * @param string\tmessage\n * @return void\n * \n * alertError\n * ----------\n * Displays an error\n * @param string\tmessage\n * @return void\n * \n * alertSystemError\n * ----------------\n * Displays an alert with the error details and a button to mail\n * the error to the Support Team\n * @param string\tmessage\n * @return void\n * \n * confirmDelete\n * -------------\n * Displays a confirmation dialog and returns a Promise which resolves\n * with true or false depending und the pressed button.\n * @return Promise\n * \n * alertDefault\n * ------------\n * Displays an alert\n * @param string\tseverity\t\tcan be 'success', 'info', 'warning', 'error'\n * @param string\ttitle\n * @param string\tmessage\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * alertMultiple\n * -------------\n * Displays multiple alerts\n * @param array\t\tmessageArray\n * @param string\tseverity\t\t(optional) defaults to 'info'\n * @param string\ttitle\t\t\t(optional) defaults to 'Info'\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * handleSystemError\n * -----------------\n * Automatiticly determine how to display an system error and display it.\n * This would be used in a catch block of an ajax call.\n * @param mixed\t\terror\n * @return void\n * \n * handleSystemMessage\n * -------------------\n * Automatiticly determine how to display a message and display it.\n * @param mixed\t\tmessage\n * @return void\n */\nimport PvConfig from \"../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js\";\nimport PvToast from \"../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js\";\nimport PvConfirm from \"../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js\";\nimport PvConfirmationService from \"../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js\";\nimport FhcPhrasen from \"./Phrasen.js\";\n\nimport {CoreRESTClient} from '../RESTClient.js';\n\nconst helperAppContainer = document.createElement('div');\n\nconst helperApp = Vue.createApp({\n\tname: \"FhcAlertApp\",\n\tcomponents: {\n\t\tPvToast,\n\t\tPvConfirm\n\t},\n\tmethods: {\n\t\tmailToUrl(slotProps) {\n\t\t\tlet mailTo = FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto;\n\t\t\tlet subject = 'Meldung%20Systemfehler';\n\t\t\tlet body = `\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausführlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewählt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: ` + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method + `%0D%0A\n\t\t\t\tFehler Meldung: ` + slotProps.message.detail + `%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kümmern uns um eine rasche Behebung des Problems!`\n\n\t\t\treturn \"mailto:\" + mailTo + \"?subject=\" + subject + \"&body=\" + body;\n\t\t},\n\t\topenMessagecard(e) {\n\t\t\tbootstrap.Collapse.getOrCreateInstance(e.target.getAttribute('href')).toggle();\n\t\t}\n\t},\n\tunmounted() {\n\t\thelperAppContainer.parentElement.removeChild(helperAppContainer);\n\t},\n\tcomputed: {\n\t\tshowmaillink: function() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto !== '';\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<pv-toast ref=\"toast\" class=\"fhc-alert\" :base-z-index=\"99999\">\n\t\t<template #message=\"{ message }\">\n\t\t\t<!--span :class=\"slotProps.iconClass\"></span-->\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{ message.summary }}</span>\n\t\t\t\t<div v-if=\"message.detail && message.html\" class=\"p-toast-detail\" v-html=\"message.detail\"></div>\n\t\t\t\t<div v-else-if=\"message.detail\" class=\"p-toast-detail\">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref=\"alert\" class=\"fhc-alert\" :base-z-index=\"99999\" position=\"center\">\n\t\t<template #message=\"slotProps\">\n\t\t\t<i class=\"fa fa-circle-exclamation fa-2xl mt-3\"></i>\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class=\"p-toast-detail my-3\">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"align-bottom flex-fill me-2\"\n\t\t\t\t\t\tdata-bs-toggle=\"collapse\"\n\t\t\t\t\t\t:href=\"'#fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t:aria-controls=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\t@click=\"openMessagecard\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"showmaillink\"\n\t\t\t\t\t\tclass=\"btn btn-primary flex-fill\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t:href=\"mailToUrl(slotProps)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"messageCard\" :id=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\" class=\"collapse mt-3\">\n\t\t\t\t\t<div class=\"card card-body text-body small alertCollapseText\">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group=\"fhcAlertConfirm\"></pv-confirm>`\n});\n\nhelperApp.use(PvConfig);\nhelperApp.use(PvConfirmationService);\n//helperApp.use(FhcPhrasen);\n\nconst helperAppInstance = helperApp.mount(helperAppContainer);\n\ndocument.body.appendChild(helperAppContainer);\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (!app.config.globalProperties.$p)\n\t\t\tapp.use(FhcPhrasen);\n\n\t\tconst $fhcAlert = {\n\t\t\talertSuccess(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSuccess);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'success', summary: 'Info', detail: message, life: 1000});\n\t\t\t},\n\t\t\talertInfo(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertInfo);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'info', summary: 'Info', detail: message, life: 3000 });\n\t\t\t},\n\t\t\talertWarning(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertWarning);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'warn', summary: 'Achtung', detail: message});\n\t\t\t},\n\t\t\talertError(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertError);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'error', summary: 'Achtung', detail: message });\n\t\t\t},\n\t\t\talertSystemError(message) {\n\t\t\t\t//TODO(Manu) for translation of content of template: restructure in data\n\t\t\t\t//and update definitions with  translations\n\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSystemError);\n\t\t\t\thelperAppInstance.$refs.alert.add({\n\t\t\t\t\tseverity: 'error',\n\t\t\t\t\tsummary: Vue.computed(() => app.config.globalProperties.$p.t('alert/systemerror')),\n\t\t\t\t\tdetail: message});\n\t\t\t},\n\t\t\tconfirmDelete() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: 'fhcAlertConfirm',\n\t\t\t\t\t\theader: Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: Vue.computed(() => app.config.globalProperties.$p.t('alert/confirm_delete')),\n\t\t\t\t\t\tacceptLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/loeschen')),\n\t\t\t\t\t\tacceptClass: 'p-button-danger',\n\t\t\t\t\t\trejectLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: 'p-button-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfirm(options) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: options?.group ?? 'fhcAlertConfirm',\n\t\t\t\t\t\theader: options?.header ?? Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: options?.message ?? '',\n\t\t\t\t\t\tacceptLabel: options?.acceptLabel ?? 'Ok',\n\t\t\t\t\t\tacceptClass: options?.acceptClass ?? 'btn btn-primary',\n\t\t\t\t\t\trejectLabel: options?.rejectLabel ?? Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: options?.rejectClass ?? 'btn btn-outline-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\talertDefault(severity, title, message, sticky = false, html = false) {\n\t\t\t\tlet options = { severity: severity, summary: title, detail: message, html };\n\t\t\t\t\n\t\t\t\tif (!sticky)\n\t\t\t\t\toptions.life = 3000;\n\n\t\t\t\thelperAppInstance.$refs.toast.add(options);\n\t\t\t},\n\t\t\talertMultiple(messageArray, severity = 'info', title = 'Info', sticky = false, html = false){\n\t\t\t\t// Check, if array has only string values\n\t\t\t\tif (messageArray.every(message => typeof message === 'string')) {\n\t\t\t\t\tmessageArray.forEach(message => this.alertDefault(severity, title, message, sticky, html));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\thandleSystemError(error) {\n\t\t\t\t// don't show an error message to the user if the error was an aborted request\n\t\t\t\tif(error.hasOwnProperty('name') && error.name.toLowerCase() === \"AbortError\".toLowerCase())\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is string\n\t\t\t\tif (typeof error === 'string')\n\t\t\t\t\treturn $fhcAlert.alertSystemError(error);\n\n\t\t\t\t// Error is array of strings\n\t\t\t\tif (Array.isArray(error) && error.every(err => typeof err === 'string'))\n\t\t\t\t\treturn error.every($fhcAlert.alertSystemError);\n\n\t\t\t\t// Error has been handled already\n\t\t\t\tif (error.hasOwnProperty('handled') && error.handled)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is object\n\t\t\t\tif (typeof error === 'object' && error !== null) {\n\t\t\t\t\tlet errMsg = '';\n\n\n\t\t\t\t\tif (error.hasOwnProperty('response') && error.response?.data?.retval)\n\t\t\t\t\t\terrMsg += 'Error Message: ' + (error.response.data.retval.message || error.response.data.retval) + '\\r\\n';\n\t\t\t\t\telse if (error.hasOwnProperty('message'))\n\t\t\t\t\t\terrMsg += 'Error Message: ' + error.message.toUpperCase() + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('config') && error.config.hasOwnProperty('url'))\n\t\t\t\t\t\terrMsg += 'Error ConfigURL: ' + error.config.url + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('stack'))\n\t\t\t\t\t\terrMsg += 'Error Stack: ' + error.stack + '\\r\\n';\n\t\t\t\t\t\n\t\t\t\t\t// Fallback object error message\n\t\t\t\t\tif (errMsg == '')\n\t\t\t\t\t\terrMsg = 'Error Message: ' + JSON.stringify(error) + '\\r\\n';\n\n\t\t\t\t\terrMsg += 'Error Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\n\t\t\t\t\treturn $fhcAlert.alertSystemError(errMsg);\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\thandleSystemMessage(message) {\n\t\t\t\t// Message is string\n\t\t\t\tif (typeof message === 'string')\n\t\t\t\t\treturn $fhcAlert.alertWarning(message);\n\n\t\t\t\t// Message is array of strings\n\t\t\t\tif (Array.isArray(message)) {\n\t\t\t\t\t// If Array has only Strings\n\t\t\t\t\tif (message.every(msg => typeof msg === 'string'))\n\t\t\t\t\t\treturn message.every($fhcAlert.alertWarning);\n\n\t\t\t\t\t// If Array has only Objects\n\t\t\t\t\tif (message.every(msg => typeof msg === 'object') && msg !== null) {\n\t\t\t\t\t\treturn message.every(msg => {\n\t\t\t\t\t\t\tif (msg.hasOwnProperty('data') && msg.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(msg.data.retval));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(msg));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Message is Object with data property\n\t\t\t\tif (typeof message === 'object' && message !== null){\n\t\t\t\t\tif (message.hasOwnProperty('data') && message.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t// NOTE(chris): changed: alertSystemError => alertWarning\n\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(message.data.retval));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(message));\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' +  FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\tresetFormValidation(form) {\n\t\t\t\tconst event = new Event('fhc-form-reset');\n\t\t\t\tform.querySelectorAll(['[data-fhc-form-validate],[data-fhc-form-error]']).forEach(el => el.dispatchEvent(event));\n\t\t\t\t/*const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\tif (alert) {\n\t\t\t\t\talert.innerHTML = '';\n\t\t\t\t\talert.classList.add('d-none');\n\t\t\t\t}\n\t\t\t\tform.querySelectorAll('.invalid-feedback').forEach(n => n.remove());\n\t\t\t\tform.querySelectorAll('.is-invalid').forEach(n => n.classList.remove('is-invalid'));\n\t\t\t\tform.querySelectorAll('.is-valid').forEach(n => n.classList.remove('is-valid'));*/\n\t\t\t},\n\t\t\thandleFormValidation(error, form) {\n\t\t\t\tif (form === undefined) {\n\t\t\t\t\tif (error && error.nodeType === Node.ELEMENT_NODE)\n\t\t\t\t\t\treturn err => $fhcAlert.handleFormValidation(err, error);\n\t\t\t\t} else {\n\t\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t\tif (typeof errors !== \"object\")\n\t\t\t\t\t\t\terrors = error.response.data;\n\n\t\t\t\t\t\t// NOTE(chris): reset form validation\n\t\t\t\t\t\t$fhcAlert.resetFormValidation(form);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// NOTE(chris): set form input validation\n\t\t\t\t\t\tconst notFound = Object.entries(errors).filter(([key, detail]) => {\n\t\t\t\t\t\t\tconst input = form.querySelector('[data-fhc-form-validate=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\tinput.dispatchEvent(new CustomEvent('fhc-form-invalidate', {detail}));\n\n\t\t\t\t\t\t\t/*const input = form.querySelector('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\tinput.classList.add('is-invalid');\n\t\t\t\t\t\t\tconst feedback = document.createElement('div');\n\t\t\t\t\t\t\tfeedback.classList.add('invalid-feedback');\n\t\t\t\t\t\t\tfeedback.innerHTML = detail;\n\t\t\t\t\t\t\tinput.after(feedback);*/\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).map(arr => arr[1]);\n\n\n\t\t\t\t\t\t//const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\t\t\tconst alert = form.querySelector('[data-fhc-form-error]');\n\t\t\t\t\t\tif (alert && notFound.length) {\n\t\t\t\t\t\t\talert.dispatchEvent(new CustomEvent('fhc-form-error', {detail: notFound}));\n\t\t\t\t\t\t\t/*notFound.forEach(txt => {\n\t\t\t\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\t\t\t\tp.innerHTML = txt;\n\t\t\t\t\t\t\t\talert.append(p);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (notFound.length) {\n\t\t\t\t\t\t\t\talert.lastChild.classList.add('mb-0');\n\t\t\t\t\t\t\t\talert.classList.remove('d-none');\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotFound.forEach($fhcAlert.alertError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t$fhcAlert.alertError((typeof errors === 'object') ? Object.values(errors) : errors);\n\t\t\t\t} else {\n\t\t\t\t\t$fhcAlert.handleSystemError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tapp.config.globalProperties.$fhcAlert = $fhcAlert;\n\t\tapp.provide('$fhcAlert', app.config.globalProperties.$fhcAlert);\n\t}\n}","console.warn('plugin/FhcApi.js is DEPRECATED! Use plugins/Api.js instead.');\nimport FhcAlert from '../plugins/FhcAlert.js';\nimport PluginsApi from '../plugins/Api.js';\nimport FhcApiFactory from '../api/fhcapifactory.js';\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$fhcApi) {\n\t\t\t/* Deprecated Code start */\n\t\t\tif (options?.factory) {\n\t\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\t\tapp.config.globalProperties.$fhcApi.factory.addEndpoints(options.factory);\n\t\t\t}\n\t\t\t/* Deprecated Code end */\n\t\t\treturn;\n\t\t}\n\t\tapp.use(FhcAlert);\n\t\tapp.use(PluginsApi);\n\n\t\tfunction _get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\n\t\tfunction _clean_return_value(response) {\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result)\n\t\t\t\treturn {meta: {response}, data: null};\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = {response};\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tconst baseURL = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\";\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(response => {\n\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\treturn _clean_return_value(response);\n\n\t\t\t// NOTE(chris): loop through errors\n\t\t\tif (response.data.errors)\n\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t);\n\n\t\t\treturn _clean_return_value(response);\n\t\t}, error => {\n\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\n\t\t\tif (error.config?.errorHandling == 'off'\n\t\t\t\t|| error.config?.errorHandling === false\n\t\t\t\t|| error.config?.errorHandling == 'success')\n\t\t\t\treturn Promise.reject(error);\n\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL, true);\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t\t}\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\terror.response.data.errors = error.response.data.errors.filter(\n\t\t\t\t\terr => (error.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, error.config)\n\t\t\t\t);\n\t\t\t\tif (!error.response.data.errors.length)\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else if (error.request) {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertError(error.message);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t}\n\n\t\t\treturn Promise.reject(error);\n\t\t});\n\n\t\tapp.config.globalProperties.$fhcApi = {\n\t\t\tgetUri(url) {\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\t[uri, params, config] = _get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\t[uri, data, config] = _get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\t_defaultErrorHandlers: {\n\t\t\t\tvalidation(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form) {\n\t\t\t\t\t\tconfig.form.clearValidation();\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.messages);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(error.messages)) {\n\t\t\t\t\t\terror.messages.forEach($fhcAlert.alertError);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (typeof error.messages == 'object') {\n\t\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t\tObject.values(error.messages).forEach(\n\t\t\t\t\t\t\t\tvalue => $fhcAlert.alertDefault(\n\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tObject.entries(error.messages).forEach(\n\t\t\t\t\t\t\t\t([key, value]) => $fhcAlert.alertDefault('error', key, value, true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgeneral(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form)\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.message);\n\t\t\t\t\telse if (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertError(error.message);\n\t\t\t\t},\n\t\t\t\tphp(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('warn', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('info', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texception(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tdb(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tauth(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertDefault('error', error.message, message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/* Deprecated Code start */\n\t\tclass FhcApiFactoryWrapper {\n\t\t\tconstructor(factorypart, root) {\n\t\t\t\tif (root === undefined) {\n\t\t\t\t\tthis.$fhcApi = {\n\t\t\t\t\t\tgetUri(url) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.getUri(url);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(form, uri, params, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.get(form, uri, params, config);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpost(form, uri, data, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.post(form, uri, data, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tObject.defineProperty(this.$fhcApi, 'factory', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.factory;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.config.globalProperties.$fhcApi.factory = this;\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, '$fhcApi', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn (root || this).$fhcApi;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.addEndpoints(factorypart)\n\t\t\t}\n\n\t\t\taddEndpoints(factorypart) {\n\t\t\t\tObject.keys(factorypart).forEach(key => {\n\t\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tif (typeof factorypart[key] == 'function')\n\t\t\t\t\t\t\t\treturn factorypart[key].bind(this);\n\t\t\t\t\t\t\treturn new FhcApiFactoryWrapper(factorypart[key], this.$fhcApi.factory);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tconsole.warn('$fhcApi.factory.addEndpoints() is DEPRECATED!');\n\t\t\t}\n\t\t}\n\n\t\tconst factory = new FhcApiFactoryWrapper(FhcApiFactory);\n\t\tif (options?.factory) {\n\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\tfactory.addEndpoints(options.factory);\n\t\t}\n\n\t\tapp.config.globalProperties.$fhcApi.factory = factory;\n\t\t/* Deprecated Code end */\n\t\t\n\t\tapp.provide('$fhcApi', app.config.globalProperties.$fhcApi);\n\t}\n};","console.warn('plugin/Phrasen.js is DEPRECATED! Use plugins/Phrasen.js instead.');\nimport FhcApi from './FhcApi.js';\nimport ApiPhrasen from '../api/factory/phrasen.js';\n\nconst categories = Vue.reactive({});\nconst loadingModules = {};\nlet user_language = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language);\nexport let user_locale = Vue.computed(()=>{\n\tif(!user_language.value) return null;\n\treturn FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(language => language.sprache == user_language.value).LC_Time;\n});\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\nconst phrasen = {\n\tuser_language,\n\tuser_locale,\n\tsetLanguage(language) {\n\t\tconst catArray = Object.keys(categories)\n\t\treturn this.config.globalProperties.$api\n\t\t\t.call(ApiPhrasen.setLanguage(catArray, language))\n\t\t\t.then(res => {\n\t\t\t\tres.data.forEach(row => {\n\t\t\t\t\tcategories[row.category][row.phrase] = row.text\n\t\t\t\t})\n\n\t\t\t\t// update the reactive data that holds the current active user_language\n\t\t\t\tuser_language.value = language;\n\n\t\t\t\treturn res\n\t\t\t})\n\t},\n\tloadCategory(category) {\n\t\tif (Array.isArray(category))\n\t\t\treturn Promise.all(category.map(this.config.globalProperties\n\t\t\t\t.$p.loadCategory));\n\t\tconst $fhcApi = this.config.globalProperties.$fhcApi;\n\t\tconst $fhcApiFactory = this.config.globalProperties.$fhcApiFactory;\n\t\tif (!loadingModules[category])\n\t\t\tloadingModules[category] = this.config.globalProperties.$api\n\t\t\t\t.call(\n\t\t\t\t\tApiPhrasen.loadCategory(category)\n\t\t\t\t)\n\t\t\t\t.then(res => res?.data ? extractCategory(res.data, category) : {})\n\t\t\t\t.then(res => {\n\t\t\t\t\tcategories[category] = res;\n\t\t\t\t});\n\t\treturn loadingModules[category];\n\t},\n\tt_ref(category, phrase, params) {\n\t\tconsole.warn('deprecated');\n\t\treturn Vue.computed(() => this.t(category, phrase, params));\n\t},\n\tt(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input', category, phrase, params);\n\t\t\treturn '';\n\t\t}\n\t\tlet val = Vue.computed(() => {\n\t\t\tif (!categories[category])\n\t\t\t\treturn '';\n\t\t\treturn getValueForLoadedPhrase(category, phrase, params);\n\t\t});\n\t\tif (!categories[category])\n\t\t\tthis.loadCategory(category);\n\t\treturn val.value;\n\t}\n};\n\nexport default {\n\tinstall(app, options) {\n\t\tapp.use(FhcApi, options?.fhcApi || undefined);\n\t\tapp.config.globalProperties.$p = {\n\t\t\tt: phrasen.t,\n\t\t\tloadCategory: cat => phrasen.loadCategory.call(app, cat),\n\t\t\tsetLanguage: lang => phrasen.setLanguage.call(app, lang),\n\t\t\tuser_language: user_language,\n\t\t\tuser_locale,\n\t\t\tt_ref: phrasen.t_ref\n\t\t};\n\t\tapp.provide('$p', app.config.globalProperties.$p);\n\t}\n}","import accessibility from \"../directives/accessibility.js\";\n\nimport TabView from '../../../index.ci.php/public/js/components/primevue/tabview/tabview.esm.min.js';\nimport TabPanel from '../../../index.ci.php/public/js/components/primevue/tabpanel/tabpanel.esm.min.js';\n\nexport default {\n\tcomponents: {\n\t\ttabview: TabView,\n\t\ttabpanel: TabPanel\n\t},\n\tdirectives: {\n\t\taccessibility\n\t},\n\temits: [\n\t\t'update:modelValue',\n\t\t'change',\n\t\t'changed'\n\t],\n\tprops: {\n\t\tconfig: {\n\t\t\ttype: [String, Array, Object, Promise],\n\t\t\trequired: true\n\t\t},\n\t\tdefault: String,\n\t\tmodelValue: [String, Number, Boolean, Array, Object, Date, Function, Symbol],\n\t\tvertical: Boolean,\n\t\tborder: Boolean,\n\t\tuseprimevue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent: null,\n\t\t\ttabs: {}\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentTab() {\n\t\t\tif (this.tabs[this.current])\n\t\t\t\treturn this.tabs[this.current];\n\n\t\t\treturn { component: 'div' };\n\t\t},\n\t\tvalue: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tthis.$emit('update:modelValue', v);\n\t\t\t}\n\t\t},\n\t\tcalcActiveIndex: function() {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tlet index = keys.indexOf(this.default);\n\t\t\tif( index === -1 ) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tconfig(n) {\n\t\t\tthis.initConfig(n);\n\t\t}\n\t},\n\tmethods: {\n\t\thandleTabClick: function (e) {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tthis.change(keys[e.index]);\n\t\t},\n\t\tchange(key) {\n\t\t\tthis.$emit(\"change\", key)\n\t\t\tthis.current = key;\n\t\t\tthis.$nextTick(() => this.$emit(\"changed\", key));\n\t\t},\n\t\tinitConfig(config) {\n\t\t\tif (!config)\n\t\t\t\treturn;\n\t\t\tif (config instanceof Promise)\n\t\t\t\treturn config\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\t\t\tif (typeof config === 'string' || config instanceof String)\n\t\t\t\treturn this.$api\n\t\t\t\t\t.get(config)\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\n\t\t\tconst tabs = {};\n\n\t\t\tfunction _addToTabs(key, item) {\n\t\t\t\tif (!item.component)\n\t\t\t\t\treturn console.error('Component missing for ' + key);\n\n\t\t\t\t//making it reactive for showing headerSuffix\n\t\t\t\tconst value = Vue.reactive({\n\t\t\t\t\tsuffix: '',\n\t\t\t\t\tshowSuffix: item.showSuffix || false\n\t\t\t\t});\n\n\t\t\t\ttabs[key] = {\n\t\t\t\t\tcomponent: Vue.markRaw(Vue.defineAsyncComponent(() => import(item.component))),\n\t\t\t\t\ttitle: Vue.computed(() => item.title || key),\n\t\t\t\t\tconfig: item.config,\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue,\n\t\t\t\t\tsuffixhelper: item.suffixhelper ?? null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t\tconfig.forEach((item, key) => _addToTabs(key, item));\n\t\t\telse\n\t\t\t\tObject.entries(config).forEach(([key, item]) => _addToTabs(key, item));\n\n\t\t\tif (this.current === null || !tabs[this.current]) {\n\t\t\t\tif (tabs[this.default])\n\t\t\t\t\tthis.current = this.default;\n\t\t\t\telse\n\t\t\t\t\tthis.current = Object.keys(tabs)[0];\n\t\t\t}\n\t\t\tthis.tabs = tabs;\n\t\t},\n\t\tupdateSuffix() {\n\t\t\tthis.getTabSuffix(this.currentTab);\n\t\t},\n\t\tasync getTabSuffix(tab) {\n\t\t\tif (!tab.value.showSuffix) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (tab.suffixhelper !== null) {\n\t\t\t\tconst suffixhelper = await import(tab.suffixhelper);\n\t\t\t\tconst suffix = await suffixhelper.getSuffix(this.$api, this.modelValue);\n\t\t\t\ttab.value.suffix = suffix;\n\t\t\t} else {\n\t\t\t\ttab.value.suffix = '';\n\t\t\t}\n\t\t},\n\t\tgetTabSuffixes() {\n\t\t\tObject.entries(this.tabs).forEach(([key, item]) => this.getTabSuffix(item));\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initConfig(this.config);\n\t},\n\tmounted() {\n\t\tthis.getTabSuffixes();\n\t},\n\tupdated() {\n\t\tthis.getTabSuffixes();\n\t},\n\ttemplate: `\n\t<template v-if=\"useprimevue\">\n\n\t\t<tabview \n\t\t\t:scrollable=\"true\"\n\t\t\t:lazy=\"true\"\n\t\t\t:activeIndex=\"calcActiveIndex\"\n\t\t\t@tab-click=\"handleTabClick\"\n\t\t>\n\t\t\t<tabpanel\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\t:header=\"tab.title + ((tab.value.showSuffix && tab.value.suffix !== '') ? ' ' + tab.value.suffix : '')\"\n\t\t\t>\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"tab.component\"\n\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t:config=\"tab.config\"\n\t\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t</keep-alive>\n\t\t\t</tabpanel>\n\t\t</tabview>\n\n\t</template>\n\t<template v-else=\"\">\n\n\t<div class=\"fhc-tabs d-flex\" :class=\"vertical ? 'align-items-stretch gap-3' : (border ? 'flex-column' : 'flex-column gap-3')\" v-if=\"Object.keys(tabs).length\">\n\t\t<div class=\"nav\" :class=\"vertical ? 'nav-pills flex-column' : 'nav-tabs'\">\n\n\t\t\t<div\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\tclass=\"nav-item nav-link\"\n\t\t\t\t:class=\"{active: tab.key == current}\"\n\t\t\t\t@click=\"change(tab.key)\"\n\t\t\t\t:aria-current=\"tab.key == current ? 'page' : ''\"\n\t\t\t\tv-accessibility:tab.[vertical]\n\t\t\t\t>\n\t\t\t\t{{tab.title}} <span v-if=\"tab.value.showSuffix && tab.value.suffix\"> {{ tab.value.suffix }}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :style=\"vertical ? '' : 'flex: 1 1 0%; height: 0%'\" class=\"overflow-auto flex-grow-1\" :class=\"vertical || !border ? '' : 'p-3 border-bottom border-start border-end'\">\n\t\t\t<keep-alive>\n\t\t\t\t<component\n\t\t\t\t\tref=\"current\"\n\t\t\t\t\t:is=\"currentTab.component\"\n\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t:config=\"currentTab.config\"\n\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t></component>\n\t\t\t</keep-alive>\n\t\t</div>\n\t</div>\n\n\t</template>`\n};\n\n","export default {\n\tcreated(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tel.style.cursor = 'pointer';\n\t\t\t\tconst [prev, next] = binding.modifiers.vertical ? ['ArrowUp', 'ArrowDown'] : ['ArrowLeft', 'ArrowRight'];\n\t\t\t\tel.addEventListener('click', () => {\n\t\t\t\t\tlet act = el.parentNode.querySelector('[tabindex=\"0\"]');\n\t\t\t\t\tif (act)\n\t\t\t\t\t\tact.tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t});\n\t\t\t\tel.addEventListener('focus', () => {\n\t\t\t\t\tel.ariaSelected = \"true\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('blur', () => {\n\t\t\t\t\tel.ariaSelected = \"false\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('keydown', e => {\n\t\t\t\t\tswitch (e.code) {\n\t\t\t\t\t\tcase prev:\n\t\t\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.previousSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase next:\n\t\t\t\t\t\t\tif (el.nextSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.nextSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\t\tel.click();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tmounted(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tlet activetab = -1;\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tnode.ariaPosInSet = index;\n\t\t\t\t\tif (node.tabIndex === 0)\n\t\t\t\t\t\tactivetab = index;\n\t\t\t\t});\n\t\t\t\tif (activetab == -1) {\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else if (el.classList.contains('active')) {\n\t\t\t\t\tel.parentNode.children[activetab].tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else {\n\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tif (el.tabIndex === 0) {\n\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\telse if (el.nextSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t}\n\t\t\t\tconst pos = parseInt(el.ariaPosInSet);\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tif (index > pos)\n\t\t\t\t\t\tnode.ariaPosInSet = index-1;\n\t\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t}\n}","export const StudentDropdown = {\n\tname: \"StudentDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'studentChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\terrors: null,\n\t\t\tinternal_available_student_info: [],\n\t\t\tinternal_selected_student_info: null\n\t\t};\n\t},\n\tprops: {\n\n\t},\n\tmethods: {\n\t\tstudentChanged(e) {\n\n\t\t\tthis.$entryParams.selected_student = e.value\n\t\t\tthis.$entryParams.selected_student_info = this.$entryParams.availableStudents.find(s => s.prestudent_id === e.value.prestudent_id)\n\t\t\tthis.$emit('studentChanged', e)\n\t\t},\n\t\tasync setupData() {\n\t\t\tif(!(this.$entryParams.permissions.assistenz || this.$entryParams.permissions.admin)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tawait this.$entryParams.setupPromise.then(() => {\n\t\t\t\tthis.internal_available_student_info =  this.$entryParams.availableStudents\n\t\t\t\tthis.internal_selected_student_info =  this.$entryParams.selected_student_info\n\t\t\t})\n\t\t},\n\t\tresetData() {\n\t\t\tthis.internal_available_student_info =  this.$entryParams.availableStudents\n\t\t\tthis.internal_selected_student_info =  this.$entryParams.selected_student_info\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\tconst gruppe = ' (' + option.semester + option.verband + option.gruppe + ')'\n\t\t\treturn option.nachname + ' ' + option.vorname + ' ' + gruppe.replace(/\\s+/g, '') // remove spaces\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.setupData()\n\t},\n\ttemplate: `\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-3 d-flex align-items-center\"><label for=\"leSelect\">{{ $p.t('global/students') }}</label></div>\n\t\t\t<div class=\"col-8\">\n\t\t\t\t<Dropdown @change=\"studentChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\t\tv-model=\"internal_selected_student_info\" :options=\"internal_available_student_info\">\n\t\t\t\t</Dropdown>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {lektorFormatters, studentFormatters} from \"../../formatters/formatters.js\";\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\n\nimport {StudiensemesterDropdown} from './StudiensemesterDropdown.js';\n\nimport ApiProfil from '../../api/factory/profil.js';\n\nexport default {\n\tname: 'StudentAnwesenheitComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreRESTClient,\n\t\tStudiensemesterDropdown\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tstudiensemester: [],\n\t\t\ttableBuiltPromise: null,\n\t\t\tstudentViewTabulatorOptions: {\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tselectable: false,\n\t\t\t\theight: this.$entryParams.tabHeights.studentAnw,\n\t\t\t\trenderVerticalBuffer: 2000,\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: 'Lehrveranstaltung', visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/datum')), field: 'datum', formatter: lektorFormatters.formDateOnly, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: lektorFormatters.dateOnlyTimeFormatter, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: lektorFormatters.dateOnlyTimeFormatter, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/einheiten')), field: 'dauer', formatter: this.einheitenFormatter, tooltip:false, widthGrow: 1, minWidth: 250},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anteilAnw')), field: 'anteil', bottomCalcFormatter: this.sumBottomCalcFormatter, bottomCalcParams: this.bottomCalcParamLookup, tooltip:false, bottomCalc: this.anwCalc, formatter: this.percentFormatter},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwesend')), field: 'student_status', formatter: this.formAnwesenheit, tooltip:false, minWidth: 150},\n\t\t\t\t],\n\t\t\t\tgroupBy: ['lehrveranstaltung_id'],\n\t\t\t\tgroupStartOpen:false,\n\t\t\t\tgroupHeader: this.customGroupHeader,\n\t\t\t\tgroupToggleElement:\"header\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-studentAnwTable\"\n\t\t\t},\n\t\t\tstudentViewTabulatorEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tsums: {},\n\t\t\tfilterTitle: \"\"\n\t\t};\n\t},\n\tmethods: {\n\t\tcustomGroupHeader(value, count, data) {\n\t\t\treturn '<div style=\"display:flex; justify-content: space-between;\">' +\n\t\t\t\t'<div>' + (this.$p.user_language.value == 'German' ? data[0].bezeichnung : data[0].bezeichnung_english) + '</div>' +\n\t\t\t\t'<div style=\"flex-grow: 1; text-align: right;\">'+this.$p.t('global/anwesenheit') + ': ' + data[0].anwesenheit + \" %\" + '</div>' +\n\t\t\t\t'</div>';\n\t\t},\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ??  data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+ val + ' %</div>'\n\t\t},\n\t\tbottomCalcParamLookup (values, data) {\n\t\t\tconst first = data[0]\n\t\t\treturn first ? first.anwesenheit + ' %' : ''\n\t\t},\n\t\teinheitenFormatter: function (cell) {\n\t\t\tconst valInMin = Number(cell.getValue())\n\t\t\tlet valInEh = (cell.getValue() / 60 / this.$entryParams.permissions.einheitDauer)\n\t\t\tconst rest = valInEh % 1\n\t\t\tif(rest > 0) valInEh = valInEh.toFixed(2).replace('.', ',')\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'\n\t\t\t\t+valInMin+' '+this.$p.t('global/minuten')+' / '+valInEh+' '+this.$p.t('global/einheiten')+\n\t\t\t\t'</div>'\n\t\t},\n\t\tformAnwesenheit: function(cell)\n\t\t{\n\t\t\tlet data = cell.getValue();\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status || data === this.$entryParams.permissions.entschuldigt_status)\n\t\t\t{\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\tlet returnValue = '';\n\t\t\t\tif (data === this.$entryParams.permissions.entschuldigt_status)\n\t\t\t\t\treturnValue = ' ' + this.$p.t('global/entschuldigungAkzeptiert');\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%;\"><i class=\"fa fa-check\" style=\"margin-right: 4px;\"></i> ' + returnValue + '</div>';\n\t\t\t}\n\t\t\telse if (data === this.$entryParams.permissions.abwesend_status)\n\t\t\t{\n\t\t\t\tlet returnValue = '';\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\n\t\t\t\tif (cell.getData().hasOffene)\n\t\t\t\t\treturnValue =  ' ' + this.$p.t('global/entschuldigungOffen');\n\t\t\t\telse if (cell.getData().hasAbgelehnte)\n\t\t\t\t\treturnValue = ' ' + this.$p.t('global/entschuldigungAbgelehnt');\n\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%;\"><i class=\"fa fa-xmark\" style=\"margin-right: 4px;\"></i> ' + returnValue + '</div>';\n\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn '-'\n\t\t},\n\t\tssChangedHandler: async function(studiensemester) {\n\t\t\tthis.studiensemester = studiensemester\n\t\t\tthis.loadAnwesenheitenByUID()\n\t\t},\n\t\tasync loadAnwesenheitenByUID() {\n\t\t\tawait this.$entryParams.profileViewDataPromise\n\n\t\t\t// toggle anwesenheiten loading procedure based on admin or student login\n\t\t\tconst uid = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.uid : this.$entryParams.viewDataStudent.student_uid\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tif(!uid) return\n\t\t\t\tthis.$api.call(ApiProfil.getAllAnwByUID(this.studiensemester, uid, person_id))\n\t\t\t\t.then(res => {\n\t\t\t\tif(res.meta.status !== \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorLoadingAnwesenheiten'))\n\t\t\t\t} else {\n\t\t\t\t\tconst processedAnw = this.processAnw(res.data)\n\n\t\t\t\t\tthis.$refs.uebersichtTable.tabulator.setData(processedAnw);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tanwCalc(values, data, percentage) {\n\t\t\treturn percentage\n\t\t},\n\t\tprocessAnw(data) {\n\t\t\tconst anw = data[0].retval\n\t\t\tthis.sums = {}\n\t\t\t// calc sum for each lva to display percentage\n\t\t\tanw.forEach(entry => {\n\t\t\t\tif(!this.sums[entry.lehrveranstaltung_id]) {\n\t\t\t\t\tthis.sums[entry.lehrveranstaltung_id] = entry.dauer\n\t\t\t\t} else {\n\t\t\t\t\tthis.sums[entry.lehrveranstaltung_id] += entry.dauer\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tanw.forEach(a => {\n\t\t\t\ta.vonDate = new Date(a.von)\n\t\t\t\ta.bisDate = new Date(a.bis)\n\t\t\t\ta.anteil = (a.dauer / this.sums[a.lehrveranstaltung_id] * 100).toFixed(2)\n\t\t\t})\n\n\t\t\tif(this.$entryParams.permissions.entschuldigungen_enabled) {\n\t\t\t\tconst ent = data[1].retval\n\t\t\t\tent.forEach(e => {\n\t\t\t\t\te.vonDate = new Date(e.von)\n\t\t\t\t\te.bisDate = new Date(e.bis)\n\t\t\t\t})\n\n\t\t\t\t// filter entschuldigungen into offene and abgelehnte (entschuldigt status already in anw_user)\n\t\t\t\tconst offene = ent.filter(e => e.akzeptiert === null)\n\t\t\t\tconst abgelehnte = ent.filter(e => e.akzeptiert === false)\n\n\t\t\t\t// for every offene set anw_user entry property to true for every eligible date & abgelehnt combo\n\t\t\t\toffene.forEach(o => {\n\t\t\t\t\tconst anwInDateRange = anw.filter(a => a.vonDate >= o.vonDate && a.bisDate <= o.bisDate && a.student_status === this.$entryParams.permissions.abwesend_status)\n\t\t\t\t\tanwInDateRange.forEach(a => a.hasOffene = true)\n\t\t\t\t})\n\n\t\t\t\t// for every abgelehnte set anw_user entry property to true for every eligible date & abgelehnt combo\n\t\t\t\tabgelehnte.forEach(abg => {\n\t\t\t\t\tconst anwInRange = anw.filter(a => a.vonDate >= abg.vonDate && a.bisDate <= abg.bisDate && a.student_status === this.$entryParams.permissions.abwesend_status)\n\t\t\t\t\tanwInRange.forEach(a => a.hasAbgelehnte = true)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn anw\n\t\t},\n\t\tasync reload() {\n\t\t\tthis.loadAnwesenheitenByUID()\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs.uebersichtTable?.tabulator) this.$refs.uebersichtTable.tabulator.redraw(true)\n\t\t},\n\t\tasync setup(){\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.loadAnwesenheitenByUID()\n\n\t\t\tthis.studiensemester = this.$entryParams.sem_kurzbz\n\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tsumBottomCalcFormatter(cell) {\n\t\t\tconst val = Number.parseFloat(cell.getValue())\n\t\t\tif(Number.isNaN(val)) return cell.getValue()\n\t\t\tif (val < (this.$entryParams.permissions.positiveRatingThreshold * 100)) {\n\t\t\t\tconst el = cell.getElement()\n\t\t\t\tel.style.setProperty('color', 'red')\n\t\t\t}\n\n\t\t\treturn cell.getValue()\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\n\t\t\tconst collapsables = document.getElementById('filterCollapsables' + tableID);\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentAnw'].value = screenY - rect.top - collapsables.clientHeight\n\n\t\t\tif(this.$refs.uebersichtTable.tabulator) this.$refs.uebersichtTable.tabulator.redraw(true)\n\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.setup()\n\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tcomputed: {\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentAnwesenheit'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<core-base-layout\n\t\t:title=\"filterTitle\">\n\t\t<template #main>\n\t\t\t<div ref=\"studentAnwContentHeader\" class=\"row\" style=\"justify-content: flex-end;\">\n\t\t\t\t\n\t\t\t\t\t<div style=\"max-width: 50px; align-content: center;\" v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t<h5><i class=\"fa fa-circle-question\"></i></h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<StudiensemesterDropdown @ssChanged=\"ssChangedHandler\"></StudiensemesterDropdown>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"uebersichtTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"studentViewTabulatorOptions\"\n\t\t\t\t:tabulator-events=\"studentViewTabulatorEventHandlers\"\n\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\n\t</core-base-layout>\n`\n};","import ApiInfo from '../../api/factory/info.js';\n\nexport const StudiensemesterDropdown = {\n\tname: \"StudiensemesterDropdown\",\n\temits: [\n\t\t'ssChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\toptions: [],\n\t\t\tselectedOption: [],\n\t\t\terrors: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.loadDropdown();\n\t},\n\tprops() {\n\n\t},\n\tmethods: {\n\t\tloadDropdown() {\n\t\t\tthis.$api.call(ApiInfo.getStudiensemester())\n\t\t\t\t.then(res => {\n\n\t\t\t\tif(res.meta.status !== \"success\") return\n\t\t\t\tthis.options = res.data?.[0] ?? [];\n\t\t\t\tconst aktuell = res.data?.[1]?.[0].studiensemester_kurzbz\n\n\t\t\t\tthis.selectedOption = aktuell ?? this._.root.appContext.config.globalProperties.$entryParams.sem_kurzbz\n\t\t\t});\n\t\t},\n\t\tssChanged(e) {\n\t\t\tthis.$emit(\"ssChanged\", e.target.value);\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div>\n\t\t\t<select v-model=\"selectedOption\" @change=\"ssChanged\" class=\"form-control\" id=\"studiensemester\">\n\t\t\t\t<option v-for=\"option in options\" :value=\"option.studiensemester_kurzbz\">\n\t\t\t\t\t{{ option.studiensemester_kurzbz }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</div>\n\t`\n}","\nexport const Range = {\n\tname: \"Range\",\n\tdata () {\n\t\treturn {\n\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null\n\t},\n\tcreated() {\n\n\t},\n\n\tmethods: {\n\n\t},\n\twatch:{\n\n\t},\n\tcomputed: {\n\t\tmodelKeys() {\n\t\t\tif(!this.modelValue) return []\n\t\t\treturn Object.keys(this.modelValue)\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div v-if=\"modelValue\" style=\"max-height: 400px; overflow-y: auto; display: flex; gap: 2px;\">\n\t\t\t<template v-for=\"key in modelKeys\">\n\t\t\t\t<span style=\"display: inline-block; margin-right: 2px;\"><span style=\"font-weight: bold\">{{key}}</span>: {{modelValue[key]}} </span>\n\t\t\t</template>\n\t\t</div>\n\t`\n}\n\nexport default Range;","import VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport Range from './Range.js';\nexport const AnwTimeline = {\n\tname: \"AnwTimeline\",\n\tcomponents: {\n\t\tDatepicker: VueDatePicker,\n\t\tTimeline: primevue.timeline,\n\t\tRange\n\t},\n\tdata () {\n\t\treturn {\n\t\t\ttimelineStart: new Date(new Date(Date.now()).getFullYear(), 0, 1, 0, 0, 0, 0),\n\t\t\ttimelineEnd: new Date(new Date(Date.now()).getFullYear(), 12, 31, 0, 0, 0, 0),\n\t\t\thourWidth: 20,\n\t\t\tselectedRange: null // when clicking anw or ent assign this and show their fields\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null,\n\t\tanwArray: null,\n\t\tentArray: null\n\t},\n\tmethods: {\n\t\tformatDateTimelineStart(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `Timeline Start: ${day}.${month}.${year}`;\n\t\t},\n\t\tformatDateTimelineEnd(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `Timeline End: ${day}.${month}.${year}`;\n\t\t},\n\t\tformatEntTime(ent) {\n\t\t\treturn this.formatDate(ent.von) + ' - ' + this.formatDate(ent.bis)\n\t\t},\n\t\thighlightEntschuldigung(ent) {\n\t\t\t// check if date is in current range, if not expand range and then scrollIntoView nextTick\n\t\t\t\n\t\t\tconst id = 'entRange-' + ent.entschuldigung_id\n\t\t\tconst el = document.getElementById(id)\n\t\t\tif (el) {\n\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t}\n\t\t},\n\t\thighlightKontrolle(anw) {\n\t\t\tconst id = 'anwRange-' + anw.anwesenheit_id\n\t\t\tconst el = document.getElementById(id)\n\t\t\tif (el) {\n\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t}\n\t\t},\n\t\tshowRangeDetails(range) {\n\t\t\tthis.selectedRange = range\t\n\t\t},\n\t\tdateToPercentage(dateStr) {\n\t\t\tconst date = new Date(Date.parse(dateStr))\n\t\t\tconst days = this.getDaysBetweenDates(date, this.timelineStart)\n\t\t\tconst totalDays = this.getDaysBetweenDates(this.timelineStart, this.timelineEnd)\n\t\t\treturn (days / totalDays) * 100\n\t\t},\n\t\tgetRangeColor(akzeptiert) {\n\t\t\tif (akzeptiert === true) return 'rgba(0, 123, 255, 0.2)' // blue\n\t\t\tif (akzeptiert === false) return 'rgba(220, 53, 69, 0.2)' // red\n\t\t\treturn 'rgba(32, 201, 151, 0.2)' // teal\n\t\t},\n\t\tgetRangeColorAnw(anw) {\n\t\t\tif (anw.status === \"anwesend\") return 'rgba(182,252,0,0.66)' // blue\n\t\t\tif (anw.status === \"abwesend\") return 'rgba(255,4,4,0.68)' // red\n\t\t\tif (anw.status === \"entschuldigt\") return 'rgba(3,53,245,0.91)' // teal\n\t\t},\n\t\tgetOverlayStyleEnt(range) {\n\t\t\tconst start = new Date(range.von)\n\t\t\tconst end = new Date(range.bis)\n\t\t\tconst color = this.getRangeColor(range.akzeptiert)\n\t\t\tconst offsetDays = this.getDaysBetweenDates(start, this.timelineStart)\n\t\t\tconst rangeLength = this.getDaysBetweenDates(start, end)\n\t\t\tconst rangeTime =  (end.getHours() + (end.getMinutes() / 60)) - (start.getHours() + (start.getMinutes() / 60))\n\t\t\tconst offsetHours = start.getHours() + (start.getMinutes() / 60)\n\t\t\t\t\n\t\t\tconst zOffset = Math.round(10000 / (rangeLength * 24 + rangeTime))\n\t\t\t\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: `${offsetDays * this.dayWidth + offsetHours * this.hourWidth}px`,\n\t\t\t\twidth: `${rangeLength * this.dayWidth + rangeTime * this.hourWidth}px`,\n\t\t\t\theight: '100%',\n\t\t\t\ttransform: 'translateY(-20px)',\n\t\t\t\tbackgroundColor: color,\n\t\t\t\tzIndex: 9999 + zOffset,\n\t\t\t\tborderRadius: '6px'\n\t\t\t}\n\t\t},\n\t\tgetOverlayStyleAnw(range) {\n\t\t\tconst start = new Date(range.von)\n\t\t\tconst end = new Date(range.bis)\n\t\t\tconst color = this.getRangeColorAnw(range)\n\t\t\tconst offsetDays = this.getDaysBetweenDates(start, this.timelineStart)\n\t\t\tconst rangeLength = this.getDaysBetweenDates(start, end)\n\t\t\tconst rangeTime =  (end.getHours() + (end.getMinutes() / 60)) - (start.getHours() + (start.getMinutes() / 60))\n\t\t\tconst offsetHours = start.getHours() + (start.getMinutes() / 60)\n\t\t\t\n\t\t\tconst zOffset = Math.round(10000 / (rangeLength * 24 + rangeTime))\n\t\t\t\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: `${offsetDays * this.dayWidth + offsetHours * this.hourWidth}px`,\n\t\t\t\twidth: `${rangeLength * this.dayWidth + rangeTime * this.hourWidth}px`,\n\t\t\t\theight: '100%',\n\t\t\t\ttransform: 'translateY(20px)',\n\t\t\t\tbackgroundColor: color,\n\t\t\t\tzIndex: 9999 + zOffset,\n\t\t\t\tborderRadius: '6px'\n\t\t\t}\n\t\t},\n\t\tgetDaysBetweenDates(date1, date2) {\n\t\t\tconst diffTime = Math.abs(date1 - date2); // ms\n\t\t\treturn Math.floor(diffTime / (1000 * 60 * 60 * 24)); // convert to days\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tgetTimelineEventStyle() {\n\t\t\treturn {\n\t\t\t\twidth: `${this.dayWidth}px`,\n\t\t\t\ttransform: `translateX(-${this.dayWidth / 2}px)`,\n\t\t\t\tminHeight: '420px'\n\t\t\t}\n\t\t},\n\t\thandleScrollTimeline(e) {\n\t\t\tif(e.wheelDelta > 0) {\n\t\t\t\tthis.hourWidth *= 1.2\n\t\t\t} else if (e.wheelDelta < 0) {\n\t\t\t\tthis.hourWidth = this.hourWidth / 120 * 100\n\t\t\t}\n\t\t},\n\t\tgoToday() {\n\t\t\tconst today = new Date();\n\t\t\tconst yyyy = today.getFullYear();\n\t\t\tconst mm = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-based\n\t\t\tconst dd = String(today.getDate()).padStart(2, '0');\n\t\t\t\n\t\t\tthis.scrollToDate(`${yyyy}-${mm}-${dd}`)\n\t\t},\n\t\tscrollToDate(datestr) {\n\t\t\tsetTimeout(() => {\n\n\t\t\t\tconst el = document.getElementById(datestr)\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t}\n\t\t\t}, 200)\n\t\t},\n\t\tanwDateFormat(anw) {\n\t\t\tconst vonparts = anw.von.split(\" \")\n\t\t\tconst bisparts = anw.bis.split(\" \")\n\t\t\treturn `${vonparts[0]} | ${vonparts[1]} - ${bisparts[1]}`\n\t\t}\n\t},\n\twatch:{\n\t\tmodelValue: {\n\t\t\thandler(newVal) {\n\t\t\t\tif(!newVal) return\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst id = 'entRange-' + newVal.entschuldigung_id\n\t\t\t\t\tconst el = document.getElementById(id)\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t\t}\n\t\t\t\t}, 200)\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetTooltipAnwTimeline() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAnwTimeline'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tdayWidth() {\n\t\t\treturn this.hourWidth * 24\t\n\t\t},\n\t\ttimelineWidth() {\n\t\t\treturn this.getDaysBetweenDates(this.timelineStart, this.timelineEnd) * this.dayWidth\t\n\t\t},\n\t\tentTimeRanges() {\n\t\t\tif(!this.entArray) return []\n\t\t\treturn this.entArray.filter(ent => new Date(ent.von) >= this.timelineStart && new Date(ent.bis) <= this.timelineEnd)\n\t\t},\n\t\tanwTimeRanges() {\n\t\t\tif(!this.anwArray) return []\n\t\t\treturn this.anwArray.filter(anw => new Date(anw.von) >= this.timelineStart && new Date(anw.bis) <= this.timelineEnd)\n\t\t},\n\t\tevents() {\n\t\t\tconst startDate = new Date(this.timelineStart)\n\t\t\tconst days = []\n\t\t\tlet current = startDate\n\n\t\t\twhile (current <= this.timelineEnd) {\n\t\t\t\tconst year = current.getFullYear()\n\t\t\t\tconst month = String(current.getMonth() + 1).padStart(2, '0')\n\t\t\t\tconst day = String(current.getDate()).padStart(2, '0')\n\t\t\t\tconst formattedDate = `${year}-${month}-${day}`\n\n\t\t\t\tdays.push({\n\t\t\t\t\ttitle: `${month}/${day}`,\n\t\t\t\t\tdate: formattedDate\n\t\t\t\t})\n\n\t\t\t\tcurrent.setDate(current.getDate() + 1)\n\t\t\t}\n\n\t\t\treturn days\n\t\t\t\n\t\t},\n\t\tgetTimelineStyle() {\n\t\t\treturn { \n\t\t\t\tminWidth: this.timelineWidth + 'px',\n\t\t\t\t'--timeline-event-width': this.dayWidth + 'px'\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tif(!this.modelValue) {\n\t\t\tthis.goToday()\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst id = 'entRange-' + newVal.entschuldigung_id\n\t\t\t\tconst el = document.getElementById(id)\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t}\n\t\t\t}, 200)\n\t\t}\n\t\t\n\t},\n\ttemplate: `\n\t<div v-if=\"anwArray && entArray\" class=\"row\" style=\"padding: 0px; margin: 0px;\">\n\t\t<div class=\"col-3\">\n\t\t\t<p>Entschuldigungen</p>\n\t\t\t<div style=\"max-height: 400px; overflow: auto;\">\n\t\t\t\t<template v-for=\"ent in entArray\" :key=\"'entmenu-'+ent.entschuldigung_id\">\n\t\t\t\t\t<div class=\"position-relative\" >\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-light\" @click=\"highlightEntschuldigung(ent)\"><span>{{ent.entschuldigung_id}}: {{formatEntTime(ent)}}</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-3\"> \n\t\t\t<div style=\"max-height: 400px; overflow: auto;\">\n\t\t\t\t<p>Anwesenheitskontrollen</p>\n\t\t\t\t<template v-for=\"anw in anwArray\" :key=\"'anwmenu-'+anw.anwesenheit_id\">\n\t\t\t\t\t<div class=\"position-relative\" >\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-light\" @click=\"highlightKontrolle(anw)\"><span>{{anw.anwesenheit_id}}: {{ anwDateFormat(anw) }}</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-6\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<Range v-model=\"selectedRange\"/>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-2\">\n\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"timelineStart\"\n\t\t\t\t\t\tv-model=\"timelineStart\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:format=\"formatDateTimelineStart\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:time-picker=\"false\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"timelineEnd\"\n\t\t\t\t\t\tv-model=\"timelineEnd\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:format=\"formatDateTimelineEnd\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:time-picker=\"false\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\"><button type=\"button\" class=\"btn btn-primary\" @click=\"goToday\">today</button></div>\n\t\t\t\t<div v-tooltip.bottom=\"getTooltipAnwTimeline\">\n\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"row\" style=\"padding: 0px; margin: 0px;\">\n\t\t\t<div @wheel.prevent=\"handleScrollTimeline\" class=\"custom-timeline-scroll-wrapper p-5\" style=\"margin-left: 12px; margin-right:12px;\">\n\t\t\t\t<div class=\"timeline-container position-relative\" :style=\"getTimelineStyle\">\n\t\t\t\t\t<!-- Ent Range Overlays -->\n\t\t\t\t\t<div\n\t\t\t\t\t  v-for=\"(range, index) in entTimeRanges\"\n\t\t\t\t\t  :key=\"'entRange-' + index\"\n\t\t\t\t\t  :id=\"'entRange-' + range.entschuldigung_id\"\n\t\t\t\t\t  class=\"timeline-overlay\"\n\t\t\t\t\t  :style=\"getOverlayStyleEnt(range)\"\n\t\t\t\t\t  @click=\"showRangeDetails(range)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"time-marker start\">{{ formatDate(range.von) }}</div>\n\t\t\t\t\t\t<div class=\"time-marker end\" style=\"transform: translateY(20px)\">{{ formatDate(range.bis) }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Anw Overlays -->\n\t\t\t\t\t<div\n\t\t\t\t\t  v-for=\"(range, index) in anwTimeRanges\"\n\t\t\t\t\t  :key=\"'anwRange-' + index\"\n\t\t\t\t\t  :id=\"'anwRange-' + range.anwesenheit_id\"\n\t\t\t\t\t  class=\"timeline-overlay\"\n\t\t\t\t\t  :style=\"getOverlayStyleAnw(range)\"\n\t\t\t\t\t  @click=\"showRangeDetails(range)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"time-marker start\">{{ formatDate(range.von) }}</div>\n\t\t\t\t\t\t<div class=\"time-marker end\" style=\"transform: translateY(20px)\">{{ formatDate(range.bis) }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t<!-- Timeline -->\n\t\t\t\t\t<Timeline :value=\"events\" layout=\"horizontal\" :unstyled=\"true\" dataKey=\"date\">\n\t\t\t\t\t\t<template #marker=\"event\">\n\t\t\t\t\t\t\t<div style=\"background-color: purple; width: 24px; height: 24px;\" :id=\"event.item.date\"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #content=\"slotProps\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"event-card text-center p-2\"\n\t\t\t\t\t\t\t:style=\"getTimelineEventStyle(slotProps.item)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h6>{{ slotProps.item.title }}</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Timeline>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div v-else class=\"text-center\">\n\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t</div>\n\t`\n}\n\nexport default AnwTimeline;","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport CoreTabs from '../../../../../js/components/Tabs.js';\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {StudentDropdown} from \"../Setup/StudentDropdown.js\"\nimport StudentAnwesenheitComponent from \"./StudentAnwesenheitComponent.js\";\n\nimport ApiProfil from '../../api/factory/profil.js';\nimport AnwTimeline from '../Assistenz/AnwTimeline.js';\n\nexport const StudentComponent = {\n\tname: 'StudentComponent',\n\tcomponents: {\n\t\tAnwTimeline,\n\t\tCoreNavigationCmpt,\n\t\tCoreBaseLayout,\n\t\tCoreTabs,\n\t\tBsModal,\n\t\tStudentDropdown,\n\t\tStudentAnwesenheitComponent\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttabsStudent: this.getTabsStudent(),\n\t\t\tviewDataStudent: {}\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: []\n\t},\n\tmethods: {\n\t\tgetTabsStudent() {\n\t\t\tconst tabs = {\n\t\t\t\tanwesenheiten: { title: this.$p.t('global/anwesenheiten'), component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentAnwesenheitComponent.js'},\n\t\t\t}\n\t\t\tif(this.$entryParams.permissions.entschuldigungen_enabled) tabs['entschuldigungen'] = { title: this.$p.t('global/entschuldigungen'), component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentEntschuldigungComponent.js'}\n\t\t\tif(this.$entryParams.permissions.admin) tabs['timeline'] = { title: this.$p.t('global/anwTimelineV2'), component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Student/AnwTimelineWrapper.js'}\n\t\t\t\n\t\t\treturn tabs\n\t\t},\n\t\trouteToCodeScan() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'Scan'\n\t\t\t})\n\t\t},\n\t\tcheckEntryParamPermissions() {\n\t\t\tif(this.$entryParams.permissions === undefined) { // routed into app inner component skipping init in landing page\n\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(this.permissions)\n\t\t\t}\n\n\t\t\tif(this.$entryParams.phrasenPromise === undefined) {\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['global', 'person', 'lehre', 'table', 'filter', 'ui'])\n\t\t\t}\n\n\t\t},\n\t\thandleTabChanged (key) {\n\t\t\t// check if the current has redrawTable function -> its a tabulator so redraw it to avoid bad things\n\t\t\tif(this.$refs.tabsStudent?._?.refs?.current?.redrawTable) this.$refs.tabsStudent._.refs.current.redrawTable()\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\tthis.$entryParams.profileViewDataPromise = new Promise((resolve) => {\n\t\t\t// if student is logged in as himself load his own viewData\n\t\t\tif(!this.$entryParams.selected_student_info) {\n\n\t\t\t\tthis.$api.call(ApiProfil.getProfileViewData(null))\n\t\t\t\t\t\t.then(res => {\n\n\t\t\t\t\t\tconst data = res.data.retval[0]\n\t\t\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid\n\t\t\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\t\t\tthis.$entryParams.viewDataStudent = data\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t});\n\n\t\t\t\t} else { // admin or assistenz check student data - set viewdata from selected student\n\t\t\t\t\tconst data = this.$entryParams.selected_student_info\n\t\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid ? data.student_uid : data.uid\n\t\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\t\tresolve()\n\t\t\t\t}\n\n\t\t\t})\n\t\t},\n\t\tstudentChangedHandler() {\n\n\t\t\tthis.$refs.tabsStudent._.refs.current.reload()\n\n\t\t\tconst uid = this.$entryParams.selected_student_info.uid ? this.$entryParams.selected_student_info.uid : this.$entryParams.selected_student_info.student_uid\n\t\t\t\tthis.$api.call(ApiProfil.getProfileViewData(uid))\n\t\t\t\t.then(res => {\n\n\t\t\t\tif(!res?.data?.retval?.[0]) return\n\t\t\t\tconst data = res.data.retval[0]\n\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid\n\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\tthis.$entryParams.viewDataStudent = data\n\t\t\t});\n\n\t\t},\n\t\tasync awaitPhrasen() {\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t},\n\t\tredrawTable() {\n\t\t\t// empty method so landing page doesnt break on this tab\n\t\t}\n\t},\n\tcreated() {\n\t},\n\tmounted() {\n\t\tthis.checkEntryParamPermissions()\n\t\tthis.setup()\n\n\t\t// get some info if desired user endpoint is anw list or entschuldigungen tab and set it accordingly\n\n\t\tif(this.$entryParams.activetabstudent) this.$refs.tabsStudent.change(this.$entryParams.activetabstudent)\n\n\t},\n\ttemplate: `\n\t<div class=\"row-cols\">\n\t\t<core-base-layout>\t\n\t\t\t<template #main>\t\n\t\t\t\t<div ref=\"studentHeaderRow\" class=\"row\">\n\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t<h1 class=\"h4\">\n\t\t\t\t\t\t\t{{ viewDataStudent.vorname }} {{viewDataStudent.nachname }} \n\t\t\t\t\t\t\t<span class=\"fhc-subtitle\">{{viewDataStudent.semester }}{{viewDataStudent.verband }}{{viewDataStudent.gruppe }}</span>\n\t\t\t\t\t\t</h1>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t<StudentDropdown v-if=\"$entryParams?.permissions?.admin || $entryParams?.permissions?.assistenz\"\n\t\t\t\t\t\t\t id=\"studentUID\" ref=\"studentDropdown\" @studentChanged=\"studentChangedHandler\">\n\t\t\t\t\t\t</StudentDropdown>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 text-center\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"routeToCodeScan\">{{ $p.t('global/codeEingeben') }}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"$entryParams?.permissions?.entschuldigungen_enabled\">\n\t\t\t\t\t<core-tabs :config=\"tabsStudent\" ref=\"tabsStudent\" @changed=\"handleTabChanged\"></core-tabs>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<StudentAnwesenheitComponent/>\t\t\t\t\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</core-base-layout>\n\t\t\n\t</div>\n\t\t\n`\n};\n\nexport default StudentComponent","export default {\n\temits: [\n\t\t'delete'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [File, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpreview: ''\n\t\t};\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (n.type == 'application/x.fhc-dms+json') {\n\t\t\t\tn.text().then(result => {\n\t\t\t\t\tconst obj = JSON.parse(result);\n\t\t\t\t\tthis.preview = obj.preview || '';\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<li class=\"form-upload-dms-item\">\n\t\t<span class=\"col-auto\"><i class=\"fa fa-file me-1\"></i></span>\n\t\t<span class=\"col\">{{ modelValue.name }}</span>\n\t\t<a v-if=\"preview\" :href=\"preview\" target=\"_blank\" class=\"col-auto btn btn-outline-secondary btn-p-0 me-1\">\n\t\t\t<i class=\"fa fa-download\"></i>\n\t\t</a>\n\t\t<button class=\"col-auto btn btn-outline-secondary btn-p-0\" @click=\"$emit('delete')\">\n\t\t\t<i class=\"fa fa-close\"></i>\n\t\t</button>\n\t</li>`\n}\n","import DmsItem from './Dms/Item.js';\n\nexport default {\n\tcomponents: {\n\t\tDmsItem\n\t},\n\temits: [\n\t\t'update:modelValue'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [ FileList, Array ],\n\t\t\trequired: true\n\t\t},\n\t\tmultiple: Boolean,\n\t\tid: String,\n\t\tname: String,\n\t\tinputClass: [String, Array, Object],\n\t\tnoList: Boolean,\n\t\taccept: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tstringifyFile(file) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tlastModified: file.lastModified,\n\t\t\t\tlastModifiedDate: file.lastModifiedDate,\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\ttype: file.type\n\t\t\t});\n\t\t},\n\t\taddFiles(event) {\n\t\t\tif (!this.multiple)\n\t\t\t\treturn this.$emit('update:modelValue', event.target.files);\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst doubles = [];\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tdt.items.add(file);\n\t\t\t\tdoubles.push(this.stringifyFile(file));\n\t\t\t}\n\t\t\tfor (var file of event.target.files) {\n\t\t\t\t// NOTE(chris): deep check (with FileReader) would require an async function so we only check the basic attributes\n\t\t\t\tif (doubles.indexOf(this.stringifyFile(file)) < 0)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t},\n\t\tremoveFile(id) {\n\t\t\tconst fileToRemove = Array.from(this.modelValue)[id];\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tif (file !== fileToRemove)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (!n)\n\t\t\t\treturn;\n\t\t\tif (n instanceof FileList) {\n\t\t\t\tif (!this.$refs.upload) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn this.$refs.upload.files = n;\n\t\t\t}\n\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst dms = [];\n\t\t\tfor (var file of n) {\n\t\t\t\tif (file instanceof File) {\n\t\t\t\t\tdt.items.add(file);\n\t\t\t\t} else {\n\t\t\t\t\tconst dmsFile = new File([JSON.stringify(file)], file.name, {\n\t\t\t\t\t\ttype: 'application/x.fhc-dms+json'\n\t\t\t\t\t});\n\t\t\t\t\tdt.items.add(dmsFile);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"form-upload-dms\">\n\t\t<input ref=\"upload\" class=\"form-control\" :disabled=\"disabled\" :accept=\"accept\" :aria-label=\"$p.t('profilUpdate','documentUpload')\" :title=\"$p.t('profilUpdate','documentUpload')\" :class=\"inputClass\" :id=\"id\" :name=\"name\" :multiple=\"multiple\" type=\"file\" @change=\"addFiles\">\n\t\t<ul v-if=\"modelValue.length && multiple && !noList\" :accept=\"accept\" class=\"list-unstyled m-0\">\n\t\t\t<dms-item\n\t\t\t\tv-for=\"(file, index) in modelValue\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tv-model=\"file\"\n\t\t\t\tclass=\"d-flex mx-1 mt-1 align-items-start\"\n\t\t\t\t@delete=\"removeFile(index)\"\n\t\t\t\t>\n\t\t\t</dms-item>\n\t\t</ul>\n\t</div>`\n}","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {studentFormatters} from \"../../formatters/formatters.js\";\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport Upload from '../../../../../js/components/Form/Upload/Dms.js';\nimport VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport ApiProfil from '../../api/factory/profil.js'\nexport default {\n\tname: 'StudentEntschuldigungComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient,\n\t\tCoreFilterCmpt,\n\t\tBsModal,\n\t\tUpload,\n\t\t\"datepicker\": VueDatePicker,\n\t\tCheckbox: primevue.checkbox\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tnoFileUpload: false,\n\t\t\teditEntschuldigung: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tentschuldigung: this.initEntschuldigungForm(),\n\t\t\tminDate: this.calcMinDate(),\n\t\t\ttableBuiltPromise: null,\n\t\t\tentschuldigungsViewTabulatorOptions: {\n\t\t\t\tajaxURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router+'/extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getEntschuldigungenByPersonID',\n\t\t\t\tajaxResponse: (url, params, response) => {\n\t\t\t\t\treturn response.data.retval\n\t\t\t\t},\n\t\t\t\theight: this.$entryParams.tabHeights.studentEnt,\n\t\t\t\tajaxConfig: \"POST\",\n\t\t\t\tajaxContentType: {\n\t\t\t\t\theaders:{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody:()=>{\n\t\t\t\t\t\treturn JSON.stringify({\n\t\t\t\t\t\t\tperson_id: this.$entryParams.selected_student_info ? this.$entryParams.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tplaceholder: this._.root.appContext.config.globalProperties.$p.t('global/noDataAvailable'),\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tlayout:\"fitDataStretch\",\n\t\t\t\tpagination: true,\n\t\t\t\tpaginationSize: 100,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/status')), field: 'akzeptiert', formatter: this.entschuldigungstatusFormatter, minWidth: 200, tooltip: false, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: studentFormatters.formDate, minWidth: 200, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: studentFormatters.formDate, minWidth: 200, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/aktion')), field: 'dms_id', formatter: this.formAction, widthGrow: 1, minWidth: 200, tooltip: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/begruendungAnw')), field: 'notiz', tooltip:false}\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-studentEntschuldigungenTable\"\n\t\t\t},\n\t\t\tentschuldigungsViewTabulatorEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tfilterTitle: \"\"\n\t\t};\n\t},\n\tmethods: {\n\t\tinitEntschuldigungForm() {\n\t\t\treturn{\n\t\t\t\tvon: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate(), 0, 0, 0, 0),\n\t\t\t\tbis: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate() + 1, 23, 59, 0, 0),\n\t\t\t\tfiles: []\n\t\t\t}\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tformatDateEntschuldigungEdit(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1);\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tcalcMinDate(){\n\t\t\t// calc max reach offset into workdays\n\t\t\tlet d = new Date();\n\t\t\tfor (let x = this.$entryParams.permissions.entschuldigungMaxReach; x > 0; x--) {\n\t\t\t\t// step 3 times on monday, else step once per counter\n\t\t\t\td.setDate(d.getDate() - (d.getDay() === 1 ? 3 : 1));\n\t\t\t}\n\n\t\t\treturn d\n\t\t},\n\t\tisValidDateObj(date) {\n\t\t\treturn date instanceof Date && !isNaN(date.getTime());\n\t\t},\n\t\tentschuldigungstatusFormatter(cell) {\n\t\t\tlet data = cell.getValue()\n\t\t\tif (data == null) {\n\t\t\t\tcell.getElement().style.color = \"#17a2b8\"\n\t\t\t\treturn this.$p.t('global/entschuldigungOffen')\n\t\t\t} else if (data === true) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn this.$p.t('global/entschuldigungAkzeptiert')\n\t\t\t} else if (data === false) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn this.$p.t('global/entschuldigungAbgelehnt')\n\t\t\t}\n\t\t},\n\t\ttriggerEdit() {\n\n\t\t\tif(!this.entschuldigung.files.length) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tconst formData = new FormData();\n\t\t\t\n\t\t\tfor (let i = 0; i < this.entschuldigung.files.length; i++) {\n\t\t\t\tformData.append('files', this.entschuldigung.files[i]);\n\t\t\t}\n\n\t\t\tformData.append('von', this.isValidDateObj(this.editEntschuldigung.von) ? this.editEntschuldigung.von.toISOString() : this.editEntschuldigung.von);\n\t\t\tformData.append('bis', this.isValidDateObj(this.editEntschuldigung.bis) ? this.editEntschuldigung.bis.toISOString() : this.editEntschuldigung.bis);\n\t\t\tformData.append('entschuldigung_id', this.editEntschuldigung.entschuldigung_id)\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tformData.append('person_id', person_id);\n\n\n\t\t\tthis.$api.call(ApiProfil.editEntschuldigung(formData))\n\t\t\t\t.then(response => {\n\n\t\t\t\tif (response.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tconst rows = this.$refs.entschuldigungsTable.tabulator.getRows()\n\n\t\t\t\t\tlet targetRow = rows.find(row => row.getData().entschuldigung_id == response.data.entschuldigung_id);\n\n\t\t\t\t\tif (targetRow) {\n\t\t\t\t\t\ttargetRow.update({dms_id: response.data.dms_id});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungUploaded'));\n\t\t\t\t}\n\t\t\t}).finally(()=> {\n\t\t\t\tthis.$refs.modalContainerEntschuldigungEdit.hide()\n\t\t\t});\n\n\t\t},\n\t\ttriggerUpload() {\n\t\t\tif (!this.validate())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst formData = new FormData();\n\t\t\tif(!this.noFileUpload) {\n\t\t\t\tfor (let i = 0; i < this.entschuldigung.files.length; i++) {\n\t\t\t\t\tformData.append('files', this.entschuldigung.files[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformData.append('noFileUpload', this.noFileUpload)\n\t\t\t}\n\t\t\t\n\t\t\tformData.append('von', this.entschuldigung.von.toISOString());\n\t\t\tformData.append('bis', this.entschuldigung.bis.toISOString());\n\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tformData.append('person_id', person_id);\n\n\t\t\tthis.$api.call(ApiProfil.addEntschuldigung(formData))\n\t\t\t\t.then(res => {\n\t\t\t\tlet rowData = res.data\n\t\t\t\tthis.$refs.entschuldigungsTable.tabulator.addRow(\n\t\t\t\t\t{\n\t\t\t\t\t\t'dms_id': rowData.dms_id,\n\t\t\t\t\t\t'akzeptiert': null,\n\t\t\t\t\t\t'von': rowData.von,\n\t\t\t\t\t\t'bis': rowData.bis,\n\t\t\t\t\t\t'entschuldigung_id': rowData.entschuldigung_id\n\t\t\t\t\t}\n\t\t\t\t\t, true);\n\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungUploaded'));\n\t\t\t\tthis.entschuldigung = this.initEntschuldigungForm();\n\n\t\t\t})\n\n\t\t\tthis.$refs.modalContainerEntschuldigungUpload.hide()\n\t\t},\n\t\tformAction: function(cell) {\n\t\t\tlet download = document.createElement('div');\n\t\t\tdownload.className = \"d-flex gap-3\";\n\n\t\t\tlet button = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tconst minwidth = '40px';\n\t\t\t\n\t\t\tif(cell.getData().dms_id) {\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-download\"></i>';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.addEventListener('click', () => this.downloadEntschuldigung(cell.getData().dms_id));\n\t\t\t\tbutton.title = this.$p.t('global/download');\n\t\t\t\tdownload.append(button);\n\t\t\t} else {\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-upload\"></i>';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.addEventListener('click', () => this.addEntschuldigungFile(cell.getData()));\n\t\t\t\tbutton.title = this.$p.t('global/upload');\n\t\t\t\tdownload.append(button);\n\t\t\t}\n\n\t\t\tif (cell.getData().akzeptiert == null)\n\t\t\t{\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\t\tbutton.title = this.$p.t('global/entschuldigungLöschen');\n\t\t\t\tbutton.addEventListener('click', () => this.deleteEntschuldigung(cell, 'decline'));\n\t\t\t\tdownload.append(button);\n\t\t\t}\n\n\t\t\treturn download;\n\t\t},\n\t\taddEntschuldigungFile(entschuldigung) {\n\t\t\tthis.editEntschuldigung = entschuldigung\n\t\t\tthis.$refs.modalContainerEntschuldigungEdit.show()\n\t\t},\n\t\tdownloadEntschuldigung: function(dms_id)\n\t\t{\n\t\t\twindow.location = CoreRESTClient._generateRouterURI('extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile?entschuldigung=' + dms_id);\n\t\t},\n\t\tasync deleteEntschuldigung(cell) {\n\t\t\tif (await this.$fhcAlert.confirmDelete() === false)\n\t\t\t\treturn;\n\n\t\t\tlet entschuldigung_id = cell.getData().entschuldigung_id;\n\t\t\tthis.$api.call(ApiProfil.deleteEntschuldigung(entschuldigung_id, this.$entryParams.selected_student_info?.person_id))\n\t\t\t\t.then(response => {\n\n\t\t\t\tif (response.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tcell.getRow().delete()\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungLöschenErfolg'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tstartUploadEntschuldigung(){\n\t\t\tthis.$refs.modalContainerEntschuldigungUpload.show()\n\t\t},\n\t\tvalidate: function() {\n\t\t\t// todo: check for von/bis input never toched => von still exists as initialized hours minutes object\n\t\t\tif(!this.entschuldigung.von) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningEnterVonZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif(!this.entschuldigung.bis) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningEnterBisZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif(!this.entschuldigung.files.length && !this.noFileUpload) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tif (this.entschuldigung.bis < this.entschuldigung.von)\n\t\t\t{\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/errorValidateTimes'));\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\treload(){\n\t\t\tconst id = this.$entryParams.selected_student_info ? this.$entryParams.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\t\t\tthis.$api.call(ApiProfil.getEntschuldigungenByPersonID(id))\n\t\t\t\t.then(res => {\n\t\t\t\tthis.$refs.entschuldigungsTable.tabulator.setData(res.data.retval)\n\t\t\t})\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs?.entschuldigungsTable?.tabulator) this.$refs.entschuldigungsTable.tabulator.redraw(true)\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tconst cols = this.$refs.entschuldigungsTable.tabulator.getColumns()\n\n\t\t\t// phrasen bandaid\n\n\t\t\tcols.find(e => e.getField() === 'von').updateDefinition({title: this.$p.t('global/status')})\n\t\t\tcols.find(e => e.getField() === 'bis').updateDefinition({title: this.$capitalize(this.$p.t('ui/von'))})\n\t\t\tcols.find(e => e.getField() === 'student_status').updateDefinition({title: this.$capitalize(this.$p.t('global/bis'))})\n\t\t\tcols.find(e => e.getField() === 'von').updateDefinition({title: this.$p.t('ui/aktion')})\n\t\t\tcols.find(e => e.getField() === 'bis').updateDefinition({title: this.$p.t('global/notiz')})\n\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[0].title = this.$capitalize(this.$p.t('global/status'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[1].title = this.$capitalize(this.$p.t('ui/von'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[2].title = this.$capitalize(this.$p.t('global/bis'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[1].title = this.$capitalize(this.$p.t('ui/aktion'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[2].title = this.$capitalize(this.$p.t('global/notiz'))\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentEnt'].value = screenY - rect.top\n\n\t\t\tif(this.$refs.entschuldigungsTable.tabulator) this.$refs.entschuldigungsTable.tabulator.redraw(true)\n\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.minDate = new Date(this.minDate).setHours(0,0)\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.setup()\n\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\twatch: {\n\t\t'entschuldigung.files'(newVal) {\n\t\t\tif(newVal == [] || newVal === null || newVal === undefined) return\n\n\t\t\t// check filetype on input change\n\t\t\tconst file = newVal[0]\n\t\t\tif(!file) return\n\n\t\t\tif(file.type && !file.name.includes('jfif') && (\n\t\t\t\tfile.type.includes('jpg')\n\t\t\t\t|| file.type.includes('jpeg')\n\t\t\t\t|| file.type.includes('pdf')\n\t\t\t\t|| file.type.includes('png'))\n\t\t\t) {\n\t\t\t\t// all fine\n\t\t\t} else {\n\t\t\t\t// clear and alert for filetypes\n\t\t\t\tthis.$fhcAlert.alertInfo(this.$p.t('global/allowedEntschuldigungFileTypes'))\n\t\t\t\tthis.entschuldigung.files = []\n\t\t\t}\n\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentEntschuldigung', [this.$entryParams.permissions.entschuldigungMaxReach]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\n\t<core-base-layout\n\t\t:title=\"filterTitle\">\n\t\t<template #main>\n\t\t\t<bs-modal ref=\"modalContainerEntschuldigungUpload\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t{{$p.t('global/addEntschuldigung')}}\n\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('ui/von'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"von\"\n\t\t\t\t\t\t\t\tv-model=\"entschuldigung.von\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t\t\t:start-time=\"entschuldigung.von\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:min-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:start-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('global/bis'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"bis\"\n\t\t\t\t\t\t\t\tv-model=\"entschuldigung.bis\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t\t\t:start-time=\"entschuldigung.bis\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:min-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:start-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-8\">\n\t\t\t\t\t\t\t<Upload :disabled=\"noFileUpload\" accept=\".jpg,.png,.pdf\" v-model=\"entschuldigung.files\"></Upload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<div class=\"col-2\"></div>\n\t\t\t\t\t\t\t\t<div class=\"col-2\"><Checkbox v-model=\"noFileUpload\" :binary=\"true\"></Checkbox></div>\n\t\t\t\t\t\t\t\t<div class=\"col-8\"><span>{{$p.t('global/excuseUploadNoFile')}}</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button class=\"btn btn-primary\" @click=\"triggerUpload\">{{$p.t('ui/hochladen')}}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\t\t\t\n\t\t\t<bs-modal ref=\"modalContainerEntschuldigungEdit\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t{{$p.t('global/editEntschuldigung')}}\n\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default v-if=\"editEntschuldigung\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\" >\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('ui/von'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"vonEdit\"\n\t\t\t\t\t\t\t\tv-model=\"editEntschuldigung.von\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDateEntschuldigungEdit\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:disabled=\"true\">\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('global/bis'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"bisEdit\"\n\t\t\t\t\t\t\t\tv-model=\"editEntschuldigung.bis\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDateEntschuldigungEdit\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t\t\t<Upload accept=\".jpg,.png,.pdf\" v-model=\"entschuldigung.files\"></Upload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button class=\"btn btn-primary\" @click=\"triggerEdit\">{{$p.t('ui/hochladen')}}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\t\t\t\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"entschuldigungsTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"entschuldigungsViewTabulatorOptions\"\n\t\t\t\t:table-only=\"true\"\n\t\t\t\t:newBtnShow=\"true\"\n\t\t\t\t:newBtnLabel=\"$p.t('global/entschuldigungHochladen')\"\n\t\t\t\t@click:new=\"startUploadEntschuldigung\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\t</core-base-layout>\n`\n};","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\n\nimport ApiProfil from '../../api/factory/profil.js';\n\nexport default {\n\tname: 'ScanComponent',\n\tcomponents: {\n\t\tCoreNavigationCmpt,\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tinternalZugangscode: this.zugangscode,\n\t\t\tzugangscodeProcessed: false,\n\t\t\tcodeMaxlength: 8,\n\t\t\tviewData: null,\n\t\t\tcodeButtonDisabled: true\n\t\t};\n\t},\n\tprops: {\n\t\tzugangscode: null\n\t},\n\tmethods: {\n\t\tsendCode() {\n\t\t\tthis.processAnwesenheit()\n\t\t},\n\t\tprocessAnwesenheit() {\n\n\t\t\tthis.$api.call(ApiProfil.checkInAnwesenheit(this.internalZugangscode))\n\t\t\t\t.then(\n\t\t\t\tres => {\n\t\t\t\t\tif(res.meta.status === \"success\" && res.data) {\n\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/eintragErfolgreich'))\n\n\t\t\t\t\t\tthis.von = new Date(JSON.parse(res.data.von))\n\t\t\t\t\t\tthis.bis = new Date(JSON.parse(res.data.bis))\n\n\t\t\t\t\t\tthis.viewData = JSON.parse(res.data.viewData).retval[0]\n\n\t\t\t\t\t\tthis.zugangscodeProcessed = true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$fhcAlert.alertError(res.data.data)\n\t\t\t\t\t\tthis.internalZugangscode = ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\n\t\t},\n\t\tcheckValue(event) {\n\t\t\tthis.internalZugangscode = event.target.value\n\t\t\tthis.codeButtonDisabled = !(this.internalZugangscode && this.internalZugangscode.length === this.codeMaxlength)\n\t\t}\n\t},\n\tmounted() {\n\t\tif(this.internalZugangscode) {\n\t\t\tthis.processAnwesenheit()\n\t\t}\n\t},\n\tcomputed: {\n\t\tcalculatedMaxLength() {\n\t\t\treturn '' + this.codeMaxlength\n\t\t},\n\t\tgetBaseLayoutTitle() {\n\t\t\tif (this.internalZugangscode && this.zugangscodeProcessed) {\n\t\t\t\treturn this.$p.t('global/eintragErfolgreich')\n\t\t\t} else return this.$p.t('global/bitteZugangscodeEingeben')\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"row-cols mb-4\">\n\t\t<div class=\"row-col-4 mt-3 text-center\">\n\t\t\t<core-base-layout\n\t\t\t\t:title=getBaseLayoutTitle>\n\t\t\t\t<template #main>\n\t\t\t\t\t<template v-if=\"!zugangscodeProcessed\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-sm-10 col-10 mx-auto\">\n\t\t\t\t\t\t\t\t<input :maxlength=\"calculatedMaxLength\" class=\"form-control\" :value=\"internalZugangscode\" @input=\"checkValue($event)\" :placeholder=\"$p.t('global/code')\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"row mt-3\">\n\t\t\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t\t\t<button @click=\"sendCode\" role=\"button\" class=\"btn btn-primary align-self-center\" :disabled=codeButtonDisabled>\n\t\t\t\t\t\t\t\t\t{{ $p.t('global/codeSenden') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else> \n\t\t\t\t\t\t<div v-if=\"viewData\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p>{{viewData.bezeichnung}} ({{viewData.kurzbz}})</p>\n\t\t\t\t\t\t\t\t<p>{{von.toLocaleDateString()}}:  {{von.toLocaleTimeString()}} - {{bis.toLocaleTimeString()}}</p>\n\t\t\t\t\t\t\t\t<p>{{viewData.vorname}} {{viewData.nachname}} {{$p.t('global/wurdeRegistriert')}}.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</core-base-layout>\n\t\t</div>\n\t</div>\n\n\n\n\t\n\t\t\n`\n};\n\n\n","import ApiInfo from '../../api/factory/info.js';\n\nexport const StudiengangDropdown = {\n\tname: \"StudiengangDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'sgChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\toptions: [],\n\t\t\tselectedOption: [],\n\t\t\terrors: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.loadDropdown();\n\t},\n\tprops: {\n\t\tallowedStg: {\n\t\t\ttype: Array,\n\t\t\tdefault: null\n\t\t},\n\t\tisAdmin: false,\n\t},\n\tmethods: {\n\t\tloadDropdown() {\n\t\t\tthis.$api.call(ApiInfo.getStudiengaenge(this.allowedStg))\n\t\t\t\t.then(res => {\n\t\t\t\tif(res.meta.status !== \"success\") return\n\t\t\t\t\t\n\t\t\t\tconst data =res.data.retval ?? [];\n\n\t\t\t\t// apply this last resort filter if an assistenz who has simultaneous admin rights\n\t\t\t\t// finds that they see too many stg's\n\t\t\t\tif(this.allowedStg) {\n\t\t\t\t\tthis.options = data.filter(d => {\n\t\t\t\t\t\treturn this.allowedStg.includes(String(d.studiengang_kz))\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.options = data\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.$entryParams.studiengaengeAdmin = res.data.retval.map(e => e.studiengang_kz)\n\t\t\t});\n\t\t},\n\t\tsgChanged(e) {\n\t\t\tthis.$emit(\"sgChanged\", e);\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.kurzbzlang + ' ' + option.bezeichnung\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"col-12\">\n\t\t\t<Dropdown @change=\"sgChanged\" :placeholder=\"$p.t('lehre/studiengang')\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" v-model=\"selectedOption\" :options=\"options\" showClear>\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.kurzbzlang }} {{ option.bezeichnung }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","import VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\n\nexport const EntschuldigungEdit = {\n\tname: \"EntschuldigungEdit\",\n\tcomponents: {\n\t\tDatepicker: VueDatePicker,\n\t\tTextarea: primevue.textarea,\n\t\tTristate: primevue.tristatecheckbox\n\t},\n\temits: [\n\t\t'validate'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\tminDate: this.calcMinDate(),\n\t\t\tform: Vue.reactive({\n\t\t\t\tvon: null,\n\t\t\t\tbis: null,\n\t\t\t\tnotiz: '',\n\t\t\t\takzeptiert: '',\n\t\t\t\t// todo: column examberechtigt default false?\n\t\t\t})\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null\n\t},\n\tcreated() {\n\n\t},\n\t\n\tmethods: {\n\t\tsetForm(newVal) {\n\t\t\tthis.form.von = new Date(newVal.von)\n\t\t\tthis.form.bis = new Date(newVal.bis)\n\t\t\tthis.form.uploaddatum = new Date(newVal.uploaddatum)\n\t\t\tthis.form.notiz = newVal.notiz\n\t\t\tthis.form.akzeptiert = newVal.akzeptiert\n\t\t},\n\t\tcalcMinDate(){\n\t\t\t// assistenz minDate further in the past than students by design\n\t\t\tlet d = new Date();\n\n\t\t\td.setFullYear(d.getFullYear() - 1)\n\n\t\t\treturn d\n\t\t},\n\t\tformatDate(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hrs = String(date.getHours()).padStart(2, '0')\n\t\t\tconst min = String(date.getMinutes()).padStart(2, '0')\n\t\t\t\n\t\t\treturn `${day}.${month}.${year} ${hrs}:${min}`;\n\t\t},\n\t\tvalidate(entschuldigung) {\n\t\t\tif (entschuldigung === null) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!entschuldigung.von) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\t// this.$fhcAlert.alertWarning(this.$p.t('global/warningEnterVonZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (!entschuldigung.bis) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\t// this.$fhcAlert.alertWarning(this.$p.t('global/warningEnterBisZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tthis.$emit('validate', true)\n\t\t}\n\t},\n\twatch:{\n\t\tmodelValue: {\n\t\t\thandler(newVal) {\n\t\t\t\tif(!this.validate(newVal)) return\n\t\t\t\tthis.setForm(newVal)\n\t\t\t},\n\t\t\tdeep: true\n\t\t},\n\t\tform: {\n\t\t\thandler(newVal) {\n\t\t\t\tthis.validate(newVal)\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetStatusLabel() {\n\t\t\tif(this.modelValue.akzeptiert === null) {\n\t\t\t\treturn 'Entschuldigung Status offen'\n\t\t\t} else if (this.modelValue.akzeptiert === true) {\n\t\t\t\treturn 'Entschuldigung akzeptiert'\n\t\t\t} else {\n\t\t\t\treturn 'Entschuldigung abgelehnt'\n\t\t\t}\n\t\t}\t\n\t},\n\ttemplate: `\n\t\t<div v-if=\"modelValue\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<p>\n\t\t\t\t\t{{ modelValue.vorname }} {{ modelValue.nachname }}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{{ modelValue.kurzbzlang }} {{ modelValue.bezeichnung }} {{ modelValue.studentorgform }}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{{$p.t('global/uploaddatum')}}: {{modelValue.uploaddatum }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-6 d-flex align-items-center\">\n\t\t\t\t\t<Tristate v-model=\"modelValue.akzeptiert\" :disabled=\"true\"></Tristate>\n\t\t\t\t\t<span class=\"ms-2\">{{getStatusLabel}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"!modelValue.dms_id\" class=\"col-6\">\n\t\t\t\t\t<span class=\"ms-2\" style=\"color: red\">{{$p.t('global/missingEntschuldigungFile')}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-4\">\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"von\"\n\t\t\t\t\t\tv-model=\"modelValue.von\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:disabled=\"modelValue.akzeptiert !== null\"\n\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t:min-date=\"minDate\"\n\t\t\t\t\t\t:start-date=\"minDate\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"bis\"\n\t\t\t\t\t\tv-model=\"modelValue.bis\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:disabled=\"modelValue.akzeptiert !== null\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t:min-date=\"minDate\"\n\t\t\t\t\t\t:start-date=\"minDate\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-4\">\n\t\t\t\t<Textarea v-model=\"modelValue.notiz\" rows=\"5\" maxlength=\"255\"></Textarea>\n\t\t\t\t<p>{{ modelValue.notiz?.length ? modelValue.notiz.length : 0 }} / 255 characters</p>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t`\n}","if (!primevue) {\n\tconsole.error('PrimeVue not loaded!');\n}\n\n// NOTE(chris): Click on clear button gives an error. This is a bug in primevue => fixed in current version\nTabulator.extendModule('filter', 'filters', {\n\t\"dates\": (headerValue, rowValue) => {\n\t\tif (!headerValue)\n\t\t\treturn true;\n\n\t\tlet rowDate = new Date(rowValue);\n\n\t\tif (Array.isArray(headerValue))\n\t\t{\n\t\t\tlet startDate = new Date(headerValue[0]);\n\t\t\tif (headerValue[1])\n\t\t\t{\n\t\t\t\tlet endDate = new Date(headerValue[1]);\n\n\t\t\t\tendDate.setHours(23, 59, 59, 999);\n\n\t\t\t\treturn rowDate >= startDate && rowDate <= endDate;\n\t\t\t}\n\n\t\t\treturn rowDate.toDateString() === startDate.toDateString();\n\t\t}\n\t\tlet singleDate = new Date(headerValue);\n\t\treturn rowDate.toDateString() === singleDate.toDateString();\n\t}\n});\n\nfunction dateFilter(cell, onRendered, success) {\n\tlet div = document.createElement('div');\n\n\tlet initialValue = null;\n\n\tlet val = cell.getValue();\n\n\tif (Array.isArray(val))\n\t{\n\t\tconst start = val[0] ? new Date(val[0]) : null;\n\t\tconst end   = val[1] ? new Date(val[1]) : null;\n\t\tinitialValue = [start, end];\n\t}\n\n\tVue.createApp({\n\t\tcomponents: {\n\t\t\tPrimevueCalendar: primevue.calendar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tval: initialValue\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tval(n) {\n\t\t\t\tsuccess(n);\n\t\t\t}\n\t\t},\n\t\ttemplate: `<primevue-calendar \n\t\t\t\t\tv-model=\"val\" \n\t\t\t\t\tselection-mode=\"range\" \n\t\t\t\t\t:manual-input=\"false\" \n\t\t\t\t\tshow-button-bar \n\t\t\t\t\t:showIcon=\"true\"\n\t\t\t\t\tdateFormat=\"dd.mm.yy\">\n\t\t\t\t   </primevue-calendar>`\n\t}).use(primevue.config.default).mount(div);\n\n\treturn div;\n}\nexport { dateFilter };","export default {\n\n\tgetEntschuldigungen(stg_kz_arr, von, bis) {\n\n\t\tconst params = {stg_kz_arr, von, bis}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getEntschuldigungen';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tupdateEntschuldigung(entschuldigung_id, status, notiz, von, bis) {\n\n\t\tconst params = {entschuldigung_id, status, notiz, von, bis}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/updateEntschuldigung';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tgetTimeline(person_id) {\n\t\tconst params = {person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getTimeline';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t}\n\n}","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {studentFormatters} from \"../../formatters/formatters.js\";\nimport VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport {StudiengangDropdown} from \"../Student/StudiengangDropdown.js\";\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {EntschuldigungEdit} from \"./EntschuldigungEdit.js\";\nimport {dateFilter} from \"../../../../../js/tabulator/filters/Dates.js\"\nimport AnwTimeline from \"./AnwTimeline.js\";\nimport ApiAdmin from '../../api/factory/administration.js';\n\nexport const AssistenzComponent = {\n\tname: 'AssistenzComponent',\n\tcomponents: {\n\t\tBsModal,\n\t\tCoreBaseLayout,\n\t\tCoreNavigationCmpt,\n\t\tCoreFilterCmpt,\n\t\tCoreRESTClient,\n\t\tDatepicker: VueDatePicker,\n\t\tStudiengangDropdown,\n\t\tEntschuldigungEdit,\n\t\tAnwTimeline\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\theaderFiltersRestored: false,\n\t\t\tfiltersRestored: false,\n\t\t\tcolLayoutRestored: false,\n\t\t\tsortRestored: false,\n\t\t\tstateRestored: false,\n\t\t\tselectedEntschuldigung: null,\n\t\t\tselectedEntschuldigungValid: false,\n\t\t\tselectedAnwArray: null,\n\t\t\tselectedEntArray: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\theaderMenuEntries: {},\n\t\t\tsideMenuEntries: {},\n\t\t\teditCellValue: '',\n\t\t\ttableData: null,\n\t\t\tzeitraum: {\n\t\t\t\tvon: this.$formatTime(new Date(Date.now()).setDate((new Date(Date.now()).getDate() - (30)))),\n\t\t\t\tbis: this.$formatTime(new Date(Date.now()).setDate((new Date(Date.now()).getDate() + (60))))\n\t\t\t},\n\t\t\tpermissionsLoaded: false,\n\t\t\ttableBuiltPromise: null,\n\t\t\tassistenzViewTabulatorOptions: {\n\t\t\t\tajaxURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router+'/extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getEntschuldigungen',\n\t\t\t\tajaxResponse: (url, params, response) => {\n\t\t\t\t\tthis.tableData = response.data.retval\n\t\t\t\t\treturn response.data.retval\n\t\t\t\t},\n\t\t\t\tajaxConfig: \"POST\",\n\t\t\t\tajaxContentType:{\n\t\t\t\t\theaders:{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody:()=> {\n\t\t\t\t\t\tconst berechtigungenArrayAdmin = this.$entryParams.permissions.admin && Array.isArray(this.$entryParams.permissions.studiengaengeAdmin) ? this.$entryParams.permissions.studiengaengeAdmin : []\n\t\t\t\t\t\tconst berechtigungenArrayAssistenz = this.$entryParams.permissions.assistenz && Array.isArray(this.$entryParams.permissions.studiengaengeAssistenz) ? this.$entryParams.permissions.studiengaengeAssistenz : []\n\t\t\t\t\t\tconst joined = [... new Set([... berechtigungenArrayAssistenz, ... berechtigungenArrayAdmin])]\n\t\t\t\t\t\treturn JSON.stringify({\n\t\t\t\t\t\t\tstg_kz_arr: joined,\n\t\t\t\t\t\t\tvon: this.zeitraum.von,\n\t\t\t\t\t\t\tbis: this.zeitraum.bis\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\t// debugEventsExternal: true,\n\t\t\t\t// debugEventsInternal: true,\n\t\t\t\tlayout: 'fitData',\n\t\t\t\tselectable: false,\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tpagination: true,\n\t\t\t\tpaginationSize: 50,\n\t\t\t\theight: this.$entryParams.tabHeights.assistenz,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('person/vorname'))), field: 'vorname',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('person/nachname'))), field: 'nachname',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/ausbildungssemester'))), field: 'semester',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t} ,\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/status'))), field: 'akzeptiert',\n\t\t\t\t\t\theaderFilter:'list',\n\t\t\t\t\t\theaderFilterParams:{values: {'true': 'Akzeptiert', 'false': 'Abgelehnt', 'null': 'Offen', '':'Alle'}},\n\t\t\t\t\t\theaderFilterFunc: this.akzeptiertFilterFunc,\n\t\t\t\t\t\tformatter: this.entschuldigungstatusFormatter,\n\t\t\t\t\t\ttooltip: false,\n\t\t\t\t\t\theaderSort: true\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/file'))), headerSort: true,field: 'dms_id', formatter: studentFormatters.formFile},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('ui/von'))), headerSort: true,field: 'von', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/bis'))),headerSort: true, field: 'bis', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/antragsdatum'))),headerSort: true, field: 'entuploaddatum', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/fileuploaddatum'))),headerSort: true, field: 'fileuploaddatum', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/organisationsform'))),headerSort: true, field: 'studentorgform',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\ttooltip: false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/studiengang'))), headerSort: true,field: 'studiengang_kz', formatter: studentFormatters.formStudiengangKz, tooltip:false},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('ui/aktion'))), headerSort: true,field: 'entschuldigung_id', formatter: this.formAction, tooltip:false, minWidth: 260},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/begruendungAnw'))), headerSort: true,field: 'notiz', editor: \"input\", headerFilter: true, tooltip:false, maxWidth: 300}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-assistenzTable\"\n\t\t\t},\n\t\t\tassistenzViewTabulatorEventHandlers: [\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellEditing\",\n\t\t\t\t\thandler: (cell) => {\n\t\t\t\t\t\tthis.editCellValue = cell.getData().notiz\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellEdited\",\n\t\t\t\t\thandler: (cell) => {\n\t\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\t\tif((data.notiz === '' || data.notiz === null) && (this.editCellValue === '' || this.editCellValue === null)) return\n\n\t\t\t\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(data.entschuldigung_id), data.akzeptiert, data.notiz))\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\t\thandler: async () => {\n\t\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellClick\",\n\t\t\t\t\thandler: async (e, cell) => {\n\n\t\t\t\t\t\tif (cell.getColumn().getField() === \"dms_id\") {\n\t\t\t\t\t\t\tconst val = cell.getValue()\n\n\t\t\t\t\t\t\tif(val !== '-' && val !== null) this.downloadEntschuldigung(val)\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.stopPropagation()\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tnotiz: '',\n\t\t\tstudiengang: null,\n\t\t\ttitleText: ''\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: []\n\t},\n\tmethods: {\n\t\tformatForSql(date) {\n\t\t\tif(typeof date === 'string') return date\n\t\t\telse if (date instanceof Date) {\n\t\t\t\tconst pad = n => String(n).padStart(2, \"0\");\n\n\t\t\t\treturn (\n\t\t\t\t\tdate.getFullYear() + \"-\" +\n\t\t\t\t\tpad(date.getMonth() + 1) + \"-\" +\n\t\t\t\t\tpad(date.getDate()) + \" \" +\n\t\t\t\t\tpad(date.getHours()) + \":\" +\n\t\t\t\t\tpad(date.getMinutes()) + \":\" +\n\t\t\t\t\tpad(date.getSeconds())\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tsaveEditEntschuldigung() {\n\t\t\tif(!this.selectedEntschuldigung) return\n\t\t\t\tthis.selectedEntschuldigung.von = this.formatForSql(this.selectedEntschuldigung.von)\n\t\t\t\tthis.selectedEntschuldigung.bis = this.formatForSql(this.selectedEntschuldigung.bis)\n\t\t\t\n\t\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(this.selectedEntschuldigung.entschuldigung_id),\n\t\t\t\t\tthis.selectedEntschuldigung.akzeptiert, this.selectedEntschuldigung.notiz,\n\t\t\t\t\tthis.selectedEntschuldigung.von, this.selectedEntschuldigung.bis))\n\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t\t\n\t\t\t\t\tObject.keys(this.selectedEntschuldigung).forEach(key => {\n\t\t\t\t\t\tthis.selectedEntschuldigungCellRef[key] = this.selectedEntschuldigung[key];\n\t\t\t\t\t});\n\t\t\t\t\tthis.$refs.assistenzTable.tabulator.redraw(true);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}).finally(()=>{\n\t\t\t\tthis.$refs.modalContainerEditEntschuldigung.hide()\n\t\t\t\tthis.selectedEntschuldigung = null\n\t\t\t\tthis.selectedEntschuldigungCellRef = null\n\t\t\t});\n\t\t},\n\t\tcancelEdit() {\n\t\t\tthis.$refs.modalContainerEditEntschuldigung.hide()\n\t\t\tthis.selectedEntschuldigung = null\n\t\t\tthis.selectedEntschuldigungCellRef = null\n\t\t},\n\t\topenEditEntschuldigungModal(data) {\n\t\t\tthis.selectedEntschuldigungCellRef = data\n\t\t\tthis.selectedEntschuldigung = {...data}\n\n\t\t\tthis.$refs.modalContainerEditEntschuldigung.show()\n\t\t},\n\t\tcloseTimelineModal() {\n\t\t\tthis.selectedAnwArray = null\n\t\t\tthis.selectedEntArray = null\n\t\t\t\n\t\t\tthis.$refs.modalContainerTimeline.hide()\n\t\t},\n\t\topenTimelineModal(data) {\n\t\t\tthis.selectedEntschuldigungCellRef = data\n\t\t\tthis.selectedEntschuldigung = {...data}\n\n\t\t\t// TODO: save fetched anw and check if we already fetched timeline for person_id\n\t\t\t// if that is the case just open modal with saved anwArray and overlay selected entschuldigung together with all others\n\t\t\t\n\t\t\t// keep track of ent updates for that person -> if ent was updated fetch again\n\t\t\tthis.$api.call(ApiAdmin.getTimeline(this.selectedEntschuldigung.person_id))\n\t\t\t\t.then(\n\t\t\t\t(res) => {\n\t\t\t\t\t\n\t\t\t\t\tthis.selectedAnwArray = res.data[0].retval\n\t\t\t\t\tthis.selectedEntArray = res.data[1].retval\n\t\t\t\t}\n\t\t\t)\n\t\t\t\n\t\t\tthis.$refs.modalContainerTimeline.show()\n\t\t},\n\t\takzeptiertFilterFunc(filterVal, rowVal) {\n\t\t\t// 400 iq code\n\t\t\tif(filterVal === 'null') return rowVal === null\n\t\t\telse if(filterVal === 'true') return rowVal === true\n\t\t\telse if(filterVal === 'false') return rowVal === false\n\t\t},\n\t\tentschuldigungstatusFormatter(cell) {\n\t\t\tlet data = cell.getValue()\n\t\t\tif (data == null) {\n\t\t\t\tcell.getElement().style.color = \"#17a2b8\"\n\t\t\t\treturn this.$p.t('global/offen')\n\t\t\t} else if (data === true) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn this.$p.t('global/akzeptiert')\n\t\t\t} else if (data === false) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn this.$p.t('global/abgelehnt')\n\t\t\t}\n\t\t},\n\t\tupdateEntschuldigung: function(cell, status, notizParam = '')\n\t\t{\n\n\t\t\tconst entschuldigung_id = cell.getData().entschuldigung_id\n\t\t\tconst existingNotiz = cell.getData().notiz\n\t\t\tconst notiz = notizParam !== '' ? notizParam : (existingNotiz !== null && existingNotiz !== undefined) ? existingNotiz : ''\n\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(entschuldigung_id), status, notiz))\n\t\t\t\t.then(res => {\n\n\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tcell.getRow().update({'akzeptiert': status, 'notiz': notiz});\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdownloadEntschuldigung: function(dms_id)\n\t\t{\n\t\t\twindow.location = CoreRESTClient._generateRouterURI('extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile?entschuldigung=' + dms_id);\n\t\t},\n\t\tformAction: function(cell)\n\t\t{\n\t\t\tlet actionwrapper = document.createElement('div');\n\t\t\tactionwrapper.className = \"d-flex gap-3\";\n\t\t\tconst minwidth = '40px';\n\t\t\tconst cellData = cell.getData()\n\t\t\tlet button = null\n\t\t\t\n\t\t\tif(cellData.dms_id){\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-download\"></i>';\n\t\t\t\tbutton.addEventListener('click', () => this.downloadEntschuldigung(cell.getData().dms_id));\n\t\t\t\tbutton.title = this.$p.t('table/download');\n\t\t\t\tactionwrapper.append(button);\n\t\t\t}\n\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-pen-to-square\"></i>';\n\t\t\tbutton.addEventListener('click', () => this.openEditEntschuldigungModal(cell.getData()));\n\t\t\tbutton.title = this.$p.t('global/entschuldigungEditieren');\n\t\t\tactionwrapper.append(button);\n\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-timeline\"></i>';\n\t\t\tbutton.addEventListener('click', () => this.openTimelineModal(cell.getData()));\n\t\t\tbutton.title = this.$p.t('global/anwTimeline');\n\t\t\tactionwrapper.append(button);\n\n\t\t\tif(cellData.dms_id) {\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-check\"></i>';\n\t\t\t\tbutton.title = this.$p.t('global/entschuldigungAkzeptieren');\n\t\t\t\tbutton.addEventListener('click', () => this.updateEntschuldigung(cell, true));\n\t\t\t\tactionwrapper.append(button);\n\t\t\t}\n\t\t\t\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\tbutton.title = this.$p.t('global/entschuldigungAblehnen');\n\t\t\tbutton.addEventListener('click', () => this.openRejectionModal(cell));\n\t\t\tactionwrapper.append(button);\n\n\t\t\treturn actionwrapper;\n\t\t},\n\t\tbisFilter: function (data, filterParams) {\n\t\t\treturn new Date(data.bis).getTime() <= new Date(filterParams.bis).getTime()\n\t\t},\n\t\tvonFilter: function (data, filterParams) {\n\t\t\treturn new Date(data.von).getTime() >= new Date(filterParams.von).getTime()\n\t\t},\n\t\tstudiengangFilter: function (data, filterParams) {\n\t\t\treturn data.studiengang_kz === Number(filterParams.studiengang)\n\t\t},\n\t\tfiltern: function()\n\t\t{\n\t\t\tthis.$refs.assistenzTable.tabulator.clearFilter()\n\n\t\t\t// if (this.zeitraum.von) this.$refs.assistenzTable.tabulator.addFilter(this.vonFilter, {von: this.zeitraum.von})\n\t\t\t// if (this.zeitraum.bis) this.$refs.assistenzTable.tabulator.addFilter(this.bisFilter, {bis: this.zeitraum.bis})\n\t\t\tif (this.studiengang) this.$refs.assistenzTable.tabulator.addFilter(this.studiengangFilter, {studiengang: this.studiengang})\n\n\t\t},\n\t\thandleInputNotiz(e) {\n\t\t\tthis.notiz = e.target.value;\n\t\t},\n\t\trejectEntschuldigung() {\n\t\t\tthis.updateEntschuldigung(this.rejectCell, false, this.notiz)\n\t\t\tthis.rejectCell = null\n\t\t\tthis.notiz = ''\n\n\t\t\tthis.$refs.modalContainerRejectionReason.hide()\n\t\t},\n\t\topenRejectionModal(cell) {\n\t\t\tthis.rejectCell = cell\n\n\t\t\tthis.notiz = cell.getData().notiz\n\t\t\tthis.$refs.modalContainerRejectionReason.show()\n\t\t},\n\t\tsgChangedHandler: function(e) {\n\t\t\tthis.studiengang = e.value ? e.value.studiengang_kz : null\n\t\t},\n\t\tcheckEntryParamPermissions() {\n\t\t\tif(this.$entryParams.permissions === undefined) { // routed into app inner component skipping init in landing page\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(this.permissions)\n\t\t\t}\n\n\t\t\tthis.permissionsLoaded = true\n\n\t\t\tif(this.$entryParams.phrasenPromise === undefined) {\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['global', 'person', 'lehre', 'table', 'filter', 'ui'])\n\t\t\t}\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\t\t\t\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\trefetchData() {\n\t\t\tconst stg_kz_arr =  this.$entryParams.permissions.assistenz ?\n\t\t\t\tthis.$entryParams.permissions.studiengaengeAssistenz :\n\t\t\t\tthis.$entryParams.permissions.admin ? this.$entryParams.permissions.studiengaengeAdmin : []\n\n\t\t\t\tthis.$api.call(ApiAdmin.getEntschuldigungen(stg_kz_arr, this.zeitraum.von, this.zeitraum.bis))\n\t\t\t\t\t.then(res => {\n\t\t\t\tthis.$refs.assistenzTable.tabulator.setData(res.data.retval)\n\t\t\t})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs.assistenzTable?.tabulator) this.$refs.assistenzTable.tabulator.redraw(true)\n\t\t},\n\t\thandleSelectedEntschuldigungValidate(valid) {\n\t\t\tthis.selectedEntschuldigungValid = valid\n\t\t},\n\t\tcalculateTableHeight() {\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['assistenz'].value = screenY - rect.top\n\t\t},\n\t\tsaveState(table) {\n\t\t\t// avoid storing state after first restore part happened\n\t\t\tif(!this.stateRestored) return \n\t\t\tconst rawLayout = table.getColumnLayout();\n\t\t\tconst state = {\n\t\t\t\tcolumns: rawLayout.map(col => ({\n\t\t\t\t\tfield: col.field,\n\t\t\t\t\tvisible: col.visible,\n\t\t\t\t\twidth: col.width,\n\t\t\t\t})),\n\t\t\t\t\tsort: table.getSorters().map(s => ({\n\t\t\t\t\tfield: s.field,\n\t\t\t\t\tdir: s.dir,\n\t\t\t\t})),\n\t\t\t\tfilters: table.getFilters(),\n\t\t\t\theaderFilters: table.getHeaderFilters()\n\t\t\t};\n\t\t\t\n\t\t\tlocalStorage.setItem(this.assistenzViewTabulatorOptions.persistenceID, JSON.stringify(state));\n\t\t},\n\t\thandleTableBuilt() {\n\t\t\tconst table = this.$refs.assistenzTable.tabulator\n\t\t\ttable.on(\"columnMoved\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnResized\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnVisibilityChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"filterChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"headerFilterChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"dataSorted\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnSorted\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"sortersChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\tconst saved = this.loadState();\n\n\t\t\ttable.on(\"renderComplete\", () => {\n\t\t\t\tif(!this.stateRestored) {\n\t\t\t\t\t\n\t\t\t\t\t\tif (saved?.columns && !this.colLayoutRestored) {\n\t\t\t\t\t\t\tconst layout = saved.columns.map(col => ({\n\t\t\t\t\t\t\t\tfield: col.field,\n\t\t\t\t\t\t\t\twidth: col.width,\n\t\t\t\t\t\t\t\tvisible: col.visible,\n\t\t\t\t\t\t\t\t// add more if needed, but keep it simple\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\ttable.setColumnLayout(layout);\n\t\t\t\t\t\t\tthis.colLayoutRestored = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (saved?.filters && !this.filtersRestored) {\n\t\t\t\t\t\t\tthis.filtersRestored = true // instantly avoid retriggers\n\t\t\t\t\t\t\ttable.setFilter(saved.filters);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (saved?.headerFilters && !this.headerFiltersRestored) {\n\t\t\t\t\t\t\tthis.headerFiltersRestored = true // instantly avoid retriggers\n\t\t\t\t\t\t\tfor (let hf of saved.headerFilters) {\n\t\t\t\t\t\t\t\ttable.setHeaderFilterValue(hf.field, hf.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (saved?.sort?.length && !this.sortRestored) {\n\t\t\t\t\t\t\tthis.sortRestored = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst sortList = saved.sort.map(s => {\n\t\t\t\t\t\t\t\t\tconst col = table.columnManager.findColumn(s.field);\n\t\t\t\t\t\t\t\t\tif (!col) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn { column: col, dir: s.dir };\n\t\t\t\t\t\t\t\t}).filter(Boolean);\n\n\t\t\t\t\t\t\t\ttable.setSort(sortList);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.stateRestored = true\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t},\n\t\tloadState() {\n\t\t\treturn JSON.parse(localStorage.getItem(this.assistenzViewTabulatorOptions.persistenceID) || \"null\");\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.checkEntryParamPermissions()\n\t\tthis.setup()\n\t\t\n\t\tthis.calculateTableHeight()\n\t\t\n\t\t\n\t\t\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tbeforeMounted() {\n\t\tif(!this.$entryParams?.permissions?.entschuldigungen_enabled) {\n\t\t\t// TODO: route to some 404 page or show entschuldigung disabled status\n\t\t\tthis.$router.back()\n\t\t}\n\t},\n\twatch: {\n\t\t'zeitraum.von'() {\n\t\t\tthis.refetchData()\n\t\t},\n\t\t'zeitraum.bis'() {\n\t\t\tthis.refetchData()\n\t\t},\n\t\tstudiengang() {\n\t\t\tthis.filtern()\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetAllowedStg() {\n\t\t\treturn this.$entryParams?.permissions?.assistenz ? this.$entryParams?.permissions?.studiengaengeAssistenz\n\t\t\t\t: this.$entryParams?.permissions?.admin ? this.$entryParams?.permissions?.studiengaengeAdmin : []\n\t\t},\n\t\tgetTooltipObj(){\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzV2'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipVonDatum() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzVonDatum'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipBisDatum() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzBisDatum'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\n\t<core-base-layout>\n\t\t<template #main>\n\t\t\t<bs-modal ref=\"modalContainerRejectionReason\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>{{ $p.t('global/entschuldigungNotizAblehnen') }}</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t\t<input maxlength=255 class=\"form-control\" :value=\"notiz\" @input=\"handleInputNotiz\" :placeholder=\"$p.t('global/begruendungAnw')\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" :disabled=\"!notiz\" @click=\"rejectEntschuldigung\">{{ $p.t('global/reject') }}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\n\n\t\t\t<bs-modal ref=\"modalContainerTimeline\" class=\"bootstrap-prompt\" bodyClass=\"px-4 py-0\" dialogClass=\"modal-dialog modal-fullscreen\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ $p.t('global/anwTimeline') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\n\t\t\t\t\t<AnwTimeline v-model=\"selectedEntschuldigung\" :anwArray=\"selectedAnwArray\" :entArray=\"selectedEntArray\"></AnwTimeline>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary \" @click=\"closeTimelineModal\">{{$p.t('ui','cancel')}}</button>    \n\t\t\t\t</template>\n\t\t\t</bs-modal>\t\n\n\t\t\t<bs-modal ref=\"modalContainerEditEntschuldigung\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ $p.t('global/entschuldigungEdit') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\n\t\t\t\t\t<EntschuldigungEdit v-model=\"selectedEntschuldigung\" @validate=\"handleSelectedEntschuldigungValidate\"></EntschuldigungEdit>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary \" @click=\"cancelEdit\">{{$p.t('ui','cancel')}}</button>    \n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" :disabled=\"!selectedEntschuldigungValid\" @click=\"saveEditEntschuldigung\">{{ $p.t('ui', 'speichern') }}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\t\n\n\t\t\t<div class=\"row\">\n\t\t\t\n\t\t\t\t<div class=\"col-6\" style=\"display: flex; align-items: center;\">\n\t\t\t\t\t<h1 class=\"h4 mb-5\" style=\"margin-right: 10px;\">{{ $p.t('global/entschuldigungsmanagement') }}</h1>\n\t\t\t\t\t<div style=\"max-width: 25%; align-self: normal;\" v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t<h4 style=\"margin: 0;\"><i class=\"fa fa-circle-question\"></i></h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<StudiengangDropdown\n\t\t\t\t\t\t\t:allowedStg=\"getAllowedStg\" @sgChanged=\"sgChangedHandler\">\n\t\t\t\t\t\t</StudiengangDropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\tv-model=\"zeitraum.von\"\n\t\t\t\t\t\t\t:placeholder=\"$capitalize($p.t('ui/von'))\"\n\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t\t></datepicker>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\tv-model=\"zeitraum.bis\"\n\t\t\t\t\t\t\t:placeholder=\"$capitalize($p.t('global/bis'))\"\n\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t\t></datepicker>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"assistenzTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"assistenzViewTabulatorOptions\"\n\t\t\t\t:tabulator-events=\"assistenzViewTabulatorEventHandlers\"\n\t\t\t\t@tableBuilt=\"handleTableBuilt\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t\t:table-only=\"true\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\t</core-base-layout>\n`\n};\n\nexport default AssistenzComponent","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport CoreTabs from '../../../../../js/components/Tabs.js';\n\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport StudentComponent from \"../Student/StudentComponent.js\"\nimport LektorComponent from \"../Lektor/LektorComponent.js\"\nimport AssistenzComponent from \"../Assistenz/AssistenzComponent.js\";\n\nimport ApiInfo from '../../api/factory/info.js';\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\n\nexport default {\n\tname: 'LandingPageComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient,\n\t\tCoreTabs,\n\t\tBsModal,\n\t\tStudentComponent,\n\t\tLektorComponent,\n\t\tAssistenzComponent\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\theaderMenuEntries: {},\n\t\t\tsideMenuEntries: {},\n\t\t\tcurrentTab: 0,\n\t\t\ttabs: this.initTabs(),\n\t\t\tloaded: false,\n\t\t\tphrasenResolved: false,\n\t\t\tpermissioncount: Vue.ref(0),\n\t\t\tanwKontrolleMinDate: null,\n\t\t\tanwKontrolleMaxDate: null,\n\t\t};\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tminDate: Vue.computed(() =>\n\t\t\t\tthis.anwKontrolleMinDate ? this.anwKontrolleMinDate : null\n\t\t\t),\n\t\t\tmaxDate: Vue.computed(() =>\n\t\t\t\tthis.anwKontrolleMaxDate ? this.anwKontrolleMaxDate : null\n\t\t\t)\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: {\n\t\t\tdefault: '',\n\t\t\ttype: String\n\t\t},\n\t\tactivetabstudent: null\n\t},\n\tmethods: {\n\t\tinitTabs() {\n\t\t\tconst tabs = []\n\t\t\tconst permissions = JSON.parse(this.permissions)\n\n\t\t\tthis.$entryParams.activetabstudent = this.activetabstudent ?? null\n\n\t\t\t// check for missing url params here and block Kontrolle & Profil Tabs if they are not useable\n\t\t\tconst queryString = window.location.search;\n\t\t\tconst searchParams = new URLSearchParams(queryString)\n\t\t\tconst lv_id = searchParams.get('lvid')\n\t\t\tconst stg_kz = searchParams.get('stg_kz')\n\t\t\tconst sem_kurzbz = searchParams.get('sem_kurzbz')\n\t\t\tconst notMissingParams = (lv_id && stg_kz && sem_kurzbz) || this.$entryParams.notMissingParams\n\n\t\t\t// redeclare function since at this point globalProperties are not ready\n\t\t\tfunction capitalize(string) {\n\t\t\t\tif(!string) return ''\n\t\t\t\treturn string[0].toUpperCase() + string.slice(1);\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif((permissions.lektor || permissions.admin) && notMissingParams) {\n\t\t\t\tconst kontrolleTitle = Vue.computed(()=> {return this.phrasenResolved ? capitalize(this.$p.t('global/kontrolle')) : 'K'})\n\t\t\t\ttabs.push({key: 'Kontrolle', title: kontrolleTitle, component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/LektorComponent.js'})\n\t\t\t}\n\n\t\t\tif((permissions.student || permissions.admin) && notMissingParams)  {\n\t\t\t\tconst profilTitle = Vue.computed(()=> {return this.phrasenResolved ? capitalize(this.$p.t('global/profil')) : 'P'})\n\n\t\t\t\ttabs.push({key: 'Profil', title: profilTitle, component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentComponent.js'})\n\t\t\t}\n\n\t\t\tif((permissions.admin || permissions.assistenz) && permissions.entschuldigungen_enabled) {\n\t\t\t\tconst adminTitle = Vue.computed(()=> {return this.phrasenResolved ? capitalize(this.$p.t('global/admin')) : 'A'})\n\n\t\t\t\ttabs.push({key: 'Admin', title: adminTitle, component: '../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AssistenzComponent.js'})\n\t\t\t}\n\n\t\t\tconst ret = {}\n\t\t\ttabs.forEach((tab, i) => {\n\t\t\t\tret['tab'+i] = tab\n\t\t\t})\n\n\t\t\tthis.setCurrentTab(permissions.controller, tabs)\n\n\t\t\tthis.setDefaultTabHeight()\n\n\t\t\treturn ret\n\t\t},\n\t\tsetDefaultTabHeight() {\n\t\t\tthis.$entryParams.tabHeights = {}\n\t\t\tthis.$entryParams.tabHeights.studentByLva = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.lektor = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.studentAnw = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.studentEnt = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.assistenz = Vue.ref(400)\n\t\t},\n\t\tsetCurrentTab (controller, tabs) {\n\n\t\t\tswitch(controller) {\n\t\t\t\tcase 'Admin':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Admin')\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Kontrolle':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Kontrolle')\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Profil':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Profil')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.currentTab = 0\n\t\t\t}\n\t\t},\n\t\tasync createdSetup () {\n\t\t\tawait new Promise (resolve => {\n\t\t\t\t\n\t\t\t\tconst queryString = window.location.search;\n\t\t\t\tconst searchParams = new URLSearchParams(queryString)\n\t\t\t\tthis.$entryParams.lv_id = searchParams.get('lvid')\n\t\t\t\tthis.$entryParams.stg_kz = searchParams.get('stg_kz')\n\t\t\t\tthis.$entryParams.sem_kurzbz = searchParams.get('sem_kurzbz')\n\t\t\t\tthis.$entryParams.sem = searchParams.get('sem')\n\n\t\t\t\tthis.$entryParams.handleLeSetup = this.handleLeSetup\n\t\t\t\tthis.$entryParams.findClosestTermin = this.findClosestTermin\n\t\t\t\tthis.$entryParams.notMissingParams = !!(this.$entryParams.lv_id && this.$entryParams.stg_kz && this.$entryParams.sem_kurzbz)\n\n\t\t\t\tthis.setupViewDataRefs()\n\n\t\t\t\tif(this.$entryParams.lv_id) {\n\t\t\t\t\tthis.loadLvViewData()\n\t\t\t\t}\n\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['ui', 'person', 'lehre', 'table', 'filter', 'global'])\n\t\t\t\tthis.$entryParams.phrasenPromise.then(()=> {this.phrasenResolved = true})\n\t\t\t\tconst el = document.getElementById(\"main\");\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(el.attributes.permissions.nodeValue)\n\t\t\t\tthis.$entryParams.cis4 = JSON.parse(el.attributes.cis4.nodeValue)\n\n\t\t\t\t// console.log('$entryParams', this.$entryParams)\n\n\t\t\t\tthis.anwKontrolleMinDate = new Date(Date.now()).setDate((new Date(Date.now()).getDate() - (this.$entryParams.permissions.kontrolleCreateMaxReachPast)))\n\t\t\t\tthis.anwKontrolleMaxDate = new Date(Date.now()).setDate((new Date(Date.now()).getDate() + (this.$entryParams.permissions.kontrolleCreateMaxReachFuture)))\n\n\t\t\t\tel.removeAttribute('permissions')\n\n\t\t\t\tresolve()\n\t\t\t})\n\t\t},\n\t\tsetupViewDataRefs(){\n\t\t\tthis.$entryParams.viewDataLv = {}\n\t\t\tthis.$entryParams.viewDataLv.benotung = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.bezeichnung = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.lehrveranstaltung_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.oe_kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.orgform_kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.raumtyp_kurzbz = Vue.ref('')\n\n\t\t\tthis.$entryParams.viewDataStudent = {}\n\t\t\tthis.$entryParams.viewDataStudent.vorname = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.nachname = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.uid = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.person_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.prestudent_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.gruppe = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.verband = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.semester = Vue.ref('')\n\t\t},\n\t\tloadLvViewData() {\n\t\t\tthis.$api.call(ApiInfo.getLvViewDataInfo(this.$entryParams.lv_id))\n\t\t\t\t.then(res => {\n\t\t\t\tif(res?.data?.retval?.[0]) this.setLvViewData(res.data.retval[0])\n\t\t\t})\n\t\t},\n\t\tasync handleSetup() {\n\t\t\tif(this.$entryParams.setupPromise) return\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst ma_uid = this.$entryParams.permissions.authID\n\t\t\t\tconst sem_kurzbz = this.$entryParams.sem_kurzbz\n\t\t\t\tconst lv_id = this.$entryParams.lv_id\n\t\t\t\tconst le_ids = []\n\n\t\t\t\tconst promises = []\n\t\t\t\t// load lektors teaching the lva aswell as students attending the lva in case of admin or assistenz rights\n\t\t\t\tif(this.$entryParams.permissions.admin && lv_id && sem_kurzbz && le_ids) {\n\t\t\t\t\tconst maProm = this.handleMaSetup(lv_id, sem_kurzbz, ma_uid)\n\n\t\t\t\t\tmaProm.then(()=> {\n\n\t\t\t\t\t\tpromises.push(this.handleLeSetup(lv_id, this.$entryParams.selected_maUID.value?.mitarbeiter_uid, sem_kurzbz, le_ids))\n\t\t\t\t\t\tpromises.push(this.handleStudentsSetup(lv_id, sem_kurzbz))\n\t\t\t\t\t\tPromise.all(promises).then(()=>{\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\t// load teaching units/lehreinheiten of provided lektor maUID in case of lektor rights\n\t\t\t\t} else if(this.$entryParams.permissions.lektor && lv_id && sem_kurzbz && le_ids) {\n\t\t\t\t\tthis.handleLeSetup(lv_id, ma_uid, sem_kurzbz, le_ids).finally(()=>{\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tresolve(true)\n\t\t\t\t}\n\n\t\t\t})\n\t\t},\n\t\thandleStudentsSetup(lv_id, sem_kurzbz) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tthis.$api.call(ApiInfo.getStudentsForLvaInSemester(lv_id, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\tthis.$entryParams.availableStudents = []\n\n\t\t\t\t\tres?.data?.retval?.forEach(e => {\n\t\t\t\t\t\tconst infoString = e.semester + e.verband + e.gruppe + ' ' + e.vorname + ' ' + e.nachname\n\t\t\t\t\t\tthis.$entryParams.availableStudents.push({\n\t\t\t\t\t\t\tvorname: e.vorname, nachname: e.nachname,\n\t\t\t\t\t\t\tprestudent_id: e.prestudent_id, studiensemester_kurzbz: e.studiensemester_kurzbz,\n\t\t\t\t\t\t\tlehreinheit_id: e.lehreinheit_id, lehrveranstaltung_id: e.lehrveranstaltung_id,\n\t\t\t\t\t\t\tsemester: e.semester, verband: e.verband, gruppe: e.gruppe,\n\t\t\t\t\t\t\tuid: e.uid, person_id: e.person_id,\n\t\t\t\t\t\t\tinfoString\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tthis.$entryParams.selected_student_info = this.$entryParams.availableStudents.length ? this.$entryParams.availableStudents[0] : null\n\n\t\t\t\t}).finally(()=>{resolve()})\n\t\t\t})\n\t\t},\n\t\thandleMaSetup(lv_id, sem_kurzbz, ma_uid) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$api.call(ApiInfo.getLektorsForLvaInSemester(lv_id, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\tthis.$entryParams.available_maUID.value.splice(0, this.$entryParams.available_maUID.value.length)\n\n\t\t\t\t\tconst found = res.data?.retval?.find(lektor => lektor.mitarbeiter_uid === ma_uid)\n\n\t\t\t\t\tconst lektor = found ?? res.data.retval[0]\n\t\t\t\t\tconst infoString = lektor.anrede + ' ' + (lektor.titelpre ? lektor.titelpre + ' ' : '')\n\t\t\t\t\t\t+ lektor.vorname + (lektor.vornamen ? ' ' + lektor.vornamen : '') + ' ' + lektor.nachname\n\t\t\t\t\t\t+ (lektor.titelpost ? ' ' + lektor.titelpost : '')\n\t\t\t\t\tthis.$entryParams.selected_maUID.value = lektor ?{mitarbeiter_uid: lektor.mitarbeiter_uid, infoString} : null\n\n\n\t\t\t\t\tres.data?.retval?.forEach(lektor => {\n\t\t\t\t\t\tconst infoString = lektor.anrede + ' ' + (lektor.titelpre ? lektor.titelpre + ' ' : '')\n\t\t\t\t\t\t\t+ lektor.vorname + (lektor.vornamen ? ' ' + lektor.vornamen : '') + ' ' + lektor.nachname\n\t\t\t\t\t\t\t+ (lektor.titelpost ? ' ' + lektor.titelpost : '')\n\n\t\t\t\t\t\tthis.$entryParams.available_maUID.value.push({\n\t\t\t\t\t\t\tmitarbeiter_uid: lektor.mitarbeiter_uid,\n\t\t\t\t\t\t\tinfoString\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t}).finally(()=> {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\thandleLeSetup(lv_id, ma_uid, sem_kurzbz, le_ids) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$api.call(ApiKontrolle.getLehreinheitenForLehrveranstaltungAndMaUid(lv_id, ma_uid, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t// merge entries with same LE\n\t\t\t\t\tconst data = []\n\n\t\t\t\t\tif(res.data[1]) {\n\t\t\t\t\t\t// res.data[1] = null\n\t\t\t\t\t\tObject.keys(res.data[1]).forEach(key => {\n\t\t\t\t\t\t\tconst val = res.data[1][key]\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(val && val.length) {\n\t\t\t\t\t\t\t\tval.forEach(v => v.le_id = key)\n\t\t\t\t\t\t\t\t// spoof le termine to test with\n\t\t\t\t\t\t\t\t// val.push({le_id: key, datum: '2025-04-17', beginn: '13:37:42', ende: '23:42:17'})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}) \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.$entryParams.allLeTermine = res.data[1] ?? []\n\t\t\t\t\t\n\t\t\t\t\tres.data[0].forEach(entry => {\n\n\t\t\t\t\t\tconst existing = data.find(e => e.lehreinheit_id === entry.lehreinheit_id)\n\t\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t\t// supplement info\n\t\t\t\t\t\t\texisting.infoString += ', '\n\t\t\t\t\t\t\tif (entry.gruppe_kurzbz !== null && entry.direktinskription == false) {\n\t\t\t\t\t\t\t\texisting.infoString += entry.gruppe_kurzbz\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\texisting.infoString += entry.kurzbzlang + '-' + entry.semester\n\t\t\t\t\t\t\t\t\t+ (entry.verband ? entry.verband : '')\n\t\t\t\t\t\t\t\t\t+ (entry.gruppe ? entry.gruppe : '')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// entries are supposed to be fetched ordered by non null gruppe_kurzbz first\n\t\t\t\t\t\t\t// so a new entry will always start with those groups, others are appended afterwards\n\t\t\t\t\t\t\tentry.infoString = entry.kurzbz + ' - ' + entry.lehrform_kurzbz + ' - '\n\t\t\t\t\t\t\tif (entry.gruppe_kurzbz !== null && entry.direktinskription == false) {\n\t\t\t\t\t\t\t\tentry.infoString += entry.gruppe_kurzbz\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tentry.infoString += entry.kurzbzlang + '-' + entry.semester\n\t\t\t\t\t\t\t\t\t+ (entry.verband ? entry.verband : '')\n\t\t\t\t\t\t\t\t\t+ (entry.gruppe ? entry.gruppe : '')\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdata.push(entry)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\tres.data[0].forEach(entry => {\n\t\t\t\t\t\tentry.csvInfoString = entry.infoString\n\t\t\t\t\t\tentry.infoString += ' | 👥' + entry.studentcount + ' | 📅' + entry.termincount\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.$entryParams.selected_le_info.value = this.$entryParams.selected_le_info.value ?? data.length ? this.findLeWithClosestTermin(data, this.$entryParams.allLeTermine) : null\n\t\t\t\t\tthis.$entryParams.available_le_info.value = [...data]\n\t\t\t\t\tdata.forEach(leEntry => le_ids.push(leEntry.lehreinheit_id))\n\n\t\t\t\t\tthis.$entryParams.selected_le_id.value = this.$entryParams.selected_le_info.value ? this.$entryParams.selected_le_info.value.lehreinheit_id : null\n\t\t\t\t\tthis.$entryParams.available_le_ids.value = [...le_ids]\n\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsetLvViewData(data) {\n\t\t\tthis.$entryParams.viewDataLv.benotung = data.benotung\n\t\t\tthis.$entryParams.viewDataLv.bezeichnung = data.bezeichnung\n\t\t\tthis.$entryParams.viewDataLv.kurzbz = data.kurzbz\n\t\t\tthis.$entryParams.viewDataLv.lehrveranstaltung_id = data.lehrveranstaltung_id\n\t\t\tthis.$entryParams.viewDataLv.oe_kurzbz = data.oe_kurzbz\n\t\t\tthis.$entryParams.viewDataLv.orgform_kurzbz = data.orgform_kurzbz\n\t\t\tthis.$entryParams.viewDataLv.raumtyp_kurzbz = data.raumtyp_kurzbz\n\t\t},\n\t\thandleTabChanged(key) {\n\t\t\tif(this.$refs.tabsMain?._?.refs?.current) this.$refs.tabsMain._.refs.current.redrawTable()\n\t\t},\n\t\tfindLeWithClosestTermin(leChoices, leTermine) {\n\t\t\tconst flat = Object.values(leTermine).filter(Array.isArray).flat();\n\t\t\t\n\t\t\tif(flat && flat.length) {\n\t\t\t\tconst closest = this.findClosestTermin(flat)\n\n\t\t\t\tif(!closest) { // all possible termine are too far back in the past\n\t\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/noLePreselectTermineTooOld'))\n\t\t\t\t\t\n\t\t\t\t\treturn leChoices[0]\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst choiceFound = leChoices.find(choice => choice.lehreinheit_id == closest.le_id)\n\t\t\t\treturn choiceFound\n\t\t\t\t\n\t\t\t} else if(leChoices && leChoices.length) { // no termine to determine closest le by\n\t\t\t\treturn leChoices[0]\n\t\t\t} else { // no termine and no le found\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\t\tfindClosestTermin(termine) {\n\t\t\tconst todayTime = new Date(Date.now()).getTime()\n\n\t\t\ttermine.forEach((termin) => { // calculate time & timediff from today\n\t\t\t\ttermin.timeDiff = Math.abs(new Date(termin.datum).getTime() - todayTime)\n\t\t\t\ttermin.time = new Date(termin.datum).getTime()\n\t\t\t})\n\t\t\t\n\t\t\t// TODO: this approach messes with too much logic, maybe write method clone for startup logic?\n\t\t\t// // avoid going for stunplantermine that lie too far back in the past\n\t\t\t// const eligibleTermine = termine.filter(t => {\n\t\t\t// \tt.time >= this.anwKontrolleMinDate\n\t\t\t// })\n\t\t\t\n\t\t\treturn termine.reduce((min, termin) => termin.timeDiff < min.timeDiff ? termin : min, termine[0]);\n\t\t}\n\t},\n\tcreated(){\n\t\tif(!this.$entryParams.permissions) this.createdSetup()\n\t},\n\tmounted() {\n\t\tthis.$entryParams.setupPromise = this.handleSetup().then(()=>{\n\t\t\tthis.loaded = true\n\n\t\t\tthis.$entryParams.phrasenPromise.then(()=> this.phrasenResolved = true)\n\n\t\t})\n\t\tif(this.$entryParams.permissions.lektor) this.permissioncount++\n\t\tif(this.$entryParams.permissions.student) this.permissioncount++\n\t\tif(this.$entryParams.permissions.assistenz) this.permissioncount = 3\n\t\tif(this.$entryParams.permissions.admin) this.permissioncount = 3 // default has max permissions\n\n\t},\n\tcomputed: {\n\t\tgetSubtitle(){\n\t\t\tif(this.$entryParams?.viewDataLv?.kurzbz?.value && this.$entryParams?.viewDataLv?.bezeichnung?.value) {\n\t\t\t\treturn this.$entryParams.viewDataLv.kurzbz.value +' - '+ this.$entryParams.viewDataLv.bezeichnung.value\n\t\t\t} else return ''\n\t\t},\n\t\tgetCurrentTab() {\n\t\t\treturn 'tab' + this.currentTab\n\t\t}\n\t},\n\ttemplate: `\n\n\t<div style=\"position: relative;\" ref=\"appContainer\">\n\n\t\t<div v-if=\"$entryParams.permissions.show_guide\" style=\"position: absolute; top: 10px; right: 10px; z-index: 1000;\">\n\t\t\t<a :href=\"$entryParams.permissions.guide_link\" target=\"_blank\" class=\"ms-auto mb-2\">\n\t\t\t\tWiki <i class=\"fa fa-arrow-up-right-from-square me-1\"></i>\n\t\t\t</a>\n\t\t</div>\n\t\n\t\t<template  v-if=\"permissioncount > 1 && phrasenResolved\">\n\t\t\t<core-tabs :default=\"getCurrentTab\" :modelValue=\"currentTab\" :config=\"tabs\" @changed=\"handleTabChanged\" ref=\"tabsMain\"></core-tabs>\n\t\t</template>\n\t\t<template v-else-if=\"permissioncount === 1 && phrasenResolved\">\n\t\t\t<LektorComponent v-if=\"$entryParams?.permissions?.lektor\"></LektorComponent>\n\t\t\t<StudentComponent v-if=\"$entryParams?.permissions?.student\"></StudentComponent>\n\t\t\t<AssistenzComponent v-if=\"$entryParams?.permissions?.assistenz || $entryParams?.permissions?.admin\"></AssistenzComponent>\n\t\t</template>\n\t</div>\n\n`\n};","import LektorComponent from \"../components/Lektor/LektorComponent.js\";\nimport Phrasen from \"../../../../js/plugin/Phrasen.js\";\nimport {StudentByLvaComponent} from \"../components/Lektor/StudentByLvaComponent.js\";\nimport StudentComponent from \"../components/Student/StudentComponent.js\";\nimport StudentAnwesenheitComponent from \"../components/Student/StudentAnwesenheitComponent.js\";\nimport StudentEntschuldigungComponent from \"../components/Student/StudentEntschuldigungComponent.js\";\nimport ScanComponent from \"../components/Student/ScanComponent.js\";\nimport LandingPageComponent from \"../components/LandingPage/LandingPageComponent.js\";\n\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nconst router = VueRouter.createRouter({\n\thistory: VueRouter.createWebHistory(`/${ciPath}/extensions/FHC-Core-Anwesenheiten/`),\n\troutes: [\n\t\t{\n\t\t\tpath: `/Administration`,\n\t\t\tname: 'Administration',\n\t\t\tcomponent: LandingPageComponent,\n\t\t},\n\t\t{\n\t\t\tpath: '/Profil/Scan/:zugangscode?',\n\t\t\tname: 'Scan',\n\t\t\tcomponent: ScanComponent,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: '/Profil/Entschuldigung',\n\t\t\tname: 'Profil',\n\t\t\tcomponent: LandingPageComponent,\n\t\t\tprops: { activetabstudent: 'entschuldigungen'}\n\t\t},\n\n\t\t{\n\t\t\tpath: `/`,\n\t\t\tname: 'LandingPage',\n\t\t\tcomponent: LandingPageComponent\n\t\t},\n\t\t{\n\t\t\tpath: '/:catchAll(.*)',\n\t\t\tredirect: { name: 'LandingPage'},\n\t\t\tprops: true\n\t\t}\n\t]\n})\n\nconst anwesenheitApp = Vue.createApp({\n\tcomponents: {\n\t\tLektorComponent,\n\t\tStudentByLvaComponent,\n\t\tStudentComponent,\n\t\tStudentAnwesenheitComponent,\n\t\tStudentEntschuldigungComponent\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttitle: \"AnwesenheitApp\",\n\t\t}\n\t},\n\tprops: {\n\n\t},\n\tmethods: {\n\t},\n\tcreated(){\n\n\t}\n});\nanwesenheitApp.config.globalProperties.$entryParams = {\n\t// TODO: update every patch to keep renew persistenceID for tabulator tables\n\tpatchdate: '2025-09-11',\n\tisInFrame: !!window.frameElement,\n\tisMobile: Math.min(window.screen.width, window.screen.height) < 768 || navigator.userAgent.indexOf(\"Mobi\") > -1,\n\tavailable_le_ids: Vue.ref([]),\n\tavailable_le_info: Vue.ref([]),\n\tselected_le_id: Vue.ref(),\n\tselected_le_info: Vue.ref(),\n\tavailable_maUID: Vue.ref([]),\n\tselected_maUID: Vue.ref(),\n\tavailable_termine: Vue.ref(),\n\tselected_termin: Vue.ref()\n}\n\nanwesenheitApp.config.globalProperties.$capitalize = (string) => {\n\tif(!string) return ''\n\treturn string[0].toUpperCase() + string.slice(1);\n}\n\nanwesenheitApp.config.globalProperties.$formatTime = (timeStamp, delimiter = '-', format = 'YYYY-MM-DD') => {\n\tconst date = new Date(timeStamp)\n\tswitch (format) {\n\t\tcase 'YYYY-MM-DD':\n\t\t\treturn date.getFullYear() + delimiter + String(date.getMonth() + 1).padStart(2, '0') + delimiter + String(date.getDate()).padStart(2, '0');\n\t\tcase 'DD-MM-YYYY':\n\t\t\treturn String(date.getDate()).padStart(2, '0') + delimiter + String(date.getMonth() + 1).padStart(2, '0') + delimiter + date.getFullYear();\n\t}\n}\n\nanwesenheitApp.use(router)\n\nanwesenheitApp.use(primevue.config.default, {\n\t\t// TODO: set primevue locale with language\n\t\tzIndex: {\n\t\t\toverlay: 9000,\n\t\t\ttooltip: 8000\n\t\t}\n\t})\nanwesenheitApp.use(Phrasen)\n\nfunction getTarget(el) {\n\n\treturn primevue.utils.DomHandler.hasClass(el, \"p-inputwrapper\")\n\t\t? primevue.utils.DomHandler.findSingle(el, \"input\")\n\t\t: el;\n}\n\nanwesenheitApp.directive(\"tooltip\", {\n\n\tmounted(el) {\n\t\tconst target = getTarget(el);\n\t\ttarget.$_ptooltipZIndex ??=\n\t\t\tanwesenheitApp.config.globalProperties.$primevue.config.zIndex.tooltip;\n\t},\n\t...primevue.tooltip,\n});\n\nanwesenheitApp.mount(\"#main\");"],"names":["CoreFetchCmpt","emits","props","refresh","type","Boolean","apiFunction","required","Function","apiFunctionParameters","watch","newValue","oldValue","this","fetchData","data","loading","error","errorMessage","created","methods","apiFunctionResult","Promise","then","successHandler","catch","errorHandler","finally","finallyHandler","setError","response","$emit","undefined","retval","message","template","FILTER_COMPONENT_NEW_FILTER","FilterConfig","filters","Array","default","columns","fields","switchFilter","applyFilterConfig","saveCustomFilter","currentFields","computed","types","reduce","a","c","toLowerCase","indexOf","name","n","evt","currentTarget","value","filteredFields","filter","el","condition","length","alert","addField","push","removeField","index","splice","FilterColumns","selected","names","Object","hide","show","selectedFields","toggle","field","DEFAULT_ICONS","jsonLines","xlsx","pdf","html","json","csv","DEFAULT_LABELS","TableDownload","tabulator","config","String","iconClass","currentConfig","prototype","toString","call","split","isArray","newConfig","k","v","stringToFileFormatter","icon","label","formatter","map","validateFileFormatter","input","lcInput","includes","window","XLSX","jspdf","jsPDF","autoTable","download","file","options","elementDataMap","WeakMap","collapseAutoClose","mounted","binding","open","set","contains","target","collapse","bootstrap","Collapse","getInstance","addEventListener","document","get","beforeUnmount","removeEventListener","collapsibleAutoHideFunc","Tabulator","extendModule","fitDataStretchFrozen","forced","colsWidth","tableWidth","table","rowManager","element","clientWidth","gap","lastCol","forEach","column","i","widthFixed","reinitializeWidth","responsiveLayout","modules","responsive","visible","definition","frozen","getWidth","modExists","setWidth","update","ApiFilter","wsParams","method","url","params","filterUniqueId","filterType","customFilterName","removeCustomFilter","filterId","applyFilterFields","filterFields","addFilterField","filterField","removeFilterField","getFilterById","getFilter","_uuid","CoreFilterCmpt","components","directives","onNwNewEntry","title","description","sideMenu","tabulatorOptions","tabulatorEvents","tableOnly","noColumnFilter","reload","reloadBtnInfotext","newBtnShow","newBtnClass","newBtnDisabled","newBtnLabel","uniqueId","idField","parentIdField","countOnly","useSelectionSpan","uuid","filterName","filterActive","dataset","datasetMetadata","availableFilters","selectedFilter","fetchCmptRefresh","fetchCmptApiFunction","fetchCmptApiFunctionParams","fetchCmptDataFetched","fetchResult","tableBuilt","tabulatorHasSelector","selectedData","persistence","sort","headerFilter","group","page","notSelectedFields","x","filteredData","JSON","parse","stringify","filteredColumns","hasOwnProperty","col","resizable","fieldIdsForVisibilty","getColumns","def","getDefinition","getField","fieldNames","res","idExtra","columnsForFilter","filterTitles","reloadTable","setData","initTabulator","placeholder","$p","loadCategory","t","resolve","location","hash","slice","resolvePromiseFunc","setRenderData","startFetchCmpt","$api","layout","movableColumns","columnDefaults","tooltip","height","minHeight","maxHeight","selectable","dataTree","$refs","on","event","handler","toDelete","childIdx","child","appendChild","counter","cols","isVisible","_setHeaderFilter","updateTabulator","_updateTabulator","setColumns","clearFilters","getHeaderFilters","setHeaderFilterValue","clearFilter","render","j","setSideMenu","setDropDownMenu","personalFilters","filtersArray","filtersCount","link","id","filter_id","desc","onClickCall","handlerGetFilterById","subscriptDescription","subscriptLinkClass","subscriptLinkValue","onClickSubscriptCall","handlerRemoveCustomFilter","children","option","dataFetchedCallback","FHC_JS_DATA_STORAGE_OBJECT","called_path","called_method","handlerSaveCustomFilter","getAttribute","substring","attr","parentId","parentIdx","parent","_children","beforeCreate","$props","ApiNavigation","getHeader","navigation_page","getMenu","CoreNavigationCmpt","addHeaderMenuEntries","addSideMenuEntries","hideTopMenu","leftNavCssClasses","headerMenu","headerMenuEntries","hm","keys","sideMenuEntries","sm","getNavigationPage","fetchCmptApiFunctionHeader","fetchCmptApiFunctionSideMenu","fetchCmptDataFetchedHeader","fetchCmptDataFetchedMenu","getDataBsToggle","header","CoreBaseLayout","subtitle","mainCols","asideCols","mainGridCols","asideGridCols","lektorFormatters","centeredFormatter","cell","getValue","formDateOnly","date","Date","getDate","padStart","getMonth","getFullYear","fotoFormatter","dateOnlyTimeFormatter","hours","getHours","minutes","getMinutes","studentFormatters","formFile","formDate","formStudiengangKz","rowData","getRow","getData","kurzbzlang","bezeichnung","BsModal","modal","fullscreen","backdrop","validator","focus","keyboard","noCloseBtn","dialogClass","headerClass","bodyClass","footerClass","allowFullscreenExpand","dispose","handleUpdate","relatedTarget","toggleFullscreen","Modal","popup","body","footer","slots","includedPrimevue","primevue","reject","instance","Vue","createApp","setup","h","class","ref","unmount","result","unmounted","wrapper","parentElement","removeChild","createElement","use","zIndex","overlay","Phrasen$1","Phrasen","mount","LehreinheitenDropdown","Dropdown","dropdown","leChanged","e","$entryParams","selected_le_id","lehreinheit_id","selected_le_info","getSelected","infoString","getOptionLabel","MaUIDDropdown","maUIDChanged","selected_maUID","handleLeSetup","lv_id","mitarbeiter_uid","sem_kurzbz","KontrollenDropdown","errors","internal_available_kontrolle","internal_selected_kontrolle","setKontrollen","kontrolleChanged","datum","von","bis","checkDisabled","permissions","admin","assistenz","setDate","kontrolleDeleteMaxReach","TermineDropdown","terminChanged","selected_termin","datumFrontend","beginn","ende","AnwCountDisplay","anwHovered","abwHovered","entHovered","anwesend","abwesend","entschuldigt","KontrolleDisplay","hovered","kontrolle","Statuslegende","ApiKontrolle","fetchAllAnwesenheitenByLvaAssigned","le_id","ma_uid","getAllAnwesenheitenByStudentByLva","prestudent_id","updateAnwesenheiten","changedAnwesenheiten","getExistingQRCode","regenerateQRCode","anwesenheit_id","degenerateQRCode","zugangscode","getNewQRCode","deleteQRCode","deleteAnwesenheitskontrolle","pollAnwesenheiten","getAnwQuoteForPrestudentIds","ids","restartKontrolle","updateKontrolle","getLehreinheitenForLehrveranstaltungAndMaUid","lva_id","insertAnwWithoutQR","ApiProfil","getAllAnwQuotasForLvaByUID","studiensemester","uid","getAllAnwByUID","person_id","getProfileViewData","checkInAnwesenheit","addEntschuldigung","formData","headers","Headers","editEntschuldigung","deleteEntschuldigung","entschuldigung_id","getEntschuldigungenByPersonID","getAnwesenheitSumByLva","sem_kz","getAnwesenheitenByLva","ApiInfo","getAktuellesSemester","getViewDataStudent","getEntschuldigungFile","dms_id","getStunden","getStudiensemester","getStudentInfo","getStudiengaenge","allowed_stg","getLektorsForLvaInSemester","sem","getStudentsForLvaInSemester","getLvViewDataInfo","StudentByLvaComponent","tabulatorUuid","appSideMenuEntries","tableBuiltPromise","cellEditing","anwesenheitenByStudentByLvaTabulatorOptions","tabHeights","studentByLva","selectableCheck","rowFormatter","unselectableFormatter","debugInvalidComponentFuncs","titleFormatter","titleFormatterParams","rowRange","headerSort","width","$capitalize","widthGrow","anwesenheitFormatterValue","minWidth","bottomCalcFormatter","sumBottomCalcFormatter","bottomCalc","anwCalc","percentFormatter","einheitenCalc","einheitenFormatter","editor","persistenceID","patchdate","anwesenheitenByStudentByLvaTabulatorEventHandlers","notiz","meta","status","$fhcAlert","alertSuccess","async","phrasenPromise","tableBuiltResolve","filterTitle","filterSubtitle","changedData","tableData","initialTableData","vorname","nachname","semester","verband","gruppe","sum","foto","anteil","val","Number","parseFloat","isNaN","positiveRatingThreshold","getElement","style","setProperty","values","formatMinutes","acc","cur","row","entschuldigt_status","valInEh","einheitDauer","toFixed","replace","valInMin","remove","setRowStatus","newRow","anwesenheit_user_id","handleChange","existingEntryIndex","findIndex","formAction","className","setCheckedButton","innerHTML","anwesend_status","append","setCrossedButton","abwesend_status","saveChanges","alertError","lektorState","students","find","s","anwesenheitenByStudentByLvaTable","recalc","setFilterTitle","setSelectedRowsAnwesend","getSelectedData","selectedRows","getSelectedRows","changedRows","newData","toggleSelect","setSelectedRowsAbwesend","routeToLandingPage","$router","color","handleUuidDefined","tableResolve","setupMounted","arr","dauer","isLowResolution","imgSrc","img","Image","src","calculateTableHeight","tableID","tableDataSet","getElementById","rect","getBoundingClientRect","screenY","isInFrame","frameElement","clientHeight","visualViewport","top","redraw","load","dataChanged","getTooltipObj","LektorComponent","Divider","divider","datepicker","VueDatePicker","showQRLoadingSpinner","selectedStudent","kontrolleVonBis","editKontrolle","highlightMode","selectedDateCount","externalModalContainer","externalWindow","stunden","studentsData","anwEntries","stsem","entschuldigtStati","kontrollen","viewData","dates","termine","showAllVar","tableStudentData","tabulatorCols","gruppen","kontrollZeitSourceStundenplanBeginn","kontrollZeitSourceStundenplanEnde","kontrollDatumSourceStundenplan","anwesenheitenTabulatorOptions","rowHeight","entschuldigtColoring","lektor","maxWidth","tooltipTableRow","headerFilterParams","valuesLookup","clearable","autocomplete","editorParams","editable","checkCellEditability","hozAlign","anwesenheitenTabulatorEventHandlers","getColumn","Reflect","confirm","acceptLabel","acceptClass","rejectLabel","rejectClass","changes","nextTick","modalContainerStudentByLva","changeAnwStatus","d","backgroundColor","boundRegenerateQR","boundProgressCounter","deleteData","selectedDate","now","qr","code","timerIDPolling","progressTimerID","regenerateProgress","progressMax","polling","checkInCount","abwesendCount","entschuldigtCount","studentCount","inject","minDate","maxDate","translateOffset","handleAutoApply","outsideDateSelect","closeMenu","insideDateSelect","anwColTitleFormatter","titleParts","dateParts","trimEnd","selectedDateFrontendFormatted","container","textAlign","onRendered","innerText","entschuldigungen","ent","entschuldigung","formatEntschuldigungZeit","formatAkzeptiertStatus","akzeptiert","areDatesSame","ret","anwTooltip","valueFormatted","svg","showQR","pollAnwesenheit","startPollingAnwesenheiten","setInterval","boundPollAnwesenheit","stopPollingAnwesenheiten","clearInterval","handleKontrolleChanged","handleShowAllToggle","toggleShowAll","alertInfo","setAllColsAndData","anwesenheitenTable","clearSort","setShowAll","newCols","setupAllData","student","allEntStudent","zusatz","entry","date1","date2","date1Date","date2Date","date1Month","date2Month","date1Year","date2Year","wait","ms","setTimeout","formatQRTime","vp","datumParts","count","modalContainerQR","useRegenerateQR","startRegenerateQR","year","month","day","modalContainerNewKontrolle","handleTerminChanged","setTimespanForKontrolleTermin","regenerateQR","oldCode","progressCounter","changedStudents","Set","changedStudentsArr","change","valueToChange","oldVal","kontrolleToUpdate","updateSumData","setCurrentCountsFromTableData","progressTimerInterval","stopRegenerateQR","handleChangeDatum","padZero","num","searchStr","terminFound","available_termine","termin","handleChangeEnde","seconds","handleChangeBeginn","queryOnlyKontrolleShown","sYear","sMonth","sDate","kOnDate","kYear","jsDate","kMonth","kDate","setTimespanForKontrolleNow","getSeconds","isSameDay","startNewAnwesenheitskontrolle","validateTimespan","datefetch","formatDateToDbString","reloadState","stopAnwesenheitskontrolle","close","setupData","openEditModal","modalContainerEditKontrolle","openLegend","modalContainerLegende","confirmDelete","dataparts","dateobj","dateAnwFormat","alertWarning","editAnwesenheitskontrolle","vonSplit","editVon","bisSplit","editBis","getTime","getTimezoneOffset","toISOString","formatZusatz","stsemdatumvon","stsemdatumbis","studienstatus","bisio_id","lkt_ueberschreibbar","anmerkung","stg_kz_student","a_o_kz","mobilitaetstyp_kurzbz","doubledegree","ddtype","linkKontrollData","sumAnw","anw","abw","groupSet","setEntries","b","setupLektorComponent","closestTermin","findClosestTermin","closestTerminSameDay","Map","determineDates","anwCols","buildColsForDates","setupLektorState","updateQueryParam","key","URL","searchParams","history","replaceState","stg_kz","dateparts","getAvailableTermine","allLeTermine","maUIDchangedHandler","handleLEChanged","openNewAnwesenheitskontrolleModal","arrWrapped","found","newEntry","original","updateFoundIndex","newAnwVonDate","newAnwBisDate","minDiff","threshold","kontrollenToCheck","len","kVonParts","kBisParts","kVonDate","setupPromise","bind","regenerateQRTimer","showAllTickbox","checked","downloadCSV","getCSVFilename","bom","redrawTable","entForSelectedDate","vonDate","bisDate","isEntschuldigt","entCurDate","togglePopOut","toClone","head","querySelectorAll","clone","cloneNode","handleCloseExternalWindow","checkForBetreuungAndAlert","alertConfig","alert_lehrform","lehrform_kurzbz","text","lang","german_alert_text","english_alert_text","selectedDateDBFormatted","startsWith","kdate","openKontrolleInfo","handleTitleSet","handleUpdateAnwesenheit","authID","newVal","currentLEhasRightToSkipQR","no_qr_lehrform","getTitle","getTabulatorStyle","getTooltipKontrolleLoeschen","getTooltipKontrolleNeu","getTooltipZeitFromStundenplan","getTooltipDatumFromStundenplan","getTooltipLegende","getTooltipCsv","getTooltipEdit","getTooltipSaveChanges","getTooltipRestartKontrolle","getTooltipDeleteKontrolle","getTooltipEditKontrollzeiten","getSaveBtnClass","getEditBtnClass","str","csvInfoString","viewDataLv","toDateString","highlights","current","search","searchsettings","$fhcApi","post","searchAdvanced","searchdummy","phrasen$2","category","setLanguage","categories","language","payload","getLanguage","getActiveDbLanguages","navigation","filter$1","studstatus","abmeldung","getDetails","antrag_id","create","stdsem","grund","errorHandling","cancel","allSettled","antrag","studierendenantrag_id","errorHeader","unterbrechung","datum_wiedereinstieg","attachment","wiederholung","getLvs","saveLvs","forbiddenLvs","mandatoryLvs","leitung","getStgs","getAntraege","getHistory","getPrestudents","query","signal","timeout","approve","reopen","pause","unpause","object","approveObjection","denyObjection","profil","getView","app_root","ci_router","fotoSperre","isStudent","isMitarbeiter","getZustellAdresse","getZustellKontakt","getGemeinden","nation","zip","getAllNationen","profilUpdate","getStatus","getTopic","acceptProfilRequest","profil_update_id","status_message","topic","requested_change","denyProfilRequest","insertFile","dms","getProfilRequestFiles","requestID","selectProfilRequest","insertProfilRequest","fileID","updateProfilRequest","ID","deleteProfilRequest","lvPlan","getRoomInfo","ort_kurzbz","start_date","end_date","getOrtReservierungen","getLvPlanReservierungen","getLehreinheitStudiensemester","studiensemesterDateInterval","LvPlanEvents","stv","favorites","studiensemester_kurzbz","encodeURIComponent","getUri","prestudent","person","relative_path","getStg","setStg","studiengang_kz","konto","tabulatorConfig","self","ajaxURL","ajaxParams","modelValue","only_open","studiengang_kz_intern","ajaxRequestFunc","ajaxResponse","checkDoubles","form","confirmErrorHandler","insert","edit","delete","buchungsnr","getBuchungstypen","getGruppen","deleteGroup","kontakt","getAdressen","addNewAddress","loadAddress","address_id","updateAddress","deleteAddress","getPlaces","plz","getFirmen","searchString","getNations","getAdressentypen","getBankverbindung","addNewBankverbindung","loadBankverbindung","bankverbindung_id","updateBankverbindung","deleteBankverbindung","getKontakte","addNewContact","loadContact","kontakt_id","updateContact","deleteContact","getStandorteByFirma","getKontakttypen","updatePrestudent","getBezeichnungZGV","getBezeichnungMZgv","getBezeichnungDZgv","getAusbildung","getAufmerksamdurch","getBerufstaetigkeit","getTypenStg","getBisstandort","getHistoryPrestudent","getMaxSem","studiengang_kzs","advanceStatus","status_kurzbz","ausbildungssemester","confirmStatus","isLastStatus","deleteStatus","getLastBismeldestichtag","getHistoryPrestudents","insertStatus","loadStatus","updateStatus","getStudienplaene","getStudiengang","getStatusgruende","getStati","addStudent","changeStatus","getStatusarray","details","save","exam","getPruefungen","loadPruefung","pruefung_id","getTypenPruefungen","getAllLehreinheiten","getLvsByStudent","getLvsandLesByStudent","getLvsAndMas","getMitarbeiterLv","getNoten","checkZeugnisnoteLv","addPruefung","updatePruefung","deletePruefung","abschlusspruefung","getAbschlusspruefung","addNewAbschlusspruefung","loadAbschlusspruefung","updateAbschlusspruefung","deleteAbschlusspruefung","getTypenAbschlusspruefung","getTypenAntritte","getBeurteilungen","getAkadGrade","getTypStudiengang","getMitarbeiter","getPruefer","checkForExistingExams","uids","grades","list","getCertificate","getTeacherProposal","getRepeaterGrades","updateCertificate","lehrveranstaltung_id","student_uid","note","lehrveranstaltung_bezeichnung","deleteCertificate","copyTeacherProposalToCertificate","copyRepeaterGradeToCertificate","studierendenantrag_lehrveranstaltung_id","lv_bezeichnung","getGradeFromPoints","points","manualErrorHandling","mobility","getMobilitaeten","getProgramsMobility","addNewMobility","loadMobility","updateMobility","deleteMobility","getLVList","getPurposes","getSupports","getListPurposes","getListSupports","deleteMobilityPurpose","addMobilityPurpose","deleteMobilitySupport","addMobilitySupport","archiv","getArchivVorlagen","archive","archiveSigned","akte_id","documents","getDocumentsUnaccepted","getDocumentsAccepted","deleteZuordnung","dokument_kurzbz","createZuordnung","loadAkte","getDoktypen","updateFile","deleteFile","uploadFile","exemptions","getAnrechnungen","getLehrveranstaltungen","getBegruendungen","getLvsKompatibel","getLektoren","addNewAnrechnung","loadAnrechnung","anrechnung_id","editAnrechnung","deleteAnrechnung","jointstudies","getStudies","getTypenMobility","getStudyprograms","getListPartner","getStatiPrestudent","loadStudy","insertStudy","updateStudy","deleteStudy","courselist","getCourselist","group_consecutiveHours","dbStundenplanTable","configStudent","configStudents","getNotizen","getUid","addNewNotiz","loadNotiz","notiz_id","loadDokumente","deleteNotiz","type_id","updateNotiz","isBerechtigt","betriebsmittel","getAllBetriebsmittel","addNewBetriebsmittel","loadBetriebsmittel","betriebsmittelperson_id","updateBetriebsmittel","deleteBetriebsmittel","getTypenBetriebsmittel","loadInventarliste","checkperson","updatePersonUnrulyStatus","unrulyParam","unruly","filterPerson","base","axios","ort","getContentID","ort_kurbz","getRooms","typ","personenanzahl","getRoomTypes","cms","content","content_id","version","sprache","sichtbar","getNews","page_size","news","limit","getNewsRowCount","getNewsExtra","lehre","getStudentenMail","getLvInfo","getStudentPruefungen","getStudentProjektarbeiten","getStudentProjektabgaben","detail","projektarbeit_id","postStudentProjektarbeitEndupload","postStudentProjektarbeitZwischenabgabe","getStudentProjektarbeitAbgabeFile","paabgabe_id","getMitarbeiterProjektarbeiten","all","postProjektarbeitAbgabe","paabgabetyp_kurzbz","fixtermin","insertvon","kurzbz","deleteProjektarbeitAbgabe","postSerientermin","projektarbeit_ids","fetchDeadlines","addons","getLvMenu","lvid","messages","getMessages","size","getVorlagen","getMsgVarsLoggedInUser","getMessageVarsPerson","getMsgVarsPrestudent","getPersonId","getVorlagentext","vorlage_kurzbz","getNameOfDefaultRecipient","getPreviewText","getReplyData","messageId","sendMessageFromModalContext","sendMessage","deleteMessage","vorlagen","getVorlagenByLoggedInUser","studium","getAllStudienSemester","studiengang","studienplan","getStudiengaengeForStudienSemester","getStudienplaeneBySemester","getLvPlanForStudiensemester","getLvEvaluierungInfo","FhcApiFactory","phrasen","dashboard","getViewData","bookmark","getBookmarks","bookmark_id","tag","ampeln","ampel_id","studiengangInformation","getStudiengangByKz","menu","authinfo","getAuthUID","getAuthInfo","getAll","OldFhcApi","install","app","globalProperties","factory","console","warn","addEndpoints","_get_config","uri","TypeError","clearValidation","setFeedback","_clean_return_value","fhcApiAxios","baseURL","interceptors","request","FormData","every","item","FileList","File","entries","nd","jsondata","err","_defaultErrorHandlers","handled","alertDefault","responseURL","validation","apply","general","php","filename","line","backtrace","function","severity","alertSystemError","exception","db","heading","sql","join","auth","controller","required_permissions","FhcApiFactoryWrapper","constructor","factorypart","root","defineProperty","noWarn","provide","PluginsApi","_send_array_or_object","func","errs","FhcAlert","DEFAULT_ERROR_CONFIG","success","fail","combine","toast","_format_toast","_default","msg","msgs","n_errors","get_config","clean_return_value","_merge_error_config","get_error_handler","formHandler","get_error_list","popHandleableErrors","copy","pop","newType","newTypeCombinesType","newTypeHasHandler","errorConfig","remaining","configoverwrite","typedErrors","allowed","reason","errType","ApiPhrasen","reactive","loadingModules","user_language","user_locale","server_languages","LC_Time","catArray","phrase","obj","elem","extractCategory","t_ref","match","p1","getValueForLoadedPhrase","FhcPhrasen","cat","CORE_REST_CLIENT_ERROR","CORE_REST_CLIENT_RETVAL","CoreRESTClient","wsURL","wsParameters","axiosParameters","_axiosCall","isSuccess","isError","hasData","trim","getError","getErrorCode","_generateRouterURI","_printDebug","parameters","errorThrown","axiosCallObj","prop","helperAppContainer","helperApp","PvToast","PvConfirm","mailToUrl","slotProps","systemerror_mailto","openMessagecard","getOrCreateInstance","showmaillink","PvConfig","PvConfirmationService","helperAppInstance","add","summary","life","$confirm","require","accept","sticky","alertMultiple","messageArray","handleSystemError","errMsg","toUpperCase","stack","handleSystemMessage","resetFormValidation","Event","dispatchEvent","handleFormValidation","nodeType","Node","ELEMENT_NODE","notFound","querySelector","CustomEvent","FhcApi","$fhcApiFactory","fhcApi","CoreTabs","tabview","TabView","tabpanel","TabPanel","accessibility","arg","cursor","prev","next","modifiers","vertical","act","parentNode","tabIndex","ariaSelected","previousSibling","nextSibling","click","activetab","from","node","ariaSetSize","ariaPosInSet","classList","pos","parseInt","Symbol","border","useprimevue","tabs","currentTab","component","calcActiveIndex","initConfig","handleTabClick","$nextTick","_addToTabs","suffix","showSuffix","markRaw","defineAsyncComponent","import","suffixhelper","updateSuffix","getTabSuffix","tab","getSuffix","getTabSuffixes","updated","StudentDropdown","internal_available_student_info","internal_selected_student_info","studentChanged","selected_student","selected_student_info","availableStudents","resetData","StudentAnwesenheitComponent","StudiensemesterDropdown","selectedOption","loadDropdown","aktuell","_","appContext","ssChanged","studentViewTabulatorOptions","studentAnw","renderVerticalBuffer","bottomCalcParams","bottomCalcParamLookup","formAnwesenheit","groupBy","groupStartOpen","groupHeader","customGroupHeader","groupToggleElement","studentViewTabulatorEventHandlers","sums","bezeichnung_english","anwesenheit","first","returnValue","hasOffene","hasAbgelehnte","ssChangedHandler","loadAnwesenheitenByUID","profileViewDataPromise","viewDataStudent","processedAnw","processAnw","uebersichtTable","percentage","entschuldigungen_enabled","offene","abgelehnte","o","student_status","abg","collapsables","Range","modelKeys","AnwTimeline","Datepicker","Timeline","timeline","timelineStart","timelineEnd","hourWidth","selectedRange","anwArray","entArray","formatDateTimelineStart","formatDateTimelineEnd","formatEntTime","formatDate","highlightEntschuldigung","scrollIntoView","behavior","block","highlightKontrolle","showRangeDetails","range","dateToPercentage","dateStr","getDaysBetweenDates","getRangeColor","getRangeColorAnw","getOverlayStyleEnt","start","end","offsetDays","rangeLength","rangeTime","offsetHours","zOffset","Math","round","position","left","dayWidth","transform","borderRadius","getOverlayStyleAnw","diffTime","abs","floor","dateParam","getTimelineEventStyle","handleScrollTimeline","wheelDelta","goToday","today","yyyy","mm","dd","scrollToDate","datestr","anwDateFormat","vonparts","bisparts","deep","getTooltipAnwTimeline","timelineWidth","entTimeRanges","anwTimeRanges","events","days","formattedDate","getTimelineStyle","StudentComponent","tabsStudent","getTabsStudent","anwesenheiten","routeToCodeScan","checkEntryParamPermissions","handleTabChanged","refs","studentChangedHandler","awaitPhrasen","activetabstudent","Upload","DmsItem","preview","multiple","inputClass","noList","disabled","stringifyFile","lastModified","lastModifiedDate","addFiles","files","dt","DataTransfer","doubles","items","removeFile","fileToRemove","upload","dmsFile","StudentEntschuldigungComponent","Checkbox","checkbox","noFileUpload","initEntschuldigungForm","calcMinDate","entschuldigungsViewTabulatorOptions","studentEnt","ajaxConfig","ajaxContentType","pagination","paginationSize","entschuldigungstatusFormatter","entschuldigungsViewTabulatorEventHandlers","formatDateEntschuldigungEdit","entschuldigungMaxReach","getDay","isValidDateObj","triggerEdit","targetRow","entschuldigungsTable","getRows","modalContainerEntschuldigungEdit","triggerUpload","validate","addRow","modalContainerEntschuldigungUpload","button","minwidth","downloadEntschuldigung","addEntschuldigungFile","startUploadEntschuldigung","updateDefinition","setHours","ScanComponent","internalZugangscode","zugangscodeProcessed","codeMaxlength","codeButtonDisabled","sendCode","processAnwesenheit","checkValue","calculatedMaxLength","getBaseLayoutTitle","StudiengangDropdown","allowedStg","isAdmin","studiengaengeAdmin","sgChanged","EntschuldigungEdit","Textarea","textarea","Tristate","tristatecheckbox","setForm","uploaddatum","setFullYear","getStatusLabel","dateFilter","div","initialValue","PrimevueCalendar","calendar","headerValue","rowValue","rowDate","startDate","endDate","singleDate","ApiAdmin","getEntschuldigungen","stg_kz_arr","updateEntschuldigung","getTimeline","AssistenzComponent","headerFiltersRestored","filtersRestored","colLayoutRestored","sortRestored","stateRestored","selectedEntschuldigung","selectedEntschuldigungValid","selectedAnwArray","selectedEntArray","editCellValue","zeitraum","$formatTime","permissionsLoaded","assistenzViewTabulatorOptions","berechtigungenArrayAdmin","berechtigungenArrayAssistenz","studiengaengeAssistenz","joined","true","false","null","headerFilterFunc","akzeptiertFilterFunc","assistenzViewTabulatorEventHandlers","stopPropagation","titleText","formatForSql","pad","saveEditEntschuldigung","selectedEntschuldigungCellRef","assistenzTable","modalContainerEditEntschuldigung","cancelEdit","openEditEntschuldigungModal","closeTimelineModal","modalContainerTimeline","openTimelineModal","filterVal","rowVal","notizParam","existingNotiz","actionwrapper","cellData","openRejectionModal","bisFilter","filterParams","vonFilter","studiengangFilter","filtern","addFilter","handleInputNotiz","rejectEntschuldigung","rejectCell","modalContainerRejectionReason","sgChangedHandler","refetchData","handleSelectedEntschuldigungValidate","valid","saveState","state","getColumnLayout","getSorters","dir","getFilters","headerFilters","localStorage","setItem","handleTableBuilt","saved","loadState","setColumnLayout","setFilter","hf","sortList","columnManager","findColumn","setSort","getItem","beforeMounted","back","getAllowedStg","getTooltipVonDatum","getTooltipBisDatum","LandingPageComponent","initTabs","loaded","phrasenResolved","permissioncount","anwKontrolleMinDate","anwKontrolleMaxDate","queryString","URLSearchParams","notMissingParams","capitalize","string","kontrolleTitle","profilTitle","adminTitle","setCurrentTab","setDefaultTabHeight","createdSetup","setupViewDataRefs","loadLvViewData","attributes","nodeValue","cis4","kontrolleCreateMaxReachPast","kontrolleCreateMaxReachFuture","removeAttribute","benotung","oe_kurzbz","orgform_kurzbz","raumtyp_kurzbz","setLvViewData","handleSetup","le_ids","promises","handleMaSetup","handleStudentsSetup","available_maUID","anrede","titelpre","vornamen","titelpost","existing","gruppe_kurzbz","direktinskription","studentcount","termincount","findLeWithClosestTermin","available_le_info","leEntry","available_le_ids","tabsMain","leChoices","leTermine","flat","closest","choice","todayTime","timeDiff","time","min","getSubtitle","getCurrentTab","ciPath","router","VueRouter","createRouter","createWebHistory","routes","path","redirect","anwesenheitApp","isMobile","screen","navigator","userAgent","timeStamp","delimiter","format","directive","utils","DomHandler","hasClass","findSingle","getTarget","$_ptooltipZIndex","$primevue"],"mappings":"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"}