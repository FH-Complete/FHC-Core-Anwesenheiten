{"version":3,"file":"AnwesenheitApp.js","sources":["../../../../../js/components/Fetch.js","../../../../../js/components/filter/Filter/Config.js","../../../../../js/components/filter/Filter/Columns.js","../../../../../js/components/filter/Table/Download.js","../../../../../js/directives/collapseAutoClose.js","../../../../../js/tabulator/layouts/fitDataStretchFrozen.js","../../../../../js/api/factory/filter.js","../../../../../js/components/filter/Filter.js","../../../../../js/api/factory/navigation.js","../../../../../js/components/navigation/Navigation.js","../../../../../js/components/layout/BaseLayout.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/formatters/formatters.js","../../../../../js/components/Bootstrap/Modal.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/LehreinheitenDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/MaUIDDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/KontrollenDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/TermineDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/AnwCountDisplay.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/KontrolleDisplay.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/Statuslegende.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/kontrolle.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/profil.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/info.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/StudentByLvaComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/LektorComponent.js","../../../../../js/api/search.js","../../../../../js/api/phrasen.js","../../../../../js/api/navigation.js","../../../../../js/api/filter.js","../../../../../js/api/studstatus.js","../../../../../js/api/profil.js","../../../../../js/api/profilUpdate.js","../../../../../js/api/lvPlan.js","../../../../../js/api/stv.js","../../../../../js/api/stv/verband.js","../../../../../js/api/stv/students.js","../../../../../js/api/stv/filter.js","../../../../../js/api/stv/konto.js","../../../../../js/api/stv/group.js","../../../../../js/api/stv/kontakt.js","../../../../../js/api/stv/prestudent.js","../../../../../js/api/stv/status.js","../../../../../js/api/stv/details.js","../../../../../js/api/stv/exam.js","../../../../../js/api/stv/abschlusspruefung.js","../../../../../js/api/stv/grades.js","../../../../../js/api/stv/mobility.js","../../../../../js/api/stv/archiv.js","../../../../../js/api/stv/documents.js","../../../../../js/api/stv/exemptions.js","../../../../../js/api/stv/jointstudies.js","../../../../../js/api/stv/courselist.js","../../../../../js/api/notiz.js","../../../../../js/api/notiz/person.js","../../../../../js/api/betriebsmittel.js","../../../../../js/api/betriebsmittel/person.js","../../../../../js/api/checkperson.js","../../../../../js/api/ort.js","../../../../../js/api/cms.js","../../../../../js/api/lehre.js","../../../../../js/api/addons.js","../../../../../js/api/messages.js","../../../../../js/api/messages/person.js","../../../../../js/api/vorlagen.js","../../../../../js/api/studium.js","../../../../../js/api/fhcapifactory.js","../../../../../js/api/dashboard.js","../../../../../js/api/bookmark.js","../../../../../js/api/ampeln.js","../../../../../js/api/studiengang.js","../../../../../js/api/menu.js","../../../../../js/api/authinfo.js","../../../../../js/api/language.js","../../../../../js/plugin/OldFhcApi.js","../../../../../js/RESTClient.js","../../../../../js/plugins/FhcAlert.js","../../../../../js/plugins/Api.js","../../../../../js/api/factory/phrasen.js","../../../../../js/plugins/Phrasen.js","../../../../../js/components/Tabs.js","../../../../../js/directives/accessibility.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Setup/StudentDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentAnwesenheitComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudiensemesterDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/Range.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AnwTimeline.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentComponent.js","../../../../../js/components/Form/Upload/Dms/Item.js","../../../../../js/components/Form/Upload/Dms.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentEntschuldigungComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/ScanComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudiengangDropdown.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/EntschuldigungEdit.js","../../../../../js/tabulator/filters/Dates.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/api/factory/administration.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AssistenzComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/components/LandingPage/LandingPageComponent.js","../../../../../extensions/FHC-Core-Anwesenheiten/js/apps/AnwesenheitApp.js"],"sourcesContent":["/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const CoreFetchCmpt = {\n\temits: ['dataFetched'], // this component can emit the event dataFetched that it is catched by this component itself\n\tprops: {\n\t\trefresh: { // to refresh this component\n\t\t\ttype: Boolean\n\t\t},\n\t\tapiFunction: { // the function to call, must return a Promise\n\t\t\trequired: true,\n\t\t\ttype: Function\n\t\t},\n\t\tapiFunctionParameters: {} // parameters for the apiFunction, type mixed, optional\n\t},\n\twatch: {\n\t\t/**\n\t\t * If the refresh property is changed then call fetchData\n\t\t */\n\t\trefresh: function (newValue, oldValue) {\n\t\t\tthis.fetchData();\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tloading: false, // if in loading or not\n\t\t\terror: false, // if an error occurred while loading data\n\t\t\terrorMessage: null // the error message\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.fetchData();\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchData: function() {\n\t\t\tthis.loading = true; // loader started\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = null;\n\n\t\t\t// Checks if the apifunction is a callable function\n\t\t\tif (typeof this.apiFunction == \"function\")\n\t\t\t{\n\t\t\t\t// Call the function stored in apiFunction\n\t        \t\tlet apiFunctionResult = this.apiFunction(this.apiFunctionParameters);\n\n\t\t\t\t// It is expected that the function returns a Promise\n\t\t\t\tif (apiFunctionResult instanceof Promise)\n\t\t\t\t{\n\t\t\t\t\tapiFunctionResult\n\t\t\t\t\t\t.then(this.successHandler) // on success\n\t\t\t\t\t\t.catch(this.errorHandler) // on error\n\t\t\t\t\t\t.finally(this.finallyHandler); // finally in any case\n\t\t\t\t}\n\t\t\t\telse // otherwise display an error\n\t\t\t\t{\n\t\t\t\t\tthis.setError(\"The called apiFunction does not return a Promise\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // otherwise display an error\n\t\t\t{\n\t\t\t\tthis.setError(\"Property apiFunction is not a function\");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsetError: function(errorMessage) {\n\t\t\tthis.loading = false; // loading ended\n\t\t\tthis.error = true; // error occurred\n\t\t\tthis.errorMessage = errorMessage; // save the error message\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsuccessHandler: function(response) {\n\t\t\tthis.$emit('dataFetched', response ? response.data : undefined); // trigger the event dataFetched\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\terrorHandler: function(error) {\n\t\t\tif (error.response?.data?.retval)\n\t\t\t\tthis.setError(error.response.data.retval);\n\t\t\telse if (error.data?.message)\n\t\t\t\tthis.setError(error.data.message);\n\t\t\telse\n\t\t\t\tthis.setError(error.message);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfinallyHandler: function() {\n\t\t\tthis.loading = false; // loading ended\n\t\t}\n\t},\n\ttemplate: `\n\t\t<slot v-if=\"loading\" name=\"loading\">\n\t\t\t<div class=\"fetch-loader\">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if=\"error\" name=\"error\" :error-message=\"errorMessage\">\n\t\t\t<div class=\"fetch-error\">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t`\n};\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfilters: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\temits: {\n\t\tswitchFilter: ['filterId'],\n\t\tapplyFilterConfig: ['filterFields'],\n\t\tsaveCustomFilter: ['customFilterName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tcurrentFields: []\n\t\t};\n\t},\n\tcomputed: {\n\t\ttypes() {\n\t\t\treturn this.columns.reduce((a,c) => {\n\t\t\t\tlet type = c.type.toLowerCase();\n\t\t\t\tif (type.indexOf('int') >= 0)\n\t\t\t\t\ta[c.name] = 'Numeric';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('varchar') >= 0 || \n\t\t\t\t\ttype.indexOf('text') >= 0 || \n\t\t\t\t\ttype.indexOf('bpchar') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Text';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('timestamp') >= 0 || \n\t\t\t\t\ttype.indexOf('date') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Date';\n\t\t\t\telse\n\t\t\t\t\ta[c.name] = '';\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t}\n\t},\n\twatch: {\n\t\tfields(n) {\n\t\t\tthis.currentFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchFilter(evt) {\n\t\t\tthis.$emit('switchFilter', evt.currentTarget.value);\n\t\t},\n\t\tapplyFilterConfig() {\n\t\t\tconst filteredFields = this.currentFields.filter(el => el.name != FILTER_COMPONENT_NEW_FILTER);\n\t\t\tif (filteredFields.filter(el => el.condition == \"\").length)\n\t\t\t\talert(\"Please fill all the filter options\");\n\t\t\telse\n\t\t\t\tthis.$emit('applyFilterConfig', filteredFields);\n\t\t},\n\t\taddField(evt) {\n\t\t\tthis.currentFields.push({\n\t\t\t\tname: FILTER_COMPONENT_NEW_FILTER\n\t\t\t});\n\t\t},\n\t\tremoveField(index) {\n\t\t\tthis.currentFields.splice(index, 1);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-config\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<div v-if=\"filters.length\" class=\"mb-4\">\n\t\t\t\t\t<select class=\"form-select\" @change=\"switchFilter\">\n\t\t\t\t\t\t<option value=\"\">Bitte auswählen...</option>\n\t\t\t\t\t\t<option v-for=\"filter in filters\" :value=\"filter.id\">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-outline-dark\" type=\"button\" @click=addField>\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filter-config-fields my-3\">\n\t\t\t\t\t<div v-for=\"(filterField, index) in currentFields\" class=\"filter-config-field row\">\n\n\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t<span class=\"input-group-text\">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\"form-select\"\n\t\t\t\t\t\t\t\t\tv-model=\"filterField.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Feld zum Filter hinzufügen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"col in columns\" :value=\"col.name\">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Numeric -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Numeric'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Text'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"contains\">Enthält</option>\n\t\t\t\t\t\t\t\t\t<option value=\"ncontains\">Enthält nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Timestamp and date -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Date'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"set\">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nset\">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.option\">\n\t\t\t\t\t\t\t\t\t<option value=\"minutes\">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value=\"hours\">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value=\"days\">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value=\"months\">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"col text-end\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"btn btn-outline-dark\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"removeField(index)\"\n\t\t\t\t\t\t\t\ttitle=\"Filter entfernen\"\n\t\t\t\t\t\t\t\taria-title=\"Filter entfernen\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa-solid fa-minus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Filter save options -->\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-7\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<input ref=\"filterName\" type=\"text\" class=\"form-control\" placeholder=\"Filternamen eingeben...\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"$emit('saveCustomFilter', $refs.filterName.value)\">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-dark\" @click=\"applyFilterConfig\">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfields: Array,\n\t\tselected: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tnames: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\temits: {\n\t\thide: ['fieldName'],\n\t\tshow: ['fieldName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tselectedFields: []\n\t\t};\n\t},\n\twatch: {\n\t\tselected(n) {\n\t\t\tthis.selectedFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle(field) {\n\t\t\tif (this.selectedFields.indexOf(field) != -1)\n\t\t\t{\n\t\t\t\tthis.selectedFields.splice(this.selectedFields.indexOf(field), 1);\n\t\t\t\tthis.$emit('hide', field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedFields.push(field);\n\t\t\t\tthis.$emit('show', field);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-columns\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"d-flex flex-wrap gap-2 p-3 justify-content-center\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"fieldToDisplay in fields\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:class=\"selectedFields.indexOf(fieldToDisplay) != -1 ? 'btn-dark' : 'btn-outline-dark' \"\n\t\t\t\t\t@click=\"toggle(fieldToDisplay)\"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_ICONS = {\n\tjsonLines: 'fa-file-lines',\n\txlsx: 'fa-file-excel',\n\tpdf: 'fa-file-pdf',\n\thtml: 'fa-file-code',\n\tjson: 'fa-file',\n\tcsv: 'fa-file-csv'\n};\nconst DEFAULT_LABELS = {\n\tjsonLines: 'Download as JSONLINES',\n\txlsx: 'Download as XLSX',\n\tpdf: 'Download as PDF',\n\thtml: 'Download as HTML',\n\tjson: 'Download as JSON',\n\tcsv: 'Download as CSV '\n};\n\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\ttabulator: Object,\n\t\tconfig: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\ticonClass: [String, Array, Object]\n\t},\n\tcomputed: {\n\t\tcurrentConfig() {\n\t\t\tif (!this.config)\n\t\t\t\treturn false;\n\n\t\t\tlet config = this.config;\n\n\t\t\tif (config instanceof Function)\n\t\t\t\treturn [config];\n\n\t\t\tif (config === null)\n\t\t\t\treturn [];\n\n\t\t\tif (this.config === true)\n\t\t\t\tconfig = ['csv'];\n\n\t\t\tif (Object.prototype.toString.call(config) === \"[object String]\")\n\t\t\t\tconfig = config.split(',');\n\n\t\t\tif (typeof config === 'object' && !Array.isArray(config)) {\n\t\t\t\tlet newConfig = [];\n\t\t\t\tfor (var k in config) {\n\t\t\t\t\tvar v = config[k], type;\n\t\t\t\t\t\n\t\t\t\t\tif (!v)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\n\t\t\t\t\tif (Object.prototype.toString.call(v) === \"[object String]\") {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(v);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: v === k ? DEFAULT_LABELS[type] : k,\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\t\tif(type !== null) {\n\t\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert('neither ' + k + ' nor ' + v + ' are supported download file types');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof v === 'object' && !Array.isArray(v)) {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tif (v.formatter === undefined)\n\t\t\t\t\t\t\t\tv.formatter = type;\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = DEFAULT_LABELS[type];\n\t\t\t\t\t\t\tif (v.icon === undefined)\n\t\t\t\t\t\t\t\tv.icon = DEFAULT_ICONS[type];\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = k;\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[type],\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(k + ' is not a supported download file type');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig = newConfig;\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t{\n\t\t\t\tconfig = config.map(el => {\n\t\t\t\t\tif (Object.prototype.toString.call(el) === \"[object String]\") {\n\t\t\t\t\t\tlet formatter = this.stringToFileFormatter(el);\n\t\t\t\t\t\tif (formatter === null)\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[formatter],\n\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[formatter],\n\t\t\t\t\t\t\tformatter\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el instanceof Function)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformatter: el\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (typeof el === 'object' && !Array.isArray(el) && el !== null) {\n\t\t\t\t\t\tif (el.formatter instanceof Function)\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\tif (this.validateFileFormatter(el.formatter))\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(el => el !== null);\n\n\t\t\t\tif (config.length < 2)\n\t\t\t\t\treturn config;\n\n\t\t\t\tif (config.filter(el => el.label || el.icon).length == config.length)\n\t\t\t\t\treturn config;\n\n\t\t\t\talert('Config not valid');\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\tmethods: {\n\t\tstringToFileFormatter(input) {\n\t\t\tlet lcInput = input.toLowerCase();\n\t\t\t\n\t\t\tif (lcInput == 'jsonlines')\n\t\t\t\treturn 'jsonLines';\n\t\t\t\n\t\t\tif (['xlsx', 'pdf', 'html', 'json', 'csv'].includes(lcInput))\n\t\t\t\treturn lcInput;\n\n\t\t\treturn null;\n\t\t},\n\t\tvalidateFileFormatter(input) {\n\t\t\tlet formatter = this.stringToFileFormatter(input);\n\t\t\tif (!formatter) {\n\t\t\t\talert(input + ' is not a supported file formatter');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (formatter == 'xlsx') {\n\t\t\t\tif (!window.XLSX) {\n\t\t\t\t\talert('XLSX Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formatter == 'pdf') {\n\t\t\t\tif (!window.jspdf) {\n\t\t\t\t\talert('jsPDF Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar doc = new jspdf.jsPDF({});\n\t\t\t\tif (!doc.autoTable) {\n\t\t\t\t\talert('jsPDF-AutoTable Plugin not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tdownload(config) {\n\t\t\tthis.tabulator.download(config.formatter, config.file, config.options)\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"currentConfig\">\n\t\t<template v-if=\"currentConfig.length == 1\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\t@click.prevent=\"download(currentConfig[0])\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class=\"dropdown d-inline\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\trole=\"button\"\n\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-end\">\n\t\t\t\t<li v-for=\"(conf, i) in currentConfig\" :key=\"i\">\n\t\t\t\t\t<a class=\"dropdown-item\" href=\"#\" @click.prevent=\"download(conf)\">\n\t\t\t\t\t\t<span v-if=\"conf.icon\" :class=\"conf.icon\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t`\n};\n\n","const elementDataMap = new WeakMap();\n\nexport default {\n\tmounted(el, binding) {\n\t\tlet open = false;\n\t\telementDataMap.set(el, evt => {\n\t\t\tif (!open)\n\t\t\t\treturn;\n\n\t\t\tif (el.contains(evt.target))\n\t\t\t\treturn;\n\n\t\t\tconst collapse = bootstrap.Collapse.getInstance(el)\n\t\t\tif (collapse)\n\t\t\t\tcollapse.hide();\n\t\t});\n\t\tel.addEventListener('shown.bs.collapse', () => {\n\t\t\topen = true;\n\t\t});\n\t\tel.addEventListener('hide.bs.collapse', () => {\n\t\t\topen = false;\n\t\t});\n\t\tdocument.addEventListener('click', elementDataMap.get(el), true);\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tdocument.removeEventListener('click', elementDataMap.get(el));\n\t\tdelete el.collapsibleAutoHideFunc;\n\t}\n}","/**\n * This may need changes if Tabulator gets updated!\n *\n * Current working Version: 5.5.2\n * \n * This is a copy of the fitDataStretch function. The only difference\n * is the check for frozen columns on line 22.\n */\n\nexport default window.Tabulator?.extendModule(\"layout\", \"modes\", {\n\tfitDataStretchFrozen(columns, forced) {\n\t\tvar colsWidth = 0,\n\t\ttableWidth = this.table.rowManager.element.clientWidth,\n\t\tgap = 0,\n\t\tlastCol = false;\n\n\t\tcolumns.forEach((column, i) => {\n\t\t\tif (!column.widthFixed) {\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible && !column.definition.frozen) {\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol){\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tlastCol.setWidth(0);\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n});\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/saveCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t};\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/applyFilterFields',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t};\n\t},\n\taddFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/addFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tgetFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport FilterConfig from './Filter/Config.js';\nimport FilterColumns from './Filter/Columns.js';\nimport TableDownload from './Table/Download.js';\nimport collapseAutoClose from '../../directives/collapseAutoClose.js';\n\nimport moduleLayoutFitDataStretchFrozen from '../../tabulator/layouts/fitDataStretchFrozen.js';\n\nimport ApiFilter from '../../api/factory/filter.js';\n\n//\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\nconst FILTER_COMPONENT_NEW_FILTER_TYPE = 'Filter Component New Filter Type';\n\nvar _uuid = 0;\n\n/**\n *\n */\nexport const CoreFilterCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt,\n\t\tFilterConfig,\n\t\tFilterColumns,\n\t\tTableDownload\n\t},\n\tdirectives: {\n\t\tcollapseAutoClose\n\t},\n\temits: [\n\t\t'nwNewEntry',\n\t\t'click:new',\n\t\t'tableBuilt',\n\t\t'uuidDefined'\n\t],\n\tprops: {\n\t\tonNwNewEntry: Function, // NOTE(chris): Hack to get the nwNewEntry listener into $props\n\t\ttitle: String,\n\t\tdescription: String,\n\t\tsideMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tfilterType: {\n\t\t\ttype: String\n\t\t},\n\t\ttabulatorOptions: Object,\n\t\ttabulatorEvents: Array,\n\t\ttableOnly: Boolean,\n\t\tnoColumnFilter:Boolean,\n\t\treload: Boolean,\n\t\treloadBtnInfotext: String,\n\t\tdownload: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\tnewBtnShow: Boolean,\n\t\tnewBtnClass: [String, Array, Object],\n\t\tnewBtnDisabled: Boolean,\n\t\tnewBtnLabel: String,\n\t\tuniqueId: String,\n\n\t\tidField: String,\n\t\tparentIdField: String,\n\t\tcountOnly: Boolean,\n\t\tuseSelectionSpan: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tuuid: 0,\n\t\t\t// FilterCmpt properties\n\t\t\tfilterName: null,\n\t\t\tfilterActive: false,\n\t\t\tfields: null,\n\t\t\tdataset: null,\n\t\t\tdatasetMetadata: null,\n\t\t\tselectedFields: null,\n\t\t\tfilterFields: null,\n\n\t\t\tavailableFilters: null,\n\t\t\tselectedFilter: null,\n\n\t\t\t// FetchCmpt binded properties\n\t\t\tfetchCmptRefresh: false,\n\t\t\tfetchCmptApiFunction: null,\n\t\t\tfetchCmptApiFunctionParams: null,\n\t\t\tfetchCmptDataFetched: null,\n\n\t\t\tfetchResult: null,\n\n\t\t\ttabulator: null,\n\t\t\ttableBuilt: false,\n\t\t\ttabulatorHasSelector: false,\n\t\t\tselectedData: [],\n\t\t\tpersistence: {\n\t\t\t\tsort: true,\n\t\t\t\tcolumns: true,\n\t\t\t\tfilter: false,\n\t\t\t\theaderFilter: false,\n\t\t\t\tgroup: false,\n\t\t\t\tpage: false,\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotSelectedFields() {\n\t\t\tif (!this.fields || !this.selectedFields)\n\t\t\t\treturn null;\n\t\t\treturn this.fields.filter(x => this.selectedFields.indexOf(x) === -1)\n\t\t},\n\t\tfilteredData() {\n\t\t\tif (!this.dataset)\n\t\t\t\treturn [];\n\t\t\treturn JSON.parse(JSON.stringify(this.dataset));\n\t\t},\n\t\tfilteredColumns() {\n\t\t\tlet fields = JSON.parse(JSON.stringify(this.fields)) || [];\n\t\t\tlet selectedFields = JSON.parse(JSON.stringify(this.selectedFields)) || [];\n\n\t\t\tlet columns = null;\n\n\t\t\t// If the tabulator options has been provided and it contains the property columns\n\t\t\tif (this.tabulatorOptions && this.tabulatorOptions.hasOwnProperty('columns'))\n\t\t\t\tcolumns = this.tabulatorOptions.columns;\n\n\t\t\t// If columns is not an array or it is an array with less elements then the array fields\n\t\t\tif (!Array.isArray(columns) || (Array.isArray(columns) && columns.length < fields.length))\n\t\t\t{\n\t\t\t\tcolumns = []; // set it as an empty array\n\n\t\t\t\t// Loop throught all the retrieved columns from database\n\t\t\t\tfor (let field of fields)\n\t\t\t\t{\n\t\t\t\t\t// Create a new column having the title equal to the field name\n\t\t\t\t\tlet column = {\n\t\t\t\t\t\ttitle: field,\n\t\t\t\t\t\tfield: field\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\tcolumn.visible = selectedFields.indexOf(field) >= 0;\n\n\t\t\t\t\t// Add the new column to the list of columns\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // the property columns has been provided in the tabulator options\n\t\t\t{\n\t\t\t\t// Loop throught the property columns of the tabulator options\n\t\t\t\tfor (let col of columns)\n\t\t\t\t{\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\t/* fields.indexOf(col.field) == -1; ensures displaying formatter colums\n\t\t\t\t\te.g. column with rowSelection checkboxes or with custom formatted action buttons */\n\t\t\t\t\tcol.visible = selectedFields.indexOf(col.field) >= 0 || fields.indexOf(col.field) == -1;\n\n\t\t\t\t\tif (col.hasOwnProperty('resizable'))\n\t\t\t\t\t\tcol.resizable = col.visible;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns;\n\t\t},\n\t\tfieldIdsForVisibilty() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn [];\n\t\t\treturn this.tabulator.getColumns().filter(col => {\n\t\t\t\tlet def = col.getDefinition();\n\t\t\t\treturn !def.frozen && def.title && def.formatter != \"responsiveCollapse\";\n\t\t\t}).map(col => col.getField());\n\t\t},\n\t\tfieldNames() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn {};\n\t\t\treturn this.tabulator.getColumns().reduce((res, col) => {\n\t\t\t\tres[col.getField()] = col.getDefinition().title;\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t\t},\n\t\tidExtra() {\n\t\t\tif (!this.uuid)\n\t\t\t\treturn '';\n\t\t\treturn '-' + this.uuid;\n\t\t},\n\t\tcolumnsForFilter() {\n\t\t\tif (!this.filteredColumns || !this.datasetMetadata)\n\t\t\t\treturn [];\n\t\t\tconst filterTitles = this.filteredColumns.reduce((a,c) => {\n\t\t\t\ta[c.field] = c.title;\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t\treturn this.datasetMetadata.map(el => ({...el, ...{title: filterTitles[el.name]}}));\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable() {\n\t\t\tif (this.tableOnly)\n\t\t\t\tthis.tabulator.setData();\n\t\t\telse\n\t\t\t\tthis.getFilter();\n\t\t},\n\t\tasync initTabulator() {\n\t\t\tlet placeholder = '< Phrasen Plugin not loaded! >';\n\t\t\tif (this.$p) {\n\t\t\t\tawait this.$p.loadCategory('ui');\n\t\t\t\tplaceholder = this.$p.t('ui/keineDatenVorhanden');\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\t// prefetch data to get fields & selectedFields for filteredColumns & filteredData\n\t\t\t\tawait new Promise(resolve => {\n\t\t\t\t\tconst filterId = window.location.hash ? window.location.hash.slice(1) : null;\n\n\t\t\t\t\tconst resolvePromiseFunc = data => {\n\t\t\t\t\t\tthis.setRenderData(data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\t// get the filter data\n\t\t\t\t\tif (filterId === null)\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t\t\t{ filterId },\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Define a default tabulator options in case it was not provided\n\t\t\tlet tabulatorOptions = {...{\n\t\t\t\t\tlayout: \"fitDataStretchFrozen\",\n\t\t\t\t\tmovableColumns: true,\n\t\t\t\t\tcolumnDefaults:{\n\t\t\t\t\t\ttooltip: true\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tpersistence: this.persistence,\n\t\t\t\t}, ...(this.tabulatorOptions || {})};\n\n\t\t\t// set default height if no height property is set\n\t\t\tif (tabulatorOptions.height === undefined &&\n\t\t\t\ttabulatorOptions.minHeight === undefined &&\n\t\t\t\ttabulatorOptions.maxHeight === undefined) {\n\t\t\t\ttabulatorOptions.height = 500;\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\ttabulatorOptions.data = this.filteredData;\n\t\t\t\ttabulatorOptions.columns = this.filteredColumns;\n\t\t\t} else {\n\t\t\t\ttabulatorOptions.columns.forEach(col => {\n\t\t\t\t\tif (col.visible === undefined)\n\t\t\t\t\t\tcol.visible = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tabulatorOptions.selectable || (tabulatorOptions.columns && tabulatorOptions.columns.filter(el => el.formatter == 'rowSelection').length))\n\t\t\t\tthis.tabulatorHasSelector = true;\n\n\t\t\tif (this.idField) {\n\t\t\t\t// enable nested tabulator if parent Id given\n\t\t\t\tif (this.parentIdField) tabulatorOptions.dataTree = true;\n\t\t\t\t// set tabulator index\n\t\t\t\ttabulatorOptions.index = this.idField;\n\t\t\t}\n\n\t\t\t// Start the tabulator with the build options\n\t\t\tthis.tabulator = new Tabulator(\n\t\t\t\tthis.$refs.table,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n\t\t\t// If event handlers have been provided\n\t\t\tif (Array.isArray(this.tabulatorEvents) && this.tabulatorEvents.length > 0)\n\t\t\t{\n\t\t\t\t// Attach all the provided event handlers to the started tabulator\n\t\t\t\tfor (let evt of this.tabulatorEvents)\n\t\t\t\t\tthis.tabulator.on(evt.event, evt.handler);\n\t\t\t}\n\t\t\tthis.tabulator.on('tableBuilt', () => {this.tableBuilt = true; this.$emit('tableBuilt');});\n\t\t\tthis.tabulator.on(\"rowSelectionChanged\", data => {\n\t\t\t\tthis.selectedData = data;\n\t\t\t});\n\n\t\t\t// if nested tabulator, restructure data\n\t\t\tif (this.parentIdField && this.idField) {\n\t\t\t\tthis.tabulator.on(\"dataLoading\", data => {\n\t\t\t\t\tlet toDelete = [];\n\n\t\t\t\t\t// loop through all data\n\t\t\t\t\tfor (let childIdx = 0; childIdx < data.length; childIdx++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet child = data[childIdx];\n\n\t\t\t\t\t\t// if it has parent id, it is a child\n\t\t\t\t\t\tif (child[this.parentIdField])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// append the child on the right place. If parent found, mark original sw child on 0 level for deleting\n\t\t\t\t\t\t\tif (this.appendChild(data, child)) toDelete.push(childIdx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete the marked children from 0 level\n\t\t\t\t\tfor (let counter = 0; counter < toDelete.length; counter++)\n\t\t\t\t\t{\n\t\t\t\t\t\t// decrease index by counter as index of data array changes after every deletion\n\t\t\t\t\t\tdata.splice(toDelete[counter] - counter, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.tableOnly) {\n\t\t\t\tthis.tabulator.on('tableBuilt', () => {\n\t\t\t\t\tconst cols = this.tabulator.getColumns();\n\t\t\t\t\tthis.fields = cols.map(col => col.getField());\n\t\t\t\t\tthis.selectedFields = cols.filter(col => col.isVisible()).map(col => col.getField());\n\t\t\t\t\tif (this.tabulator.options.persistence.headerFilter)\n\t\t\t\t\t\tthis._setHeaderFilter();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.tabulator.on(\"dataFiltered\", filters => {\n\t\t\t\tthis.filterActive = filters.length > 0;\n\t\t\t});\n\t\t},\n\t\tupdateTabulator() {\n\t\t\tif (this.tabulator) {\n\t\t\t\tif (this.tableBuilt)\n\t\t\t\t\tthis._updateTabulator();\n\t\t\t\telse\n\t\t\t\t\tthis.tabulator.on('tableBuilt', this._updateTabulator);\n\t\t\t}\n\t\t},\n\t\t_updateTabulator() {\n\t\t\tthis.tabulatorHasSelector = this.tabulatorOptions.selectable || this.filteredColumns.filter(el => el.formatter == 'rowSelection').length;\n\t\t\tthis.tabulator.setColumns(this.filteredColumns);\n\t\t\tthis.tabulator.setData(this.filteredData);\n\t\t\tthis._setHeaderFilter()\n\t\t},\n\t\tclearFilters()\n\t\t{\n\t\t\tlet existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, \"\");\n\t\t\t});\n\t\t\tthis.tabulator.clearFilter();\n\t\t\tthis.filterActive = false;\n\t\t},\n\t\t_setHeaderFilter()\n\t\t{\n\t\t\tconst existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, filter.value);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetFilter() {\n\t\t\tif (this.selectedFilter === null)\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterId: this.selectedFilter\n\t\t\t\t\t},\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t},\n\t\tsetRenderData(data) {\n\t\t\tthis.fetchResult = data;\n\t\t\tthis.filterName = data.filterName;\n\t\t\tthis.dataset = data.dataset;\n\t\t\tthis.datasetMetadata = data.datasetMetadata;\n\n\t\t\tthis.fields = data.fields;\n\t\t\tthis.selectedFields = data.selectedFields;\n\t\t\tthis.filterFields = [];\n\n\t\t\tfor (let i = 0; i < data.datasetMetadata.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < data.filters.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (data.datasetMetadata[i].name == data.filters[j].name)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet filter = data.filters[j];\n\t\t\t\t\t\tfilter.type = data.datasetMetadata[i].type;\n\n\t\t\t\t\t\tthis.filterFields.push(filter);\n\t\t\t\t\t\t//break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\trender(response) {\n\t\t\tlet data = response;\n\n\t\t\tthis.setRenderData(data);\n\n\t\t\t// If the side menu is active\n\t\t\tif (this.sideMenu === true)\n\t\t\t{\n\t\t\t\tthis.setSideMenu(data);\n\t\t\t}\n\t\t\telse // otherwise use the dropdown in the filter options\n\t\t\t{\n\t\t\t\tthis.setDropDownMenu(data);\n\t\t\t}\n\t\t\tthis.updateTabulator();\n\t\t},\n\t\t/**\n\t\t * Set the menu\n\t\t */\n\t\tsetSideMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc,\n\t\t\t\t\tsubscriptDescription: personalFilters[filtersCount].subscriptDescription,\n\t\t\t\t\tsubscriptLinkClass: personalFilters[filtersCount].subscriptLinkClass,\n\t\t\t\t\tsubscriptLinkValue: personalFilters[filtersCount].subscriptLinkValue,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById,\n\t\t\t\t\tonClickSubscriptCall: this.handlerRemoveCustomFilter\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\n\t\t\tthis.$emit(\n\t\t\t\t'nwNewEntry',\n\t\t\t\t{\n\t\t\t\t\tlink: \"#\",\n\t\t\t\t\tdescription: \"Filters\",\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\tchildren: filtersArray\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Set the drop down menu\n\t\t */\n\t\tsetDropDownMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\toption: filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\toption: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\t\t},\n\t\t/**\n\t\t * Used to start/refresh the FetchCmpt\n\t\t */\n\t\tstartFetchCmpt(apiFunction, apiFunctionParameters, dataFetchedCallback) {\n\t\t\t// Assign the function api of the FetchCmpt binded property\n\t\t\tthis.fetchCmptApiFunction = apiFunction;\n\n\t\t\t// In case a null value is provided set the parameters as an empty object\n\t\t\tif (apiFunctionParameters == null) apiFunctionParameters = {};\n\n\t\t\t// Always needed parameters\n\t\t\tapiFunctionParameters.filterUniqueId = FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t\tapiFunctionParameters.filterType = this.filterType;\n\n\t\t\tif (this.uniqueId)\n\t\t\t\tapiFunctionParameters.filterUniqueId += '_' + this.uniqueId;\n\n\t\t\t// Assign parameters to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptApiFunctionParams = apiFunctionParameters;\n\t\t\t// Assign data fetch callback to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptDataFetched = dataFetchedCallback;\n\t\t\t// Set the FetchCmpt binded property refresh to have the component to refresh\n\t\t\t// NOTE: this should be the last one to be called because it triggers the FetchCmpt to start to refresh\n\t\t\tthis.fetchCmptRefresh === true ? this.fetchCmptRefresh = false : this.fetchCmptRefresh = true;\n\t\t},\n\n\t\t// ------------------------------------------------------------------------------------------------------------------\n\t\t// Event handlers\n\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerSaveCustomFilter(customFilterName) {\n\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.saveCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tcustomFilterName\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerRemoveCustomFilter(event) {\n\t\t\tlet filterId = event.currentTarget.getAttribute(\"href\").substring(1);\n\t\t\tif (filterId === this.selectedFilter)\n\t\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.removeCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterId: filterId\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t/*\n\t\t *\n\t\t */\n\t\thandlerGetFilterById: function(event) {\n\n\t\t\tlet filterId = null;\n\n\t\t\t// Get the attribute href if side menu is rendered\n\t\t\tlet attr = event.currentTarget.getAttribute(\"href\");\n\n\t\t\t// Otherwise get the value of the drop down menu\n\t\t\tif (attr == null)\n\t\t\t{\n\t\t\t\tfilterId = event.currentTarget.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfilterId = attr.substring(1);\n\t\t\t}\n\n\t\t\tthis.switchFilter(filterId);\n\t\t},\n\t\tswitchFilter(filterId) {\n\t\t\tthis.selectedFilter = filterId;\n\t\t\tthis.getFilter();\n\t\t},\n\t\tapplyFilterConfig(filterFields) {\n\t\t\tthis.selectedFilter = null;\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.applyFilterFields(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterFields\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t// append child to it's parent\n\t\tappendChild(data, child) {\n\t\t\t// get parent id\n\t\t\tlet parentId = child[this.parentIdField];\n\n\t\t\t// loop thorugh all data\n\t\t\tfor (let parentIdx = 0; parentIdx < data.length; parentIdx++)\n\t\t\t{\n\t\t\t\tlet parent = data[parentIdx];\n\n\t\t\t\t// if it's the parent\n\t\t\t\tif (parent[this.idField] == parentId)\n\t\t\t\t{\n\t\t\t\t\t// create children array if not done yet\n\t\t\t\t\tif (!parent._children) parent._children = [];\n\n\t\t\t\t\t// if child is not included in children array, append the child\n\t\t\t\t\tif (!parent._children.includes(child)) parent._children.push(child);\n\n\t\t\t\t\t// parent found\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// search children for parents\n\t\t\t\telse if (parent._children) this.appendChild(parent._children, child);\n\t\t\t}\n\n\t\t\t// parent not found\n\t\t\treturn false;\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tif (!this.tableOnly == !this.filterType)\n\t\t\talert('You can not have a filter-type in table-only mode!');\n\t},\n\tcreated() {\n\t\tif (this.sideMenu && (!this.$props.onNwNewEntry || !(this.$props.onNwNewEntry instanceof Function)))\n\t\t\talert('\"nwNewEntry\" listener is mandatory when sideMenu is true');\n\t\tthis.uuid = _uuid++;\n\t\tthis.$emit('uuidDefined', this.uuid)\n\t},\n\tmounted() {\n\t\tthis.initTabulator().then(() => {\n\t\t\tif (!this.tableOnly) {\n\t\t\t\tthis.selectedFilter = window.location.hash ? window.location.hash.slice(1) : null;\n\t\t\t\tthis.render(this.fetchResult);\n\t\t\t}\n\t\t});\n\n\t},\n\ttemplate: `\n\t\t<!-- Load filter data -->\n\t\t<core-fetch-cmpt\n\t\t\tv-if=\"!tableOnly && fetchCmptApiFunction\"\n\t\t\tv-bind:api-function=\"fetchCmptApiFunction\"\n\t\t\tv-bind:api-function-parameters=\"fetchCmptApiFunctionParams\"\n\t\t\tv-bind:refresh=\"fetchCmptRefresh\"\n\t\t\t@data-fetched=\"fetchCmptDataFetched\">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class=\"row\" v-if=\"title != null && title != ''\">\n\t\t\t<div class=\"col-lg-12\">\n\t\t\t\t<h3 class=\"page-header mt-1 mb-4\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"'filterCollapsables' + idExtra\">\n\n\t\t\t<div class=\"d-flex flex-row justify-content-between flex-wrap\">\n\t\t\t\t<div v-if=\"newBtnShow || reload || $slots.search || $slots.actions\" class=\"d-flex gap-2 align-items-baseline flex-wrap\">\n\t\t\t\t\t<button v-if=\"newBtnShow\" class=\"btn btn-primary\" :class=\"newBtnClass\" :title=\"newBtnLabel ? undefined : 'New'\" :aria-label=\"newBtnLabel ? undefined : 'New'\" @click=\"$emit('click:new', $event)\" :disabled=\"newBtnDisabled\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if=\"reload\" class=\"btn btn-outline-secondary\" aria-label=\"Reload\" @click=\"reloadTable\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-rotate-right\" aria-hidden=\"true\"  :title=\"reloadBtnInfotext ? reloadBtnInfotext : 'Reload'\" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if=\"$slots.actions && tabulatorHasSelector && useSelectionSpan\">\n\t\t\t\t\t\t<span v-if=\"countOnly\">{{ selectedData.length }} ausgewählt</span>\n\t\t\t\t\t\t<span v-else id=\"selected-info-text\"> Mit {{ selectedData.length }} ausgewählten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"actions\" v-bind=\"{selected: tabulatorHasSelector ? selectedData : []}\"></slot>\n\t\t\t\t\t<slot name=\"search\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end\">\n\t\t\t\t\t<span v-if=\"!tableOnly\">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if=\"description\" v-html=\"description\"></span>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"!tableOnly || $slots.filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseFilters' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"filterActive\"  class=\"btn btn-link px-0 fhc-text\" :title=\"$p.t('ui','filterdelete')\" @click=\"clearFilters\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter-circle-xmark\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseColumns' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-table-columns\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class=\"btn btn-link px-0 fhc-text\" :tabulator=\"tabulator\" :config=\"download\"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id=\"'collapseColumns' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:fields=\"fieldIdsForVisibilty\"\n\t\t\t\t:selected=\"selectedFields\"\n\t\t\t\t:names=\"fieldNames\"\n\t\t\t\t@hide=\"tabulator.hideColumn($event)\"\n\t\t\t\t@show=\"tabulator.showColumn($event)\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if=\"!tableOnly\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:filters=\"!sideMenu ? (availableFilters || []) : []\"\n\t\t\t\t:columns=\"columnsForFilter\"\n\t\t\t\t:fields=\"filterFields || []\"\n\t\t\t\t@switch-filter=\"switchFilter\"\n\t\t\t\t@apply-filter-config=\"applyFilterConfig\"\n\t\t\t\t@save-custom-filter=\"handlerSaveCustomFilter\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$slots.filter\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name=\"filter\"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tabulator -->\n\t\t<div ref=\"table\" :id=\"'filterTableDataset' + idExtra\" class=\"filter-table-dataset\"></div>\n\t`\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/header',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t},\n\tgetMenu(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/menu',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport ApiNavigation from '../../api/factory/navigation.js';\n\n/**\n *\n */\nexport const CoreNavigationCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt\n\t},\n\tprops: {\n\t\taddHeaderMenuEntries: Object, // property used to add new header menu entries from another app/component\n\t\taddSideMenuEntries: Object, // property used to add new side menu entries from another app/component\n\t\thideTopMenu: Boolean,\n\t\tleftNavCssClasses: {\n\t\t\ttype: String,\n\t\t\tdefault: 'navbar navbar-left-side'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\theaderMenu: {}, // header menu entries\n\t\t\tsideMenu: {} // side menu entries\n\t\t};\n\t},\n\tcomputed: {\n\t\t/**\n\t\t *\n\t\t */\n\t\theaderMenuEntries() {\n\t\t\t//\n\t\t\tlet hm = this.headerMenu ? {...this.headerMenu} : {};\n\t\t\tif (this.headerMenu != null && this.addHeaderMenuEntries != null && Object.keys(this.addHeaderMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\thm[this.addHeaderMenuEntries.description] = this.addHeaderMenuEntries;\n\t\t\t}\n\t\t\treturn hm;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsideMenuEntries() {\n\t\t\t//\n\t\t\tlet sm = this.sideMenu ? {...this.sideMenu} : {};\n\t\t\tif (this.sideMenu != null && this.addSideMenuEntries != null && Object.keys(this.addSideMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\tsm[this.addSideMenuEntries.description] = this.addSideMenuEntries;\n\t\t\t}\n\t\t\treturn sm;\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetNavigationPage() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionHeader() {\n\t\t\treturn this.$api.call(ApiNavigation.getHeader(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionSideMenu() {\n\t\t\treturn this.$api.call(ApiNavigation.getMenu(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedHeader(data) {\n\t\t\tthis.headerMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedMenu(data) {\n\t\t\tthis.sideMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetDataBsToggle(header) {\n\t\t\treturn !header.children ? null : 'dropdown';\n\t\t}\n\t},\n\ttemplate: `\n\t\t<!-- Load head menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionHeader\" @data-fetched=\"fetchCmptDataFetchedHeader\"></core-fetch-cmpt>\n\t\t<!-- Load side menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionSideMenu\" @data-fetched=\"fetchCmptDataFetchedMenu\"></core-fetch-cmpt>\n\n\t\t<!-- Top menu -->\n\t\t<nav class=\"navbar navbar-expand-lg navbar-header\" v-if=\"!hideTopMenu\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"header in headerMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item dropdown\">\n\t\t\t\t\t\t<a class=\"nav-link header-menu-link-entry\"\n\t\t\t\t\t\t\tv-bind:data-bs-toggle=\"this.getDataBsToggle(header)\"\n\t\t\t\t\t\t\tv-bind:class=\"{ 'dropdown-toggle': header.children }\"\n\t\t\t\t\t\t\tv-bind:href=\"header.link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-fw header-menu-icon\" v-bind:class=\"'fa-' + header.icon\" v-if=\"header.icon\"></i> {{ header.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" v-if=\"header.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in header.children\">\n\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item\" v-bind:href=\"child.link\">{{ child.description }}</a></li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t\t<slot></slot>\n\t\t</nav>\n\n\t\t<!-- Left side menu -->\n\t\t<nav :class=\"leftNavCssClasses\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"menu in sideMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item\">\n\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"menu.link\" @click=menu.onClickCall>\n\t\t\t\t\t\t\t<i class=\"fa fa-fw\" v-bind:class=\"'fa-'+ menu.icon\"></i> {{ menu.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"nav-link left-side-menu-second-level\" v-if=\"menu.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in menu.children\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"child.link\" @click=child.onClickCall>\n\t\t\t\t\t\t\t\t\t\t&emsp;&emsp;{{ child.description }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"nav-link left-side-menu-link-entry\"\n\t\t\t\t\t\t\t\t\t\tv-bind:class=\"child.subscriptLinkClass\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"child.subscriptDescription\"\n\t\t\t\t\t\t\t\t\t\tv-bind:href=\"child.link\"\n\t\t\t\t\t\t\t\t\t\t@click=child.onClickSubscriptCall\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ child.subscriptDescription }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t</nav>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tprops: {\n\t\ttitle: '',\n\t\tsubtitle: '',\n\t\tmainCols: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tasideCols: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t},\n\tcomputed: {\n\t\tmainGridCols() {\n\t\t\treturn this.mainCols.length > 0 ? `col-md-${this.mainCols[0]}` : \"col-md-12\";\n\t\t},\n\t\tasideGridCols() {\n\t\t\treturn this.asideCols.length > 0 ? `col-md-${this.asideCols[0]}` : \"\";\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"overflow-hidden\">\n\t\t<header v-if=\"title\">\n\t\t\t<h1 class=\"h2 mb-5\">{{ title }}<span class=\"fhc-subtitle\">{{ subtitle }}</span></h1>\n\t\t</header>\n\t\t<div class=\"row gx-5\">\n\t\t\t<main :class=\"mainGridCols\">\n\t\t\t\t<slot name=\"main\">{{ mainGridCols }}</slot>\n\t\t\t</main>\n\t\t\t<aside v-if=\"asideCols.length > 0\" :class=\"asideGridCols\">\n\t\t\t\t<slot name=\"aside\">{{ asideGridCols }}</slot>\n\t\t\t</aside>\n\t\t</div>\n\t</div>\n\t`\n};","export const lektorFormatters = {\n\tcenteredFormatter: function(cell) {\n\t\tconst val = cell.getValue()\n\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+val+'</div>'\n\t},\n\tformDateOnly: function (cell) {\n\t\tvar value = cell.getValue();\n\n\t\tif (value) {\n\t\t\tvar date = new Date(value);\n\n\t\t\tvar formattedDate = date.getDate().toString().padStart(2, '0') + '.' +\n\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '.' +\n\t\t\t\tdate.getFullYear()\n\n\t\t\treturn formattedDate;\n\t\t}\n\n\t\treturn value\n\t},\n\tfotoFormatter: function (cell) {\n\t\tlet value = cell.getValue();\n\t\tif(value === undefined) return\n\n\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><img src=\"'+value+'\" style=\"max-height: 64px\"></img></div>'\n\t},\n\tdateOnlyTimeFormatter: function (cell) {\n\t\tconst value = cell.getValue();\n\n\t\tif(value === undefined) return ''\n\n\t\tconst date = new Date(value);\n\t\tlet hours = date.getHours();\n\t\tlet minutes = date.getMinutes();\n\n\t\thours = (hours < 10) ? '0' + hours : hours;\n\t\tminutes = (minutes < 10) ? '0' + minutes : minutes;\n\t\treturn hours + ':' + minutes\n\t}\n}\n\nexport const studentFormatters = {\n\tformFile: function(cell) {\n\t\tvar value = cell.getValue();\n\n\t\tif(value) {\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%; cursor: pointer;\">' +\n\t\t\t\t'<a><i class=\"fa fa-file-pdf\" style=\"color:#00649C\"></i></a></div>'\n\t\t} else return '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">' +\n\t\t\t'<a>-</a></div>'\n\n\t},\n\tformDate: function(cell)\n\t{\n\t\tvar value = cell.getValue();\n\n\t\tif (value)\n\t\t{\n\t\t\tvar date = new Date(value);\n\n\t\t\tvar formattedDate = date.getDate().toString().padStart(2, '0') + '.' +\n\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '.' +\n\t\t\t\tdate.getFullYear() + ' ' +\n\t\t\t\tdate.getHours().toString().padStart(2, '0') + ':' +\n\t\t\t\tdate.getMinutes().toString().padStart(2, '0');\n\n\t\t\treturn formattedDate;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\tformStudiengangKz: function (cell) {\n\t\tconst rowData = cell.getRow().getData()\n\t\treturn rowData.kurzbzlang + ' ' + rowData.bezeichnung\n\t},\n\n\tcustomGroupHeader: function(value, count, data)\n\t{\n\t\treturn '<div style=\"display:flex; justify-content: space-between;\">' +\n\t\t\t'<div>' + value + '</div>' +\n\t\t\t'<div style=\"flex-grow: 1; text-align: right;\">Anwesenheit ' + data[0].anwesenheit + \" %\" + '</div>' +\n\t\t\t'</div>';\n\t},\n\n\n}","//import Phrasen from '../../plugin/Phrasen.js';\n\nexport default {\n\tname: 'BootstrapModal',\n\tdata: () => ({\n\t\tmodal: null,\n\t\tfullscreen: false\n\t}),\n\tprops: {\n\t\tbackdrop: {\n\t\t\ttype: [Boolean,String],\n\t\t\tdefault: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn ['static', true, false].includes(value);\n\t\t\t}\n\t\t},\n\t\tfocus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tkeyboard: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tnoCloseBtn: Boolean,\n\t\tdialogClass: [String,Array,Object],\n\t\theaderClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tbodyClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: 'px-4 py-5'\n\t\t},\n\t\tfooterClass: {\n\t\t\ttype: [String,Array,Object],\n\t\t\tdefault: ''\n\t\t},\n\t\tallowFullscreenExpand: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\temits: [\n\t\t\"hideBsModal\",\n\t\t\"hiddenBsModal\",\n\t\t\"hidePreventedBsModal\",\n\t\t\"showBsModal\",\n\t\t\"shownBsModal\",\n\t\t\"toggleFullscreen\"\n\t],\n\tmethods: {\n\t\tdispose() {\n\t\t\treturn this.modal.dispose();\n\t\t},\n\t\thandleUpdate() {\n\t\t\treturn this.modal.handleUpdate();\n\t\t},\n\t\thide() {\n\t\t\treturn this.modal.hide();\n\t\t},\n\t\tshow(relatedTarget) {\n\t\t\treturn this.modal.show(relatedTarget);\n\t\t},\n\t\ttoggle() {\n\t\t\treturn this.modal.toggle();\n\t\t},\n\t\ttoggleFullscreen() {\n\t\t\tthis.fullscreen = !this.fullscreen\n\t\t\tthis.$emit('toggleFullscreen')\n\t\t}\n\t},\n\tmounted() {\n\t\tif (this.$refs.modal)\n\t\t\tthis.modal = new bootstrap.Modal(this.$refs.modal, {\n\t\t\t\tbackdrop: this.backdrop,\n\t\t\t\tfocus: this.focus,\n\t\t\t\tkeyboard: this.keyboard\n\t\t\t});\n\t},\n\tpopup(body, options, title, footer) {\n\t\tconst BsModal = this,\n\t\t\tslots = {};\n\t\tif (body !== undefined)\n\t\t\tslots.default = () => body;\n\t\tif (title !== undefined)\n\t\t\tslots.title = () => title;\n\t\tif (footer !== undefined)\n\t\t\tslots.footer = () => footer;\n\n\t\t// little hack to check whether primevue is included in the app or not\n\t\tlet includedPrimevue = false;\n\t\tif(typeof primevue !== 'undefined'){\n\t\t\tincludedPrimevue = true;\n\t\t}\n\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tconst instance = Vue.createApp({\n\t\t\t\tname: 'ModalTmpApp',\n\t\t\t\tsetup() {\n\t\t\t\t\treturn () => Vue.h(BsModal, {...{\n\t\t\t\t\t\tclass: 'fade'\n\t\t\t\t\t},...options, ...{\n\t\t\t\t\t\tref: 'modal',\n\t\t\t\t\t\t'onHidden.bs.modal': instance.unmount\n\t\t\t\t\t}}, slots);\n\t\t\t\t},\n\t\t\t\tmounted() {\n\t\t\t\t\tthis.$refs.modal.show();\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tbeforeUnmount() {\n\t\t\t\t\tif (this.$refs.modal)\n\t\t\t\t\t\tthis.$refs.modal.result !== false ? resolve(this.$refs.modal.result) : reject();\n\t\t\t\t},\n\t\t\t\tunmounted() {\n\t\t\t\t\twrapper.parentElement.removeChild(wrapper);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst wrapper = document.createElement(\"div\");\n\t\t\t\n\t\t\t// if(primevue) --> won't work because primevue is not defined in this scope and promise would be rejected\n\t\t\tif (includedPrimevue){\n\t\t\t\tinstance.use(primevue.config.default, {zIndex: {overlay: 9999}})\n\t\t\t}\n\t\t\t\t \n\t\t\t//instance.use(Phrasen); // TODO(chris): find a more dynamic way\n\t\t\timport('../../plugins/Phrasen.js').then((Phrasen) => {\n\t\t\t\tinstance.use(Phrasen.default);\n\t\t\t\tinstance.mount(wrapper);\n\t\t\t\tdocument.body.appendChild(wrapper);\n\t\t\t});\n\t\t});\n\t},\n\ttemplate: `<div ref=\"modal\" class=\"bootstrap-modal modal\" tabindex=\"-1\" @[\\`hide.bs.modal\\`]=\"$emit('hideBsModal')\" @[\\`hidden.bs.modal\\`]=\"$emit('hiddenBsModal')\" @[\\`hidePrevented.bs.modal\\`]=\"$emit('hidePreventedBsModal')\" @[\\`show.bs.modal\\`]=\"$emit('showBsModal')\" @[\\`shown.bs.modal\\`]=\"$emit('shownBsModal')\">\n\t\t<div class=\"modal-dialog\" :class=\"fullscreen ? 'modal-fullscreen' : dialogClass\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div v-if=\"$slots.title\" class=\"modal-header\" :class=\"headerClass\">\n\t\t\t\t\t<h5 class=\"modal-title\"><slot name=\"title\"/></h5>\n\t\t\t\t\t<div class=\"d-flex align-items-center ms-auto gap-2\">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttype=\"button\" \n\t\t\t\t\t\t\tclass=\"btn mb-1\" \n\t\t\t\t\t\t\tv-if=\"allowFullscreenExpand\" \n\t\t\t\t\t\t\t@click=\"toggleFullscreen\"\n\t\t\t\t\t\t\t:aria-label=\"fullscreen ? 'Exit Fullscreen' : 'Enter Fullscreen'\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i v-if=\"!fullscreen\" class=\"fa-solid fa-expand\"></i>\n\t\t\t\t\t\t\t<i v-else class=\"fa-solid fa-compress\"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-if=\"!noCloseBtn\" type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name=\"modal-header-content\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal-body\" :class=\"bodyClass\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"$slots.footer\" class=\"modal-footer\" :class=\"footerClass\">\n\t\t\t\t\t<slot name=\"footer\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n}\n","export const LehreinheitenDropdown = {\n\tname: \"LehreinheitenDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'leChanged'\n\t],\n\tprops: {\n\t\ttitle: ''\n\t},\n\tmethods: {\n\t\tleChanged(e) {\n\t\t\tthis.$entryParams.selected_le_id.value = e.value.lehreinheit_id\n\t\t\tthis.$entryParams.selected_le_info.value = e.value\n\n\t\t\tthis.$emit('leChanged')\n\t\t},\n\t\tgetSelected(option) {\n\t\t\treturn option?.infoString === this.$entryParams.selected_le_info.value?.infoString\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.infoString\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<Dropdown @change=\"leChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"this.$entryParams.selected_le_info.value\" :options=\"$entryParams.available_le_info.value\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.infoString }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const MaUIDDropdown = {\n\tname: \"MaUIDDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'maUIDChanged'\n\t],\n\tprops: {\n\t\ttitle: ''\n\t},\n\tmethods: {\n\t\tmaUIDChanged(e) {\n\n\t\t\t// reload LEs\n\t\t\tthis.$entryParams.selected_maUID.value = e.value\n\t\t\tthis.$entryParams.handleLeSetup(\n\t\t\t\tthis.$entryParams.lv_id,\n\t\t\t\tthis.$entryParams.selected_maUID.value.mitarbeiter_uid,\n\t\t\t\tthis.$entryParams.sem_kurzbz,\n\t\t\t\t[]\n\t\t\t).then(() => {\n\t\t\t\tthis.$emit('maUIDchanged')\n\t\t\t})\n\t\t},\n\t\tgetSelected(option) {\n\t\t\treturn option.mitarbeiter_uid === this.$entryParams.selected_maUID.value?.mitarbeiter_uid\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.infoString\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div>\n\t\t\t<Dropdown @change=\"maUIDChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\t\tv-model=\"this.$entryParams.selected_maUID.value\" :options=\"$entryParams.available_maUID.value\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.infoString }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const KontrollenDropdown = {\n\tname: \"KontrollenDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'kontrolleChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\terrors: null,\n\t\t\tinternal_available_kontrolle: [],\n\t\t\tinternal_selected_kontrolle: null\n\t\t};\n\t},\n\tmethods: {\n\t\tsetKontrollen(data){\n\t\t\tthis.internal_available_kontrolle = data\n\t\t\tthis.internal_selected_kontrolle = data[0]\n\n\t\t\tthis.$emit('kontrolleChanged', this.internal_selected_kontrolle)\n\t\t},\n\t\tkontrolleChanged(e) {\n\t\t\tthis.internal_selected_kontrolle = e.value\n\t\t\tthis.$emit('kontrolleChanged', this.internal_selected_kontrolle)\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.datum + ': ' + option.von + ' - ' + option.bis\n\t\t},\n\t\tcheckDisabled(option) {\n\t\t\t// disable dates older than threshhold if only lektor berechtigung, admin/assistenz can delete all\n\t\t\t\n\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst date = new Date();\n\t\t\tdate.setDate(date.getDate() - this.$entryParams.permissions.kontrolleDeleteMaxReach)\n\t\t\tconst optDate = new Date(option.datum)\n\t\t\treturn optDate < date\n\t\t}\n\t},\n\tmounted() {\n\t},\n\ttemplate: `\n\t\t<div class=\"mt-2\">\n\t\t\t<Dropdown @change=\"kontrolleChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"internal_selected_kontrolle\" :options=\"internal_available_kontrolle\" :optionDisabled=\"checkDisabled\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{kontrolle.datum}}: {{kontrolle.von}} - {{kontrolle.bis}} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","export const TermineDropdown = {\n\tname: \"TermineDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'terminChanged'\n\t],\n\tmethods: {\n\t\tterminChanged(e) {\n\t\t\tthis.$entryParams.selected_termin.value = e.value\n\t\t\tthis.$emit('terminChanged')\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.datumFrontend + ': ' + option.beginn + ' - ' + option.ende\n\t\t}\n\t},\n\tmounted() {\n\t},\n\ttemplate: `\n\t\t<div class=\"mt-2\">\n\t\t\t<Dropdown @change=\"terminChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\tv-model=\"this.$entryParams.selected_termin.value\" :options=\"$entryParams.available_termine.value\" :placeholder=\"$p.t('global/termineAusStundenplanV2')\">\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{option.datumFrontend}}: {{option.beginn}} - {{option.ende}} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","\nexport const AnwCountDisplay = {\n\tname: 'AnwCountDisplay',\n\tdata: function() {\n\t\treturn {\n\t\t\tanwHovered: false,\n\t\t\tabwHovered: false,\n\t\t\tentHovered: false\n\t\t}\n\t},\n\tprops: {\n\t\tanwesend: '/',\n\t\tabwesend: '/',\n\t\tentschuldigt: '/'\n\t},\n\ttemplate:`\t\n\t\t<div class=\"text-center\">\n\t\t\t<div style=\"display: flex; justify-content: center; align-items: center;\">\n\t\t\t\t<div @mouseover=\"anwHovered = true\" @mouseleave=\"anwHovered = false\" style=\"position: relative; display: inline-block; color: #28a745;\">\n\t\t\t\t\t<h3>{{anwesend}} <i class=\"fa fa-check\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"anwHovered\"> {{$capitalize($p.t('global/anwesend'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div @mouseover=\"abwHovered = true\" @mouseleave=\"abwHovered = false\" style=\"position: relative; display: inline-block; color: #dc3545; margin-left: 36px;\">\n\t\t\t\t\t<h3>{{abwesend}} <i class=\"fa fa-xmark\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"abwHovered\"> {{$capitalize($p.t('global/abwesend'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t\t<div @mouseover=\"entHovered = true\" @mouseleave=\"entHovered = false\" \n\t\t\t\tv-if=\"this.$entryParams.permissions.entschuldigungen_enabled\" \n\t\t\t\tstyle=\"position: relative; display: inline-block; color: #0335f5; margin-left: 36px;\">\n\t\t\t\t\t<h3>{{entschuldigt}} <i class=\"fa-solid fa-user-shield\"></i>\n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"entHovered\"> {{$capitalize($p.t('global/entschuldigt'))}}</div>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t\n\t`\n};","\nexport const KontrolleDisplay = {\n\tname: 'KontrolleDisplay',\n\tdata: function() {\n\t\treturn {\n\t\t\thovered: false,\n\t\t}\n\t},\n\tprops: {\n\t\tkontrolle: null,\n\t},\n\ttemplate:`\n\t\t<div v-if=\"kontrolle\" class=\"row\">\n\t\t\t<div class=\"col-1 ml-4 d-flex align-items-center\">\n\t\t\t\t<div style=\"position: relative; display: inline-block;\">\n\t\t\t\t\t<h6 @mouseover=\"hovered = true\" @mouseleave=\"hovered = false\">\n\t\t\t\t\t\t<i class=\"fa-solid fa-circle-info\"></i> \n\t\t\t\t\t\t<div class=\"legend-info\" v-show=\"hovered\" style=\"min-width: 400px; z-index: 8500;\">\n\t\t\t\t\t\t\t<div class=\"row\"><p>Anwesenheit_id: {{kontrolle.anwesenheit_id}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>Lehreinheit_id: {{kontrolle.lehreinheit_id}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>insertvon: {{kontrolle.insertvon}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>insertamum: {{kontrolle.insertamum}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>updatevon: {{kontrolle.updatevon}}</p></div>\n\t\t\t\t\t\t\t<div class=\"row\"><p>updateamum: {{kontrolle.updateamum}}</p></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"col-11\"><h4>{{kontrolle.datum}}: {{kontrolle.von}} - {{kontrolle.bis}}</h4></div>\n\t\t\t\n\t\t</div>\n\t\t\n\t\n\t`\n};","\nexport const Statuslegende = {\n\tname: 'Statuslegende',\n\ttemplate:`\t\n\t\t<div class=\"text-center\">\n\t\t\t<div class=\"col\">\n\t\t\t\t<div class=\"row\" style=\"color: #28a745;\"><h3>{{$capitalize($p.t('global/anwesend'))}} = <i class=\"fa fa-check\"></i></h3></div>\n\n\t\t\t\t<div class=\"row\" style=\"color: #dc3545;\"><h3>{{$capitalize($p.t('global/abwesend'))}} = <i class=\"fa fa-xmark\"></i></h3></div>\n\n\t\t\t\t<div v-if=\"this.$entryParams.permissions.entschuldigungen_enabled\" class=\"row\" style=\"color: #0335f5;\"><h3>{{$capitalize($p.t('global/entschuldigt'))}} = <i class=\"fa-solid fa-user-shield\"></i></h3></div>\n\n\t\t\t\t<div class=\"row\"><h3>{{$capitalize($p.t('global/studentenInLVTeil'))}} = 👥</h3></div>\n\t\t\t\t<div class=\"row\"><h3>{{$capitalize($p.t('global/termineAusStundenplanV2'))}} = 📅</h3></div>\n\t\t\t\t<div class=\"row\" style=\"color: #0335f5\"><h3>Name -> {{$capitalize($p.t('global/entschuldigtLegendeBlau'))}}</h3></div>\n\t\t\t\t<div class=\"row\" style=\"color: #12d5d5\"><h3>Name -> {{$capitalize($p.t('global/entschuldigtLegendeTuerkis'))}}</h3></div>\n\n\t\t\t</div>\n\t\t</div>\t\n\t`\n};\n\nexport default Statuslegende;","export default {\n\tfetchAllAnwesenheitenByLvaAssigned(lv_id, sem_kurzbz, le_id, ma_uid, date) {\n\t\t\n\t\tconst params = { lv_id, sem_kurzbz, le_id, ma_uid, date} \n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/fetchAllAnwesenheitenByLvaAssigned';\n\t\t\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAllAnwesenheitenByStudentByLva(prestudent_id, lv_id, sem_kurzbz) {\n\t\t\n\t\tconst params = { prestudent_id, lv_id, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getAllAnwesenheitenByStudentByLva`;//`?prestudent_id=${prestudent_id}&lv_id=${lv_id}&sem_kurzbz=${sem_kurzbz}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tupdateAnwesenheiten(le_id, changedAnwesenheiten) {\n\n\t\tconst params = {le_id, changedAnwesenheiten}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/updateAnwesenheiten';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetExistingQRCode(le_id) {\n\n\t\tconst params = {le_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getExistingQRCode';\n\t\t\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tregenerateQRCode(anwesenheit_id) {\n\n\t\tconst params = {anwesenheit_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/regenerateQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdegenerateQRCode(anwesenheit_id, zugangscode) {\n\n\t\tconst params = {anwesenheit_id, zugangscode}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/degenerateQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetNewQRCode(le_id, datum, beginn, ende) {\n\n\t\tconst params = {le_id, datum, beginn, ende}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getNewQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdeleteQRCode(anwesenheit_id, lv_id) {\n\n\t\tconst params = {anwesenheit_id, lv_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/deleteQRCode';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tdeleteAnwesenheitskontrolle(le_id, date, anwesenheit_id) {\n\n\t\tconst params = {le_id, date, anwesenheit_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/deleteAnwesenheitskontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tpollAnwesenheiten(anwesenheit_id, lv_id) {\n\n\t\tconst params = {anwesenheit_id, lv_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/pollAnwesenheiten';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwQuoteForPrestudentIds(ids, lv_id, sem_kurzbz) {\n\n\t\tconst params = {ids, lv_id, sem_kurzbz}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getAnwQuoteForPrestudentIds';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\trestartKontrolle(anwesenheit_id, le_id, datum) {\n\n\t\tconst params = {anwesenheit_id, le_id, datum}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/restartKontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tupdateKontrolle(anwesenheit_id, von, bis, le_id) {\n\n\t\tconst params = {anwesenheit_id, von, bis, le_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/updateKontrolle';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetLehreinheitenForLehrveranstaltungAndMaUid(lva_id, ma_uid, sem_kurzbz) {\n\n\t\tconst params = { lva_id, ma_uid, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/getLehreinheitenForLehrveranstaltungAndMaUid`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tinsertAnwWithoutQR(le_id, datum, beginn, ende) {\n\n\t\tconst params = {le_id, datum, beginn, ende}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/KontrolleApi/insertAnwWithoutQR';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t}\n\t\n}","export default {\n\tgetAllAnwQuotasForLvaByUID(studiensemester, uid) {\n\n\t\tconst params = { studiensemester, uid }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwQuotasForLvaByUID`//?studiensemester=${studiensemester}&uid=${uid}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAllAnwByUID(studiensemester, uid, person_id) {\n\n\t\tconst params = { studiensemester, uid, person_id}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwByUID`//?studiensemester=${studiensemester}&uid=${uid}&person_id=${person_id}`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetProfileViewData(uid) {\n\n\t\tconst params = {uid}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getProfileViewData';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tcheckInAnwesenheit(zugangscode) {\n\n\t\tconst params = {zugangscode}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/checkInAnwesenheit';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\taddEntschuldigung(formData) {\n\n\t\tconst params = formData;\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/addEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\teditEntschuldigung(formData) {\n\t\tconst params = formData\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/editEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\tdeleteEntschuldigung(entschuldigung_id, person_id) {\n\n\t\tconst params = {entschuldigung_id, person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/deleteEntschuldigung';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams,\n\t\t\theaders\n\t\t}\n\t\t\n\t},\n\tgetEntschuldigungenByPersonID(person_id) {\n\n\t\tconst params = {person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getEntschuldigungenByPersonID';\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwesenheitSumByLva(lv_id, sem_kz, prestudent_id) {\n\n\t\tconst params = {lv_id, sem_kz, id: prestudent_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAnwesenheitSumByLva';\n\t\t// return this.$fhcApi.post(url, payload, null)\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetAnwesenheitenByLva(sem_kurzbz, lv_id, prestudent_id, uid) {\n\n\t\tconst params = {sem_kurzbz, lv_id, prestudent_id, uid}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getAllAnwesenheitenByStudentByLva`;\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t}\n}","export default {\n\tgetAktuellesSemester() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getAktuellesSemester';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetViewDataStudent() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getViewDataStudent';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetEntschuldigungFile(dms_id) {\n\t\t\n\t\tconst params = { dms_id }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetStunden() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStunden';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetStudiensemester() {\n\t\t\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudiensemester';\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl\n\t\t}\n\t\t\n\t},\n\tgetStudentInfo(prestudent_id, lva_id, sem_kurzbz) {\n\t\t\n\t\tconst params = { prestudent_id, lva_id, sem_kurzbz }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudentInfo`;\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t\t\n\t},\n\tgetStudiengaenge(allowed_stg = [], admin) {\n\t\t\n\t\tconst params = {allowed_stg, admin}\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudiengaenge`;\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tgetLektorsForLvaInSemester(lva_id, sem) {\n\n\t\tconst params = { lva_id, sem }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getLektorsForLvaInSemester`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t},\n\tgetStudentsForLvaInSemester(lva_id, sem) {\n\t\t\n\t\tconst params = { lva_id, sem }\n\t\tconst url = `extensions/FHC-Core-Anwesenheiten/api/InfoApi/getStudentsForLvaInSemester`;\n\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t},\n\tgetLvViewDataInfo(lv_id) {\n\n\t\tconst params = { lv_id }\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/InfoApi/getLvViewDataInfo'\n\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t}\n};","import {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {lektorFormatters} from \"../../formatters/formatters.js\";\n\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\nimport ApiProfil from '../../api/factory/profil.js';\nimport ApiInfo from '../../api/factory/info.js';\n\nexport const StudentByLvaComponent = {\n\tname: 'StudentByLvaComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreNavigationCmpt,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tappSideMenuEntries: {},\n\t\t\theaderMenuEntries: {},\n\t\t\ttableBuiltPromise: null,\n\t\t\tcellEditing: null,\n\t\t\tanwesenheitenByStudentByLvaTabulatorOptions: {\n\t\t\t\theight: this.$entryParams?.tabHeights?.studentByLva ?? 400,\n\t\t\t\tindex: 'datum',\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tselectableCheck: this.selectableCheck,\n\t\t\t\trowFormatter: this.unselectableFormatter,\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tselectable: true,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tformatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatter: 'rowSelection',\n\t\t\t\t\t\ttitleFormatterParams: {\n\t\t\t\t\t\t\trowRange: \"active\" // Only toggle the values of the active filtered rows\n\t\t\t\t\t\t},\n\t\t\t\t\t\theaderSort: false,\n\t\t\t\t\t\tfrozen: true,\n\t\t\t\t\t\twidth: 70\n\t\t\t\t\t},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/datum')), field: 'datum', headerFilter: true, formatter: lektorFormatters.formDateOnly, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/status')), field: 'status', formatter: this.anwesenheitFormatterValue,  widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anteilAnw')), field: 'anteil', bottomCalcFormatter: this.sumBottomCalcFormatter, bottomCalc: this.anwCalc, formatter: this.percentFormatter},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: lektorFormatters.dateOnlyTimeFormatter, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: lektorFormatters.dateOnlyTimeFormatter, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/lehreinheit_id')), field: 'lehreinheit_id', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/kontrolliertVon')), field: 'kinsertvon', widthGrow: 1, visible: true},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/kontrolle') + ' ' + this.$p.t('global/updatevon')), field: 'kupdatevon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwUserEntry') + ' ' + this.$p.t('global/insertvon')), field: 'ainsertvon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwUserEntry') + ' ' + this.$p.t('global/updatevon')), field: 'aupdatevon', widthGrow: 1, visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/einheiten')), field: 'dauer', visible: false, bottomCalc: this.einheitenCalc, formatter: this.einheitenFormatter, widthGrow: 1, minWidth: 250},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/notiz')), field: 'notiz', editor: \"input\", tooltip:false, minWidth: 150}\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-lektorDetailViewStudentByLva\"\n\t\t\t},\n\t\t\tanwesenheitenByStudentByLvaTabulatorEventHandlers: [\n\t\t\t{\n\t\t\t\tevent: \"rowSelected\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.selected++\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"rowDeselected\",\n\t\t\t\thandler: () => {\n\t\t\t\t\tthis.selected--\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEditing\",\n\t\t\t\thandler: (cell) => {\n\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\tthis.cellEditing = {...data}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEdited\",\n\t\t\t\thandler: (cell) => {\n\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\t\n\t\t\t\t\tif(this.cellEditing?.notiz === null && data?.notiz === '') {\n\t\t\t\t\t\t// do nothing when just clicking edit input and not typing\n\t\t\t\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, [data]))\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif(res.meta.status === \"success\") {\n\t\t\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwNotizUpdated'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.cellEditing = null\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}\n\t\t\t],\n\t\t\tfilterTitle: \"\",\n\t\t\tfilterSubtitle: \"\",\n\t\t\tchangedData: [],\n\t\t\ttableData: null,\n\t\t\tinitialTableData: null,\n\t\t\tvorname: null,\n\t\t\tnachname: null,\n\t\t\tsemester: null,\n\t\t\tverband: null,\n\t\t\tgruppe: null,\n\t\t\tsum: '',\n\t\t\tfoto: null,\n\t\t\tselected: 0\n\t\t}\n\t},\n\temits: [\n\t\t'titleSet',\n\t\t'anwesenheitenUpdated'\n\t],\n\tprops: {\n\t\tpermissions: [],\n\t\tid: null,\n\t\tlv_id: null,\n\t\tsem_kz: null,\n\n\t},\n\tmethods: {\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ??  data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+ val + ' %</div>'\n\t\t},\n\t\tanwCalc(){\n\t\t\treturn this.sum + ' %'\n\t\t},\n\t\tsumBottomCalcFormatter(cell) {\n\t\t\tconst val = Number.parseFloat(cell.getValue())\n\t\t\tif(Number.isNaN(val)) return cell.getValue()\n\t\t\tif (val < (this.$entryParams.permissions.positiveRatingThreshold * 100)) {\n\t\t\t\tconst el = cell.getElement()\n\t\t\t\tel.style.setProperty('color', 'red')\n\t\t\t}\n\n\t\t\treturn cell.getValue()\n\t\t},\n\t\teinheitenCalc(values) {\n\n\t\t\treturn this.formatMinutes(values.reduce((acc, cur) => cur+=acc,0))\n\t\t},\n\t\tselectableCheck(row) {\n\t\t\treturn row.getData().status !== this.$entryParams?.permissions?.entschuldigt_status\n\t\t},\n\t\tformatMinutes(minutes) {\n\t\t\tlet valInEh = (minutes / 60 / this.$entryParams.permissions.einheitDauer)\n\t\t\tconst rest = valInEh % 1\n\t\t\tif(rest > 0) valInEh = valInEh.toFixed(2).replace('.', ',')\n\n\t\t\treturn minutes+' '+this.$p.t('global/minuten')+' / '+valInEh+' '+this.$p.t('global/einheiten')\n\t\t},\n\t\teinheitenFormatter: function (cell) {\n\t\t\tconst valInMin = Number(cell.getValue())\n\t\t\tconst content = this.formatMinutes(valInMin)\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'\n\t\t\t\t\t+content+\n\t\t\t\t'</div>'\n\t\t},\n\t\tunselectableFormatter(row) {\n\t\t\tconst data = row.getData()\n\n\t\t\tif(data.status === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\trow.getElement().children[0]?.children[0]?.remove()\n\t\t\t}\n\n\t\t},\n\t\tsetRowStatus(cell, row, status) {\n\t\t\tif(cell.getData().status === status || cell.getData().status === this.$entryParams.permissions.entschuldigt_status) return\n\n\t\t\tconst newRow = {\n\t\t\t\tanwesenheit_user_id: cell.getData().anwesenheit_user_id,\n\t\t\t\tdatum: cell.getData().datum,\n\t\t\t\tstatus: status\n\t\t\t}\n\t\t\tthis.handleChange(newRow)\n\t\t\trow.update(newRow)\n\t\t},\n\t\thandleChange(row){\n\t\t\tconst existingEntryIndex = this.changedData.findIndex(element => element.datum === row.datum)\n\t\t\tif(existingEntryIndex >= 0) this.changedData.splice(existingEntryIndex, 1)\n\t\t\telse this.changedData.push(row)\n\t\t},\n\t\tformAction: function(cell)\n\t\t{\n\t\t\tconst wrapper = document.createElement('div');\n\t\t\twrapper.className = \"d-flex gap-3\";\n\n\t\t\tconst setCheckedButton = document.createElement('button');\n\t\t\tsetCheckedButton.className = 'btn btn-outline-secondary';\n\t\t\tsetCheckedButton.innerHTML = '<i class=\"fa fa-check\"></i>';\n\t\t\tsetCheckedButton.addEventListener('click', () => this.setRowStatus(cell, cell.getRow(), this.$entryParams.permissions.anwesend_status));\n\t\t\twrapper.append(setCheckedButton);\n\n\t\t\tconst setCrossedButton = document.createElement('button');\n\t\t\tsetCrossedButton.className = 'btn btn-outline-secondary';\n\t\t\tsetCrossedButton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\tsetCrossedButton.addEventListener('click', () => this.setRowStatus(cell, cell.getRow(), this.$entryParams.permissions.abwesend_status));\n\t\t\twrapper.append(setCrossedButton);\n\n\t\t\treturn wrapper;\n\t\t},\n\t\tasync saveChanges(changedData){\n\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, changedData)).then(res => {\n\t\t\t\tif(res.meta.status === \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwUserUpdateSuccess'))\n\t\t\t\t\tthis.$emit('anwesenheitenUpdated')\n\t\t\t\t} else {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwUserUpdate'))\n\t\t\t\t}\n\n\t\t\t\tthis.$api.call(ApiProfil.getAnwesenheitSumByLva(this.lv_id, this.sem_kz, this.id))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\tif(res.meta.status === \"success\" && res.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sum = res.data[0].sum\n\t\t\t\t\t\tconst student = this.$entryParams.lektorState.students.find(s => s.prestudent_id === this.prestudent_id && s.person_id === this.person_id)\n\t\t\t\t\t\tstudent.sum = this.sum\n\n\t\t\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.recalc();\n\n\t\t\t\t\t\tthis.setFilterTitle()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsetSelectedRowsAnwesend() {\n\t\t\tconst selectedData = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedData()\n\t\t\tconst selectedRows = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedRows()\n\n\t\t\tconst changedData = []\n\t\t\tconst changedRows = []\n\t\t\tselectedData.forEach((data,i) => {\n\t\t\t\tif(data.status !== this.$entryParams.permissions.entschuldigt_status || data.status === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\t\tconst newData = {\n\t\t\t\t\t\tanwesenheit_user_id: data.anwesenheit_user_id,\n\t\t\t\t\t\tdatum: data.datum,\n\t\t\t\t\t\tstatus: this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\tnotiz: data.notiz\n\t\t\t\t\t}\n\t\t\t\t\tselectedRows[i].update(newData)\n\t\t\t\t\tchangedData.push(newData)\n\t\t\t\t\tchangedRows.push(selectedRows[i])\n\t\t\t\t}\n\n\t\t\t})\n\n\n\t\t\tthis.saveChanges(changedData)\n\n\t\t\tchangedRows.forEach(row => row.toggleSelect())\n\t\t},\n\t\tasync setSelectedRowsAbwesend(){\n\t\t\tconst selectedData = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedData()\n\t\t\tconst selectedRows = this.$refs.anwesenheitenByStudentByLvaTable.tabulator.getSelectedRows()\n\n\t\t\tconst changedData = []\n\t\t\tconst changedRows = []\n\t\t\tselectedData.forEach((data,i) => {\n\t\t\t\tif(data.status !== this.$entryParams.permissions.entschuldigt_status || data.status === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\t\tconst newData = {\n\t\t\t\t\t\tanwesenheit_user_id: data.anwesenheit_user_id,\n\t\t\t\t\t\tdatum: data.datum,\n\t\t\t\t\t\tstatus: this.$entryParams.permissions.abwesend_status\n\t\t\t\t\t}\n\t\t\t\t\tselectedRows[i].update(newData)\n\t\t\t\t\tchangedData.push(newData)\n\t\t\t\t\tchangedRows.push(selectedRows[i])\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\tthis.saveChanges(changedData)\n\n\t\t\tchangedRows.forEach(row => row.toggleSelect())\n\t\t},\n\t\tsetFilterTitle() {\n\t\t\tthis.filterTitle = this.vorname + ' ' + this.nachname + ' ' + this.semester\n\t\t\t\t+ this.verband + this.gruppe + ' '\n\t\t\tthis.filterSubtitle = this.$p.t('global/summe')\n\t\t\t\t+ ': ' + this.sum+ ' %'\n\t\t\t\n\t\t\tthis.$emit('titleSet', this.filterTitle)\n\t\t},\n\t\trouteToLandingPage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'LandingPage'\n\t\t\t})\n\t\t},\n\t\tanwesenheitFormatterValue(cell) {\n\t\t\tconst data = cell.getValue()\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-check\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-xmark\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tcell.getElement().style.color = \"#0335f5\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa-solid fa-user-shield\"></i></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setupMounted() {\n\t\t\t\n\t\t\tif(!this.tableBuiltPromise) {\n\t\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\t\tawait this.tableBuiltPromise\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.getAllAnwesenheitenByStudentByLva(this.id, this.lv_id, this.sem_kz))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status !== \"success\" || !res.data) {\n\t\t\t\t\treturn []\n\t\t\t\t} else {\n\t\t\t\t\tconst arr = res?.data?.retval ?? []\n\t\t\t\t\t// calculate total time of anw\n\t\t\t\t\tconst sum = arr.reduce((acc, cur) => acc + cur.dauer, 0)\n\t\t\t\t\tarr.forEach(row => {\n\t\t\t\t\t\trow.anteil = (row.dauer / sum * 100).toFixed(2)\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.tableData = res.data.retval\n\t\t\t\t\tthis.initialTableData = [...res.data.retval]\n\t\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.setData(res.data.retval)\n\t\t\t\t\t// return res.data.retval\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\tthis.$api.call(ApiInfo.getStudentInfo(this.id, this.lv_id, this.sem_kz))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status !== \"success\" || !res.data) return\n\n\t\t\t\tthis.prestudent_id = res.data[0].prestudent_id\n\t\t\t\tthis.person_id = res.data[0].person_id\n\t\t\t\tthis.vorname = res.data[0].vorname\n\t\t\t\tthis.nachname = res.data[0].nachname\n\t\t\t\tthis.semester = res.data[0].semester\n\t\t\t\tthis.verband = res.data[0].verband\n\t\t\t\tthis.gruppe = res.data[0].gruppe\n\t\t\t\tthis.sum = res.data[0].sum\n\t\t\t\tthis.foto = res.data[0].foto\n\n\t\t\t\tthis.$refs.anwesenheitenByStudentByLvaTable.tabulator.recalc();\n\t\t\t\tthis.setFilterTitle()\n\t\t\t})\n\n\t\t},\n\t\tisLowResolution(imgSrc) {\n\t\t\tconst img = new Image()\n\t\t\timg.src = imgSrc\n\t\t\treturn img.width < 150 || img.height < 200\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight : window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentByLva'].value = screenY - rect.top - 100 // approx for calc row on bottom\n\n\t\t\tif(this.$refs.anwesenheitenByStudentByLvaTable.tabulator) this.$refs.anwesenheitenByStudentByLvaTable.tabulator.redraw(true)\n\n\t\t},\n\t\tload(){\n\t\t\tthis.setupMounted()\n\n\t\t\t// this.calculateTableHeight()\n\t\t\t// window.addEventListener('resize', this.calculateTableHeight)\n\t\t\t// window.addEventListener('orientationchange', this.calculateTableHeight)\n\t\t}\n\t},\n\tmounted() {\n\t\t// this.setupMounted()\n\t\t//\n\t\t// this.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\t\n\t},\n\tcomputed: {\n\t\tdataChanged() {\n\t\t\treturn this.changedData.length\n\t\t},\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentByLva'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate:`\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-10\" style=\"mx-width: 80%\">\n\t\t\t\t<core-filter-cmpt\n\t\t\t\t\tref=\"anwesenheitenByStudentByLvaTable\"\n\t\t\t\t\ttitle=\"\"\n\t\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t\t:tabulator-options=\"anwesenheitenByStudentByLvaTabulatorOptions\"\n\t\t\t\t\t:tabulator-events=\"anwesenheitenByStudentByLvaTabulatorEventHandlers\"\n\t\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t\t:sideMenu=\"false\" \n\t\t\t\t\tnoColumnFilter>\n\t\t\t\t\t<template #actions>\n\n\t\t\t\t\t\t<button @click=\"setSelectedRowsAnwesend\" role=\"button\" class=\"btn btn-success align-self-end\" :disabled=\"!selected\">\n\t\t\t\t\t\t\t{{ $capitalize($p.t('global/anwesend')) }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button @click=\"setSelectedRowsAbwesend\" role=\"button\" class=\"btn btn-primary align-self-end\" :disabled=\"!selected\">\n\t\t\t\t\t\t\t{{ $capitalize($p.t('global/abwesend')) }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t\t<h5><i class=\"fa fa-circle-question\"></i></h5>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</core-filter-cmpt>\n\t\t\t</div>\n\t\t\t<div class=\"col-2\">\n\t\t\t\t<img v-if=\"foto\" :src=\"foto\" :class=\"isLowResolution(foto) ? 'image-low-resolution' : ''\" style=\"width: 100%\"/>\n\t\t\t</div>\n\t\t</div>`\n};\n\nexport default StudentByLvaComponent","import {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport { lektorFormatters } from \"../../formatters/formatters.js\";\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {LehreinheitenDropdown} from \"../Setup/LehreinheitenDropdown.js\";\nimport {MaUIDDropdown} from \"../Setup/MaUIDDropdown.js\";\nimport {KontrollenDropdown} from \"../Setup/KontrollenDropdown.js\";\nimport {TermineDropdown} from \"../Setup/TermineDropdown.js\";\nimport {AnwCountDisplay} from \"./AnwCountDisplay.js\";\nimport {KontrolleDisplay} from \"./KontrolleDisplay.js\";\nimport {Statuslegende} from \"./Statuslegende.js\";\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\nimport {StudentByLvaComponent} from \"./StudentByLvaComponent.js\"\n\nexport const LektorComponent = {\n\tname: 'LektorComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreNavigationCmpt,\n\t\tBsModal,\n\t\tDivider: primevue.divider,\n\t\tTermineDropdown,\n\t\tLehreinheitenDropdown,\n\t\tMaUIDDropdown,\n\t\tKontrollenDropdown,\n\t\tAnwCountDisplay,\n\t\t\"datepicker\": VueDatePicker,\n\t\tStatuslegende,\n\t\tKontrolleDisplay,\n\t\tStudentByLvaComponent\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowQRLoadingSpinner: false,\n\t\t\tselectedStudent: null,\n\t\t\tkontrolleVonBis: null,\n\t\t\teditKontrolle: null,\n\t\t\thighlightMode: 'allowed',\n\t\t\tselectedDateCount: 0,\n\t\t\texternalModalContainer: null,\n\t\t\texternalWindow: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tstunden: null,\n\t\t\tloading: false,\n\t\t\ttableBuiltResolve: null,\n\t\t\ttableBuiltPromise: null,\n\t\t\tlektorState: { // pretty much everything that is being set in setupData()\n\t\t\t\tstudents: [],\n\t\t\t\tstudentsData: null,\n\t\t\t\tanwEntries: [],\n\t\t\t\tstsem: [],\n\t\t\t\tentschuldigtStati: [],\n\t\t\t\tkontrollen: [],\n\t\t\t\tviewData: [],\n\t\t\t\tdates: [], // all\n\t\t\t\ttermine: [], // stundenplan\n\t\t\t\tshowAllVar: false,\n\t\t\t\ttableStudentData: [],\n\t\t\t\tbeginn: null,\n\t\t\t\tende: null,\n\t\t\t\ttabulatorCols: null,\n\t\t\t\tgruppen: null\n\t\t\t},\n\t\t\tkontrollZeitSourceStundenplanBeginn: false,\n\t\t\tkontrollZeitSourceStundenplanEnde: false,\n\t\t\tkontrollDatumSourceStundenplan: false,\n\t\t\tanwesenheitenTabulatorOptions: {\n\t\t\t\trowHeight: 44, // foto max-height + 2x padding\n\t\t\t\trowFormatter: this.entschuldigtColoring,\n\t\t\t\theight: this.$entryParams.tabHeights.lektor,\n\t\t\t\tindex: 'prestudent_id',\n\t\t\t\tdebugInvalidComponentFuncs: false,\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/foto')), field: 'foto', formatter: lektorFormatters.fotoFormatter, visible: true, minWidth: 100, maxWidth: 100, download: false, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/prestudentID')), field: 'prestudent_id', formatter: lektorFormatters.centeredFormatter, visible: false, minWidth: 150, download: true, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/student_uid')), field: 'student_uid', formatter: lektorFormatters.centeredFormatter, visible: false, minWidth: 150, download: true, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('person/vorname')), field: 'vorname', formatter: lektorFormatters.centeredFormatter, headerFilter: true, widthGrow: 1,  minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('person/nachname')), field: 'nachname', formatter: lektorFormatters.centeredFormatter, headerFilter: true, widthGrow: 1, minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('lehre/gruppe')), field: 'gruppe', headerFilter: 'list', tooltip: this.tooltipTableRow,\n\t\t\t\t\t\theaderFilterParams: {\n\t\t\t\t\t\t\tvaluesLookup: true,\n\t\t\t\t\t\t\tclearable: true,\n\t\t\t\t\t\t\tautocomplete: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformatter: lektorFormatters.centeredFormatter, widthGrow: 1, minWidth: 100},\n\t\t\t\t\t// {title: Vue.computed(() => this.$p.t('benotungstool/c4note')), field: 'note_vorschlag',\n\t\t\t\t\t// \teditor: 'list',\n\t\t\t\t\t// \teditorParams: {\n\t\t\t\t\t// \t\tvalues: Vue.computed(()=>this.notenOptions.map(opt => {\n\t\t\t\t\t// \t\t\treturn {\n\t\t\t\t\t// \t\t\t\tlabel: opt.bezeichnung,\n\t\t\t\t\t// \t\t\t\tvalue: opt.note\n\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t// \t\t}))\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tformatter: (cell) => {\n\t\t\t\t\t// \t\tconst value = cell.getValue()\n\t\t\t\t\t// \t\tconst match = this.notenOptions.find(opt => opt.note === value)\n\t\t\t\t\t// \t\treturn match ? match.bezeichnung : value\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \twidthGrow: 1},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.$capitalize(this.$p.t('global/datum')),\n\t\t\t\t\t\tfield: 'status',\n\t\t\t\t\t\teditor: 'list',\n\t\t\t\t\t\teditorParams: {\n\t\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\t\tminWidth: 150\n\t\t\t\t\t\t\n\t\t\t\t\t\t// title: this.$capitalize(this.$p.t('global/datum')),\n\t\t\t\t\t\t// field: 'status',\n\t\t\t\t\t\t// formatter: this.anwesenheitFormatterValue,\n\t\t\t\t\t\t// hozAlign:\"center\",\n\t\t\t\t\t\t// widthGrow: 1, \n\t\t\t\t\t\t// // tooltip: this.anwTooltip,\n\t\t\t\t\t\t// tooltip: this.tooltipTableRow,\n\t\t\t\t\t\t// minWidth: 150\n\t\t\t\t\t},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/summe')), field: 'sum', formatter: this.percentFormatter,widthGrow: 1, minWidth: 150, tooltip: this.tooltipTableRow},\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: false,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-lektorOverviewLe\"\n\t\t\t},\n\t\t\tanwesenheitenTabulatorEventHandlers: [{\n\t\t\t\tevent: \"cellClick\",\n\t\t\t\thandler: async (e, cell) => {\n\n\t\t\t\t\t// on non date fields route to student by lva component\n\t\t\t\t\tconst field = cell.getColumn().getField()\n\n\t\t\t\t\tconst row = cell.getRow()\n\t\t\t\t\tconst prestudent_id = Reflect.get(row.getData(), 'prestudent_id')\n\n\t\t\t\t\tif(field === \"gruppe\" || field === \"foto\" || field === \"prestudent_id\" ||\n\t\t\t\t\t\tfield === \"vorname\" || field === \"nachname\" || field === \"sum\") {\n\n\t\t\t\t\t\tif(this.changedData.length && await this.$fhcAlert.confirm({\n\t\t\t\t\t\t\tmessage: 'Ungespeicherte Änderungen werden verloren!',\n\t\t\t\t\t\t\tacceptLabel: 'Verwerfen und Fortfahren',\n\t\t\t\t\t\t\tacceptClass: 'btn btn-danger',\n\t\t\t\t\t\t\trejectLabel: 'Zurück',\n\t\t\t\t\t\t\trejectClass: 'btn btn-outline-secondary'\n\t\t\t\t\t\t}) === false) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// maybe incorporate more changes to dataState to avoid reloads\n\t\t\t\t\t\t//  in the future when performance is an issue\n\t\t\t\t\t\tif(!this.changes) this.$entryParams.lektorState = this.lektorState\n\n\t\t\t\t\t\tthis.selectedStudent = {id: prestudent_id, lv_id: this.lv_id, sem_kz: this.sem_kurzbz, title: ''}\n\t\t\t\t\t\tVue.nextTick(()=>{\n\t\t\t\t\t\t\tthis.$refs.studentByLva.load()\n\t\t\t\t\t\t\t// just show studentByLva component in a fullscreen modal, avoid the routing shenanigans here\n\t\t\t\t\t\t\tthis.$refs.modalContainerStudentByLva.show()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// this.$router.push({\n\t\t\t\t\t\t// \tname: 'StudentByLva',\n\t\t\t\t\t\t// \tparams: {id: prestudent_id, lv_id: this.lv_id, sem_kz: this.sem_kurzbz}\n\t\t\t\t\t\t// })\n\t\t\t\t\t}\n\t\t\t\t\t// else { // on date fields toggle state edit\n\t\t\t\t\t// \tthis.toggleAnwStatus(e, cell, prestudent_id)\n\t\t\t\t\t// \tconst el = cell.getElement()\n\t\t\t\t\t//\t\n\t\t\t\t\t// \tif(this.changedData.find(d => d.prestudent_id === prestudent_id)) {\n\t\t\t\t\t// \t\tel.style.backgroundColor = \"#E0BBE4\"\n\t\t\t\t\t// \t} else {\n\t\t\t\t\t// \t\tel.style.backgroundColor = null\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"cellEdited\",\n\t\t\t\thandler: async (cell) => {\n\t\t\t\t\t\n\t\t\t\t\tconst row = cell.getRow()\n\t\t\t\t\tconst prestudent_id = Reflect.get(row.getData(), 'prestudent_id')\n\n\t\t\t\t\tthis.changeAnwStatus(cell, prestudent_id)\n\t\t\t\t\tconst el = cell.getElement()\n\n\t\t\t\t\tif(this.changedData.find(d => d.prestudent_id === prestudent_id)) {\n\t\t\t\t\t\tel.style.backgroundColor = \"#E0BBE4\"\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.style.backgroundColor = null\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tboundRegenerateQR: null,\n\t\t\tboundProgressCounter: null,\n\t\t\tchangedData: [],\n\t\t\tdeleteData: null,\n\t\t\tselectedDate: new Date(Date.now()),\n\t\t\tqr: null,\n\t\t\turl: null,\n\t\t\tcode: null,\n\t\t\ttimerIDPolling: null,\n\t\t\tprogressTimerID: null,\n\t\t\tregenerateProgress: 0,\n\t\t\tprogressMax: 0,\n\t\t\tpolling: false,\n\t\t\tcheckInCount: 0,\n\t\t\tabwesendCount: 0,\n\t\t\tentschuldigtCount: 0,\n\t\t\tstudentCount: 0,\n\t\t\tchanges: false // if something could have happened to dataset -> reload on mounted\n\t\t}\n\t},\n\tinject: {\n\t\tminDate: {\n\t\t\ttype: Object\n\t\t},\n\t\tmaxDate: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tprops: {\n\t\tpermissions: [],\n\t\ttranslateOffset: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60\n\t\t}\n\t},\n\tmethods: {\n\t\thandleAutoApply(date) {\n\t\t\tthis.selectedDate = date\n\t\t\tthis.$refs.outsideDateSelect.closeMenu()\t\n\t\t\tif(this.$refs.insideDateSelect) this.$refs.insideDateSelect.closeMenu()\n\t\t},\n\t\tanwColTitleFormatter(cell) {\n\t\t\tconst title = cell.getColumn().getDefinition().title;\n\t\t\tconst titleParts = title.split(\"|\")\n\t\t\t\n\t\t\tconst titledate = titleParts[0].trimEnd()\n\t\t\tconst dateParts = titledate.split(\"-\")\n\t\t\tconst selectedDateFrontendFormatted = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\n\t\t\tconst container = document.createElement(\"div\");\n\t\t\tcontainer.style.textAlign = \"center\";\n\t\t\tcontainer.innerHTML = `<span style=\"font-weight: bold;\">${selectedDateFrontendFormatted}</span><br><span style=\"color: gray;\">${titleParts[1]}</span>`;\n\t\t\treturn container;\n\t\t},\n\t\tcheckCellEditability(cell) {\n\t\t\tconst val = cell.getValue()\n\t\t\treturn val !== '-' // dont allow edit on empty cols \n\t\t},\n\t\ttooltipTableRow(e, cell, onRendered) {\n\t\t\tconst el = document.createElement('div');\n\t\t\tel.style.padding = '5px';\n\t\t\tel.style.fontFamily = 'sans-serif';\n\n\t\t\tconst data = cell.getRow().getData();\n\n\t\t\t// Header Section\n\t\t\tconst header = document.createElement('div');\n\t\t\theader.style.fontWeight = 'bold';\n\t\t\theader.style.marginBottom = '10px';\n\t\t\theader.style.borderBottom = '1px solid #ccc';\n\t\t\theader.style.paddingBottom = '5px';\n\n\t\t\tconst limit = 10;\n\t\t\tconst count = data?.entschuldigungen?.length || 0;\n\t\t\tconst shownNumber = count >= limit ? limit : count;\n\n\t\t\theader.innerText = `${data.vorname} ${data.nachname}`;\n\t\t\tif (count > 0) {\n\t\t\t\theader.innerText += ` (Entschuldigungen: ${shownNumber}/${count})`;\n\t\t\t}\n\t\t\tel.appendChild(header);\n\n\t\t\t// Grid Section\n\t\t\tif (count > 0) {\n\t\t\t\tconst grid = document.createElement('div');\n\t\t\t\tgrid.style.display = 'grid';\n\t\t\t\tgrid.style.gridTemplateColumns = 'auto auto';\n\t\t\t\tgrid.style.columnGap = '25px'; // The \"Tab\" space\n\t\t\t\tgrid.style.rowGap = '4px';\n\n\t\t\t\tfor (let i = 0; i < shownNumber; i++) {\n\t\t\t\t\tconst ent = data.entschuldigungen[i];\n\n\t\t\t\t\tconst dateSpan = document.createElement('span');\n\t\t\t\t\tdateSpan.innerText = this.formatEntschuldigungZeit(ent);\n\n\t\t\t\t\tconst statusSpan = document.createElement('span');\n\t\t\t\t\tstatusSpan.style.color = ent.akzeptiert ? '#2e7d32' : '#d32f2f';\n\t\t\t\t\tstatusSpan.innerText = 'Status: ' + this.formatAkzeptiertStatus(ent.akzeptiert);\n\n\t\t\t\t\tgrid.appendChild(dateSpan);\n\t\t\t\t\tgrid.appendChild(statusSpan);\n\t\t\t\t}\n\t\t\t\tel.appendChild(grid);\n\t\t\t} else {\n\t\t\t\tconst none = document.createElement('div');\n\t\t\t\tnone.innerText = 'Keine Entschuldigungen vorhanden';\n\t\t\t\tel.appendChild(none);\n\t\t\t}\n\n\t\t\treturn el;\n\t\t},\n\t\tformatEntschuldigungZeit(ent) {\n\t\t\tconst von = new Date(ent.von)\n\t\t\tconst bis = new Date(ent.bis)\n\t\t\tconst today = new Date()\n\t\t\tconst sameDay = this.areDatesSame(today, bis) && this.areDatesSame(von, today)\n\t\t\t\n\t\t\tif(sameDay) {\n\t\t\t\treturn  (von.getDate()) + '.' + (von.getMonth()+1) + '.' + von.getFullYear() + ' ' + String(von.getHours()).padStart(2, '0') + ':' + String(von.getMinutes()).padStart(2, '0') + ' - ' + String(bis.getHours()).padStart(2, '0') + ':' + String(bis.getMinutes()).padStart(2, '0')\n\t\t\t} else {\n\t\t\t\t// return (von.getMonth() + 1) + '.' + von.getDate() + ' ' + String(von.getHours()).padStart(2, '0') + ':' + String(von.getMinutes()).padStart(2, '0') + ' - ' + (bis.getMonth() + 1) + '.' + bis.getDate() + ' ' + String(bis.getHours()).padStart(2, '0') + ':' + String(bis.getMinutes()).padStart(2, '0')\n\t\t\t\treturn (von.getDate()) + '.' + (von.getMonth()+1) + '.' + von.getFullYear() + ' ' + String(von.getHours()).padStart(2, '0') + ':' + String(von.getMinutes()).padStart(2, '0') + ' - ' + bis.getDate() + '.' + (bis.getMonth()+1) + '.' + bis.getFullYear() + ' ' + String(bis.getHours()).padStart(2, '0') + ':' + String(bis.getMinutes()).padStart(2, '0')\n\n\t\t\t}\n\t\t},\n\t\tformatAkzeptiertStatus(akzeptiert) {\n\t\t\t// formats akzeptiert tri state logic (true => accepted, false => denied, null => open) into meaningful strings\n\t\t\t\n\t\t\tlet ret = ''\n\t\t\t\n\t\t\tif(akzeptiert === null) {\n\t\t\t\tret = 'Offen'\n\t\t\t} else if (akzeptiert === true) {\n\t\t\t\tret = 'Akzeptiert'\n\t\t\t} else if (akzeptiert === false) {\n\t\t\t\tret = 'Abgelehnt'\n\t\t\t}\n\t\t\t\n\t\t\treturn ret\n\t\t\t\n\t\t},\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ?? data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex;' + (val < (this.$entryParams.permissions.positiveRatingThreshold * 100) ? 'color: red; ' : '') + 'justify-content: center; align-items: center; height: 100%\">' + val + ' %</div>'\n\t\t},\n\t\tanwesenheitFormatterValue(cell) {\n\t\t\tconst data = cell.getValue()\n\t\t\t\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-check\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa fa-xmark\"></i></div>'\n\t\t\t} else if (data === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tcell.getElement().style.color = \"#0335f5\";\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\"><i class=\"fa-solid fa-user-shield\"></i></div>'\n\t\t\t} else return '-'\n\t\t},\n\t\tanwTooltip(e, cell) {\n\t\t\tconst value = cell.getValue()\n\t\t\tlet valueFormatted = ''\n\n\t\t\tif (value === this.$entryParams.permissions.anwesend_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/anwesend'))\n\t\t\t} else if (value === this.$entryParams.permissions.abwesend_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/abwesend'))\n\t\t\t} else if (value === this.$entryParams.permissions.entschuldigt_status) {\n\t\t\t\tvalueFormatted = this.$capitalize(this.$p.t('global/entschuldigt'))\n\t\t\t}\n\n\t\t\treturn valueFormatted\n\t\t},\n\t\tgetExistingQRCode() {\n\t\t\tthis.$api.call(ApiKontrolle.getExistingQRCode(this.$entryParams.selected_le_id.value))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data.svg) {\n\t\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tpollAnwesenheit() {\n\t\t\tthis.$api.call(ApiKontrolle.pollAnwesenheiten(this.anwesenheit_id, this.lv_id))\n\t\t\t\t.then(res => {\n\t\t\t\tthis.checkInCount = res.data.anwesend\n\t\t\t\tthis.abwesendCount = res.data.abwesend\n\t\t\t\tthis.entschuldigtCount = res.data.entschuldigt\n\t\t\t})\n\t\t},\n\t\tstartPollingAnwesenheiten() {\n\t\t\tthis.timerIDPolling = setInterval(this.boundPollAnwesenheit, 3000)\n\t\t},\n\t\tstopPollingAnwesenheiten() {\n\t\t\tclearInterval(this.timerIDPolling)\n\t\t\tthis.timerIDPolling = null\n\t\t},\n\t\thandleKontrolleChanged(kontrolle) {\n\t\t\tthis.deleteData = kontrolle\n\t\t},\n\t\thandleShowAllToggle() {\n\t\t\tif (!this.lektorState.dates.length) {\n\t\t\t\tthis.$fhcAlert.alertInfo(this.$p.t('global/anwInfoKeineKontrollenGefunden'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loading = true\n\t\t\tthis.toggleShowAll()\n\t\t\tthis.loading = false\n\t\t},\n\t\tasync setAllColsAndData() {\n\t\t\tthis.selectedDateCount = this.lektorState.dates.length\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(this.lektorState.tabulatorCols)\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData)\n\t\t},\n\t\ttoggleShowAll() {\n\t\t\t// set tabulator column definition to show every distinct date fetched\n\n\t\t\tif (!this.lektorState.showAllVar) {\n\t\t\t\tthis.setShowAll()\n\t\t\t} else {\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t\t\n\t\t\t\t// use selectedDate watcher to retrieve single column table state\n\t\t\t\tthis.selectedDate = new Date(this.selectedDate)\n\n\t\t\t\tthis.lektorState.showAllVar = false\n\t\t\t}\n\n\t\t},\n\t\tsetShowAll() {\n\t\t\tconst newCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\t\t\tthis.lektorState.dates.forEach(date => {\n\t\t\t\tnewCols.push({\n\t\t\t\t\ttitle: date,\n\t\t\t\t\tfield: date,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tnewCols.push(this.anwesenheitenTabulatorOptions.columns.find(col => col.field == 'sum'))\n\n\t\t\tthis.lektorState.tableStudentData = this.setupAllData(newCols)\n\t\t\tthis.lektorState.tabulatorCols = newCols\n\t\t\tthis.setAllColsAndData()\n\n\t\t\tthis.lektorState.showAllVar = true\n\t\t},\n\t\tsetupAllData() {\n\t\t\tconst data = []\n\n\t\t\tthis.lektorState.students.forEach(student => {\n\t\t\t\tconst allEntStudent = this.lektorState.entschuldigtStati.filter(status => {\n\t\t\t\t\tif(status.person_id === student.person_id) return true\n\t\t\t\t\telse return false\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// sort entschuldigungen descending, so tooltip shows most recent on top\n\t\t\t\t// allEntStudent.sort(\n\t\t\t\t//\t\n\t\t\t\t// )\n\t\t\t\t\n\t\t\t\tconst nachname = student.nachname + student.zusatz\n\t\t\t\tconst row = {\n\t\t\t\t\tstudent_uid: student.student_uid,\n\t\t\t\t\tprestudent_id: student.prestudent_id,\n\t\t\t\t\tfoto: student.foto,\n\t\t\t\t\tvorname: student.vorname,\n\t\t\t\t\tnachname: nachname,\n\t\t\t\t\tentschuldigungen: allEntStudent,\n\t\t\t\t\tgruppe: student.semester + student.verband + student.gruppe,\n\t\t\t\t\tsum: student.sum\n\t\t\t\t}\n\t\t\t\tconst studentDataEntry = this.lektorState.studentsData.get(student.prestudent_id)\n\t\t\t\tstudentDataEntry.forEach(entry => {\n\t\t\t\t\tconst d = entry.datum + ' | ' + entry.von + ' - ' + entry.bis\n\t\t\t\t\trow[d] = entry.status\n\t\t\t\t})\n\n\t\t\t\tdata.push(row)\n\t\t\t})\n\n\t\t\treturn data\n\t\t},\n\t\tareDatesSame(date1, date2) {\n\t\t\tconst date1Date = date1.getDate()\n\t\t\tconst date2Date = date2.getDate()\n\n\t\t\tconst date1Month = date1.getMonth()\n\t\t\tconst date2Month = date2.getMonth()\n\n\t\t\tconst date1Year = date1.getFullYear()\n\t\t\tconst date2Year = date2.getFullYear()\n\n\t\t\treturn date1Date === date2Date && date1Month === date2Month && date1Year === date2Year\n\t\t},\n\t\twait(ms) {\n\t\t\treturn new Promise(resolve => setTimeout(resolve, ms))\n\t\t},\n\t\tformatQRTime(kontrolle) {\n\t\t\tconst vp = kontrolle.von.split(\" \")\n\t\t\tconst datumParts = vp[0].split(\"-\")\n\t\t\tconst datum = datumParts[2] + '.' + datumParts[1] + '.' + datumParts[0]\n\t\t\tconst von = vp[1]\n\t\t\tconst bis = kontrolle.bis.split(\" \")[1]\n\t\t\treturn datum + ' | ' + von + ' - ' + bis\n\t\t},\n\t\tshowQR(data) {\n\t\t\tthis.qr = data.svg\n\t\t\tthis.url = data.url\n\t\t\tthis.code = data.code\n\t\t\tthis.kontrolleVonBis = this.formatQRTime(data.kontrolle)\n\t\t\tthis.checkInCount = data.count.anwesend\n\t\t\tthis.abwesendCount = data.count.abwesend\n\t\t\tthis.entschuldigtCount = data.count.entschuldigt\n\t\t\tthis.anwesenheit_id = data.anwesenheit_id\n\t\t\tthis.$refs.modalContainerQR.show()\n\t\t\tif (this.$entryParams.permissions.useRegenerateQR) this.startRegenerateQR()\n\t\t\tthis.startPollingAnwesenheiten()\n\t\t},\n\t\tgetNewQRCode() {\n\t\t\t// js months 0-11, php months 1-12\n\t\t\tconst date = {\n\t\t\t\tyear: this.selectedDate.getFullYear(),\n\t\t\t\tmonth: this.selectedDate.getMonth() + 1,\n\t\t\t\tday: this.selectedDate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.getNewQRCode(this.$entryParams.selected_le_id.value, date, this.lektorState.beginn, this.lektorState.ende))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.data) {\n\t\t\t\t\tthis.showQRLoadingSpinner = false\n\t\t\t\t\tthis.changes = true\n\t\t\t\t\tthis.$refs.modalContainerNewKontrolle.hide()\n\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t}\n\t\t\t}).finally(()=>{\n\t\t\t\t// just in case\n\t\t\t\tthis.showQRLoadingSpinner = false\n\t\t\t})\n\t\t\t\n\t\t},\n\t\thandleTerminChanged() {\n\t\t\tthis.setTimespanForKontrolleTermin(this.$entryParams.selected_termin.value)\n\t\t},\n\t\tregenerateQR() {\n\t\t\tthis.$api.call(ApiKontrolle.regenerateQRCode(this.anwesenheit_id))\n\t\t\t\t.then(async (res) => {\n\t\t\t\tconst oldCode = this.code\n\t\t\t\tthis.qr = res.data.svg\n\t\t\t\tthis.url = res.data.url\n\t\t\t\tthis.code = res.data.code\n\n\t\t\t\tawait this.wait(5000)\n\n\t\t\t\t\tthis.$api.call(ApiKontrolle.degenerateQRCode(this.anwesenheit_id, oldCode))\n\t\t\t})\n\t\t},\n\t\tprogressCounter() {\n\t\t\tif (this.regenerateProgress === this.progressMax) {\n\t\t\t\tthis.regenerateQR()\n\t\t\t}\n\t\t\tif (this.regenerateProgress >= this.progressMax) this.regenerateProgress = 0\n\t\t\tthis.regenerateProgress++\n\t\t},\n\t\tasync saveChanges() {\n\n\t\t\tconst changedStudents = new Set(this.changedData.map(e => e.prestudent_id))\n\t\t\tthis.$api.call(ApiKontrolle.updateAnwesenheiten(this.$entryParams.selected_le_id.value, this.changedData))\n\t\t\t\t.then((res) => {\n\t\t\t\tif (res.meta.status === \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwUserUpdateSuccess'))\n\t\t\t\t} else {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwUserUpdate'))\n\t\t\t\t}\n\n\t\t\t\tconst changedStudentsArr = [...changedStudents]\n\t\t\t\t// find and overwrite each entry in studentsData map from which showAll retrieves its values\n\t\t\t\tthis.changedData.forEach(change => {\n\t\t\t\t\tconst values = this.lektorState.studentsData.get(change.prestudent_id)\n\t\t\t\t\tconst valueToChange = values?.find(val => val.anwesenheit_user_id == change.anwesenheit_user_id)\n\t\t\t\t\t\n\t\t\t\t\tif(valueToChange) {\n\t\t\t\t\t\tconst oldVal = valueToChange.status\n\t\t\t\t\t\tvalueToChange.status = change.status\n\n\t\t\t\t\t\tconst kontrolleToUpdate = this.lektorState.kontrollen.find(k => k.anwesenheit_id == change.anwesenheit_id)\n\t\t\t\t\t\tkontrolleToUpdate[oldVal]--;\n\t\t\t\t\t\tkontrolleToUpdate[change.status]++;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$api.call(ApiKontrolle.getAnwQuoteForPrestudentIds(changedStudentsArr, this.$entryParams.lv_id, this.$entryParams.sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.updateSumData(res.data.retval)\n\t\t\t\t\t\tthis.changes = true\n\t\t\t\t\t})\n\t\t\t}).finally(() =>  {\n\t\t\t\tthis.changedData = []\n\t\t\t\tthis.setCurrentCountsFromTableData()\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tstartRegenerateQR() {\n\t\t\tthis.progressTimerID = setInterval(this.boundProgressCounter, this.progressTimerInterval) // track time passed for regenerate\n\t\t},\n\t\tstopRegenerateQR() {\n\t\t\tconst oldCode = this.code\n\n\t\t\tclearInterval(this.progressTimerID)\n\t\t\tthis.progressTimerID = null\n\t\t\tthis.regenerateProgress = 0\n\n\t\t\tthis.qr = null\n\t\t\tthis.url = null\n\t\t\tthis.code = null\n\n\t\t\t// attempt to degenerate one last time to not leave any codes in db\n\t\t\tthis.$api.call(ApiKontrolle.degenerateQRCode(this.anwesenheit_id, oldCode))\n\t\t},\n\t\thandleChangeDatum(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst searchStr = year + '-' + month + '-' + day\n\t\t\t\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.datum == searchStr)\n\t\t\tif(terminFound) this.kontrollDatumSourceStundenplan = true\n\t\t\telse this.kontrollDatumSourceStundenplan = false\n\t\t},\n\t\thandleChangeEnde(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst searchStr = `${padZero(date.hours)}:${padZero(date.minutes)}:${padZero(date.seconds)}`\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.ende == searchStr)\n\t\t\tif(terminFound) this.kontrollZeitSourceStundenplanEnde = true\n\t\t\telse this.kontrollZeitSourceStundenplanEnde = false\n\t\t},\n\t\thandleChangeBeginn(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\t\t\tconst searchStr = `${padZero(date.hours)}:${padZero(date.minutes)}:${padZero(date.seconds)}`\n\t\t\tconst terminFound = this.$entryParams.available_termine.value.find(termin => termin.beginn == searchStr)\n\t\t\tif(terminFound) this.kontrollZeitSourceStundenplanBeginn = true\n\t\t\telse this.kontrollZeitSourceStundenplanBeginn = false\n\t\t},\n\t\tqueryOnlyKontrolleShown() {\n\t\t\t// find kontrolle from column date\n\t\t\tconst sYear = this.selectedDate.getFullYear()\n\t\t\tconst sMonth = this.selectedDate.getMonth()\n\t\t\tconst sDate = this.selectedDate.getDate()\n\t\t\t\n\t\t\tconst kOnDate = this.lektorState.kontrollen.find(k => {\n\t\t\t\tconst kYear = k.jsDate.getFullYear()\n\t\t\t\tconst kMonth = k.jsDate.getMonth()\n\t\t\t\tconst kDate = k.jsDate.getDate()\n\t\t\t\t\n\t\t\t\treturn sYear === kYear && sMonth === kMonth && sDate === kDate\n\t\t\t})\n\n\t\t\tif(kOnDate) {\n\t\t\t\tthis.$api.call(ApiKontrolle.pollAnwesenheiten(kOnDate.anwesenheit_id, this.lv_id))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.checkInCount = res.data.anwesend\n\t\t\t\t\t\tthis.abwesendCount = res.data.abwesend\n\t\t\t\t\t\tthis.entschuldigtCount = res.data.entschuldigt\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tsetTimespanForKontrolleNow() {\n\t\t\t// no termine found to fill starting fields from, set to current hour + 1\n\t\t\tconst now = new Date()\n\n\t\t\tthis.lektorState.beginn = {\n\t\t\t\thours: now.getHours(),\n\t\t\t\tminutes: now.getMinutes(),\n\t\t\t\tseconds: now.getSeconds()\n\t\t\t}\n\t\t\tthis.lektorState.ende = {hours: now.getHours() + 1, minutes: now.getMinutes(), seconds: now.getSeconds()}\n\t\t},\n\t\tsetTimespanForKontrolleTermin(termin, setDate = true) {\n\t\t\tif (setDate) {\n\t\t\t\tthis.selectedDate = new Date(termin.datum)\n\t\t\t\tthis.kontrollDatumSourceStundenplan = true;\n\t\t\t}\n\n\t\t\tconst beginn = new Date('1995-10-16 ' + termin.beginn)\n\t\t\tconst ende = new Date('1995-10-16 ' + termin.ende)\n\n\t\t\tthis.lektorState.beginn = {\n\t\t\t\thours: beginn.getHours(),\n\t\t\t\tminutes: beginn.getMinutes(),\n\t\t\t\tseconds: beginn.getSeconds()\n\t\t\t}\n\t\t\tthis.kontrollZeitSourceStundenplanBeginn = true\n\t\t\tthis.kontrollDatumSourceStundenplan = (termin.isSameDay || setDate) ?? false\n\t\t\t\n\t\t\tthis.lektorState.ende = {hours: ende.getHours(), minutes: ende.getMinutes(), seconds: ende.getSeconds()}\n\t\t\t\n\t\t\tthis.kontrollZeitSourceStundenplanEnde = true\n\t\t},\n\t\tstartNewAnwesenheitskontrolle() {\n\t\t\tif (!this.lektorState.beginn || !this.lektorState.ende) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwStartAndEndSet'))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.validateTimespan(this.lektorState.beginn, this.lektorState.ende, this.selectedDate)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.showQRLoadingSpinner = true\n\t\t\tthis.qr = '' // indirectly set start button disabled\n\n\t\t\t// fetch some data from stundenplan what should be happening rn\n\t\t\t// if there is no stundenplan entry enter some hours of anwesenheit?\n\n\t\t\tthis.getNewQRCode()\n\t\t},\n\t\tinsertAnwWithoutQR() {\n\t\t\tif (!this.lektorState.beginn || !this.lektorState.ende) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorAnwStartAndEndSet'))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!this.validateTimespan(this.lektorState.beginn, this.lektorState.ende, this.selectedDate)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst date = {\n\t\t\t\tyear: this.selectedDate.getFullYear(),\n\t\t\t\tmonth: this.selectedDate.getMonth() + 1,\n\t\t\t\tday: this.selectedDate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$refs.modalContainerNewKontrolle.hide()\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.insertAnwWithoutQR(this.$entryParams.selected_le_id.value, date, this.lektorState.beginn, this.lektorState.ende))\n\t\t\t\t.then(res => {\n\n\t\t\t\t\tconst datefetch = this.formatDateToDbString(this.selectedDate)\n\t\t\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\t\tthis.reloadState(ma_uid, datefetch)\n\t\t\t\t\t\n\t\t\t\t\tthis.changes = true\n\t\t\t\t\tthis.showQR(res.data)\n\n\t\t\t\t})\n\t\t},\n\t\tstopAnwesenheitskontrolle() {\n\t\t\tif(this.externalWindow) { // portal the modal back into our dom and close window\n\t\t\t\tthis.externalWindow.close() // triggers handleClose on beforeunload event listener\n\t\t\t}\n\t\t\t\n\t\t\tthis.$refs.modalContainerQR.hide()\n\n\t\t\tthis.stopPollingAnwesenheiten() // stops polling loop on server\n\t\t\tthis.qr = null\n\t\t\tthis.url = null\n\t\t\tthis.code = null\n\n\t\t\t// maybe only fetch new entries and merge\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\n\t\t\tthis.reloadState(ma_uid, date)\n\n\t\t\tthis.$api.call(ApiKontrolle.deleteQRCode(this.anwesenheit_id, this.lv_id))\n\t\t\t\t.then(\n\t\t\t\tres => {\n\t\t\t\t\tif (res.meta.status === \"success\" && res.data) {\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/anwKontrolleBeendet'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorDeleteQRCode'))\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.$entryParams.permissions.useRegenerateQR) this.stopRegenerateQR()\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\treloadState(ma_uid, date) {\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(this.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, date)).then(res => {\n\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t}\n\t\t\t}).catch(() => {\n\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t},\n\t\tupdateSumData(data) {\n\t\t\tdata.forEach(e => {\n\t\t\t\tconst student = this.lektorState.students.find(s => s.prestudent_id === e.prestudent_id)\n\t\t\t\tstudent.sum = e.sum\n\t\t\t\tconst studentTable = this.lektorState.tableStudentData.find(s => s.prestudent_id === e.prestudent_id)\n\t\t\t\tstudentTable.sum = e.sum\n\t\t\t})\n\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData);\n\t\t},\n\t\topenEditModal() {\n\t\t\tthis.$refs.modalContainerEditKontrolle.show()\n\t\t},\n\t\topenLegend() {\n\t\t\tthis.$refs.modalContainerLegende.show()\n\t\t},\n\t\tasync deleteAnwesenheitskontrolle(kontrolle) {\n\t\t\tif (await this.$fhcAlert.confirmDelete() === false) return;\n\n\t\t\tconst dataparts = kontrolle.datum.split('.')\n\t\t\tconst dateobj = new Date(dataparts[2], dataparts[1] - 1, dataparts[0])\n\t\t\tconst date = {year: dateobj.getFullYear(), month: dateobj.getMonth() + 1, day: dateobj.getDate()}\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tconst dateAnwFormat = dataparts[2] + '-' + dataparts[1] + '-' + dataparts[0]\n\n\t\t\t\n\t\t\t\n\t\t\t\tthis.$api.call(ApiKontrolle.deleteAnwesenheitskontrolle(this.$entryParams.selected_le_id.value, date, kontrolle.anwesenheit_id))\n\t\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status === \"success\" && res.data) {\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/deleteAnwKontrolleConfirmation'))\n\n\t\t\t\t\tthis.reloadState(ma_uid, dateAnwFormat)\n\t\t\t\t} else if (res.meta.status === \"success\" && !res.data) {\n\t\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/noAnwKontrolleFoundToDelete'))\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\n\t\t},\n\t\teditAnwesenheitskontrolle(kontrolle) {\n\t\t\tconst vonSplit = kontrolle.von.split(':')\n\t\t\tkontrolle.editVon = {hours: vonSplit[0], minutes: vonSplit[1], seconds: vonSplit[2]}\n\t\t\tconst bisSplit = kontrolle.bis.split(':')\n\t\t\tkontrolle.editBis = {hours: bisSplit[0], minutes: bisSplit[1], seconds: bisSplit[2]}\n\t\t\tif(this.editKontrolle === null) {\n\t\t\t\tthis.editKontrolle = kontrolle\n\t\t\t} else {\n\t\t\t\tthis.editKontrolle = null\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tformatDateToDbString(date) {\n\t\t\treturn new Date(date.getTime() - (date.getTimezoneOffset() * 60000))\n\t\t\t\t.toISOString()\n\t\t\t\t.split(\"T\")[0];\n\t\t},\n\t\tformatZusatzDate(date){\n\t\t\tconst parts = date.split('-');\n\t\t\treturn `${parts[2]}.${parts[1]}.${parts[0]}`;\n\t\t},\n\t\tformatZusatz(entry, stsem) {\n\t\t\tlet zusatz = ''\n\t\t\tconst stsemdatumvon = new Date(stsem.start)\n\t\t\tconst stsemdatumbis = new Date(stsem.ende)\n\n\t\t\tconst entryVon = new Date(entry.von)\n\t\t\tconst entryBis = new Date(entry.bis)\n\t\t\t\n\t\t\tif (entry.studienstatus === 'Incoming') zusatz = ' (i)'\n\t\t\tif (entry.bisio_id && entry.studienstatus !== 'Incoming'\n\t\t\t\t&& entryBis > stsemdatumvon && entryVon < stsemdatumbis && ((entryBis.getTime() - entryVon.getTime()) / 1000 * 3600 * 24) >= 30) {\n\t\t\t\tzusatz = ' (o) (ab ' + this.formatZusatzDate(entry.von) + ')'\n\t\t\t} else if (entry.bisio_id && entry.studienstatus !== 'Incoming' && entryVon && entryVon > stsemdatumvon) {\n\t\t\t\t// if bis datum is not yet known but von is available already\n\t\t\t\tzusatz = ' (o) (ab ' + this.formatZusatzDate(entry.von) + ')'\n\t\t\t}\n\n\t\t\tif (entry.lkt_ueberschreibbar === false) zusatz = ' (' + entry.anmerkung + ')'\n\t\t\tif (entry.mitarbeiter_uid !== null) zusatz = ' (ma)'\n\t\t\tif (entry.stg_kz_student == this.lektorState.a_o_kz) {\n\t\t\t\tzusatz = ' (a.o.)'\n\t\t\t}\n\t\t\tif (entry.mobilitaetstyp_kurzbz && entry.doubledegree === 1) {\n\t\t\t\tzusatz = ' (d.d.'\n\t\t\t\tif (entry.ddtype == 'Intern') zusatz += 'i.)';\n\t\t\t\telse if (entry.ddtype == 'Extern') zusatz += 'o.)';\n\t\t\t\telse zusatz += ')';\n\t\t\t}\n\n\t\t\treturn zusatz\n\t\t},\n\t\tlinkKontrollData() {\n\t\t\t// TODO: write Set of controlled groups into kontroll obj\n\n\t\t\tthis.lektorState.kontrollen.forEach(k => {\n\t\t\t\tk.sumAnw = 0\n\t\t\t\tk.anw = 0\n\t\t\t\tk.abw = 0\n\t\t\t\tk.ent = 0\n\t\t\t\tk.groupSet = new Set()\n\t\t\t})\n\t\t\tthis.lektorState.anwEntries.forEach(anw => {\n\t\t\t\tconst k = this.lektorState.kontrollen.find(k => k.anwesenheit_id === anw.anwesenheit_id)\n\t\t\t\tk.sumAnw++\n\t\t\t\tif (anw.status === this.$entryParams.permissions.anwesend_status) k.anw++\n\t\t\t\telse if (anw.status === this.$entryParams.permissions.abwesend_status) k.abw++\n\t\t\t\telse if (anw.status === this.$entryParams.permissions.entschuldigt_status) k.ent++\n\t\t\t})\n\n\t\t},\n\t\tsetEntries(anwEntries, kontrollen) {\n\n\t\t\t// from anw entries\n\t\t\tanwEntries.forEach(entry => {\n\t\t\t\tconst kontrolle = kontrollen.find(k => k.anwesenheit_id === entry.anwesenheit_id)\n\t\t\t\t// search for distinct kontrollento use for show all columns\n\t\t\t\tthis.lektorState.studentsData.get(entry.prestudent_id).push({\n\t\t\t\t\tdatum: entry.datum,\n\t\t\t\t\tstatus: entry.status,\n\t\t\t\t\tanwesenheit_user_id: entry.anwesenheit_user_id,\n\t\t\t\t\tanwesenheit_id: entry.anwesenheit_id,\n\t\t\t\t\tvon: kontrolle?.von,\n\t\t\t\t\tbis: kontrolle?.bis\n\t\t\t\t})\n\n\t\t\t\tconst datum = entry.datum + ' | ' + kontrolle.von + ' - ' + kontrolle.bis\n\t\t\t\tif (this.lektorState.dates.indexOf(datum) < 0) {\n\t\t\t\t\tthis.lektorState.dates.push(datum)\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\t// sort dates and termine\n\t\t\tthis.lektorState.dates.sort((a, b) => {\n\t\t\t\tconst as = a.split('|')\n\t\t\t\tconst bs = b.split('|')\n\t\t\t\treturn as > bs ? 1 : a < b ? -1 : 0\n\t\t\t})\n\t\t},\n\t\tasync setupLektorComponent() {\n\t\t\t\n\t\t\tthis.$entryParams.available_termine.value.forEach(termin => {\n\t\t\t\tconst dateParts = termin.datum.split(\"-\")\n\t\t\t\ttermin.datumFrontend = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\t\t\t})\n\n\t\t\tif (this.$entryParams.available_termine.value.length) {\n\t\t\t\tconst closestTermin = this.$entryParams.findClosestTermin(this.$entryParams.available_termine.value);\n\t\t\t\tconst termin = new Date(closestTermin.datum)\n\t\t\t\tconst closestTerminSameDay = this.selectedDate.getDate() === termin.getDate() && this.selectedDate.getMonth() === termin.getMonth && this.selectedDate.getFullYear() === termin.getFullYear()\n\t\t\t\tclosestTermin.isSameDay = closestTerminSameDay\n\t\t\t\tthis.setTimespanForKontrolleTermin(closestTermin, true)\n\n\t\t\t\tthis.$entryParams.available_termine.value.forEach(t => this.lektorState.dates.push(t.datum))\n\n\t\t\t} else {\n\t\t\t\tthis.setTimespanForKontrolleNow()\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.lektorState.dates = []\n\t\t\tthis.lektorState.studentsData = new Map()\n\t\t\t// format student zusatz and prepare entry map for anw data\n\t\t\tthis.lektorState.students.forEach(entry => {\n\t\t\t\tentry.zusatz = this.formatZusatz(entry, this.lektorState.stsem)\n\t\t\t\tthis.lektorState.studentsData.set(entry.prestudent_id, [])\n\t\t\t})\n\t\t\t\n\t\t\tthis.setEntries(this.lektorState.anwEntries, this.lektorState.kontrollen)\n\t\t\t// this.$refs.kontrolleDropdown.setKontrollen(this.lektorState.kontrollen)\n\t\t\t\n\t\t\t// datepicker only allows to select for distinct days but one day can lead to several\n\t\t\t// kontrollen on that day during different timespans -> find all from that date and postfix the von - bis times\n\t\t\t\n\t\t\t// determine if table goes with all available dates - kontrollen\n\t\t\t// or all kontrollen of a selected date if one or more are found\n\t\t\tconst dates = this.determineDates()\n\t\t\t\n\t\t\t// define VISIBLE tabulator columns with dynamic columns\n\t\t\tconst anwCols = this.buildColsForDates(dates)\n\t\t\t\n\t\t\tconst newCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\t\t\tthis.lektorState.dates.forEach(date => {\n\t\t\t\tnewCols.push({\n\t\t\t\t\ttitle: date,\n\t\t\t\t\tfield: date,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tnewCols.push(this.anwesenheitenTabulatorOptions.columns.find(col => col.field == 'sum'))\n\t\t\t// tableData prefilled with all dates & status\n\t\t\tthis.lektorState.tableStudentData = this.setupAllData(newCols)\n\t\t\tthis.studentCount = this.lektorState.students.length\n\t\t\t\n\t\t\t// // build together the tableData by iterating over each student and look for the status of every (datum | von - bis) entry\n\t\t\t// this.lektorState.students.forEach(student => {\n\t\t\t//\t\n\t\t\t// \tconst allEntStudentForCurrentDate = this.lektorState.entschuldigtStati.filter(status => {\n\t\t\t// \t\tconst vonDate = new Date(status.von)\n\t\t\t// \t\tconst bisDate = new Date(status.bis)\n\t\t\t// \t\tif(status.person_id === student.person_id && vonDate <= this.selectedDate && bisDate >= this.selectedDate) return true\n\t\t\t// \t\telse return false\n\t\t\t// \t})\n\t\t\t// \t// foundEntry.hasEntschuldigung = !!entschuldigungEntryStudent\n\t\t\t//\t\n\t\t\t// \tlet isEntschuldigt = null\n\t\t\t// \tallEntStudentForCurrentDate.forEach(entCurDate => {\n\t\t\t// \t\tif(entCurDate.akzeptiert === true) isEntschuldigt = true\n\t\t\t// \t})\n\t\t\t//\t\n\t\t\t// \tconst studentDataEntry = this.lektorState.studentsData.get(student.prestudent_id)\n\t\t\t// \tconst nachname = student.nachname + student.zusatz\n\t\t\t// \tconst gruppe = student.semester + student.verband + student.gruppe\n\t\t\t// \tconst newRow = {\n\t\t\t// \t\tprestudent_id: student.prestudent_id,\n\t\t\t// \t\tfoto: student.foto,\n\t\t\t// \t\tvorname: student.vorname,\n\t\t\t// \t\tnachname: nachname,\n\t\t\t// \t\tgruppe: gruppe,\n\t\t\t// \t\tentschuldigt: isEntschuldigt,\n\t\t\t// \t\tentschuldigungen: allEntStudentForCurrentDate,\n\t\t\t// \t\tsum: student.sum\n\t\t\t// \t}\n\n\t\t\tif (this.lektorState.showAllVar) {\n\t\t\t\tthis.setShowAll()\n\t\t\t} else {\n\n\t\t\t\t// set phrasen by field id instead of index\n\t\t\t\tthis.anwesenheitenTabulatorOptions.columns.forEach(async (col) => {\n\t\t\t\t\tswitch(col.field) {\n\t\t\t\t\t\tcase 'foto': \n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('global/foto'))\n\t\t\t\t\t\tcase 'prestudent_id':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('global/prestudentID'))\n\t\t\t\t\t\tcase 'student_id':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('ui/student_uid'))\n\t\t\t\t\t\tcase 'vorname':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('person/vorname'))\n\t\t\t\t\t\tcase 'nachname':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('person/nachname'))\n\t\t\t\t\t\tcase 'gruppe':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('lehre/gruppe'))\n\t\t\t\t\t\tcase 'sum':\n\t\t\t\t\t\t\tcol.titel = this.$capitalize(await this.$p.t('global/summe'))\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tthis.lektorState.tabulatorCols = anwCols\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(anwCols)\n\t\t\t\t\n\t\t\t\tthis.$refs.anwesenheitenTable.tabulator.setData(this.lektorState.tableStudentData);\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t\tsetCurrentCountsFromTableData() {\n\t\t\t\n\t\t\tif(this.selectedDateCount === 1) {\n\t\t\t\tthis.queryOnlyKontrolleShown()\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tsetupLektorState() {\n\t\t\tthis.lektorState.students = this.$entryParams.lektorState.students\n\t\t\tthis.lektorState.anwEntries = this.$entryParams.lektorState.anwEntries\n\t\t\tthis.lektorState.stsem = this.$entryParams.lektorState.stsem\n\t\t\tthis.lektorState.entschuldigtStati = this.$entryParams.lektorState.entschuldigtStati\n\t\t\tthis.lektorState.kontrollen = this.$entryParams.lektorState.kontrollen\n\t\t\tthis.lektorState.viewData = this.$entryParams.lektorState.viewData\n\t\t\tthis.lektorState.a_o_kz = this.$entryParams.lektorState.a_o_kz\n\t\t\tthis.lektorState.gruppen = new Set()\n\t\t\t\n\t\t\t// put query params back into url for expected f5 behaviour\n\t\t\tfunction updateQueryParam(key, value) {\n\t\t\t\tconst url = new URL(window.location);\n\t\t\t\turl.searchParams.set(key, value);\n\t\t\t\twindow.history.replaceState({}, '', url);\n\t\t\t}\n\t\t\t\n\t\t\tupdateQueryParam('stg_kz', this.$entryParams.stg_kz);\n\t\t\tupdateQueryParam('sem', this.$entryParams.sem);\n\t\t\tupdateQueryParam('lvid', this.$entryParams.lv_id);\n\t\t\tupdateQueryParam('sem_kurzbz', this.$entryParams.sem_kurzbz);\n\n\t\t\tthis.$entryParams.lektorState = null\n\t\t\tthis.setupLektorComponent()\n\t\t},\n\t\tsetupData(data) {\n\t\t\tthis.lektorState.students = data[0] ?? []\n\t\t\tthis.lektorState.anwEntries = data[1] ?? []\n\t\t\tthis.lektorState.stsem = data[2][0] ?? []\n\t\t\tthis.lektorState.entschuldigtStati = data[3] ?? []\n\t\t\tthis.lektorState.kontrollen = data[4] ?? []\n\t\t\tthis.lektorState.kontrollen.forEach(k => {\n\t\t\t\tconst dateparts = k.datum.split(\".\")\n\t\t\t\tk.jsDate = new Date(dateparts[2],dateparts[1] - 1,dateparts[0])\n\t\t\t})\n\t\t\tthis.lektorState.viewData = data[5] ?? []\n\t\t\tthis.$entryParams.available_termine.value = this.getAvailableTermine()\n\t\t\tthis.lektorState.a_o_kz = data[7] ?? []\n\t\t\tthis.lektorState.gruppen = new Set()\n\n\t\t\tthis.setupLektorComponent()\n\t\t},\n\t\tgetAvailableTermine() {\n\t\t\tif(this.$entryParams.allLeTermine && this.$entryParams.allLeTermine[this.$entryParams.selected_le_id.value]) {\n\t\t\t\treturn this.$entryParams.allLeTermine[this.$entryParams.selected_le_id.value] ?? []\n\t\t\t} else {\n\t\t\t\t// this should never happen since we always have termine setup before LE but still handling the odd case\n\t\t\t\tthis.$fhcAlert.alertError(\"Keine Termine gefunden\")\n\t\t\t\treturn  []\n\t\t\t}\n\t\t},\n\t\tasync maUIDchangedHandler() {\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\t// this.$refs.LEDropdown.resetData()\n\n\t\t\tthis.$emit('maUIDChanged')\n\t\t\tthis.handleLEChanged()\n\t\t},\n\t\topenNewAnwesenheitskontrolleModal() {\n\t\t\tthis.$refs.modalContainerNewKontrolle.show()\n\t\t},\n\t\tchangeAnwStatus(cell, prestudent_id) {\n\t\t\tconst value = cell.getValue()\n\t\t\tif (value === undefined) return\n\t\t\tlet date = cell.getColumn().getField() // '2024-10-16' or 'status'\n\t\t\tif (date === 'status') {\n\t\t\t\tdate = this.formatDateToDbString(this.selectedDate)\n\t\t\t}\n\n\t\t\tconst arrWrapped = this.lektorState.studentsData.get(prestudent_id)\n\t\t\tconst arr = JSON.parse(JSON.stringify(arrWrapped))\n\t\t\tconst found = arr.find(e => (e.datum + ' | ' + e.von + ' - ' + e.bis) === date)\n\t\t\tconst anwesenheit_user_id = found?.anwesenheit_user_id\n\t\t\tconst anwesenheit_id = found?.anwesenheit_id\n\t\t\tconst newEntry = {\n\t\t\t\tprestudent_id, date, status: value, anwesenheit_user_id, anwesenheit_id\n\t\t\t}\n\t\t\tthis.handleChange(newEntry)\n\t\t},\n\t\thandleChange(newEntry) {\n\n\t\t\t// check if the entry is in the original tableData with the same status\n\t\t\tconst student = this.lektorState.studentsData.get(newEntry.prestudent_id)\n\t\t\tconst original = student.find(v => (Reflect.get(v, 'datum') + ' | ' + Reflect.get(v, 'von') + ' - ' + Reflect.get(v, 'bis')) === newEntry.date)\n\t\t\tconst updateFoundIndex = this.changedData.findIndex(e => e.prestudent_id === newEntry.prestudent_id && e.date === newEntry.date)\n\t\t\tif (updateFoundIndex >= 0) {\n\t\t\t\tthis.changedData.splice(updateFoundIndex, 1)\n\t\t\t}\n\t\t\t\t\n\t\t\tif (newEntry.status !== original.status) {\n\t\t\t\tthis.changedData.push(newEntry)\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tvalidateTimespan(beginn, ende, date, anwesenheit_id = null) {\n\t\t\tconst newAnwVonDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), beginn.hours, beginn.minutes, beginn.seconds)\n\t\t\tconst newAnwBisDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), ende.hours, ende.minutes, ende.seconds)\n\t\t\t\n\t\t\tif (newAnwBisDate <= newAnwVonDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorValidateTimes'));\n\t\t\t\treturn false\n\t\t\t} else if(newAnwBisDate > newAnwVonDate) {\n\t\t\t\t// timespan from von to bis needs to be 3/4 of a teaching unit\n\t\t\t\tconst minDiff = (newAnwBisDate - newAnwVonDate) / (1000 * 60)\n\t\t\t\tconst threshold = (this.$entryParams.permissions.einheitDauer ?? 0.75 ) * 60\n\t\t\t\tif(minDiff < threshold) {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrollDauerUnterMindestwert', [threshold]));\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// when editing dont compare with overlap with its own timespan, but on same date\n\t\t\tlet kontrollenToCheck = null\n\t\t\tif(anwesenheit_id !== null) { \n\t\t\t\tkontrollenToCheck = this.lektorState.kontrollen.filter(k => k.anwesenheit_id !== anwesenheit_id && k.jsDate.getFullYear() === date.getFullYear() && k.jsDate.getMonth() === date.getMonth() && k.jsDate.getDate() === date.getDate())\n\t\t\t} else {\n\t\t\t\tkontrollenToCheck = this.lektorState.kontrollen.filter(k => k.jsDate.getFullYear() === date.getFullYear() && k.jsDate.getMonth() === date.getMonth() && k.jsDate.getDate() === date.getDate())\n\t\t\t}\n\t\t\t\n\t\t\t// compare timespans\n\t\t\tconst len = kontrollenToCheck.length\n\t\t\tfor(let i = 0; i < len; i++) {\n\t\t\t\tconst k = kontrollenToCheck[i]\n\t\t\t\t\n\t\t\t\tconst kVonParts = k.von.split(\":\")\n\t\t\t\tconst kBisParts = k.bis.split(\":\")\n\t\t\t\t\n\t\t\t\tconst kVonDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), kVonParts[0], kVonParts[1], kVonParts[2])\n\t\t\t\tconst kBisDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), kBisParts[0], kBisParts[1], kBisParts[2])\n\n\t\t\t\tif(newAnwVonDate < kBisDate && newAnwBisDate > kVonDate) {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleTimeOverlap', [k.von, k.bis]));\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// date of kontrolle needs to be in range or a stundenplantermin\n\t\t\tif(!this.kontrollDatumSourceStundenplan && this.selectedDate <= this.minDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleDatumOutOfRange'));\n\t\t\t\treturn false\n\t\t\t} else if(this.selectedDate > this.maxDate) {\n\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/kontrolleDatumOutOfRange'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\t// compare with other existing kontrollen of the same day for current LE\n\n\t\t\treturn true;\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setupMounted() {\n\t\t\tthis.loading = true\n\t\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.boundPollAnwesenheit = this.pollAnwesenheit.bind(this)\n\t\t\tthis.boundRegenerateQR = this.regenerateQR.bind(this)\n\t\t\tthis.boundProgressCounter = this.progressCounter.bind(this)\n\n\t\t\t// ceiling to check for inside progress calc\n\t\t\tthis.progressMax = this.$entryParams.permissions.regenerateQRTimer / 10\n\t\t\t// which is called in an interval\n\t\t\tthis.progressTimerInterval = 10\n\n\t\t\t// see if test is still running\n\t\t\tthis.getExistingQRCode()\n\n\t\t\t// fetch LE data\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t\n\t\t\tthis.reloadState(ma_uid, date)\n\t\t},\n\t\thandleLEChanged() {\n\t\t\tthis.$refs.showAllTickbox.checked = false\n\t\t\tthis.lektorState.showAllVar = false\n\t\t\t\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tthis.reloadState(ma_uid, date)\n\n\t\t\tthis.getExistingQRCode()\n\t\t},\n\t\tdownloadCSV() {\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.download('csv', this.getCSVFilename, {bom: true})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tredrawTable() {\n\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.redraw(true)\n\t\t},\n\t\tentschuldigtColoring: function (row) {\n\t\t\tconst data = row.getData()\n\t\t\t\n\t\t\tif(!data.entschuldigungen?.length) return\n\n\t\t\t// filter for entschuldigungen relevant to selected date\n\t\t\tconst entForSelectedDate = data.entschuldigungen.filter(status => {\n\t\t\t\tconst vonDate = new Date(status.von)\n\t\t\t\tconst bisDate = new Date(status.bis)\n\t\t\t\tif(vonDate <= this.selectedDate && bisDate >= this.selectedDate) return true\n\t\t\t\telse return false\n\t\t\t})\n\n\t\t\tlet isEntschuldigt = null\n\t\t\tentForSelectedDate.forEach(entCurDate => {\n\t\t\t\tif(entCurDate.akzeptiert === true) isEntschuldigt = true\n\t\t\t})\n\t\t\t\n\t\t\tif (isEntschuldigt) {\n\t\t\t\trow.getElement().style.color = \"#0335f5\";\n\t\t\t} else if(entForSelectedDate.length) {\n\t\t\t\trow.getElement().style.color = \"#12d5d5\";\n\t\t\t}\n\t\t},\n\t\ttogglePopOut() {\n\t\t\t// todo: handle BS backdrop\n\t\t\t\n\t\t\tif (!this.externalWindow) {\n\t\t\t\tthis.externalWindow = window.open(\"\", \"\", \"width=1000,height=1000\");\n\n\t\t\t\tconst container = document.createElement(\"div\");\n\t\t\t\tcontainer.id = \"externalModalContainer\";\n\t\t\t\tcontainer.style.setProperty('min-width', '100%')\n\t\t\t\tcontainer.style.setProperty('min-height', '100%')\n\t\t\t\tthis.externalModalContainer = container;\n\n\t\t\t\tconst toClone = document.getElementById('qrwrap')\n\n\t\t\t\t// const toClone = document.getElementById('qrcontent')\n\t\t\t\t// container.appendChild(toClone.cloneNode(true)) // breaks vue reactivity\n\t\t\t\tcontainer.appendChild(toClone)\n\t\t\t\t\n\t\t\t\tthis.externalWindow.document.body.appendChild(container);\n\n\t\t\t\tfor (const el of document.head.querySelectorAll('style, link[rel=stylesheet]')) {\n\t\t\t\t\tconst clone = el.cloneNode(true)\n\t\t\t\t\tthis.externalWindow.document.head.appendChild(clone)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Handle window close event, called in the end of close browser window, stop kontrolle and move back qr modal\n\t\t\t\tthis.externalWindow.addEventListener(\"beforeunload\", () => {\n\t\t\t\t\tthis.handleCloseExternalWindow()\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.externalWindow.close()\n\t\t\t}\n\t\t},\n\t\thandleCloseExternalWindow() {\n\t\t\tconst qr = this.externalWindow.document.getElementById('qrwrap')\n\t\t\tconst main = document.getElementById('lektorWrap')\n\t\t\tmain.appendChild(qr)\n\n\t\t\tthis.externalWindow.close();\n\t\t\tthis.externalWindow = null;\n\t\t\tthis.externalModalContainer = null;\n\t\t},\n\t\tcheckForBetreuungAndAlert() {\n\t\t\t// throw an alert when Betreuung is selected which usually should not be attendance checked\n\n\t\t\tconst alertConfig = this.$entryParams.permissions.alert_lehrform.find(a => a.lehrform_kurzbz === this.$entryParams.selected_le_info?.value?.lehrform_kurzbz)\n\t\t\tif(alertConfig) {\n\t\t\t\tconst text = this.$entryParams.permissions.lang === 'German' ? alertConfig.german_alert_text : alertConfig.english_alert_text\n\t\t\t\tthis.$fhcAlert.alertWarning(text)\n\t\t\t}\n\t\t},\n\t\tcalculateTableHeight() {\n\t\t\t\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight : window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['lektor'].value = screenY - rect.top\n\n\t\t\tif(this.$refs.anwesenheitenTable.tabulator) this.$refs.anwesenheitenTable.tabulator.redraw(true)\n\t\t},\n\t\tdetermineDates() {\n\t\t\t// date string formatting\n\t\t\tconst selectedDateDBFormatted = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst dateParts = selectedDateDBFormatted.split(\"-\")\n\t\t\tconst selectedDateFrontendFormatted = dateParts[2] + '.' + dateParts[1] + '.' + dateParts[0]\n\n\t\t\t// standard -> show all termine of a certain date\n\t\t\tconst datesFiltered = this.lektorState.dates.filter(d => d.startsWith(selectedDateDBFormatted))\n\n\t\t\t// // fall back to all termine if on selected date none are found\n\t\t\t// if(!datesFiltered.length && this.lektorState.dates.length) { // dont spam alerts when LE just has no kontrollen yet\n\t\t\t\n\t\t\t// \tthis.$fhcAlert.alertWarning(this.$p.t('global/keineKontrollenAnDatumFallback', [selectedDateFrontendFormatted]))\n\t\t\t// \treturn this.lektorState.dates\n\t\t\t// }\n\n\t\t\treturn datesFiltered\n\t\t},\n\t\tbuildColsForDates(dates) {\n\t\t\tconst anwCols = this.anwesenheitenTabulatorOptions.columns.slice(0, 5)\n\n\t\t\tdates.forEach(d => {\n\t\t\t\tanwCols.push({\n\t\t\t\t\ttitle: d,\n\t\t\t\t\tfield: d,\n\t\t\t\t\teditor: 'list',\n\t\t\t\t\teditorParams: {\n\t\t\t\t\t\tvalues: Vue.computed(()=> {\n\t\t\t\t\t\t\tif(this.$entryParams.permissions.admin || this.$entryParams.permissions.assistenz) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.entschuldigt_status]\n\t\t\t\t\t\t\t} else if (this.$entryParams.permissions.lektor) {\n\t\t\t\t\t\t\t\treturn [this.$entryParams.permissions.anwesend_status,\n\t\t\t\t\t\t\t\t\tthis.$entryParams.permissions.abwesend_status]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\teditable: this.checkCellEditability,\n\t\t\t\t\tformatter: this.anwesenheitFormatterValue,\n\t\t\t\t\ttitleFormatter: this.anwColTitleFormatter,\n\t\t\t\t\thozAlign:\"center\",\n\t\t\t\t\twidthGrow: 1,\n\t\t\t\t\ttooltip: this.tooltipTableRow,\n\t\t\t\t\tminWidth: 150\n\t\t\t\t})\n\t\t\t})\n\t\t\tanwCols.push(this.anwesenheitenTabulatorOptions.columns.find(col => col.field == 'sum'))\n\t\t\t\n\t\t\tthis.selectedDateCount = dates.length\n\t\t\t\n\t\t\treturn anwCols\n\t\t},\n\t\trestartKontrolle(kontrolle) {\n\t\t\tconst kdate = new Date(kontrolle.datum)\n\t\t\t// js months 0-11, php months 1-12\n\t\t\tconst date = {\n\t\t\t\tyear: kdate.getFullYear(),\n\t\t\t\tmonth: kdate.getMonth() + 1,\n\t\t\t\tday: kdate.getDate()\n\t\t\t}\n\t\t\t\n\t\t\tthis.$api.call(ApiKontrolle.restartKontrolle(kontrolle.anwesenheit_id,\n\t\t\t\tthis.$entryParams.selected_le_id.value,\n\t\t\t\tdate))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.data?.svg) {\n\t\t\t\t\t\tthis.changes = true\n\t\t\t\t\t\tthis.$refs.modalContainerEditKontrolle.hide()\n\t\t\t\t\t\tthis.showQR(res.data)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tupdateKontrolle() {\n\t\t\tconst dataparts = this.editKontrolle.datum.split('.')\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\tconst dateAnwFormat = dataparts[2] + '-' + dataparts[1] + '-' + dataparts[0]\n\n\t\t\tif (!this.validateTimespan(this.editKontrolle.editVon, this.editKontrolle.editBis, this.editKontrolle.jsDate, this.editKontrolle.anwesenheit_id)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tthis.loading = true\n\t\t\tthis.$api.call(ApiKontrolle.updateKontrolle(\n\t\t\t\tthis.editKontrolle.anwesenheit_id,\n\t\t\t\tthis.editKontrolle.editVon,\n\t\t\t\tthis.editKontrolle.editBis,\n\t\t\t\tthis.$entryParams.selected_le_id.value))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.meta.status === 'success') {\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/successSave'))\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst k = this.lektorState.kontrollen.find(k => k.anwesenheit_id === this.editKontrolle.anwesenheit_id)\n\t\t\t\t\t\tk.von = this.editKontrolle.editVon.hours + ':' + this.editKontrolle.editVon.minutes + ':' + this.editKontrolle.editVon.seconds\n\t\t\t\t\t\tk.bis = this.editKontrolle.editBis.hours + ':' + this.editKontrolle.editBis.minutes + ':' + this.editKontrolle.editBis.seconds\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.editKontrolle = null\n\t\t\t\t\t\t\n\t\t\t\t\t\t// reload tableData since different kontroll times means different % for all students\n\t\t\t\t\t\tthis.$api.call(\n\t\t\t\t\t\t\tApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(\n\t\t\t\t\t\t\t\tthis.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, dateAnwFormat))\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\topenKontrolleInfo() {\n\t\t\t\n\t\t},\n\t\thandleTitleSet(title) {\n\t\t\tthis.selectedStudent.title = title\n\t\t},\n\t\thandleUpdateAnwesenheit() {\n\t\t\tconst date = this.formatDateToDbString(this.selectedDate)\n\t\t\tconst ma_uid = this.$entryParams.selected_maUID.value?.mitarbeiter_uid ?? this.ma_uid\n\t\t\t// reload tableData to get state back\n\t\t\tthis.$api.call(\n\t\t\t\tApiKontrolle.fetchAllAnwesenheitenByLvaAssigned(\n\t\t\t\t\tthis.lv_id, this.sem_kurzbz, this.$entryParams.selected_le_id.value, ma_uid, date))\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif(res.meta.status === 'success') {\n\t\t\t\t\t\tthis.setupData(res.data)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tif (this.$refs.anwesenheitenTable?.tabulator) this.$refs.anwesenheitenTable.tabulator.setData([])\n\t\t\t\t}).finally(() => {\n\t\t\t\tthis.loading = false\n\t\t\t})\n\t\t}\n\t\t\n\t},\n\tcreated(){\n\t\tthis.lv_id = this.$entryParams.lv_id\n\t\tthis.sem_kurzbz = this.$entryParams.sem_kurzbz\n\t\tthis.ma_uid = this.$entryParams.permissions.authID\n\t},\n\tmounted() {\n\t\tthis.setupMounted()\n\t\t\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted(){\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t\t// anwesenheitskontrolle could be active\n\t\tthis.stopPollingAnwesenheiten()\n\t},\n\twatch: {\n\t\tselectedDate(newVal) {\n\t\t\tif(newVal === \"\") {\n\t\t\t\tthis.selectedDate = new Date(Date.now())\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tconst dates = this.determineDates()\n\t\t\tconst anwCols = this.buildColsForDates(dates)\n\t\t\t\n\t\t\tthis.setCurrentCountsFromTableData()\n\n\t\t\tthis.handleChangeDatum(this.selectedDate) // look up if datum is in termin list\n\t\t\t\n\t\t\t// todo: range status anzeigen irgendwo\n\t\t\t// if(!this.kontrollDatumSourceStundenplan && newVal <= this.minDate) this.$fhcAlert.alertWarning(this.$p.t('global/kontrolleDatumOutOfRange'))\n\t\t\t// else if (!this.kontrollDatumSourceStundenplan && newVal > this.maxDate) this.$fhcAlert.alertWarning(this.$p.t('global/kontrolleDatumOutOfRange'))\n\n\t\t\tthis.lektorState.tabulatorCols = anwCols\n\t\t\t\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.clearSort()\n\t\t\tthis.$refs.anwesenheitenTable.tabulator.setColumns(anwCols)\n\n\t\t},\n\t\tselectedDateCount(newVal, oldVal) {\n\t\t\t// watch the nr of columns rendered on any given date,\n\t\t\t// if the amount is equal to all avaialble kontrollen tick the showAll box to avoid confusion\n\t\t\tif(newVal == this.lektorState.kontrollen.length) {\n\t\t\t\tthis.$refs.showAllTickbox.checked = true\n\t\t\t\tthis.lektorState.showAllVar = true\n\t\t\t} else {\n\t\t\t\tthis.$refs.showAllTickbox.checked = false\n\t\t\t\tthis.lektorState.showAllVar = false\n\t\t\t}\n\t\t\t\n\t\t\t// if just one kontrolle is selected query counts for that kontrolle\n\t\t\tif(newVal === 1) {\n\t\t\t\t\n\t\t\t\tthis.queryOnlyKontrolleShown()\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentLEhasRightToSkipQR() {\n\t\t\tif(!this.$entryParams.permissions.no_qr_lehrform || !this.$entryParams.permissions.no_qr_lehrform.length) return false\n\t\t\tif(!this.$entryParams.selected_le_info?.value) return false\n\t\t\treturn this.$entryParams.permissions.no_qr_lehrform.includes(this.$entryParams.selected_le_info?.value?.lehrform_kurzbz)\n\t\t},\n\t\tgetTitle() {\n\t\t\treturn this.$entryParams.selected_le_info?.value?.infoString ?? ''\n\t\t},\n\t\tgetTabulatorStyle(){\n\t\t\treturn \"transform: translateY(-\"+this.translateOffset+\"px); overflow: hidden;\"\n\t\t},\n\t\tgetTooltipKontrolleLoeschen() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLektorDeleteKontrolle', [this.$entryParams.permissions.kontrolleDeleteMaxReach ]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipKontrolleNeu() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLektorStartKontrolleV4', [(this.$entryParams.permissions.einheitDauer ?? 0.75) * 60]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipZeitFromStundenplan() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipUnterrichtZeitCustomV2'),//'Zeiten wurden aus dem Stundenplan entnommen, nur in Ausnahmefällen überschreiben!',\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipDatumFromStundenplan() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipUnterrichtDatumCustomV2'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipLegende() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipLegende'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipCsv() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipCsv'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipEdit() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipEdit'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipSaveChanges() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipSaveChanges'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipRestartKontrolle() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipRestartKontrolle'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipDeleteKontrolle() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipDeleteKontrolle'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipEditKontrollzeiten() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipEditKontrollzeiten'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetSaveBtnClass() {\n\t\t\treturn !this.changedData.length ? \"btn btn-secondary ml-2\" : \"btn btn-primary ml-2\"\n\t\t},\n\t\tgetEditBtnClass() {\n\t\t\treturn !this.lektorState.kontrollen.length ? \"btn btn-secondary ml-2\" : \"btn btn-success ml-2\"\n\t\t},\n\t\tgetCSVFilename() {\n\t\t\tlet str = this.$entryParams.selected_le_info?.value?.csvInfoString ?? ''\n\t\t\tstr += '_'+ this.$entryParams?.viewDataLv?.bezeichnung + '_'\n\t\t\tstr += this.lektorState.showAllVar ? 'AllDates' : this.selectedDate.toDateString()\n\t\t\treturn str\n\t\t},\n\t\thighlights() { // highlight either kontrollen/termine/allowedRange based on setting\n\t\t\tconst highlights = []\n\t\t\tif(this.highlightMode === 'allowed') {\n\t\t\t\tconst current = new Date(this.minDate)\n\n\t\t\t\twhile (current <= this.maxDate) {\n\t\t\t\t\thighlights.push(new Date(current))\n\t\t\t\t\tcurrent.setDate(current.getDate() + 1)\n\t\t\t\t}\n\n\t\t\t\tif(this.$entryParams.available_termine.value) this.$entryParams.available_termine.value.forEach(v => {\n\t\t\t\t\thighlights.push(new Date(v.datum))\n\t\t\t\t})\n\t\t\t} else if (this.highlightMode === 'kontrollen') {\n\t\t\t\tthis.lektorState.kontrollen.forEach(v => {\n\t\t\t\t\thighlights.push(v.jsDate)\n\t\t\t\t})\n\t\t\t} else if (this.highlightMode === 'termine') {\n\t\t\t\tif(this.$entryParams.available_termine.value) this.$entryParams.available_termine.value.forEach(v => {\n\t\t\t\t\thighlights.push(new Date(v.datum))\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\n\t\t\treturn highlights\n\t\t}\n\t},\n\ttemplate:`\n\t\t<div v-show=\"loading\" style=\"position: absolute; width: 100vw; height: 100vh; background: rgba(255,255,255,0.5); z-index: 8500;\"></div>\n\t\t\n\t\t<core-base-layout>\t\t\t\n\t\t\t<template #main>\n\t\t\t\t<div id=\"lektorWrap\">\n\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerNewKontrolle\" class=\"bootstrap-prompt\" dialogClass=\"modal-xl\">\n\t\t\t\t\t\t<template v-slot:title>\t\t\t\n\t\t\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipKontrolleNeu\">\n\t\t\t\t\t\t\t\t{{ $p.t('global/neueAnwKontrolle') }}\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t\t\t\t\t\t<h5 class=\"mb-4 border-bottom pb-2\">{{ $p.t('global/unterrichtzeit') }}</h5>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mb-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"beginn\" class=\"form-label mb-0 fw-semibold\">{{ $p.t('global/anwKontrolleVon') }}</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"lektorState.beginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeBeginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-show=\"!kontrollZeitSourceStundenplanBeginn\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t class=\"d-flex align-items-start small\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t v-tooltip.bottom=\"getTooltipZeitFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation mt-1 me-2\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ $p.t('global/zeitNichtAusStundenplanBeginnV2') }}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mb-3\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"von\" class=\"form-label mb-0 fw-semibold\">{{ $capitalize($p.t('global/anwKontrolleBis')) }}</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"lektorState.ende\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeEnde\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-show=\"!kontrollZeitSourceStundenplanEnde\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t class=\"d-flex align-items-start small\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t v-tooltip.bottom=\"getTooltipZeitFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation mt-1 me-2\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ $p.t('global/zeitNichtAusStundenplanEndeV2') }}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mb-4\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"datum\" class=\"form-label mb-0 fw-semibold\">{{ $p.t('global/kontrolldatumV2') }}</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\t\t\t\tref=\"insideDateSelect\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"selectedDate\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t@date-update=\"handleAutoApply\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:highlight=\"highlights\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template #action-row>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"margin-left: 12px;\">{{ $p.t('global/highlightsettings') }}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"justify-content-center align-items-center flex-nowrap overflow-hidden\" style=\"display: flex; height: 80px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'termine'\" @click=\"highlightMode = 'termine';\">{{$p.t('global/termineV2')}} </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'kontrollen'\" @click=\"highlightMode = 'kontrollen';\">{{$p.t('global/kontrollen')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'allowed'\" @click=\"highlightMode = 'allowed';\">{{$p.t('global/allowed')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-show=\"!kontrollDatumSourceStundenplan\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t class=\"d-flex align-items-start small\" \n\t\t\t\t\t\t\t\t\t\t\t\t\t v-tooltip.bottom=\"getTooltipDatumFromStundenplan\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-triangle-exclamation mt-1 me-2\"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{{ $p.t('global/datumNichtAusStundenplanV2') }}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<hr class=\"my-4\" />\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t\t\t\t\t\t\t\t<TermineDropdown ref=\"termineDropdown\" @terminChanged=\"handleTerminChanged\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<button v-if=\"currentLEhasRightToSkipQR\" type=\"button\" class=\"btn btn-primary\" @click=\"insertAnwWithoutQR\">{{ $p.t('global/kontrolleOhneQR') }}</button>\n\t\t\t\t\t\t\t<button v-show=\"!showQRLoadingSpinner\" :disabled=\"qr != null\" type=\"button\" class=\"btn btn-primary\" @click=\"startNewAnwesenheitskontrolle\">{{ $p.t('global/jetztStarten') }}</button>\n\t\t\t\t\t\t\t<div v-show=\"showQRLoadingSpinner\">\n\t\t\t\t\t\t\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerEditKontrolle\" class=\"bootstrap-prompt\"\n\t\t\t\t\tdialogClass=\"modal-xl\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t\t{{ $p.t('global/editAnwKontrolle') }}\n\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<template v-for=\"kontrolle in lektorState.kontrollen\">\n\n\t\t\t\t\t\t\t\t\t<div class=\"row p-2\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-5 d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<KontrolleDisplay :kontrolle=\"kontrolle\"></KontrolleDisplay>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t\t\t<AnwCountDisplay :anwesend=\"kontrolle.anwesend\" :abwesend=\"kontrolle.abwesend\" :entschuldigt=\"kontrolle.entschuldigt\"/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-3 d-flex justify-content-end\">\n\t\t\t\t\t\t\t\t\t\t\t<button @click=\"restartKontrolle(kontrolle)\" role=\"button\" class=\"btn btn-secondary\" v-tooltip.bottom=\"getTooltipRestartKontrolle\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-rotate-right\"></i>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<button style=\"margin-left: 12px;\" @click=\"deleteAnwesenheitskontrolle(kontrolle)\" role=\"button\" class=\"btn btn-danger\" v-tooltip.bottom=\"getTooltipDeleteKontrolle\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-trash\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<button style=\"margin-left: 12px;\" @click=\"editAnwesenheitskontrolle(kontrolle)\" role=\"button\" class=\"btn btn-success\" v-tooltip.bottom=\"getTooltipEditKontrollzeiten\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-pen\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div v-if=\"editKontrolle && editKontrolle === kontrolle\" class=\"row align-items-center p-4\" style=\"border: 0px;\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"beginn\" class=\"form-label\">{{ $p.t('global/anwKontrolleVon') }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-9\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<datepicker v-if=\"editKontrolle\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"editKontrolle.editVon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeBeginn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row align-items-center mt-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-3\" style=\"align-items: center; justify-items: center;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"von\" class=\"form-label\">{{ $capitalize($p.t('global/anwKontrolleBis')) }}</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-9\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<datepicker v-if=\"editKontrolle\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"editKontrolle.editBis\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@update:model-value=\"handleChangeEnde\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:time-picker=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:auto-apply=\"true\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center w-100 btn\" @click=\"updateKontrolle\">Speichern</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Divider/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\t\t\n\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerLegende\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ $p.t('global/statusLegende') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t<Statuslegende></Statuslegende>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<bs-modal ref=\"modalContainerStudentByLva\" class=\"bootstrap-prompt\" dialogClass=\"modal-xl\" :allowFullscreenExpand=\"true\">\n\t\t\t\t\t\t<template v-slot:title>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ $capitalize($p.t('global/studentByLVATitle'))}}: {{ selectedStudent?.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t<StudentByLvaComponent ref=\"studentByLva\" v-if=\"selectedStudent\" \n\t\t\t\t\t\t\t\t@anwesenheitenUpdated=\"handleUpdateAnwesenheit\"\n\t\t\t\t\t\t\t\t@titleSet=\"handleTitleSet\"\n\t\t\t\t\t\t\t\t:id=\"selectedStudent.id\" \n\t\t\t\t\t\t\t\t:lv_id=\"selectedStudent.lv_id\"\n\t\t\t\t\t\t\t\t:sem_kz=\"selectedStudent.sem_kz\"\n\t\t\t\t\t\t\t></StudentByLvaComponent>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</bs-modal>\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"qrwrap\">\n\t\t\t\t\t\t<bs-modal ref=\"modalContainerQR\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\"  backdrop=\"static\" \n\t\t\t\t\t\t :keyboard=false :noCloseBtn=\"true\" :allowFullscreenExpand=\"true\">\n\t\t\t\t\t\t\t<template v-slot:title>{{ $capitalize($p.t('global/kontrolle')) }}: {{ kontrolleVonBis }}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\t\t\t<div id=\"qrcontent\">\n\t\t\t\t\t\t\t\t\t<h1 class=\"text-center\">Code: {{code}}</h1>\n\t\t\t\t\t\t\t\t\t<div v-html=\"qr\" class=\"text-center\"></div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<AnwCountDisplay :anwesend=\"checkInCount\" :abwesend=\"abwesendCount\" :entschuldigt=\"entschuldigtCount\"/>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"width: 80%; margin-left: 10%;\">\n\t\t\t\t\t\t\t\t\t\t<progress \n\t\t\t\t\t\t\t\t\t\t\tv-if=\"$entryParams.permissions.useRegenerateQR\"\n\t\t\t\t\t\t\t\t\t\t\t:max=\"progressMax\"\n\t\t\t\t\t\t\t\t\t\t\t:value=\"regenerateProgress\">\n\t\t\t\t\t\t\t\t\t\t</progress>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"stopAnwesenheitskontrolle\">{{ $capitalize($p.t('global/endAnwKontrolle')) }}</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</bs-modal>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\" id=\"lektorContentHeader\" ref=\"lektorContentHeader\">\n\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"col-6\">\t\t\t\t\n\t\t\t\t\t\t\t<div style=\"display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;\">\n\t\t\t\t\t\t\t\t<h1 class=\"h4\">{{ $entryParams.selected_le_info?.value?.infoString ? getTitle : '' }}</h1>\n\t\t\t\t\t\t\t\t<h6>{{$entryParams.viewDataLv.bezeichnung}}</h6>\t\t\n\t\t\t\t\t\t\t\t<AnwCountDisplay  v-if=\"selectedDateCount == 1 & !lektorState?.showAllVar\" :anwesend=\"checkInCount\" :abwesend=\"abwesendCount\" :entschuldigt=\"entschuldigtCount\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\n\t\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t\t<div class=\"row g-3 align-items-end\">\n\t\t\t\t\t\t\t\t<div class=\"col-5\" v-if=\"$entryParams?.permissions?.admin\">\n\t\t\t\t\t\t\t\t\t<MaUIDDropdown \n\t\t\t\t\t\t\t\t\t\t:title=\"$capitalize($p.t('lehre/lektor'))\" \n\t\t\t\t\t\t\t\t\t\tid=\"maUID\" \n\t\t\t\t\t\t\t\t\t\tref=\"MADropdown\" \n\t\t\t\t\t\t\t\t\t\t@maUIDchanged=\"maUIDchangedHandler\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div :class=\"$entryParams?.permissions?.admin ? 'col-7' : 'col-12'\">\n\t\t\t\t\t\t\t\t\t<LehreinheitenDropdown \n\t\t\t\t\t\t\t\t\t\tid=\"lehreinheit\" \n\t\t\t\t\t\t\t\t\t\t:title=\"$capitalize($p.t('lehre/lehreinheit'))\" \n\t\t\t\t\t\t\t\t\t\tref=\"LEDropdown\" \n\t\t\t\t\t\t\t\t\t\t@leChanged=\"handleLEChanged\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class=\"row mt-4 align-items-center\">\n\t\t\t\t\t\t\t\t<div class=\"col-auto\">\n\t\t\t\t\t\t\t\t\t<label for=\"datum\" class=\"form-label mb-0\">{{ $p.t('global/kontrolldatumV2') }}</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\t\t\tref=\"outsideDateSelect\"\n\t\t\t\t\t\t\t\t\t\tv-model=\"selectedDate\"\n\t\t\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\t\t\t\t@date-update=\"handleAutoApply\"\n\t\t\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t\t\t:highlight=\"highlights\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<template #action-row>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"margin-left: 12px;\">{{ $p.t('global/highlightsettings') }}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"justify-content-center align-items-center flex-nowrap overflow-hidden\" style=\"display: flex; height: 80px;\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'termine'\" @click=\"highlightMode = 'termine';\">{{$p.t('global/termineV2')}} </button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'kontrollen'\" @click=\"highlightMode = 'kontrollen';\">{{$p.t('global/kontrollen')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button role=\"button\" class=\"col text-white option-entry text-center h-100 w-100 btn\" :selected=\"highlightMode == 'allowed'\" @click=\"highlightMode = 'allowed';\">{{$p.t('global/allowed')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"col-5 d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t<div class=\"form-check d-flex align-items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"form-check-input m-0\" \n\t\t\t\t\t\t\t\t\t\t\t@click=\"handleShowAllToggle\" \n\t\t\t\t\t\t\t\t\t\t\tid=\"all\" \n\t\t\t\t\t\t\t\t\t\t\tref=\"showAllTickbox\"\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"cursor: pointer; width: 1.2rem; height: 1.2rem;\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label mb-0\" for=\"all\" style=\"cursor: pointer; white-space: nowrap;\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $p.t('global/showAllKontrollen') }} | \n\t\t\t\t\t\t\t\t\t\t\t<span>{{ selectedDateCount }} / {{ lektorState.kontrollen.length }}</span>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<core-filter-cmpt\n\t\t\t\t\t\ttitle=\"\"\n\t\t\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t\t\tref=\"anwesenheitenTable\"\n\t\t\t\t\t\t:tabulator-options=\"anwesenheitenTabulatorOptions\"\n\t\t\t\t\t\t:tabulator-events=\"anwesenheitenTabulatorEventHandlers\"\n\t\t\t\t\t\t:id-field=\"'anwesenheiten_id'\"\n\t\t\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t\t\t:newBtnShow=\"true\"\n\t\t\t\t\t\t:newBtnLabel=\"$p.t('global/neueAnwKontrolle')\"\n\t\t\t\t\t\t:newBtnDisabled=\"!lektorState.students.length\"\n\t\t\t\t\t\t@click:new=openNewAnwesenheitskontrolleModal\n\t\t\t\t\t\t:sideMenu=\"false\"\n\t\t\t\t\t\tnoColumnFilter>\n\t\t\t\t\t\t\t<template #actions>\n\t\t\t\t\t\t\t\t<button @click=\"saveChanges\" :disabled=\"!changedData.length\" role=\"button\" :class=\"getSaveBtnClass\" v-tooltip.bottom=\"getTooltipSaveChanges\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-save\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"openEditModal\" :disabled=\"!lektorState.kontrollen.length\" role=\"button\" :class=\"getEditBtnClass\" v-tooltip.bottom=\"getTooltipEdit\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-pen\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"downloadCSV\" role=\"button\" class=\"btn btn-secondary ml-2\" v-tooltip.bottom=\"getTooltipCsv\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file-csv\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button @click=\"openLegend\" role=\"button\" class=\"btn btn-secondary ml-2\" v-tooltip.bottom=\"getTooltipLegende\">\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-book\"></i>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t</core-filter-cmpt>\t\n\t\t\t\t</div>\n\n\t\t\t</template>\n\t\t</core-base-layout>`\n\n};\n\nexport default LektorComponent","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsearch(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/search';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchAdvanced(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/searchAdvanced';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchdummy(searchsettings) {\n\t\tconst url = 'public/js/apps/api/dummyapi.php/Search';\n\t\treturn this.$fhcApi.post(url, searchsettings);\n\t}\n};\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/loadModule/' + category);\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst payload = {categories, language}\n\t\treturn this.$fhcApi.post('/api/frontend/v1/phrasen/setLanguage', payload);\n\t},\n\tgetLanguage() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getLanguage', {});\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getAllLanguages', {});\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/header',\n\t\t\t{ navigation_page }\n\t\t);\n\t},\n\tgetMenu: function(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/menu',\n\t\t\t{ navigation_page }\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/saveCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t);\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/applyFilterFields',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t);\n\t},\n\taddFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/addFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tgetFilter(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tabmeldung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/abmeldung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(stdsem, prestudent_id, grund) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/abmeldung/createAntrag', {\n\t\t\t\tstudiensemester: stdsem,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\tif (!Array.isArray(antrag_id))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t\t{ antrag_id }\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag_id.map(antrag => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t{ antrag_id: antrag.studierendenantrag_id },\n\t\t\t\t{ errorHeader: '#' + antrag.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t},\n\tunterbrechung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/unterbrechung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(studiensemester, prestudent_id, grund, datum_wiedereinstieg, attachment) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/createAntrag', {\n\t\t\t\tstudiensemester,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund,\n\t\t\t\tdatum_wiedereinstieg,\n\t\t\t\tattachment\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/cancelAntrag', {\n\t\t\t\tantrag_id\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t}\n\t},\n\twiederholung: {\n\t\tgetDetails(prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/' + prestudent_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tgetLvs(antrag_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getLvs/' + antrag_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tcreate(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/createAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/cancelAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tsaveLvs(forbiddenLvs, mandatoryLvs) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/saveLvs', {\n\t\t\t\tforbiddenLvs,\n\t\t\t\tmandatoryLvs\n\t\t\t});\n\t\t}\n\t},\n\tleitung: {\n\t\tgetStgs() {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getActiveStgs');\n\t\t},\n\t\tgetAntraege(url, config, params) {\n\t\t\treturn this.$fhcApi\n\t\t\t\t.get('/api/frontend/v1/studstatus/leitung/getAntraege/' + url)\n\t\t\t\t.then(res => res.data); // Return data for tabulator\n\t\t},\n\t\tgetHistory(antrag_id) {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getHistory/' + antrag_id)\n\t\t},\n\t\tgetPrestudents(query, signal) {\n\t\t\treturn this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/getPrestudents',\n\t\t\t\t{ query },\n\t\t\t\t{\n                                    signal: signal,\n                                    timeout: 30000\n                                }\n\t\t\t);\n\t\t},\n\t\tapprove(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treopen(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tunpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tobject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tapproveObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tdenyObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t}\n};","export default {\n\n  getView: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getView/${uid}`,{}\n    );\n  },\n\n  fotoSperre: function (value) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/fotoSperre/${value}`,\n      {}\n    );\n    \n  },\n\n  isStudent: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isStudent`,\n      {\n        uid:uid,\n      }\n    );\n  },\n\n  isMitarbeiter: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isMitarbeiter/${uid}`,\n      {}\n    );\n  },\n\n  getZustellAdresse: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellAdresse`,{}\n    );\n  },\n\n  getZustellKontakt: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellKontakt`,{}\n    );\n  },\n\n  getGemeinden: function(nation,zip){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getGemeinden/${nation}/${zip}`,\n      {}\n    );\n    \n  },\n  getAllNationen:function(){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      \"/api/frontend/v1/Profil/getAllNationen\",{}\n    );\n  },\n}","export default {\n    //! API calls for profil update requests\n  \n    getStatus: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getStatus`,{});\n    },\n  \n    getTopic: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getTopic`,{});\n    },\n  \n    acceptProfilRequest: function ({profil_update_id, uid, status_message, topic, requested_change}) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/acceptProfilRequest\",{profil_update_id, uid, status_message, topic, requested_change});\n    },\n  \n    denyProfilRequest: function ({profil_update_id, uid, topic, status_message}) {\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/denyProfilRequest\",{profil_update_id,uid,topic,status_message});\n    },\n  \n    insertFile: function (dms, replace = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/insertFile/${replace}`,\n        dms);\n\n    },\n    \n    getProfilRequestFiles: function (requestID) {\n      return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${requestID}`,{});\n    },\n  \n    selectProfilRequest: function (uid = null, id = null) {\n\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/selectProfilRequest`,\n        {...(uid?{uid}:{}),\n          ...(id?{id}:{})\n        });\n    },\n  \n    insertProfilRequest: function (topic, payload, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/insertProfilRequest\",\n        {\n          topic,\n          payload,\n          ...(fileID ? { fileID } : {}),\n        });\n    },\n  \n    updateProfilRequest: function (topic, payload, ID, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/updateProfilRequest`,\n        {\n          topic,\n          payload,\n          ID,\n          ...(fileID ? { fileID: fileID } : {}),\n        });\n    },\n  \n    deleteProfilRequest: function (requestID) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/deleteProfilRequest`,\n        {\n          requestID,\n        });\n    },\n  };\n  ","\nexport default {\n\tgetRoomInfo(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getRoomplan',\n\t\t\t{  ort_kurzbz, start_date, end_date}\n\t\t);\n\t},\n\tgetStunden() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/Stunden',\n\t\t\t{}\n\t\t);\n\t},\n\tgetOrtReservierungen(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/LvPlan/getReservierungen/${ort_kurzbz}`,\n\t\t\t{ start_date, end_date}\n\t\t);\n\t},\n\tgetLvPlanReservierungen(start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getReservierungen',\n\t\t\t{ start_date, end_date }\n\t\t);\n\t},\n\tgetLehreinheitStudiensemester(lehreinheit_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${lehreinheit_id}`,\n\t\t\t{}\n\t\t);\n\t},\n\tstudiensemesterDateInterval(date) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${date}`,\n\t\t\t{}\n\t\t);\n\t},\n\tLvPlanEvents(start_date, end_date, lv_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/LvPlanEvents',\n\t\t\t{ start_date, end_date, lv_id }\n\t\t);\n\t},\n\t\n\t\n};","import verband from './stv/verband.js';\nimport students from './stv/students.js';\nimport filter from './stv/filter.js';\nimport konto from './stv/konto.js';\nimport group from './stv/group.js';\nimport kontakt from './stv/kontakt.js';\nimport prestudent from './stv/prestudent.js';\nimport status from './stv/status.js';\nimport details from './stv/details.js';\nimport exam from './stv/exam.js';\nimport abschlusspruefung from './stv/abschlusspruefung.js';\nimport grades from './stv/grades.js';\nimport mobility from './stv/mobility.js';\nimport archiv from './stv/archiv.js';\nimport documents from './stv/documents.js';\nimport exemptions from './stv/exemptions.js';\nimport jointstudies from \"./stv/jointstudies.js\";\nimport courselist from './stv/courselist.js';\n\nexport default {\n\tverband,\n\tstudents,\n\tfilter,\n\tkonto,\n\tgroup,\n\tkontakt,\n\tprestudent,\n\tstatus,\n\tdetails,\n\texam,\n\tabschlusspruefung,\n\tgrades,\n\tmobility,\n\tarchiv,\n\tdocuments,\n\texemptions,\n\tjointstudies,\n\tcourselist,\n\tconfigStudent() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/student');\n\t},\n\tconfigStudents() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/students');\n\t}\n};\n","export default {\n\tget() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/verband');\n\t},\n\tfavorites: {\n\t\tget() {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/stv/favorites');\n\t\t},\n\t\tset(favorites) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/stv/favorites/set', {\n\t\t\t\tfavorites\n\t\t\t});\n\t\t}\n\t}\n}","export default {\n\tuid(uid, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/uid/'\n\t\t\t+ encodeURIComponent(uid);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tprestudent(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/prestudent/'\n\t\t\t+ encodeURIComponent(prestudent_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tperson(person_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/person/'\n\t\t\t+ encodeURIComponent(person_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tverband(relative_path) {\n\t\treturn this.$fhcApi.getUri('api/frontend/v1/stv/students/' + relative_path);\n\t}\n}","export default {\n\tgetStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/filter/getStg');\n\t},\n\tsetStg(studiengang_kz) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/filter/setStg', {\n\t\t\tstudiengang_kz\n\t\t});\n\t}\n};","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/konto/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id),\n\t\t\t\tonly_open: self.filter,\n\t\t\t\tstudiengang_kz: self.studiengang_kz_intern ? self.stg_kz : ''\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tcheckDoubles(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/checkDoubles', data, {\n\t\t\tconfirmErrorHandler: error => true\n\t\t});\n\t},\n\tinsert(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/insert', data);\n\t},\n\tcounter(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/counter', data);\n\t},\n\tedit(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/update', data);\n\t},\n\tdelete(buchungsnr) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/delete', {buchungsnr});\n\t},\n\tgetBuchungstypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/konto/getBuchungstypen');\n\t}\n};","export default {\n\tgetGruppen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/Gruppen/getGruppen/' + params.id);\n\t},\n\tdeleteGroup(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/Gruppen/deleteGruppe/', params);\n\t}\n}","export default {\n\t//------------- address.js-----------\n\tgetAdressen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressen/' + params.id);\n\t},\n\taddNewAddress(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewAddress/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadAddress(address_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadAddress/', {address_id});\n\t},\n\tupdateAddress(form, address_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateAddress/' + address_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteAddress(address_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteAddress/', {address_id});\n\t},\n\tgetPlaces(plz) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getPlaces/' + plz);\n\t},\n\tgetFirmen(searchString) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getFirmen/' + searchString);\n\t},\n\tgetNations() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getNations/');\n\t},\n\tgetAdressentypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressentypen/');\n\t},\n\n\t//------------- bankverbindung.js-----------\n\tgetBankverbindung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getBankverbindung/' + params.id);\n\t},\n\taddNewBankverbindung(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewBankverbindung/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadBankverbindung(bankverbindung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadBankverbindung/', {bankverbindung_id});\n\t},\n\tupdateBankverbindung(form, bankverbindung_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateBankverbindung/' + bankverbindung_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteBankverbindung(bankverbindung_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteBankverbindung/', {bankverbindung_id});\n\t},\n\n\t//------------- contact.js-----------\n\tgetKontakte (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakte/' + params.id);\n\t},\n\taddNewContact(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewContact/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadContact(kontakt_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadContact/', {kontakt_id});\n\t},\n\tupdateContact(form, kontakt_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateContact/' + kontakt_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteContact(kontakt_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteContact/', {kontakt_id});\n\t},\n\tgetStandorteByFirma(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getStandorteByFirma/' + searchString);\n\t},\n\tgetKontakttypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakttypen/');\n\t}\n};","export default {\n\n//------------- Prestudent.js------------------------------------------------------\n\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\treturn \tthis.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/prestudent/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t);\n\t},\n\tupdatePrestudent(form, prestudent_id, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/prestudent/updatePrestudent/' + prestudent_id,\n\t\t\tdata\n\t\t);\n\t},\n\tgetBezeichnungZGV() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungZGV/');\n\t},\n\tgetBezeichnungMZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungMZgv/');\n\t},\n\tgetBezeichnungDZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungDZgv/');\n\t},\n\tgetStgs() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStgs/');\n\t},\n\tgetAusbildung() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAusbildung/');\n\t},\n\tgetAufmerksamdurch() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAufmerksamdurch/');\n\t},\n\tgetBerufstaetigkeit() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBerufstaetigkeit/');\n\t},\n\tgetTypenStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getTypenStg/');\n\t},\n\tgetBisstandort() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBisstandort/');\n\t},\n\n//------------- MultiStatus.js------------------------------------------------------\n\tgetHistoryPrestudent (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getHistoryPrestudent/' + params.id);\n\t},\n\tgetMaxSem(studiengang_kzs) {\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/status/getMaxSemester/', {studiengang_kzs});\n\t},\n\tadvanceStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/advanceStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tconfirmStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/confirmStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tisLastStatus(id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/isLastStatus/' + id);\n\t},\n\tdeleteStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/deleteStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tgetLastBismeldestichtag() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getLastBismeldestichtag/');\n\t},\n\n//------------- History.js------------------------------------------------------\n\tgetHistoryPrestudents (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getHistoryPrestudents/' + params.id);\n\t},\n\n}","export default {\n\n//------------- Modal.js------------------------------------------------------\n\n\tinsertStatus(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/status/insertStatus/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/status/loadStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tupdateStatus(form, {prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}, data) {\n\t\treturn this.$fhcApi.post(\n\t\t\tform,\n\t\t\t'api/frontend/v1/stv/status/updateStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester,\n\t\t\tdata\n\t\t);\n\t},\n\tgetStudienplaene(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudienplaene/' + prestudent_id);\n\t},\n\tgetStudiengang(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudiengang/' + prestudent_id);\n\t},\n\tgetStatusgruende() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusgruende/');\n\t},\n\tgetStati() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStati/');\n\t},\n\n//------------- Dropdown.js------------------------------------------------------\n\n\taddStudent(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/addStudent/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tchangeStatus(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/changeStatus/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tgetStatusarray() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusarray/');\n\t}\n}","export default {\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/student/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(url);\n\t},\n\tsave(form, prestudent_id, studiensemester_kurzbz, data) {\n\t\tlet url = 'api/frontend/v1/stv/student/save/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(form, url, data);\n\t},\n}\n","export default {\n\tgetPruefungen(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getPruefungen/' + params.id);\n\t},\n\tloadPruefung(pruefung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/loadPruefung/' + pruefung_id);\n\t},\n\tgetTypenPruefungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getTypenPruefungen');\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/getAllLehreinheiten/', data)\n\t},\n\tgetLvsByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsByStudent/' + uid)\n\t},\n\tgetLvsandLesByStudent(uid, semester){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsandLesByStudent/' + uid + '/' + semester);\n\t},\n\tgetLvsAndMas(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsAndMas/' + uid)\n\t},\n\tgetMitarbeiterLv(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getMitarbeiterLv/' + id)\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getNoten');\n\t},\n\tcheckZeugnisnoteLv(data){\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/', data)\n\t},\n\taddPruefung(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/insertPruefung/',  data);\n\t},\n\tupdatePruefung(form, id, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/updatePruefung/' + id,  data);\n\t},\n\tdeletePruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/deletePruefung/' + id)\n\t}\n}","export default {\n\n\tgetAbschlusspruefung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/' + params.id);\n\t},\n\taddNewAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/', data\n\t\t);\n\t},\n\tloadAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/', {id});\n\t},\n\tupdateAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/', data\n\t\t);\n\t},\n\tdeleteAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/', {id});\n\t},\n\tgetTypenAbschlusspruefung(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/');\n\t},\n\tgetTypenAntritte(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/');\n\t},\n\tgetBeurteilungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/');\n\t},\n\tgetAkadGrade(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getAkadGrade/', {studiengang_kz});\n\t},\n\tgetTypStudiengang(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/', {studiengang_kz});\n\t},\n\tgetMitarbeiter(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/' + searchString);\n\t},\n\tgetPruefer(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getPruefer/' + searchString);\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getNoten/');\n\t},\n\tcheckForExistingExams(uids) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/', {uids}\n\t\t);\n\t}\n}","export default {\n\tlist() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/grades/list');\n\t},\n\tgetCertificate(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getCertificate/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetTeacherProposal(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getTeacherProposal/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetRepeaterGrades(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getRepeaterGrades/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tupdateCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, note, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/updateCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz,\n\t\t\t\tnote\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tdeleteCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/deleteCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyTeacherProposalToCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyTeacherProposalToCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id, lv_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate',\n\t\t\t{\n\t\t\t\tstudierendenantrag_lehrveranstaltung_id\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lv_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tgetGradeFromPoints(points, lehrveranstaltung_id, studiensemester_kurzbz, manualErrorHandling) {\n\t\tconst config = manualErrorHandling ? {errorHandling: false} : {};\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/grades/getGradeFromPoints',\n\t\t\t{\n\t\t\t\t\"points\": points,\n\t\t\t\t\"lehrveranstaltung_id\": lehrveranstaltung_id,\n\t\t\t\t\"studiensemester_kurzbz\": studiensemester_kurzbz\n\t\t\t},\n\t\t\tconfig\n\t\t\t);\n\t}\n}","export default {\n\tgetMobilitaeten (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getMobilitaeten/' + params.id);\n\t},\n\tgetProgramsMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getProgramsMobility/');\n\t},\n\taddNewMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/insertMobility/', data);\n\t},\n\tloadMobility(bisio_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/loadMobility/' + bisio_id);\n\t},\n\tupdateMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/updateMobility/', data);\n\t},\n\tdeleteMobility(bisio_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobility/' + bisio_id);\n\t},\n\tgetLVList(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLVList/' + studiengang_kz);\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/getAllLehreinheiten/', data)\n\t},\n\tgetLvsandLesByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLvsandLesByStudent/' + uid);\n\t},\n\tgetPurposes(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getPurposes/' + params.id);\n\t},\n\tgetSupports(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getSupports/' + params.id);\n\t},\n\tgetListPurposes() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListPurposes/');\n\t},\n\tgetListSupports() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListSupports/');\n\t},\n\tdeleteMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilityPurpose/' + params.bisio_id, params);\n\t},\n\taddMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilityPurpose/' + params.bisio_id, params);\n\t},\n\tdeleteMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilitySupport/' + params.bisio_id, params);\n\t},\n\taddMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilitySupport/' + params.bisio_id, params);\n\t},\n\n}","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/archiv/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id)\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tgetArchivVorlagen() {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/getArchivVorlagen');\n\t},\n\tarchive(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archive',\n\t\t\tdata\n\t\t);\n\t},\n\tarchiveSigned(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archiveSigned',\n\t\t\tdata\n\t\t);\n\t},\n\tupdate(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/update', data);\n\t},\n\tdelete({akte_id, studiengang_kz}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/delete', {akte_id, studiengang_kz});\n\t}\n};\n","export default {\n\tgetDocumentsUnaccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tgetDocumentsAccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsAccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tdeleteZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteZuordnung/' + params.prestudent_id + '/' + params.dokument_kurzbz);\n\t},\n\tcreateZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/createZuordnung/'\n\t\t\t+ params.prestudent_id + '/'\n\t\t\t+ params.dokument_kurzbz);\n\t},\n\tloadAkte(akte_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/loadAkte/' + akte_id);\n\t},\n\tgetDoktypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDoktypen/');\n\t},\n\tupdateFile(akte_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/updateAkte/' + akte_id,\n\t\t\tdata);\n\t},\n\tdeleteFile(akte_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteAkte/' + akte_id);\n\t},\n\tuploadFile(prestudent_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/uploadDokument/' + prestudent_id,\n\t\t\tdata);\n\t},\n}","export default {\n\tgetAnrechnungen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getAnrechnungen/' + params.id);\n\t},\n\tgetLehrveranstaltungen(prestudent_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/' + prestudent_id);\n\t},\n\tgetBegruendungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getBegruendungen/');\n\t},\n\tgetLvsKompatibel(lv_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLvsKompatibel/' + lv_id);\n\t},\n\tgetLektoren(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLektoren/' + studiengang_kz);\n\t},\n\taddNewAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/insertAnrechnung/', data);\n\t},\n\tloadAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/loadAnrechnung/' + anrechnung_id);\n\t},\n\teditAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/updateAnrechnung/', data);\n\t},\n\tdeleteAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/anrechnungen/deleteAnrechnung/' + anrechnung_id);\n\t},\n}","export default {\n\tgetStudies(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudien/' + params.id);\n\t},\n\tgetTypenMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/');\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/');\n\t},\n\tgetStudyprograms(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/');\n\t},\n\tgetListPartner(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/');\n\t},\n\tgetStatiPrestudent(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/');\n\t},\n\tloadStudy(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/loadStudie/' + id);\n\t},\n\tinsertStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/insertStudie/', data);\n\t},\n\tupdateStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/updateStudie/', data);\n\t},\n\tdeleteStudy(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/GemeinsameStudien/deleteStudie/' + id);\n\t},\n\n}","export default {\n\tgetCourselist(url, config, params) {\n\t\t//corresponding logic controller Stundenplan.php\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStundenplan/'\n\t\t\t+ params.student_uid + '/'\n\t\t\t+ params.start_date + '/'\n\t\t\t+ params.end_date + '/'\n\t\t\t+ params.group_consecutiveHours + '/'\n\t\t\t+ params.dbStundenplanTable\n\t\t);\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStudiensemester/');\n\t},\n}","import person from \"./notiz/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetNotizen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getNotizen/' + params.id + '/' + params.type);\n\t},\n\tgetUid(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getUid/');\n\t},\n\taddNewNotiz(form, id, formData) {\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/addNewNotiz/' + id,\n\t\t\tformData\n\t\t);\n\t},\n\tloadNotiz(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadNotiz/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tloadDokumente(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadDokumente/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tdeleteNotiz(notiz_id, type_id, id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/deleteNotiz/', {\n\t\t\tnotiz_id,\n\t\t\ttype_id,\n\t\t\tid\n\t\t});\n\t},\n\tupdateNotiz(form, notiz_id, formData){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/updateNotiz/' + notiz_id,\n\t\t\tformData\n\t\t);\n\t},\n\tgetMitarbeiter(event){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getMitarbeiter/' + event);\n\t},\n\tisBerechtigt(id, type_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/isBerechtigt/');\n\t}\n}","import person from \"./betriebsmittel/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetAllBetriebsmittel(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/' + params.type + '/' + params.id);\n\t},\n\taddNewBetriebsmittel(form, person_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/' +\n\t\t\tperson_id, formData\n\t\t);\n\t},\n\tloadBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/' + betriebsmittelperson_id);\n\t},\n\tupdateBetriebsmittel(form, betriebsmittelperson_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/' + betriebsmittelperson_id,\n\t\t\tformData);\n\t},\n\tdeleteBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/' +\tbetriebsmittelperson_id);\n\t},\n\tgetTypenBetriebsmittel(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/');\n\t},\n\tloadInventarliste(query){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/' +\tquery);\n\t}\n}","export default {\n\tupdatePersonUnrulyStatus(person_id, unrulyParam) {\n\n\t\ttry {\n\t\t\tconst payload = {person_id, unruly: unrulyParam}\n\t\t\tconst url = '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus';\n\t\t\treturn this.$fhcApi.post(url, payload, null);\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t},\n\tfilterPerson(payload, base = ''){\n\n\t\ttry {\n\t\t\tconst url = base + '/api/frontend/v1/checkperson/CheckPerson/filterPerson';\n\t\t\treturn axios.post(url, payload)\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t}\n}","export default {\n  getContentID(ort_kurbz) {\n\t\treturn this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            \"/api/frontend/v1/Ort/ContentID\",\n\t\t\t{ ort_kurzbz: ort_kurbz }\n\t\t);\n\t},\n\tgetRooms(datum, von, bis, typ, personenanzahl = 0) {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getRooms\",\n\t\t\t{ datum, von, bis, typ, personenanzahl }\n\t\t);\n\t},\n\tgetRoomTypes() {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getTypes\"\n\t\t);\n\t}\n}","export default {\n    content(content_id, version=null, sprache=null, sichtbar=null) {\n        return this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/content\",\n\t\t\t{ \n\t\t\t\tcontent_id: content_id,\n\t\t\t\t...(version?{version}:{}),\n\t\t\t\t...(sprache?{sprache}:{}),\n\t\t\t\t...(sichtbar?{sichtbar}:{}),\n            }\n        );\n    },\n\t//api function used for the news View that renders the html\n\tgetNews(page = 1, page_size = 10, sprache) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNews\",\n\t\t\t{\n\t\t\t\tpage,\n\t\t\t\tpage_size,\n\t\t\t\tsprache,\n\t\t\t},\n\t\t);\n\t},\n\t//api function used for the widget component\n\tnews(limit) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/news\",\n\t\t\t{\n\t\t\t\tlimit: limit\n\t\t\t}\n\t\t);\n\t},\n\tgetNewsRowCount: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNewsRowCount\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetNewsExtra: function(){\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getStudiengangInfoForNews\",\n\t\t\t{}\n\t\t);\n\t}\n  }","export default {\n    getStudentenMail(lehreinheit_id) {\n          return this.$fhcApi.get(\n              FHC_JS_DATA_STORAGE_OBJECT.app_root +\n              FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n              \"/api/frontend/v1/Lehre/lvStudentenMail\",\n              { lehreinheit_id: lehreinheit_id }\n          );\n      },\n\tgetLvInfo(studiensemester_kurzbz, lehrveranstaltung_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/LV/${studiensemester_kurzbz}/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentPruefungen(lehrveranstaltung_id){\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/Pruefungen/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t}\n  }","export default {\n    getLvMenu(lvid, studiensemester_kurzbz) {\n        return this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            `/api/frontend/v1/LvMenu/getLvMenu/${lvid}/${studiensemester_kurzbz}`,\n            {}\n        );\n    },\n\n      \n  }","import person from \"./messages/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\t\tgetMessages(url, config, params) {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessages/' + params.id + '/' + params.type + '/' + params.size + '/' + params.page);\n\t\t},\n\t\tgetVorlagen(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getVorlagen/');\n\t\t},\n\t\tgetMsgVarsLoggedInUser(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/');\n\t\t},\n\t\tgetMessageVarsPerson(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessageVarsPerson/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetMsgVarsPrestudent(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsPrestudent/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPersonId(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getPersonId/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetUid(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getUid/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetDataVorlage(vorlage_kurzbz){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getDataVorlage/' + vorlage_kurzbz);\n\t\t},\n\t\tgetNameOfDefaultRecipient(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getNameOfDefaultRecipient/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPreviewText(params, data){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/getPreviewText/' + params.id + '/' + params.type_id,\n\t\t\t\tdata);\n\t\t},\n\t\tgetReplyData(messageId){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getReplyData/' + messageId);\n\t\t},\n\t\tsendMessageFromModalContext(form, id, data) {\n\t\t\treturn this.$fhcApi.post(form,'api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tsendMessage(id, data) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tdeleteMessage(messageId){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/deleteMessage/' + messageId);\n\t\t}\n}","export default {\n\tgetVorlagen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagen/');\n\t},\n\tgetVorlagenByLoggedInUser() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/');\n\t}\n}","export default {\n\n\tgetStudiensemester: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/components/Cis/Mylv/Studiensemester',\n\t\t\t{}\n\t\t);\n\t},\n\n\tgetAllStudienSemester: function (studiensemester=undefined, studiengang=undefined, semester=undefined, studienplan=undefined) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/Studium/getStudienAllSemester',\n\t\t\t{studiensemester, studiengang, semester, studienplan}\n\t\t);\n\t},\n\n\tgetStudiengaengeForStudienSemester: function (studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${studiensemester}`,\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudienplaeneBySemester: function (studiengang, studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudienplaeneBySemester`,\n\t\t\t{\n\t\t\t\tstudiengang,\n\t\t\t\tstudiensemester,\n\t\t\t}\n\t\t);\n\t},\n\tgetLvPlanForStudiensemester: function (studiensemester, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${studiensemester}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\tgetLvEvaluierungInfo: function (studiensemester_kurzbz, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getLvEvaluierungInfo/${studiensemester_kurzbz}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\t\n}","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport search from \"./search.js\";\nimport phrasen from \"./phrasen.js\";\nimport navigation from \"./navigation.js\";\nimport filter from \"./filter.js\";\nimport studstatus from \"./studstatus.js\";\nimport profil from \"./profil.js\";\nimport profilUpdate from \"./profilUpdate.js\";\nimport lvPlan from \"./lvPlan.js\";\nimport bookmark from \"./bookmark.js\";\nimport stv from \"./stv.js\";\nimport notiz from \"./notiz.js\";\nimport betriebsmittel from \"./betriebsmittel.js\";\nimport checkperson from \"./checkperson.js\";\nimport ampeln from \"./ampeln.js\";\nimport ort from \"./ort.js\";\nimport cms from \"./cms.js\";\nimport lehre from \"./lehre.js\";\nimport addons from \"./addons.js\";\nimport messages from \"./messages.js\";\nimport vorlagen from \"./vorlagen.js\";\nimport studiengang from \"./studiengang.js\";\nimport menu from \"./menu.js\";\nimport dashboard from \"./dashboard.js\";\nimport authinfo from \"./authinfo.js\";\nimport studium from \"./studium.js\";\nimport language from \"./language.js\";\n\nexport default {\n    search,\n    phrasen,\n    navigation,\n    dashboard,\n    filter,\n    studstatus,\n    profil,\n    profilUpdate,\n    lvPlan,\n    bookmark,\n    stv,\n    notiz,\n    betriebsmittel,\n    checkperson,\n    ampeln,\n    ort,\n    cms,\n    lehre,\n    addons,\n    messages,\n    vorlagen,\n    addons,\n\tstudiengang,\n\tmenu,\n\tauthinfo,\n\tstudium,\n    language\n};\n","export default {\n\tasync getViewData() {\n\t\tconst url = `/api/frontend/v1/Cis4FhcApi/getViewData`;\n\t\treturn this.$fhcApi.get(url, null, null)\n\t},\n}","export default {\n\n    getBookmarks: function () {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/getBookmarks`\n        ,{}\n      );\n    },\n  \n    delete: function (bookmark_id) {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/delete/${bookmark_id}`\n        ,{}\n      ); \n    },\n\n\tupdate: function ({ bookmark_id, url, title, tag=null}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/Bookmark/update/${bookmark_id}`\n\t\t\t, {\n\t\t\t\turl: url,\n\t\t\t\ttitle: title\n\t\t\t}\n\t\t);\n\t},\n\n    insert: function ({url, title, tag}) {\n      return this.$fhcApi.post(\n        `/api/frontend/v1/Bookmark/insert`\n        ,{\n          url: url,\n          title: title,\n          tag: tag\n        }\n      ); \n    },\n}","export default {\n    \n    open: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/open`,{});\n    },\n\n    all: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/all`,{});\n    },\n\n    confirm: function (ampel_id) {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/confirm/${ampel_id}`,{});\n    },\n\n}","export default {\n\tstudiengangInformation: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Studgang/getStudiengangInfo\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudiengangByKz: function (studiengang_kz) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz\",\n\t\t\t{\n\t\t\t\t\"studiengang_kz\": studiengang_kz\n\t\t\t}\n\t\t);\n\t}\n}","export default {\n\tgetMenu: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/CisMenu/getMenu\",\n\t\t\t{}\n\t\t);\n\t}\n\n}","\nexport default {\n\tgetAuthUID() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthUID',\n\t\t\t{ }\n\t\t);\n\t},\n\tgetAuthInfo() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthInfo',\n\t\t\t{}\n\t\t);\n\t},\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetAll() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/language/get');\n\t}\n};","/** TODO(chris):\n * when deleting this file be sure to\n * remove line 1 & 90 from ../plugins/Phrasen.js\n */\nimport FhcApiFactory from '../api/fhcapifactory.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$fhcApi) {\n\t\t\t/* Deprecated Code start */\n\t\t\tif (options?.factory) {\n\t\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\t\tapp.config.globalProperties.$fhcApi.factory.addEndpoints(options.factory);\n\t\t\t}\n\t\t\t/* Deprecated Code end */\n\t\t\treturn;\n\t\t}\n\n\t\tfunction _get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\n\t\tfunction _clean_return_value(response) {\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = {response};\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tconst baseURL = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\";\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(response => {\n\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\treturn _clean_return_value(response);\n\n\t\t\t// NOTE(chris): loop through errors\n\t\t\tif (response.data.errors)\n\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t);\n\n\t\t\treturn _clean_return_value(response);\n\t\t}, error => {\n\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\n\t\t\tif (error.config?.errorHandling == 'off'\n\t\t\t\t|| error.config?.errorHandling === false\n\t\t\t\t|| error.config?.errorHandling == 'success')\n\t\t\t\treturn Promise.reject(error);\n\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL, true);\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t\t}\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\terror.response.data.errors = error.response.data.errors.filter(\n\t\t\t\t\terr => (error.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, error.config)\n\t\t\t\t);\n\t\t\t\tif (!error.response.data.errors.length)\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else if (error.request) {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertError(error.message);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t}\n\n\t\t\treturn Promise.reject(error);\n\t\t});\n\n\t\tapp.config.globalProperties.$fhcApi = {\n\t\t\tgetUri(url) {\n\t\t\t\tconsole.warn('$fhcApi.getUri is DEPRECATED! Use $api.getUri instead.');\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\tconsole.warn('$fhcApi.get is DEPRECATED! Use $api.get instead.');\n\t\t\t\t[uri, params, config] = _get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\tconsole.warn('$fhcApi.post is DEPRECATED! Use $api.post instead.');\n\t\t\t\t[uri, data, config] = _get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\t_defaultErrorHandlers: {\n\t\t\t\tvalidation(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form) {\n\t\t\t\t\t\tconfig.form.clearValidation();\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.messages);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(error.messages)) {\n\t\t\t\t\t\terror.messages.forEach($fhcAlert.alertError);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (typeof error.messages == 'object') {\n\t\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t\tObject.values(error.messages).forEach(\n\t\t\t\t\t\t\t\tvalue => $fhcAlert.alertDefault(\n\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tObject.entries(error.messages).forEach(\n\t\t\t\t\t\t\t\t([key, value]) => $fhcAlert.alertDefault('error', key, value, true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgeneral(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form)\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.message);\n\t\t\t\t\telse if (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertError(error.message);\n\t\t\t\t},\n\t\t\t\tphp(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('warn', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('info', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texception(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tdb(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tauth(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertDefault('error', error.message, message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/* Deprecated Code start */\n\t\tclass FhcApiFactoryWrapper {\n\t\t\tconstructor(factorypart, root) {\n\t\t\t\tif (root === undefined) {\n\t\t\t\t\tthis.$fhcApi = {\n\t\t\t\t\t\tgetUri(url) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.getUri(url);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(form, uri, params, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.get(form, uri, params, config);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpost(form, uri, data, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.post(form, uri, data, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tObject.defineProperty(this.$fhcApi, 'factory', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.factory;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.config.globalProperties.$fhcApi.factory = this;\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, '$fhcApi', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn (root || this).$fhcApi;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.addEndpoints(factorypart, true)\n\t\t\t}\n\n\t\t\taddEndpoints(factorypart, noWarn) {\n\t\t\t\tObject.keys(factorypart).forEach(key => {\n\t\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tif (typeof factorypart[key] == 'function')\n\t\t\t\t\t\t\t\treturn factorypart[key].bind(this);\n\t\t\t\t\t\t\treturn new FhcApiFactoryWrapper(factorypart[key], this.$fhcApi.factory);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (!noWarn) console.warn('$fhcApi.factory.addEndpoints() is DEPRECATED!');\n\t\t\t}\n\t\t}\n\n\t\tconst factory = new FhcApiFactoryWrapper(FhcApiFactory);\n\t\tif (options?.factory) {\n\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\tfactory.addEndpoints(options.factory);\n\t\t}\n\n\t\tapp.config.globalProperties.$fhcApi.factory = factory;\n\t\t/* Deprecated Code end */\n\t\t\n\t\tapp.provide('$fhcApi', app.config.globalProperties.$fhcApi);\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n//--------------------------------------------------------------------------------------------------------------------\n// Configs\n\n// To see debug messages into the browser console set this parameter as true\nconst CORE_REST_CLIENT_DEBUG = false;\n\n// Default timeout (milliseconds)\nconst CORE_REST_CLIENT_TIMEOUT = 5000;\n\n//--------------------------------------------------------------------------------------------------------------------\n// Constants\n\n// Success\nconst CORE_REST_CLIENT_SUCCESS = 0;\n\n// Properties present in a response\nconst CORE_REST_CLIENT_ERROR = \"error\";\nconst CORE_REST_CLIENT_RETVAL = \"retval\";\n\n// HTTP method parameters\nconst CRC_HTTP_GET_METHOD = \"get\";\nconst CRC_HTTP_POST_METHOD = \"post\";\n\n/**\n * Definition and initialization of the object CoreRESTClient\n */\nexport const CoreRESTClient = {\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Public methods\n\n\t/**\n\t * Performs a call using the HTTP GET method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tget: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_GET_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Performs a call using the HTTP POST method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tpost: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_POST_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Checks if the response is a success\n\t */\n\tisSuccess: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR)\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL) && response.error == CORE_REST_CLIENT_SUCCESS)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Checks if the response is an error\n\t */\n\tisError: function(response) {\n\t\treturn !CoreRESTClient.isSuccess(response);\n\t},\n\n\t/**\n\t * Checks if the response has data\n\t */\n\thasData: function(response) {\n\n\t\tif (CoreRESTClient.isSuccess(response))\n\t\t{\n\t\t\tif ((typeof response[CORE_REST_CLIENT_RETVAL] === \"object\" && Object.keys(response[CORE_REST_CLIENT_RETVAL]).length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"array\" && response[CORE_REST_CLIENT_RETVAL].length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"string\" && response[CORE_REST_CLIENT_RETVAL].trim() != \"\")\n\t\t\t\t|| typeof response[CORE_REST_CLIENT_RETVAL] === \"number\")\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Retrives data from response object\n\t */\n\tgetData: function(response) {\n\n\t\tif (CoreRESTClient.hasData(response))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Retrives error message from response object\n\t */\n\tgetError: function(response) {\n\n\t\tif (typeof response === \"object\"\n\t\t\t&& Object.keys(response).length > 0\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn \"Generic error\";\n\t},\n\n\t/**\n\t * Retrives code from response object\n\t */\n\tgetErrorCode: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_ERROR];\n\t\t}\n\n\t\treturn 1; // Generic error\n\t},\n\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Private methods\n\n\t/**\n\t * Generate the router URI using the connection parameters\n\t */\n\t_generateRouterURI: function(wsURL) {\n\t\tvar uri = null;\n\n\t\t// Checks if global JS object FHC_JS_DATA_STORAGE_OBJECT exists\n\t\tif (typeof FHC_JS_DATA_STORAGE_OBJECT !== \"undefined\")\n\t\t{\n\t\t\turi = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\" + wsURL;\n\t\t}\n\n\t\treturn uri;\n\t},\n\n\t/**\n\t * Method to print debug info after a controller has been called\n\t */\n\t_printDebug: function(parameters, response, errorThrown) {\n\n\t\tif (CORE_REST_CLIENT_DEBUG === true) // If global const CORE_REST_CLIENT_DEBUG is true, but really true!\n\t\t{\n\t\t\t// Print info about called controller\n\t\t\tconsole.log(\"Called controller: \" + parameters.remoteController);\n\t\t\tconsole.log(\"Call parameters:\"); // parameters given to this call\n\t\t\tconsole.log(parameters);\n\n\t\t\tif (response != null) // if there is a response...\n\t\t\t{\n\t\t\t\tconsole.log(\"Controller Response:\");\n\t\t\t\tconsole.log(response); // ...print it\n\t\t\t}\n\t\t\tif (errorThrown != null) // if there is a jQuery error...\n\t\t\t{\n\t\t\t\tconsole.log(\"jQuery error:\");\n\t\t\t\tconsole.log(errorThrown); // ...print it\n\t\t\t}\n\t\t\tconsole.log(\"--------------------------------------------------------------------------------------------\");\n\t\t}\n\t},\n\n\t/**\n\t * Performs a call to the server were the CI PHP layer is running\n\t * - wsURL: alias of the core controller to call\n\t * - wsParameters: parameters to give to the called controller\n\t * - type: POST or GET HTTP method\n\t * - axiosParameters: an object to configure the axios call\n\t */\n\t_axiosCall: function(wsURL, wsParameters, type, axiosParameters) {\n\n\t\t// Axios config object\n\t\tlet axiosCallObj = {\n\t\t\tmethod: type,\n\t\t\turl: CoreRESTClient._generateRouterURI(wsURL),\n\t\t\ttimeout: CORE_REST_CLIENT_TIMEOUT // default time out\n\t\t};\n\n\t\t// The ajax call is HTTP GET\n\t\tif (type == CRC_HTTP_GET_METHOD)\n\t\t{\n\t\t\taxiosCallObj.params = wsParameters;\n\t\t}\n\t\t// The ajax call is HTTP POST\n\t\telse\n\t\t{\n\t\t\taxiosCallObj.data = wsParameters;\n\t\t}\n\n\t\t// Check if axiosParameters is an object\n\t\tif (typeof axiosParameters === \"object\")\n\t\t{\n\t\t\t// And then copies the its properties into axiosCallObj\n\t\t\tfor (var prop in axiosParameters) axiosCallObj[prop] = axiosParameters[prop];\n\t\t}\n\n\t\t// Perform the ajax call via axios\n\t\treturn axios(axiosCallObj);\n\t}\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n * \n * @usage:\n * Preperations:\n * Be sure to have PrimeVue loaded  with the toast and confirmdialog\n * components as primevue variable\n * Install:\n * Import this Plugin and install it with the app.use() function.\n * Use:\n * In your component you can call now the global property $fhcAlert\n * which has the following functions:\n * \n * alertSuccess\n * ------------\n * Displays a success message\n * @param string\tmessage\n * @return void\n * \n * alertInfo\n * ---------\n * Displays an info message\n * @param string\tmessage\n * @return void\n * \n * alertWarning\n * ------------\n * Displays a warning\n * @param string\tmessage\n * @return void\n * \n * alertError\n * ----------\n * Displays an error\n * @param string\tmessage\n * @return void\n * \n * alertSystemError\n * ----------------\n * Displays an alert with the error details and a button to mail\n * the error to the Support Team\n * @param string\tmessage\n * @return void\n * \n * confirmDelete\n * -------------\n * Displays a confirmation dialog and returns a Promise which resolves\n * with true or false depending und the pressed button.\n * @return Promise\n * \n * alertDefault\n * ------------\n * Displays an alert\n * @param string\tseverity\t\tcan be 'success', 'info', 'warning', 'error'\n * @param string\ttitle\n * @param string\tmessage\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * alertMultiple\n * -------------\n * Displays multiple alerts\n * @param array\t\tmessageArray\n * @param string\tseverity\t\t(optional) defaults to 'info'\n * @param string\ttitle\t\t\t(optional) defaults to 'Info'\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * handleSystemError\n * -----------------\n * Automatiticly determine how to display an system error and display it.\n * This would be used in a catch block of an ajax call.\n * @param mixed\t\terror\n * @return void\n * \n * handleSystemMessage\n * -------------------\n * Automatiticly determine how to display a message and display it.\n * @param mixed\t\tmessage\n * @return void\n */\nimport PvConfig from \"../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js\";\nimport PvToast from \"../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js\";\nimport PvConfirm from \"../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js\";\nimport PvConfirmationService from \"../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js\";\nimport FhcPhrasen from \"./Phrasen.js\";\n\nimport {CoreRESTClient} from '../RESTClient.js';\n\nconst helperAppContainer = document.createElement('div');\n\nconst helperApp = Vue.createApp({\n\tname: \"FhcAlertApp\",\n\tcomponents: {\n\t\tPvToast,\n\t\tPvConfirm\n\t},\n\tmethods: {\n\t\tmailToUrl(slotProps) {\n\t\t\tlet mailTo = FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto;\n\t\t\tlet subject = 'Meldung%20Systemfehler';\n\t\t\tlet body = `\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausführlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewählt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: ` + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method + `%0D%0A\n\t\t\t\tFehler Meldung: ` + slotProps.message.detail + `%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kümmern uns um eine rasche Behebung des Problems!`\n\n\t\t\treturn \"mailto:\" + mailTo + \"?subject=\" + subject + \"&body=\" + body;\n\t\t},\n\t\topenMessagecard(e) {\n\t\t\tbootstrap.Collapse.getOrCreateInstance(e.target.getAttribute('href')).toggle();\n\t\t}\n\t},\n\tunmounted() {\n\t\thelperAppContainer.parentElement.removeChild(helperAppContainer);\n\t},\n\tcomputed: {\n\t\tshowmaillink: function() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto !== '';\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<pv-toast ref=\"toast\" class=\"fhc-alert\" :base-z-index=\"99999\">\n\t\t<template #message=\"{ message }\">\n\t\t\t<!--span :class=\"slotProps.iconClass\"></span-->\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{ message.summary }}</span>\n\t\t\t\t<div v-if=\"message.detail && message.html\" class=\"p-toast-detail\" v-html=\"message.detail\"></div>\n\t\t\t\t<div v-else-if=\"message.detail\" class=\"p-toast-detail\">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref=\"alert\" class=\"fhc-alert\" :base-z-index=\"99999\" position=\"center\">\n\t\t<template #message=\"slotProps\">\n\t\t\t<i class=\"fa fa-circle-exclamation fa-2xl mt-3\"></i>\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class=\"p-toast-detail my-3\">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"align-bottom flex-fill me-2\"\n\t\t\t\t\t\tdata-bs-toggle=\"collapse\"\n\t\t\t\t\t\t:href=\"'#fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t:aria-controls=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\t@click=\"openMessagecard\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"showmaillink\"\n\t\t\t\t\t\tclass=\"btn btn-primary flex-fill\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t:href=\"mailToUrl(slotProps)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"messageCard\" :id=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\" class=\"collapse mt-3\">\n\t\t\t\t\t<div class=\"card card-body text-body small alertCollapseText\">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group=\"fhcAlertConfirm\"></pv-confirm>`\n});\n\nhelperApp.use(PvConfig);\nhelperApp.use(PvConfirmationService);\n//helperApp.use(FhcPhrasen);\n\nconst helperAppInstance = helperApp.mount(helperAppContainer);\n\ndocument.body.appendChild(helperAppContainer);\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (!app.config.globalProperties.$p)\n\t\t\tapp.use(FhcPhrasen);\n\n\t\tconst $fhcAlert = {\n\t\t\talertSuccess(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSuccess);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'success', summary: 'Info', detail: message, life: 1000});\n\t\t\t},\n\t\t\talertInfo(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertInfo);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'info', summary: 'Info', detail: message, life: 3000 });\n\t\t\t},\n\t\t\talertWarning(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertWarning);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'warn', summary: 'Achtung', detail: message});\n\t\t\t},\n\t\t\talertError(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertError);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'error', summary: 'Achtung', detail: message });\n\t\t\t},\n\t\t\talertSystemError(message) {\n\t\t\t\t//TODO(Manu) for translation of content of template: restructure in data\n\t\t\t\t//and update definitions with  translations\n\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSystemError);\n\t\t\t\thelperAppInstance.$refs.alert.add({\n\t\t\t\t\tseverity: 'error',\n\t\t\t\t\tsummary: Vue.computed(() => app.config.globalProperties.$p.t('alert/systemerror')),\n\t\t\t\t\tdetail: message});\n\t\t\t},\n\t\t\tconfirmDelete() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: 'fhcAlertConfirm',\n\t\t\t\t\t\theader: Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: Vue.computed(() => app.config.globalProperties.$p.t('alert/confirm_delete')),\n\t\t\t\t\t\tacceptLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/loeschen')),\n\t\t\t\t\t\tacceptClass: 'p-button-danger',\n\t\t\t\t\t\trejectLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: 'p-button-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfirm(options) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: options?.group ?? 'fhcAlertConfirm',\n\t\t\t\t\t\theader: options?.header ?? Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: options?.message ?? '',\n\t\t\t\t\t\tacceptLabel: options?.acceptLabel ?? 'Ok',\n\t\t\t\t\t\tacceptClass: options?.acceptClass ?? 'btn btn-primary',\n\t\t\t\t\t\trejectLabel: options?.rejectLabel ?? Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: options?.rejectClass ?? 'btn btn-outline-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\talertDefault(severity, title, message, sticky = false, html = false) {\n\t\t\t\tlet options = { severity: severity, summary: title, detail: message, html };\n\t\t\t\t\n\t\t\t\tif (!sticky)\n\t\t\t\t\toptions.life = 3000;\n\n\t\t\t\thelperAppInstance.$refs.toast.add(options);\n\t\t\t},\n\t\t\talertMultiple(messageArray, severity = 'info', title = 'Info', sticky = false, html = false){\n\t\t\t\t// Check, if array has only string values\n\t\t\t\tif (messageArray.every(message => typeof message === 'string')) {\n\t\t\t\t\tmessageArray.forEach(message => this.alertDefault(severity, title, message, sticky, html));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\thandleSystemError(error) {\n\t\t\t\t// don't show an error message to the user if the error was an aborted request\n\t\t\t\tif(error.hasOwnProperty('name') && error.name.toLowerCase() === \"AbortError\".toLowerCase())\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is string\n\t\t\t\tif (typeof error === 'string')\n\t\t\t\t\treturn $fhcAlert.alertSystemError(error);\n\n\t\t\t\t// Error is array of strings\n\t\t\t\tif (Array.isArray(error) && error.every(err => typeof err === 'string'))\n\t\t\t\t\treturn error.every($fhcAlert.alertSystemError);\n\n\t\t\t\t// Error has been handled already\n\t\t\t\tif (error.hasOwnProperty('handled') && error.handled)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is object\n\t\t\t\tif (typeof error === 'object' && error !== null) {\n\t\t\t\t\tlet errMsg = '';\n\n\n\t\t\t\t\tif (error.hasOwnProperty('response') && error.response?.data?.retval)\n\t\t\t\t\t\terrMsg += 'Error Message: ' + (error.response.data.retval.message || error.response.data.retval) + '\\r\\n';\n\t\t\t\t\telse if (error.hasOwnProperty('message'))\n\t\t\t\t\t\terrMsg += 'Error Message: ' + error.message.toUpperCase() + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('config') && error.config.hasOwnProperty('url'))\n\t\t\t\t\t\terrMsg += 'Error ConfigURL: ' + error.config.url + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('stack'))\n\t\t\t\t\t\terrMsg += 'Error Stack: ' + error.stack + '\\r\\n';\n\t\t\t\t\t\n\t\t\t\t\t// Fallback object error message\n\t\t\t\t\tif (errMsg == '')\n\t\t\t\t\t\terrMsg = 'Error Message: ' + JSON.stringify(error) + '\\r\\n';\n\n\t\t\t\t\terrMsg += 'Error Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\n\t\t\t\t\treturn $fhcAlert.alertSystemError(errMsg);\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\thandleSystemMessage(message) {\n\t\t\t\t// Message is string\n\t\t\t\tif (typeof message === 'string')\n\t\t\t\t\treturn $fhcAlert.alertWarning(message);\n\n\t\t\t\t// Message is array of strings\n\t\t\t\tif (Array.isArray(message)) {\n\t\t\t\t\t// If Array has only Strings\n\t\t\t\t\tif (message.every(msg => typeof msg === 'string'))\n\t\t\t\t\t\treturn message.every($fhcAlert.alertWarning);\n\n\t\t\t\t\t// If Array has only Objects\n\t\t\t\t\tif (message.every(msg => typeof msg === 'object') && msg !== null) {\n\t\t\t\t\t\treturn message.every(msg => {\n\t\t\t\t\t\t\tif (msg.hasOwnProperty('data') && msg.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(msg.data.retval));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(msg));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Message is Object with data property\n\t\t\t\tif (typeof message === 'object' && message !== null){\n\t\t\t\t\tif (message.hasOwnProperty('data') && message.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t// NOTE(chris): changed: alertSystemError => alertWarning\n\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(message.data.retval));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(message));\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' +  FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\tresetFormValidation(form) {\n\t\t\t\tconst event = new Event('fhc-form-reset');\n\t\t\t\tform.querySelectorAll(['[data-fhc-form-validate],[data-fhc-form-error]']).forEach(el => el.dispatchEvent(event));\n\t\t\t\t/*const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\tif (alert) {\n\t\t\t\t\talert.innerHTML = '';\n\t\t\t\t\talert.classList.add('d-none');\n\t\t\t\t}\n\t\t\t\tform.querySelectorAll('.invalid-feedback').forEach(n => n.remove());\n\t\t\t\tform.querySelectorAll('.is-invalid').forEach(n => n.classList.remove('is-invalid'));\n\t\t\t\tform.querySelectorAll('.is-valid').forEach(n => n.classList.remove('is-valid'));*/\n\t\t\t},\n\t\t\thandleFormValidation(error, form) {\n\t\t\t\tif (form === undefined) {\n\t\t\t\t\tif (error && error.nodeType === Node.ELEMENT_NODE)\n\t\t\t\t\t\treturn err => $fhcAlert.handleFormValidation(err, error);\n\t\t\t\t} else {\n\t\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t\tif (typeof errors !== \"object\")\n\t\t\t\t\t\t\terrors = error.response.data;\n\n\t\t\t\t\t\t// NOTE(chris): reset form validation\n\t\t\t\t\t\t$fhcAlert.resetFormValidation(form);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// NOTE(chris): set form input validation\n\t\t\t\t\t\tconst notFound = Object.entries(errors).filter(([key, detail]) => {\n\t\t\t\t\t\t\tconst input = form.querySelector('[data-fhc-form-validate=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\tinput.dispatchEvent(new CustomEvent('fhc-form-invalidate', {detail}));\n\n\t\t\t\t\t\t\t/*const input = form.querySelector('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\tinput.classList.add('is-invalid');\n\t\t\t\t\t\t\tconst feedback = document.createElement('div');\n\t\t\t\t\t\t\tfeedback.classList.add('invalid-feedback');\n\t\t\t\t\t\t\tfeedback.innerHTML = detail;\n\t\t\t\t\t\t\tinput.after(feedback);*/\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).map(arr => arr[1]);\n\n\n\t\t\t\t\t\t//const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\t\t\tconst alert = form.querySelector('[data-fhc-form-error]');\n\t\t\t\t\t\tif (alert && notFound.length) {\n\t\t\t\t\t\t\talert.dispatchEvent(new CustomEvent('fhc-form-error', {detail: notFound}));\n\t\t\t\t\t\t\t/*notFound.forEach(txt => {\n\t\t\t\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\t\t\t\tp.innerHTML = txt;\n\t\t\t\t\t\t\t\talert.append(p);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (notFound.length) {\n\t\t\t\t\t\t\t\talert.lastChild.classList.add('mb-0');\n\t\t\t\t\t\t\t\talert.classList.remove('d-none');\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotFound.forEach($fhcAlert.alertError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t$fhcAlert.alertError((typeof errors === 'object') ? Object.values(errors) : errors);\n\t\t\t\t} else {\n\t\t\t\t\t$fhcAlert.handleSystemError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tapp.config.globalProperties.$fhcAlert = $fhcAlert;\n\t\tapp.provide('$fhcAlert', app.config.globalProperties.$fhcAlert);\n\t}\n}","import FhcAlert from './FhcAlert.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$api) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!app.config.globalProperties.$fhcAlert)\n\t\t\tapp.use(FhcAlert);\n\n\t\tfunction _send_array_or_object(errors, func) {\n\t\t\tif (Array.isArray(errors))\n\t\t\t\terrors.forEach(func);\n\t\t\telse\n\t\t\t\tObject.entries(errors).forEach(\n\t\t\t\t\t([title, errs]) => errs.forEach(\n\t\t\t\t\t\terror => func(error, title)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\t\tlet DEFAULT_ERROR_CONFIG = {\n\t\t\tsuccess: true,\n\t\t\tfail: true,\n\t\t\tcombine: {\n\t\t\t\tform: ['validation', 'general'],\n\t\t\t\ttoast: ['validation', 'general', 'not_found', 'site_failed']\n\t\t\t},\n\t\t\thandler: {\n\t\t\t\tform(form, errors) {\n\t\t\t\t\tform.clearValidation();\n\t\t\t\t\terrors.forEach(err => form.setFeedback(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\terr.messages || err.message\n\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t\tasync toast(errors) {\n\t\t\t\t\tconst $p = app.config.globalProperties.$p;\n\t\t\t\t\tif (!$p)\n\t\t\t\t\t\treturn Promise.reject('Phrasen plugin not loaded!');\n\t\t\t\t\n\t\t\t\t\tasync function _format_toast(errors) {\n\t\t\t\t\t\terrors = errors.reduce((result, err) => {\n\t\t\t\t\t\t\tswitch (err.type) {\n\t\t\t\t\t\t\tcase 'not_found':\n\t\t\t\t\t\t\tcase 'site_failed':\n\t\t\t\t\t\t\t\tif (err.message)\n\t\t\t\t\t\t\t\t\tresult[err.message] = [err.url];\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tresult._default = [err.url];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'general':\n\t\t\t\t\t\t\t\tif (!result._default)\n\t\t\t\t\t\t\t\t\tresult._default = [];\n\t\t\t\t\t\t\t\tresult._default.push(err.message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'validation':\n\t\t\t\t\t\t\t\tObject.entries(err.messages)\n\t\t\t\t\t\t\t\t\t.forEach(([field, msg]) => {\n\t\t\t\t\t\t\t\t\t\tif (!result[field])\n\t\t\t\t\t\t\t\t\t\t\tresult[field] = [];\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(msg))\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(...msg);\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(msg);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tlet counter = 0;\n\t\t\t\t\t\tconst msgs = await Promise.all(Object.entries(errors)\n\t\t\t\t\t\t\t.sort((a, b) => ['_default'].indexOf(b[0]) - ['_default'].indexOf(a[0])) // sort _default first\n\t\t\t\t\t\t\t.map(async ([field, msgs]) => {\n\t\t\t\t\t\t\t\tif (field == '_default') {\n\t\t\t\t\t\t\t\t\tawait $p.loadCategory('dashboard');\n\t\t\t\t\t\t\t\t\tconst general = $p.t('dashboard/general');\n\t\t\t\t\t\t\t\t\tfield = '<dt class=\"d-none\">' + general + '</dt>';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfield = '<dt>' + field + '</dt>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcounter += msgs.length;\n\t\t\t\t\t\t\t\treturn field\n\t\t\t\t\t\t\t\t\t+ '<dd>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('</dd><dd>')\n\t\t\t\t\t\t\t\t\t+ '</dd>';\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcounter,\n\t\t\t\t\t\t\tmsgs\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet counter, msgs;\n\t\t\t\t\tif (Array.isArray(errors)) {\n\t\t\t\t\t\t({ counter, msgs } = await _format_toast(errors));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t({ counter, msgs } = await Object.entries(errors)\n\t\t\t\t\t\t\t.reduce(async (res, [title, errs]) => {\n\t\t\t\t\t\t\t\tconst result = await res;\n\t\t\t\t\t\t\t\tconst { counter, msgs } = await _format_toast(errs);\n\t\t\t\t\t\t\t\tresult.counter += counter;\n\t\t\t\t\t\t\t\tresult.msgs.push('<dt>'\n\t\t\t\t\t\t\t\t\t+ title\n\t\t\t\t\t\t\t\t\t+ '</dt><dd><dl>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('')\n\t\t\t\t\t\t\t\t\t+ '</dl></dd>');\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}, Promise.resolve({ counter: 0, msgs: []})));\n\t\t\t\t\t}\n\n\t\t\t\t\tawait $p.loadCategory('ui');\n\t\t\t\t\tconst n_errors = $p.t('ui/n_errors', { n: counter });\n\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\tn_errors,\n\t\t\t\t\t\t'<dl>' + msgs.join('') + '</dl>',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tphp(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('warn', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('info', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\tmessage = title + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\texception(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tdb(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tauth(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\ttitle += ': ' + error.message;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttitle = error.message;\n\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options?.errorHandling !== undefined)\n\t\t\tDEFAULT_ERROR_CONFIG = _merge_error_config(options.errorHandling);\n\t\t\n\t\tfunction get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\t\tfunction clean_return_value(response) {\n\t\t\tif (typeof response.data === 'string' || response.data instanceof String)\n\t\t\t\treturn clean_return_value({ data: response });\n\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result)\n\t\t\t\treturn {meta: {response}, data: null};\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = { response };\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tfunction _merge_error_config(config) {\n\t\t\tif (config === false || config === 'off')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false, fail: false };\n\t\t\t\n\t\t\tif (!config || config === true)\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tif (config === 'success')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, fail: false };\n\t\t\t\n\t\t\tif (config === 'fail')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false };\n\t\t\t\n\t\t\tconst { success, fail, handler, combine } = config;\n\t\t\t\n\t\t\tconfig = { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tObject.entries({ fail, success }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = value;\n\t\t\t});\n\t\t\tObject.entries({ handler, combine }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = { ...config[key], ...value };\n\t\t\t});\n\n\t\t\treturn config;\n\t\t}\n\t\tfunction get_error_handler(config) {\n\t\t\tconst result = _merge_error_config(config?.errorHandling);\n\n\t\t\tif (!config?.form) {\n\t\t\t\tresult.combine = { ...result.combine, form: [] };\n\t\t\t} else {\n\t\t\t\tconst formHandler = result.handler.form;\n\t\t\t\tresult.handler = { ...result.handler, form: errors => formHandler(config.form, errors) };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tfunction get_error_list(error) {\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\ttype: 'not_found',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tif (error.response.data.errors == undefined) return [];\n\t\t\t\t\treturn error.response.data.errors;\n\t\t\t\t}\n\t\t\t} else if (error.request) {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'site_failed',\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'script',\n\t\t\t\t\tmessage: error.message\n\t\t\t\t}];\n\t\t\t}\n\t\t}\n\t\tfunction popHandleableErrors(errorHandling, errors) {\n\t\t\tconst result = {};\n\t\t\tconst copy = [];\n\n\t\t\tif (errors == undefined) return {};\n\n\t\t\twhile (errors.length)\n\t\t\t\tcopy.push(errors.pop());\n\t\t\tfor (var error of copy) {\n\t\t\t\tlet type = error.type;\n\t\t\t\tlet newType = null;\n\t\t\t\tfor (var t in errorHandling.combine) {\n\t\t\t\t\tlet newTypeCombinesType = errorHandling\n\t\t\t\t\t\t.combine[t]\n\t\t\t\t\t\t.includes(type);\n\t\t\t\t\tlet newTypeHasHandler = errorHandling.handler[t];\n\t\t\t\t\tif (newTypeCombinesType && newTypeHasHandler) {\n\t\t\t\t\t\tnewType = t;\n\t\t\t\t\t\tif (newType == 'form')\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (newType)\n\t\t\t\t\ttype = newType;\n\t\t\t\tconst handler = errorHandling.handler[type];\n\t\t\t\tif (handler) {\n\t\t\t\t\tif (!result[type])\n\t\t\t\t\t\tresult[type] = [];\n\t\t\t\t\tif (Array.isArray(error))\n\t\t\t\t\t\tresult[type].push(...error);\n\t\t\t\t\telse\n\t\t\t\t\t\tresult[type].push(error);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\terrors.push(error);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\t\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t+ FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(\n\t\t\tresponse => {\n\t\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\t\treturn clean_return_value(response);\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\tif (response.data.errors)\n\t\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$api._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t\t);\n\n\t\t\t\treturn clean_return_value(response);\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\n\t\t\t\tconst errorConfig = get_error_handler(error.config);\n\n\t\t\t\tif (!errorConfig.fail)\n\t\t\t\t\treturn Promise.reject(error);\n\n\t\t\t\tconst remaining = get_error_list(error);\n\n\t\t\t\tconst errors = popHandleableErrors(errorConfig, remaining);\n\n\t\t\t\tfor (var type in errors) {\n\t\t\t\t\terrorConfig.handler[type](errors[type]);\n\t\t\t\t}\n\n\t\t\t\tif (remaining.length)\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\n\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\t\t\t}\n\t\t);\n\n\t\tapp.config.globalProperties.$api = {\n\t\t\tgetUri(url) {\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\t[uri, params, config] = get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\t[uri, data, config] = get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\tcall(factory, configoverwrite, form) {\n\t\t\t\tif (Array.isArray(factory)) {\n\t\t\t\t\tconst $api = app.config.globalProperties.$api;\n\n\t\t\t\t\treturn Promise\n\t\t\t\t\t\t.allSettled(factory.map((config, index) => {\n\t\t\t\t\t\t\tif (!Array.isArray(config))\n\t\t\t\t\t\t\t\tconfig = ['#' + index, config];\n\t\t\t\t\t\t\treturn $api.call(config[1], {\n\t\t\t\t\t\t\t\terrorHeader: config[0],\n\t\t\t\t\t\t\t\terrorHandling: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\tconst [ , , config ] = get_config(form, undefined, undefined, configoverwrite || {});\n\t\t\t\t\t\t\tconst errorConfig = get_error_handler(config);\n\n\t\t\t\t\t\t\tif (!errorConfig.success && !errorConfig.fail) {\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst typedErrors = {};\n\t\t\t\t\t\t\tfor (var res of result) {\n\t\t\t\t\t\t\t\tconst [ allowed, item ] = res.status === 'fulfilled'\n\t\t\t\t\t\t\t\t\t? [ errorConfig.success, res.value ]\n\t\t\t\t\t\t\t\t\t: [ errorConfig.fail, res.reason ];\n\t\t\t\t\t\t\t\tif (!allowed)\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tconst errors = popHandleableErrors(errorConfig, get_error_list(item));\n\n\t\t\t\t\t\t\t\tfor (var type in errors) {\n\t\t\t\t\t\t\t\t\tif (!typedErrors[type])\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type] = {\n\t\t\t\t\t\t\t\t\t\t\t[item.config.errorHeader]: errors[type]\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type][item.config.errorHeader] = errors[type];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var errType in typedErrors) {\n\t\t\t\t\t\t\t\terrorConfig.handler[errType](typedErrors[errType]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet { method, url, params, config } = factory;\n\t\t\t\tif (configoverwrite !== undefined) {\n\t\t\t\t\tconfig = configoverwrite;\n\t\t\t\t}\n\t\t\t\tif (!method) {\n\t\t\t\t\tmethod = 'get';\n\t\t\t\t}\n\t\t\t\tif (method.toLowerCase)\n\t\t\t\t\tmethod = method.toLowerCase();\n\t\t\t\tif (method == 'get') {\n\t\t\t\t\treturn this.get(form, url, params, config);\n\t\t\t\t} else if (method == 'post') {\n\t\t\t\t\treturn this.post(form, url, params, config);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"FhcApi: method not allowed:\", method);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetErrorHandler(config) {\n\t\t\t\treturn get_error_handler(config);\n\t\t\t}\n\t\t};\n\n\t\tapp.provide('$api', app.config.globalProperties.$api);\n\t}\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/loadModule/' + category\n\t\t};\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst params = {categories, language}\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/phrasen/setLanguage',\n\t\t\tparams\n\t\t};\n\t},\n\tgetLanguage() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getLanguage'\n\t\t};\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getAllLanguages'\n\t\t};\n\t}\n};","import OldFhcApi from '../plugin/OldFhcApi.js'; // TODO(chris): remove at some point\nimport PluginsApi from './Api.js';\nimport ApiPhrasen from '../api/factory/phrasen.js';\n\nconst categories = Vue.reactive({});\nconst loadingModules = {};\nlet user_language = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language);\nexport let user_locale = Vue.computed(()=>{\n\tif(!user_language.value) return null;\n\treturn FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(language => language.sprache == user_language.value).LC_Time;\n});\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\nconst phrasen = {\n\tuser_language,\n\tuser_locale,\n\tsetLanguage(language) {\n\t\tconst catArray = Object.keys(categories)\n\t\treturn this.config.globalProperties.$api\n\t\t\t.call(ApiPhrasen.setLanguage(catArray, language))\n\t\t\t.then(res => {\n\t\t\t\tres.data.forEach(row => {\n\t\t\t\t\tcategories[row.category][row.phrase] = row.text\n\t\t\t\t})\n\n\t\t\t\t// update the reactive data that holds the current active user_language\n\t\t\t\tuser_language.value = language;\n\n\t\t\t\treturn res\n\t\t\t})\n\t},\n\tloadCategory(category) {\n\t\tif (Array.isArray(category))\n\t\t\treturn Promise.all(category.map(this.config.globalProperties\n\t\t\t\t.$p.loadCategory));\n\n\t\tif (!loadingModules[category])\n\t\t\tloadingModules[category] = this.config.globalProperties.$api\n\t\t\t\t.call(ApiPhrasen.loadCategory(category))\n\t\t\t\t.then(res => res?.data ? extractCategory(res.data, category) : {})\n\t\t\t\t.then(res => {\n\t\t\t\t\tcategories[category] = res;\n\t\t\t\t});\n\t\treturn loadingModules[category];\n\t},\n\tt_ref(category, phrase, params) {\n\t\tconsole.warn('deprecated');\n\t\treturn Vue.computed(() => this.t(category, phrase, params));\n\t},\n\tt(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input', category, phrase, params);\n\t\t\treturn '';\n\t\t}\n\t\tlet val = Vue.computed(() => {\n\t\t\tif (!categories[category])\n\t\t\t\treturn '';\n\t\t\treturn getValueForLoadedPhrase(category, phrase, params);\n\t\t});\n\t\tif (!categories[category])\n\t\t\tthis.loadCategory(category);\n\t\treturn val.value;\n\t}\n};\n\nexport default {\n\tinstall(app, options) {\n\t\tif (!app.config.globalProperties.$fhcApi)\n\t\t\tapp.use(OldFhcApi); // TODO(chris): remove at some point\n\t\tif (!app.config.globalProperties.$api)\n\t\t\tapp.use(PluginsApi);\n\t\tapp.config.globalProperties.$p = {\n\t\t\tt: phrasen.t,\n\t\t\tloadCategory: cat => phrasen.loadCategory.call(app, cat),\n\t\t\tsetLanguage: lang => phrasen.setLanguage.call(app, lang),\n\t\t\tuser_language: user_language,\n\t\t\tuser_locale,\n\t\t\tt_ref: phrasen.t_ref\n\t\t};\n\t\tapp.provide('$p', app.config.globalProperties.$p);\n\t}\n}","import accessibility from \"../directives/accessibility.js\";\n\nimport TabView from '../../../index.ci.php/public/js/components/primevue/tabview/tabview.esm.min.js';\nimport TabPanel from '../../../index.ci.php/public/js/components/primevue/tabpanel/tabpanel.esm.min.js';\n\nexport default {\n\tcomponents: {\n\t\ttabview: TabView,\n\t\ttabpanel: TabPanel\n\t},\n\tdirectives: {\n\t\taccessibility\n\t},\n\temits: [\n\t\t'update:modelValue',\n\t\t'change',\n\t\t'changed'\n\t],\n\tprops: {\n\t\tconfig: {\n\t\t\ttype: [String, Array, Object, Promise],\n\t\t\trequired: true\n\t\t},\n\t\tdefault: String,\n\t\tmodelValue: [String, Number, Boolean, Array, Object, Date, Function, Symbol],\n\t\tvertical: Boolean,\n\t\tborder: Boolean,\n\t\tuseprimevue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent: null,\n\t\t\ttabs: {},\n\t\t\tcount: null\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentTab() {\n\t\t\tif (this.tabs[this.current])\n\t\t\t\treturn this.tabs[this.current];\n\n\t\t\treturn { component: 'div' };\n\t\t},\n\t\tvalue: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tthis.$emit('update:modelValue', v);\n\t\t\t}\n\t\t},\n\t\tcalcActiveIndex: function() {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tlet index = keys.indexOf(this.default);\n\t\t\tif( index === -1 ) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tconfig(n) {\n\t\t\tthis.initConfig(n);\n\t\t}\n\t},\n\tmethods: {\n\t\thandleTabClick: function (e) {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tthis.change(keys[e.index]);\n\t\t},\n\t\tchange(key) {\n\t\t\tthis.$emit(\"change\", key)\n\t\t\tthis.current = key;\n\t\t\tthis.$nextTick(() => this.$emit(\"changed\", key));\n\t\t},\n\t\tinitConfig(config) {\n\t\t\tif (!config)\n\t\t\t\treturn;\n\t\t\tif (config instanceof Promise)\n\t\t\t\treturn config\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\t\t\tif (typeof config === 'string' || config instanceof String)\n\t\t\t\treturn this.$api\n\t\t\t\t\t.get(config)\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\n\t\t\tconst tabs = {};\n\n\t\t\tfunction _addToTabs(key, item) {\n\t\t\t\tif (!item.component)\n\t\t\t\t\treturn console.error('Component missing for ' + key);\n\n\t\t\t\t//making it reactive for showing headerSuffix\n\t\t\t\tconst value = Vue.reactive({\n\t\t\t\t\tsuffix: '',\n\t\t\t\t\tshowSuffix: item.showSuffix || false\n\t\t\t\t});\n\n\t\t\t\ttabs[key] = {\n\t\t\t\t\tcomponent: Vue.markRaw(Vue.defineAsyncComponent(() => import(item.component))),\n\t\t\t\t\ttitle: Vue.computed(() => item.title || key),\n\t\t\t\t\tconfig: item.config,\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue,\n\t\t\t\t\tsuffixhelper: item.suffixhelper ?? null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (Array.isArray(config)) {\n\t\t\t\tconfig.forEach((item, key) => _addToTabs(key, item));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tObject.entries(config).forEach(([key, item]) => _addToTabs(key, item));\n\t\t\t}\n\n\t\t\tif (this.current === null || !tabs[this.current]) {\n\t\t\t\tif (tabs[this.default])\n\t\t\t\t\tthis.current = this.default;\n\t\t\t\telse\n\t\t\t\t\tthis.current = Object.keys(tabs)[0];\n\t\t\t}\n\t\t\tthis.tabs = tabs;\n\t\t},\n\t\tupdateSuffix() {\n\t\t\tthis.getTabSuffix(this.currentTab);\n\t\t},\n\t\tremoveInvalidCountTabs(){\n\t\t\tif(this.modelValue.length)\n\t\t\t{\n\t\t\t\tlet countIst = this.modelValue.length;\n\t\t\t\tconst tabsToDelete = [];\n\n\t\t\t\tObject.entries(this.config).forEach(([key, item]) => {\n\n\t\t\t\t\tconst target = item?.config ? item : item?.value || item;\n\n\t\t\t\t\t// check config for validCountMulti\n\t\t\t\t\tif (target.config?.validCountMulti !== undefined) {\n\t\t\t\t\t\tlet tab;\n\t\t\t\t\t\tlet countSoll;\n\t\t\t\t\t\ttab = key;\n\t\t\t\t\t\tcountSoll = target.config.validCountMulti;\n\n\t\t\t\t\t\t//check if tab is existing\n\t\t\t\t\t\tif (countSoll !== undefined && countSoll == countIst) {\n\t\t\t\t\t\t\t//add tab if it was removed before\n\t\t\t\t\t\t\tif (tab in this.tabs == false) {\n\t\t\t\t\t\t\t\tconst value = Vue.reactive({\n\t\t\t\t\t\t\t\t\tsuffix: '',\n\t\t\t\t\t\t\t\t\tshowSuffix: item.showSuffix || false\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tthis.tabs[tab] = {\n\t\t\t\t\t\t\t\t\tcomponent: Vue.markRaw(Vue.defineAsyncComponent(() => import(item.component))),\n\t\t\t\t\t\t\t\t\ttitle: Vue.computed(() => item.title || tab),\n\t\t\t\t\t\t\t\t\tconfig: item.config,\n\t\t\t\t\t\t\t\t\ttab,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tsuffixhelper: item.suffixhelper ?? null\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to toDeleteArray if count is not allowed\n\t\t\t\t\t\tif (countSoll !== undefined && countSoll !== countIst) {\n\t\t\t\t\t\t\ttabsToDelete.push(tab);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Delete all tabs with count not allowed\n\t\t\t\ttabsToDelete.forEach(k => {\n\t\t\t\t\tdelete this.tabs[k];\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\tasync getTabSuffix(tab) {\n\t\t\tif (!tab.value.showSuffix) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (tab.suffixhelper !== null) {\n\t\t\t\tconst suffixhelper = await import(tab.suffixhelper);\n\t\t\t\tconst suffix = await suffixhelper.getSuffix(this.$api, this.modelValue);\n\t\t\t\ttab.value.suffix = suffix;\n\t\t\t} else {\n\t\t\t\ttab.value.suffix = '';\n\t\t\t}\n\t\t},\n\t\tgetTabSuffixes() {\n\t\t\tObject.entries(this.tabs).forEach(([key, item]) => this.getTabSuffix(item));\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initConfig(this.config);\n\t},\n\tmounted() {\n\t\tthis.getTabSuffixes();\n\t\tthis.removeInvalidCountTabs();\n\t},\n\tupdated() {\n\t\tthis.getTabSuffixes();\n\t\tthis.removeInvalidCountTabs();\n\t},\n\ttemplate: `\n\t<template v-if=\"useprimevue\">\n\n\t\t<tabview\n\t\t\tclass=\"d-flex flex-column\"\n\t\t\t:scrollable=\"true\"\n\t\t\t:lazy=\"true\"\n\t\t\t:activeIndex=\"calcActiveIndex\"\n\t\t\t:pt=\"{navContainer:{style: 'flex: 0 0 auto;'}, panelContainer:{class: 'overflow-y-scroll', style: 'flex: 1 1 auto;'}}\"\n\t\t\t@tab-click=\"handleTabClick\"\n\t\t>\n\t\t\t<tabpanel\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\t:header=\"tab.title + ((tab.value.showSuffix && tab.value.suffix !== '') ? ' ' + tab.value.suffix : '')\"\n\t\t\t>\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"tab.component\"\n\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t:config=\"tab.config\"\n\t\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t</keep-alive>\n\t\t\t</tabpanel>\n\t\t</tabview>\n\n\t</template>\n\t<template v-else=\"\">\n\n\t<div class=\"fhc-tabs d-flex\" :class=\"vertical ? 'align-items-stretch gap-3' : (border ? 'flex-column' : 'flex-column gap-3')\" v-if=\"Object.keys(tabs).length\">\n\t\t<div class=\"nav\" :class=\"vertical ? 'nav-pills flex-column' : 'nav-tabs'\">\n\n\t\t\t<div\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\tclass=\"nav-item nav-link\"\n\t\t\t\t:class=\"{active: tab.key == current}\"\n\t\t\t\t@click=\"change(tab.key)\"\n\t\t\t\t:aria-current=\"tab.key == current ? 'page' : ''\"\n\t\t\t\tv-accessibility:tab.[vertical]\n\t\t\t\t>\n\t\t\t\t{{tab.title}} <span v-if=\"tab.value.showSuffix && tab.value.suffix\"> {{ tab.value.suffix }}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :style=\"vertical ? '' : 'flex: 1 1 0%; height: 0%'\" class=\"overflow-auto flex-grow-1\" :class=\"vertical || !border ? '' : 'p-3 border-bottom border-start border-end'\">\n\t\t\t<keep-alive>\n\t\t\t\t<component\n\t\t\t\t\tref=\"current\"\n\t\t\t\t\t:is=\"currentTab.component\"\n\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t:config=\"currentTab.config\"\n\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t></component>\n\t\t\t</keep-alive>\n\t\t</div>\n\t</div>\n\n\t</template>`\n};\n\n","export default {\n\tcreated(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tel.style.cursor = 'pointer';\n\t\t\t\tconst [prev, next] = binding.modifiers.vertical ? ['ArrowUp', 'ArrowDown'] : ['ArrowLeft', 'ArrowRight'];\n\t\t\t\tel.addEventListener('click', () => {\n\t\t\t\t\tlet act = el.parentNode.querySelector('[tabindex=\"0\"]');\n\t\t\t\t\tif (act)\n\t\t\t\t\t\tact.tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t});\n\t\t\t\tel.addEventListener('focus', () => {\n\t\t\t\t\tel.ariaSelected = \"true\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('blur', () => {\n\t\t\t\t\tel.ariaSelected = \"false\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('keydown', e => {\n\t\t\t\t\tswitch (e.code) {\n\t\t\t\t\t\tcase prev:\n\t\t\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.previousSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase next:\n\t\t\t\t\t\t\tif (el.nextSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.nextSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\t\tel.click();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tmounted(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tlet activetab = -1;\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tnode.ariaPosInSet = index;\n\t\t\t\t\tif (node.tabIndex === 0)\n\t\t\t\t\t\tactivetab = index;\n\t\t\t\t});\n\t\t\t\tif (activetab == -1) {\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else if (el.classList.contains('active')) {\n\t\t\t\t\tel.parentNode.children[activetab].tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else {\n\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tif (el.tabIndex === 0) {\n\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\telse if (el.nextSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t}\n\t\t\t\tconst pos = parseInt(el.ariaPosInSet);\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tif (index > pos)\n\t\t\t\t\t\tnode.ariaPosInSet = index-1;\n\t\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t}\n}","export const StudentDropdown = {\n\tname: \"StudentDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'studentChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\terrors: null,\n\t\t\tinternal_available_student_info: [],\n\t\t\tinternal_selected_student_info: null\n\t\t};\n\t},\n\tprops: {\n\n\t},\n\tmethods: {\n\t\tstudentChanged(e) {\n\n\t\t\tthis.$entryParams.selected_student = e.value\n\t\t\tthis.$entryParams.selected_student_info = this.$entryParams.availableStudents.find(s => s.prestudent_id === e.value.prestudent_id)\n\t\t\tthis.$emit('studentChanged', e)\n\t\t},\n\t\tasync setupData() {\n\t\t\tif(!(this.$entryParams.permissions.assistenz || this.$entryParams.permissions.admin)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tawait this.$entryParams.setupPromise.then(() => {\n\t\t\t\tthis.internal_available_student_info =  this.$entryParams.availableStudents\n\t\t\t\tthis.internal_selected_student_info =  this.$entryParams.selected_student_info\n\t\t\t})\n\t\t},\n\t\tresetData() {\n\t\t\tthis.internal_available_student_info =  this.$entryParams.availableStudents\n\t\t\tthis.internal_selected_student_info =  this.$entryParams.selected_student_info\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\tconst gruppe = ' (' + option.semester + option.verband + option.gruppe + ')'\n\t\t\treturn option.nachname + ' ' + option.vorname + ' ' + gruppe.replace(/\\s+/g, '') // remove spaces\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.setupData()\n\t},\n\ttemplate: `\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-3 d-flex align-items-center\"><label for=\"leSelect\">{{ $p.t('global/students') }}</label></div>\n\t\t\t<div class=\"col-8\">\n\t\t\t\t<Dropdown @change=\"studentChanged\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" \n\t\t\t\tv-model=\"internal_selected_student_info\" :options=\"internal_available_student_info\">\n\t\t\t\t</Dropdown>\n\t\t\t</div>\n\t\t</div>\n\t`\n}","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {lektorFormatters, studentFormatters} from \"../../formatters/formatters.js\";\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\n\nimport {StudiensemesterDropdown} from './StudiensemesterDropdown.js';\n\nimport ApiProfil from '../../api/factory/profil.js';\n\nexport default {\n\tname: 'StudentAnwesenheitComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreFilterCmpt,\n\t\tCoreRESTClient,\n\t\tStudiensemesterDropdown\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tstudiensemester: [],\n\t\t\ttableBuiltPromise: null,\n\t\t\tstudentViewTabulatorOptions: {\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tlayout: 'fitDataStretch',\n\t\t\t\tselectable: false,\n\t\t\t\theight: this.$entryParams.tabHeights.studentAnw,\n\t\t\t\trenderVerticalBuffer: 2000,\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: 'Lehrveranstaltung', visible: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/datum')), field: 'datum', formatter: lektorFormatters.formDateOnly, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: lektorFormatters.dateOnlyTimeFormatter, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: lektorFormatters.dateOnlyTimeFormatter, tooltip:false, widthGrow: 1, minWidth: 150},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/einheiten')), field: 'dauer', formatter: this.einheitenFormatter, tooltip:false, widthGrow: 1, minWidth: 250},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anteilAnw')), field: 'anteil', bottomCalcFormatter: this.sumBottomCalcFormatter, bottomCalcParams: this.bottomCalcParamLookup, tooltip:false, bottomCalc: this.anwCalc, formatter: this.percentFormatter},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/anwesend')), field: 'student_status', formatter: this.formAnwesenheit, tooltip:false, minWidth: 150},\n\t\t\t\t],\n\t\t\t\tgroupBy: ['lehrveranstaltung_id'],\n\t\t\t\tgroupStartOpen:false,\n\t\t\t\tgroupHeader: this.customGroupHeader,\n\t\t\t\tgroupToggleElement:\"header\",\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-studentAnwTable\"\n\t\t\t},\n\t\t\tstudentViewTabulatorEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tsums: {},\n\t\t\tfilterTitle: \"\"\n\t\t};\n\t},\n\tmethods: {\n\t\tcustomGroupHeader(value, count, data) {\n\t\t\treturn '<div style=\"display:flex; justify-content: space-between;\">' +\n\t\t\t\t'<div>' + (this.$p.user_language.value == 'German' ? data[0].bezeichnung : data[0].bezeichnung_english) + '</div>' +\n\t\t\t\t'<div style=\"flex-grow: 1; text-align: right;\">'+this.$p.t('global/anwesenheit') + ': ' + data[0].anwesenheit + \" %\" + '</div>' +\n\t\t\t\t'</div>';\n\t\t},\n\t\tpercentFormatter: function (cell) {\n\t\t\tconst data = cell.getData()\n\t\t\tconst val = data.sum ??  data.anteil ?? '-'\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'+ val + ' %</div>'\n\t\t},\n\t\tbottomCalcParamLookup (values, data) {\n\t\t\tconst first = data[0]\n\t\t\treturn first ? first.anwesenheit + ' %' : ''\n\t\t},\n\t\teinheitenFormatter: function (cell) {\n\t\t\tconst valInMin = Number(cell.getValue())\n\t\t\tlet valInEh = (cell.getValue() / 60 / this.$entryParams.permissions.einheitDauer)\n\t\t\tconst rest = valInEh % 1\n\t\t\tif(rest > 0) valInEh = valInEh.toFixed(2).replace('.', ',')\n\n\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%\">'\n\t\t\t\t+valInMin+' '+this.$p.t('global/minuten')+' / '+valInEh+' '+this.$p.t('global/einheiten')+\n\t\t\t\t'</div>'\n\t\t},\n\t\tformAnwesenheit: function(cell)\n\t\t{\n\t\t\tlet data = cell.getValue();\n\t\t\tif (data === this.$entryParams.permissions.anwesend_status || data === this.$entryParams.permissions.entschuldigt_status)\n\t\t\t{\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\tlet returnValue = '';\n\t\t\t\tif (data === this.$entryParams.permissions.entschuldigt_status)\n\t\t\t\t\treturnValue = ' ' + this.$p.t('global/entschuldigungAkzeptiert');\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%;\"><i class=\"fa fa-check\" style=\"margin-right: 4px;\"></i> ' + returnValue + '</div>';\n\t\t\t}\n\t\t\telse if (data === this.$entryParams.permissions.abwesend_status)\n\t\t\t{\n\t\t\t\tlet returnValue = '';\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\n\t\t\t\tif (cell.getData().hasOffene)\n\t\t\t\t\treturnValue =  ' ' + this.$p.t('global/entschuldigungOffen');\n\t\t\t\telse if (cell.getData().hasAbgelehnte)\n\t\t\t\t\treturnValue = ' ' + this.$p.t('global/entschuldigungAbgelehnt');\n\n\t\t\t\treturn '<div style=\"display: flex; justify-content: center; align-items: center; height: 100%;\"><i class=\"fa fa-xmark\" style=\"margin-right: 4px;\"></i> ' + returnValue + '</div>';\n\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn '-'\n\t\t},\n\t\tssChangedHandler: async function(studiensemester) {\n\t\t\tthis.studiensemester = studiensemester\n\t\t\tthis.loadAnwesenheitenByUID()\n\t\t},\n\t\tasync loadAnwesenheitenByUID() {\n\t\t\tawait this.$entryParams.profileViewDataPromise\n\n\t\t\t// toggle anwesenheiten loading procedure based on admin or student login\n\t\t\tconst uid = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.uid : this.$entryParams.viewDataStudent.student_uid\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tif(!uid) return\n\t\t\t\tthis.$api.call(ApiProfil.getAllAnwByUID(this.studiensemester, uid, person_id))\n\t\t\t\t.then(res => {\n\t\t\t\tif(res.meta.status !== \"success\") {\n\t\t\t\t\tthis.$fhcAlert.alertError(this.$p.t('global/errorLoadingAnwesenheiten'))\n\t\t\t\t} else {\n\t\t\t\t\tconst processedAnw = this.processAnw(res.data)\n\n\t\t\t\t\tthis.$refs.uebersichtTable.tabulator.setData(processedAnw);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tanwCalc(values, data, percentage) {\n\t\t\treturn percentage\n\t\t},\n\t\tprocessAnw(data) {\n\t\t\tconst anw = data[0].retval\n\t\t\tthis.sums = {}\n\t\t\t// calc sum for each lva to display percentage\n\t\t\tanw.forEach(entry => {\n\t\t\t\tif(!this.sums[entry.lehrveranstaltung_id]) {\n\t\t\t\t\tthis.sums[entry.lehrveranstaltung_id] = entry.dauer\n\t\t\t\t} else {\n\t\t\t\t\tthis.sums[entry.lehrveranstaltung_id] += entry.dauer\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tanw.forEach(a => {\n\t\t\t\ta.vonDate = new Date(a.von)\n\t\t\t\ta.bisDate = new Date(a.bis)\n\t\t\t\ta.anteil = (a.dauer / this.sums[a.lehrveranstaltung_id] * 100).toFixed(2)\n\t\t\t})\n\n\t\t\tif(this.$entryParams.permissions.entschuldigungen_enabled) {\n\t\t\t\tconst ent = data[1].retval\n\t\t\t\tent.forEach(e => {\n\t\t\t\t\te.vonDate = new Date(e.von)\n\t\t\t\t\te.bisDate = new Date(e.bis)\n\t\t\t\t})\n\n\t\t\t\t// filter entschuldigungen into offene and abgelehnte (entschuldigt status already in anw_user)\n\t\t\t\tconst offene = ent.filter(e => e.akzeptiert === null)\n\t\t\t\tconst abgelehnte = ent.filter(e => e.akzeptiert === false)\n\n\t\t\t\t// for every offene set anw_user entry property to true for every eligible date & abgelehnt combo\n\t\t\t\toffene.forEach(o => {\n\t\t\t\t\tconst anwInDateRange = anw.filter(a => a.vonDate >= o.vonDate && a.bisDate <= o.bisDate && a.student_status === this.$entryParams.permissions.abwesend_status)\n\t\t\t\t\tanwInDateRange.forEach(a => a.hasOffene = true)\n\t\t\t\t})\n\n\t\t\t\t// for every abgelehnte set anw_user entry property to true for every eligible date & abgelehnt combo\n\t\t\t\tabgelehnte.forEach(abg => {\n\t\t\t\t\tconst anwInRange = anw.filter(a => a.vonDate >= abg.vonDate && a.bisDate <= abg.bisDate && a.student_status === this.$entryParams.permissions.abwesend_status)\n\t\t\t\t\tanwInRange.forEach(a => a.hasAbgelehnte = true)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn anw\n\t\t},\n\t\tasync reload() {\n\t\t\tthis.loadAnwesenheitenByUID()\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs.uebersichtTable?.tabulator) this.$refs.uebersichtTable.tabulator.redraw(true)\n\t\t},\n\t\tasync setup(){\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tthis.loadAnwesenheitenByUID()\n\n\t\t\tthis.studiensemester = this.$entryParams.sem_kurzbz\n\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tsumBottomCalcFormatter(cell) {\n\t\t\tconst val = Number.parseFloat(cell.getValue())\n\t\t\tif(Number.isNaN(val)) return cell.getValue()\n\t\t\tif (val < (this.$entryParams.permissions.positiveRatingThreshold * 100)) {\n\t\t\t\tconst el = cell.getElement()\n\t\t\t\tel.style.setProperty('color', 'red')\n\t\t\t}\n\n\t\t\treturn cell.getValue()\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\n\t\t\tconst collapsables = document.getElementById('filterCollapsables' + tableID);\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentAnw'].value = screenY - rect.top - collapsables.clientHeight\n\n\t\t\tif(this.$refs.uebersichtTable.tabulator) this.$refs.uebersichtTable.tabulator.redraw(true)\n\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.setup()\n\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tcomputed: {\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentAnwesenheit'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<core-base-layout\n\t\t:title=\"filterTitle\">\n\t\t<template #main>\n\t\t\t<div ref=\"studentAnwContentHeader\" class=\"row\" style=\"justify-content: flex-end;\">\n\t\t\t\t\n\t\t\t\t\t<div style=\"max-width: 50px; align-content: center;\" v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t<h5><i class=\"fa fa-circle-question\"></i></h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<StudiensemesterDropdown @ssChanged=\"ssChangedHandler\"></StudiensemesterDropdown>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"uebersichtTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"studentViewTabulatorOptions\"\n\t\t\t\t:tabulator-events=\"studentViewTabulatorEventHandlers\"\n\t\t\t\t:tableOnly=\"true\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\n\t</core-base-layout>\n`\n};","import ApiInfo from '../../api/factory/info.js';\n\nexport const StudiensemesterDropdown = {\n\tname: \"StudiensemesterDropdown\",\n\temits: [\n\t\t'ssChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\toptions: [],\n\t\t\tselectedOption: [],\n\t\t\terrors: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.loadDropdown();\n\t},\n\tprops() {\n\n\t},\n\tmethods: {\n\t\tloadDropdown() {\n\t\t\tthis.$api.call(ApiInfo.getStudiensemester())\n\t\t\t\t.then(res => {\n\n\t\t\t\tif(res.meta.status !== \"success\") return\n\t\t\t\tthis.options = res.data?.[0] ?? [];\n\t\t\t\tconst aktuell = res.data?.[1]?.[0].studiensemester_kurzbz\n\n\t\t\t\tthis.selectedOption = aktuell ?? this._.root.appContext.config.globalProperties.$entryParams.sem_kurzbz\n\t\t\t});\n\t\t},\n\t\tssChanged(e) {\n\t\t\tthis.$emit(\"ssChanged\", e.target.value);\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div>\n\t\t\t<select v-model=\"selectedOption\" @change=\"ssChanged\" class=\"form-control\" id=\"studiensemester\">\n\t\t\t\t<option v-for=\"option in options\" :value=\"option.studiensemester_kurzbz\">\n\t\t\t\t\t{{ option.studiensemester_kurzbz }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</div>\n\t`\n}","\nexport const Range = {\n\tname: \"Range\",\n\tdata () {\n\t\treturn {\n\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null\n\t},\n\tcreated() {\n\n\t},\n\n\tmethods: {\n\n\t},\n\twatch:{\n\n\t},\n\tcomputed: {\n\t\tmodelKeys() {\n\t\t\tif(!this.modelValue) return []\n\t\t\treturn Object.keys(this.modelValue)\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div v-if=\"modelValue\" style=\"max-height: 400px; overflow-y: auto; display: flex; gap: 2px;\">\n\t\t\t<template v-for=\"key in modelKeys\">\n\t\t\t\t<span style=\"display: inline-block; margin-right: 2px;\"><span style=\"font-weight: bold\">{{key}}</span>: {{modelValue[key]}} </span>\n\t\t\t</template>\n\t\t</div>\n\t`\n}\n\nexport default Range;","import VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport Range from './Range.js';\nexport const AnwTimeline = {\n\tname: \"AnwTimeline\",\n\tcomponents: {\n\t\tDatepicker: VueDatePicker,\n\t\tTimeline: primevue.timeline,\n\t\tRange\n\t},\n\tdata () {\n\t\treturn {\n\t\t\ttimelineStart: new Date(new Date(Date.now()).getFullYear(), 0, 1, 0, 0, 0, 0),\n\t\t\ttimelineEnd: new Date(new Date(Date.now()).getFullYear(), 12, 31, 0, 0, 0, 0),\n\t\t\thourWidth: 20,\n\t\t\tselectedRange: null // when clicking anw or ent assign this and show their fields\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null,\n\t\tanwArray: null,\n\t\tentArray: null\n\t},\n\tmethods: {\n\t\tformatDateTimelineStart(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `Timeline Start: ${day}.${month}.${year}`;\n\t\t},\n\t\tformatDateTimelineEnd(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\n\t\t\treturn `Timeline End: ${day}.${month}.${year}`;\n\t\t},\n\t\tformatEntTime(ent) {\n\t\t\treturn this.formatDate(ent.von) + ' - ' + this.formatDate(ent.bis)\n\t\t},\n\t\thighlightEntschuldigung(ent) {\n\t\t\t// check if date is in current range, if not expand range and then scrollIntoView nextTick\n\t\t\t\n\t\t\tconst id = 'entRange-' + ent.entschuldigung_id\n\t\t\tconst el = document.getElementById(id)\n\t\t\tif (el) {\n\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t}\n\t\t},\n\t\thighlightKontrolle(anw) {\n\t\t\tconst id = 'anwRange-' + anw.anwesenheit_id\n\t\t\tconst el = document.getElementById(id)\n\t\t\tif (el) {\n\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t}\n\t\t},\n\t\tshowRangeDetails(range) {\n\t\t\tthis.selectedRange = range\t\n\t\t},\n\t\tdateToPercentage(dateStr) {\n\t\t\tconst date = new Date(Date.parse(dateStr))\n\t\t\tconst days = this.getDaysBetweenDates(date, this.timelineStart)\n\t\t\tconst totalDays = this.getDaysBetweenDates(this.timelineStart, this.timelineEnd)\n\t\t\treturn (days / totalDays) * 100\n\t\t},\n\t\tgetRangeColor(akzeptiert) {\n\t\t\tif (akzeptiert === true) return 'rgba(0, 123, 255, 0.2)' // blue\n\t\t\tif (akzeptiert === false) return 'rgba(220, 53, 69, 0.2)' // red\n\t\t\treturn 'rgba(32, 201, 151, 0.2)' // teal\n\t\t},\n\t\tgetRangeColorAnw(anw) {\n\t\t\tif (anw.status === \"anwesend\") return 'rgba(182,252,0,0.66)' // blue\n\t\t\tif (anw.status === \"abwesend\") return 'rgba(255,4,4,0.68)' // red\n\t\t\tif (anw.status === \"entschuldigt\") return 'rgba(3,53,245,0.91)' // teal\n\t\t},\n\t\tgetOverlayStyleEnt(range) {\n\t\t\tconst start = new Date(range.von)\n\t\t\tconst end = new Date(range.bis)\n\t\t\tconst color = this.getRangeColor(range.akzeptiert)\n\t\t\tconst offsetDays = this.getDaysBetweenDates(start, this.timelineStart)\n\t\t\tconst rangeLength = this.getDaysBetweenDates(start, end)\n\t\t\tconst rangeTime =  (end.getHours() + (end.getMinutes() / 60)) - (start.getHours() + (start.getMinutes() / 60))\n\t\t\tconst offsetHours = start.getHours() + (start.getMinutes() / 60)\n\t\t\t\t\n\t\t\tconst zOffset = Math.round(10000 / (rangeLength * 24 + rangeTime))\n\t\t\t\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: `${offsetDays * this.dayWidth + offsetHours * this.hourWidth}px`,\n\t\t\t\twidth: `${rangeLength * this.dayWidth + rangeTime * this.hourWidth}px`,\n\t\t\t\theight: '100%',\n\t\t\t\ttransform: 'translateY(-20px)',\n\t\t\t\tbackgroundColor: color,\n\t\t\t\tzIndex: 9999 + zOffset,\n\t\t\t\tborderRadius: '6px'\n\t\t\t}\n\t\t},\n\t\tgetOverlayStyleAnw(range) {\n\t\t\tconst start = new Date(range.von)\n\t\t\tconst end = new Date(range.bis)\n\t\t\tconst color = this.getRangeColorAnw(range)\n\t\t\tconst offsetDays = this.getDaysBetweenDates(start, this.timelineStart)\n\t\t\tconst rangeLength = this.getDaysBetweenDates(start, end)\n\t\t\tconst rangeTime =  (end.getHours() + (end.getMinutes() / 60)) - (start.getHours() + (start.getMinutes() / 60))\n\t\t\tconst offsetHours = start.getHours() + (start.getMinutes() / 60)\n\t\t\t\n\t\t\tconst zOffset = Math.round(10000 / (rangeLength * 24 + rangeTime))\n\t\t\t\n\t\t\treturn {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: `${offsetDays * this.dayWidth + offsetHours * this.hourWidth}px`,\n\t\t\t\twidth: `${rangeLength * this.dayWidth + rangeTime * this.hourWidth}px`,\n\t\t\t\theight: '100%',\n\t\t\t\ttransform: 'translateY(20px)',\n\t\t\t\tbackgroundColor: color,\n\t\t\t\tzIndex: 9999 + zOffset,\n\t\t\t\tborderRadius: '6px'\n\t\t\t}\n\t\t},\n\t\tgetDaysBetweenDates(date1, date2) {\n\t\t\tconst diffTime = Math.abs(date1 - date2); // ms\n\t\t\treturn Math.floor(diffTime / (1000 * 60 * 60 * 24)); // convert to days\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tgetTimelineEventStyle() {\n\t\t\treturn {\n\t\t\t\twidth: `${this.dayWidth}px`,\n\t\t\t\ttransform: `translateX(-${this.dayWidth / 2}px)`,\n\t\t\t\tminHeight: '420px'\n\t\t\t}\n\t\t},\n\t\thandleScrollTimeline(e) {\n\t\t\tif(e.wheelDelta > 0) {\n\t\t\t\tthis.hourWidth *= 1.2\n\t\t\t} else if (e.wheelDelta < 0) {\n\t\t\t\tthis.hourWidth = this.hourWidth / 120 * 100\n\t\t\t}\n\t\t},\n\t\tgoToday() {\n\t\t\tconst today = new Date();\n\t\t\tconst yyyy = today.getFullYear();\n\t\t\tconst mm = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-based\n\t\t\tconst dd = String(today.getDate()).padStart(2, '0');\n\t\t\t\n\t\t\tthis.scrollToDate(`${yyyy}-${mm}-${dd}`)\n\t\t},\n\t\tscrollToDate(datestr) {\n\t\t\tsetTimeout(() => {\n\n\t\t\t\tconst el = document.getElementById(datestr)\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t}\n\t\t\t}, 200)\n\t\t},\n\t\tanwDateFormat(anw) {\n\t\t\tconst vonparts = anw.von.split(\" \")\n\t\t\tconst bisparts = anw.bis.split(\" \")\n\t\t\treturn `${vonparts[0]} | ${vonparts[1]} - ${bisparts[1]}`\n\t\t}\n\t},\n\twatch:{\n\t\tmodelValue: {\n\t\t\thandler(newVal) {\n\t\t\t\tif(!newVal) return\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst id = 'entRange-' + newVal.entschuldigung_id\n\t\t\t\t\tconst el = document.getElementById(id)\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t\t}\n\t\t\t\t}, 200)\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetTooltipAnwTimeline() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAnwTimeline'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tdayWidth() {\n\t\t\treturn this.hourWidth * 24\t\n\t\t},\n\t\ttimelineWidth() {\n\t\t\treturn this.getDaysBetweenDates(this.timelineStart, this.timelineEnd) * this.dayWidth\t\n\t\t},\n\t\tentTimeRanges() {\n\t\t\tif(!this.entArray) return []\n\t\t\treturn this.entArray.filter(ent => new Date(ent.von) >= this.timelineStart && new Date(ent.bis) <= this.timelineEnd)\n\t\t},\n\t\tanwTimeRanges() {\n\t\t\tif(!this.anwArray) return []\n\t\t\treturn this.anwArray.filter(anw => new Date(anw.von) >= this.timelineStart && new Date(anw.bis) <= this.timelineEnd)\n\t\t},\n\t\tevents() {\n\t\t\tconst startDate = new Date(this.timelineStart)\n\t\t\tconst days = []\n\t\t\tlet current = startDate\n\n\t\t\twhile (current <= this.timelineEnd) {\n\t\t\t\tconst year = current.getFullYear()\n\t\t\t\tconst month = String(current.getMonth() + 1).padStart(2, '0')\n\t\t\t\tconst day = String(current.getDate()).padStart(2, '0')\n\t\t\t\tconst formattedDate = `${year}-${month}-${day}`\n\n\t\t\t\tdays.push({\n\t\t\t\t\ttitle: `${month}/${day}`,\n\t\t\t\t\tdate: formattedDate\n\t\t\t\t})\n\n\t\t\t\tcurrent.setDate(current.getDate() + 1)\n\t\t\t}\n\n\t\t\treturn days\n\t\t\t\n\t\t},\n\t\tgetTimelineStyle() {\n\t\t\treturn { \n\t\t\t\tminWidth: this.timelineWidth + 'px',\n\t\t\t\t'--timeline-event-width': this.dayWidth + 'px'\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tif(!this.modelValue) {\n\t\t\tthis.goToday()\n\t\t} else {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst id = 'entRange-' + newVal.entschuldigung_id\n\t\t\t\tconst el = document.getElementById(id)\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\t\t\t\t}\n\t\t\t}, 200)\n\t\t}\n\t\t\n\t},\n\ttemplate: `\n\t<div v-if=\"anwArray && entArray\" class=\"row\" style=\"padding: 0px; margin: 0px;\">\n\t\t<div class=\"col-3\">\n\t\t\t<p>Entschuldigungen</p>\n\t\t\t<div style=\"max-height: 400px; overflow: auto;\">\n\t\t\t\t<template v-for=\"ent in entArray\" :key=\"'entmenu-'+ent.entschuldigung_id\">\n\t\t\t\t\t<div class=\"position-relative\" >\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-light\" @click=\"highlightEntschuldigung(ent)\"><span>{{ent.entschuldigung_id}}: {{formatEntTime(ent)}}</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-3\"> \n\t\t\t<div style=\"max-height: 400px; overflow: auto;\">\n\t\t\t\t<p>Anwesenheitskontrollen</p>\n\t\t\t\t<template v-for=\"anw in anwArray\" :key=\"'anwmenu-'+anw.anwesenheit_id\">\n\t\t\t\t\t<div class=\"position-relative\" >\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-light\" @click=\"highlightKontrolle(anw)\"><span>{{anw.anwesenheit_id}}: {{ anwDateFormat(anw) }}</span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-6\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<Range v-model=\"selectedRange\"/>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-2\">\n\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"timelineStart\"\n\t\t\t\t\t\tv-model=\"timelineStart\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:format=\"formatDateTimelineStart\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:time-picker=\"false\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"timelineEnd\"\n\t\t\t\t\t\tv-model=\"timelineEnd\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:format=\"formatDateTimelineEnd\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:time-picker=\"false\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\"><button type=\"button\" class=\"btn btn-primary\" @click=\"goToday\">today</button></div>\n\t\t\t\t<div v-tooltip.bottom=\"getTooltipAnwTimeline\">\n\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"row\" style=\"padding: 0px; margin: 0px;\">\n\t\t\t<div @wheel.prevent=\"handleScrollTimeline\" class=\"custom-timeline-scroll-wrapper p-5\" style=\"margin-left: 12px; margin-right:12px;\">\n\t\t\t\t<div class=\"timeline-container position-relative\" :style=\"getTimelineStyle\">\n\t\t\t\t\t<!-- Ent Range Overlays -->\n\t\t\t\t\t<div\n\t\t\t\t\t  v-for=\"(range, index) in entTimeRanges\"\n\t\t\t\t\t  :key=\"'entRange-' + index\"\n\t\t\t\t\t  :id=\"'entRange-' + range.entschuldigung_id\"\n\t\t\t\t\t  class=\"timeline-overlay\"\n\t\t\t\t\t  :style=\"getOverlayStyleEnt(range)\"\n\t\t\t\t\t  @click=\"showRangeDetails(range)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"time-marker start\">{{ formatDate(range.von) }}</div>\n\t\t\t\t\t\t<div class=\"time-marker end\" style=\"transform: translateY(20px)\">{{ formatDate(range.bis) }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Anw Overlays -->\n\t\t\t\t\t<div\n\t\t\t\t\t  v-for=\"(range, index) in anwTimeRanges\"\n\t\t\t\t\t  :key=\"'anwRange-' + index\"\n\t\t\t\t\t  :id=\"'anwRange-' + range.anwesenheit_id\"\n\t\t\t\t\t  class=\"timeline-overlay\"\n\t\t\t\t\t  :style=\"getOverlayStyleAnw(range)\"\n\t\t\t\t\t  @click=\"showRangeDetails(range)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"time-marker start\">{{ formatDate(range.von) }}</div>\n\t\t\t\t\t\t<div class=\"time-marker end\" style=\"transform: translateY(20px)\">{{ formatDate(range.bis) }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\t<!-- Timeline -->\n\t\t\t\t\t<Timeline :value=\"events\" layout=\"horizontal\" :unstyled=\"true\" dataKey=\"date\">\n\t\t\t\t\t\t<template #marker=\"event\">\n\t\t\t\t\t\t\t<div style=\"background-color: purple; width: 24px; height: 24px;\" :id=\"event.item.date\"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #content=\"slotProps\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"event-card text-center p-2\"\n\t\t\t\t\t\t\t:style=\"getTimelineEventStyle(slotProps.item)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h6>{{ slotProps.item.title }}</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Timeline>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div v-else class=\"text-center\">\n\t\t<i class=\"fa-solid fa-spinner fa-pulse fa-3x\"></i>\n\t</div>\n\t`\n}\n\nexport default AnwTimeline;","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport CoreTabs from '../../../../../js/components/Tabs.js';\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {StudentDropdown} from \"../Setup/StudentDropdown.js\"\nimport StudentAnwesenheitComponent from \"./StudentAnwesenheitComponent.js\";\n\nimport ApiProfil from '../../api/factory/profil.js';\nimport AnwTimeline from '../Assistenz/AnwTimeline.js';\n\nexport const StudentComponent = {\n\tname: 'StudentComponent',\n\tcomponents: {\n\t\tAnwTimeline,\n\t\tCoreNavigationCmpt,\n\t\tCoreBaseLayout,\n\t\tCoreTabs,\n\t\tBsModal,\n\t\tStudentDropdown,\n\t\tStudentAnwesenheitComponent\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttabsStudent: this.getTabsStudent(),\n\t\t\tviewDataStudent: {}\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: []\n\t},\n\tmethods: {\n\t\tgetTabsStudent() {\n\t\t\tconst componentPath = this.$entryParams.permissions.tabPaths['StudentAnw']\n\t\t\tconst tabs = {\n\t\t\t\tanwesenheiten: { title: this.$p.t('global/anwesenheiten'), component: componentPath},\n\t\t\t}\n\t\t\tif(this.$entryParams.permissions.entschuldigungen_enabled) {\n\t\t\t\tconst entCompPath = this.$entryParams.permissions.tabPaths['StudentEnt']\n\t\t\t\ttabs['entschuldigungen'] = { title: this.$p.t('global/entschuldigungen'), component: entCompPath }\n\t\t\t}\n\t\t\tif(this.$entryParams.permissions.admin) {\n\t\t\t\tconst timelinePath = this.$entryParams.permissions.tabPaths['StudentTimeline']\n\t\t\t\ttabs['timeline'] = { title: this.$p.t('global/anwTimelineV2'), component: timelinePath}\n\t\t\t}\n\t\t\treturn tabs\n\t\t},\n\t\trouteToCodeScan() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'Scan'\n\t\t\t})\n\t\t},\n\t\tcheckEntryParamPermissions() {\n\t\t\tif(this.$entryParams.permissions === undefined) { // routed into app inner component skipping init in landing page\n\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(this.permissions)\n\t\t\t}\n\n\t\t\tif(this.$entryParams.phrasenPromise === undefined) {\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['global', 'person', 'lehre', 'table', 'filter', 'ui'])\n\t\t\t}\n\n\t\t},\n\t\thandleTabChanged (key) {\n\t\t\t// check if the current has redrawTable function -> its a tabulator so redraw it to avoid bad things\n\t\t\tif(this.$refs.tabsStudent?._?.refs?.current?.redrawTable) this.$refs.tabsStudent._.refs.current.redrawTable()\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\tthis.$entryParams.profileViewDataPromise = new Promise((resolve) => {\n\t\t\t// if student is logged in as himself load his own viewData\n\t\t\tif(!this.$entryParams.selected_student_info) {\n\n\t\t\t\tthis.$api.call(ApiProfil.getProfileViewData(null))\n\t\t\t\t\t\t.then(res => {\n\n\t\t\t\t\t\tconst data = res.data.retval[0]\n\t\t\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid\n\t\t\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\t\t\tthis.$entryParams.viewDataStudent = data\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t});\n\n\t\t\t\t} else { // admin or assistenz check student data - set viewdata from selected student\n\t\t\t\t\tconst data = this.$entryParams.selected_student_info\n\t\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid ? data.student_uid : data.uid\n\t\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\t\tresolve()\n\t\t\t\t}\n\n\t\t\t})\n\t\t},\n\t\tstudentChangedHandler() {\n\n\t\t\tthis.$refs.tabsStudent._.refs.current.reload()\n\n\t\t\tconst uid = this.$entryParams.selected_student_info.uid ? this.$entryParams.selected_student_info.uid : this.$entryParams.selected_student_info.student_uid\n\t\t\t\tthis.$api.call(ApiProfil.getProfileViewData(uid))\n\t\t\t\t.then(res => {\n\n\t\t\t\tif(!res?.data?.retval?.[0]) return\n\t\t\t\tconst data = res.data.retval[0]\n\t\t\t\tthis.viewDataStudent.vorname = data.vorname\n\t\t\t\tthis.viewDataStudent.nachname = data.nachname\n\t\t\t\tthis.viewDataStudent.student_uid = data.student_uid\n\t\t\t\tthis.viewDataStudent.person_id = data.person_id\n\t\t\t\tthis.viewDataStudent.prestudent_id = data.prestudent_id\n\t\t\t\tthis.viewDataStudent.gruppe = data.gruppe\n\t\t\t\tthis.viewDataStudent.verband = data.verband\n\t\t\t\tthis.viewDataStudent.semester = data.semester\n\n\t\t\t\tthis.$entryParams.viewDataStudent = data\n\t\t\t});\n\n\t\t},\n\t\tasync awaitPhrasen() {\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t},\n\t\tredrawTable() {\n\t\t\t// empty method so landing page doesnt break on this tab\n\t\t}\n\t},\n\tcreated() {\n\t},\n\tmounted() {\n\t\tthis.checkEntryParamPermissions()\n\t\tthis.setup()\n\n\t\t// get some info if desired user endpoint is anw list or entschuldigungen tab and set it accordingly\n\n\t\tif(this.$entryParams.activetabstudent) this.$refs.tabsStudent.change(this.$entryParams.activetabstudent)\n\n\t},\n\ttemplate: `\n\t<div class=\"row-cols\">\n\t\t<core-base-layout>\t\n\t\t\t<template #main>\t\n\t\t\t\t<div ref=\"studentHeaderRow\" class=\"row\">\n\t\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t\t<h1 class=\"h4\">\n\t\t\t\t\t\t\t{{ viewDataStudent.vorname }} {{viewDataStudent.nachname }} \n\t\t\t\t\t\t\t<span class=\"fhc-subtitle\">{{viewDataStudent.semester }}{{viewDataStudent.verband }}{{viewDataStudent.gruppe }}</span>\n\t\t\t\t\t\t</h1>\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t<StudentDropdown v-if=\"$entryParams?.permissions?.admin || $entryParams?.permissions?.assistenz\"\n\t\t\t\t\t\t\t id=\"studentUID\" ref=\"studentDropdown\" @studentChanged=\"studentChangedHandler\">\n\t\t\t\t\t\t</StudentDropdown>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-2 text-center\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"routeToCodeScan\">{{ $p.t('global/codeEingeben') }}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"$entryParams?.permissions?.entschuldigungen_enabled\">\n\t\t\t\t\t<core-tabs :config=\"tabsStudent\" ref=\"tabsStudent\" @changed=\"handleTabChanged\"></core-tabs>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<StudentAnwesenheitComponent/>\t\t\t\t\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</core-base-layout>\n\t\t\n\t</div>\n\t\t\n`\n};\n\nexport default StudentComponent","export default {\n\temits: [\n\t\t'delete'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [File, Object],\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpreview: ''\n\t\t};\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (n.type == 'application/x.fhc-dms+json') {\n\t\t\t\tn.text().then(result => {\n\t\t\t\t\tconst obj = JSON.parse(result);\n\t\t\t\t\tthis.preview = obj.preview || '';\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<li class=\"form-upload-dms-item\">\n\t\t<span class=\"col-auto\"><i class=\"fa fa-file me-1\"></i></span>\n\t\t<span class=\"col\">{{ modelValue.name }}</span>\n\t\t<a v-if=\"preview\" :href=\"preview\" target=\"_blank\" class=\"col-auto btn btn-outline-secondary btn-p-0 me-2\">\n\t\t\t<i class=\"fa fa-download\"></i>\n\t\t</a>\n\t\t<button class=\"col-auto btn btn-outline-secondary btn-p-0\" @click=\"$emit('delete')\">\n\t\t\t<i class=\"fa fa-close\"></i>\n\t\t</button>\n\t</li>`\n}\n","import DmsItem from './Dms/Item.js';\n\nexport default {\n\tcomponents: {\n\t\tDmsItem\n\t},\n\temits: [\n\t\t'update:modelValue'\n\t],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: [ FileList, Array ],\n\t\t\trequired: true\n\t\t},\n\t\tmultiple: Boolean,\n\t\tid: String,\n\t\tname: String,\n\t\tinputClass: [String, Array, Object],\n\t\tnoList: Boolean,\n\t\taccept: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tstringifyFile(file) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tlastModified: file.lastModified,\n\t\t\t\tlastModifiedDate: file.lastModifiedDate,\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\ttype: file.type\n\t\t\t});\n\t\t},\n\t\taddFiles(event) {\n\t\t\tif (!this.multiple)\n\t\t\t\treturn this.$emit('update:modelValue', event.target.files);\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst doubles = [];\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tdt.items.add(file);\n\t\t\t\tdoubles.push(this.stringifyFile(file));\n\t\t\t}\n\t\t\tfor (var file of event.target.files) {\n\t\t\t\t// NOTE(chris): deep check (with FileReader) would require an async function so we only check the basic attributes\n\t\t\t\tif (doubles.indexOf(this.stringifyFile(file)) < 0)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t},\n\t\tremoveFile(id) {\n\t\t\tconst fileToRemove = Array.from(this.modelValue)[id];\n\t\t\t\n\t\t\tconst dt = new DataTransfer();\n\t\t\tfor (var file of this.modelValue) {\n\t\t\t\tif (file !== fileToRemove)\n\t\t\t\t\tdt.items.add(file);\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\twatch: {\n\t\tmodelValue(n) {\n\t\t\tif (!n)\n\t\t\t\treturn;\n\t\t\tif (n instanceof FileList) {\n\t\t\t\tif (!this.$refs.upload) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn this.$refs.upload.files = n;\n\t\t\t}\n\n\t\t\tconst dt = new DataTransfer();\n\t\t\tconst dms = [];\n\t\t\tfor (var file of n) {\n\t\t\t\tif (file instanceof File) {\n\t\t\t\t\tdt.items.add(file);\n\t\t\t\t} else {\n\t\t\t\t\tconst dmsFile = new File([JSON.stringify(file)], file.name, {\n\t\t\t\t\t\ttype: 'application/x.fhc-dms+json'\n\t\t\t\t\t});\n\t\t\t\t\tdt.items.add(dmsFile);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit('update:modelValue', dt.files);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"form-upload-dms\">\n\t\t<input ref=\"upload\" class=\"form-control\" :disabled=\"disabled\" :accept=\"accept\" :aria-label=\"$p.t('profilUpdate','documentUpload')\" :title=\"$p.t('profilUpdate','documentUpload')\" :class=\"inputClass\" :id=\"id\" :name=\"name\" :multiple=\"multiple\" type=\"file\" @change=\"addFiles\">\n\t\t<ul v-if=\"modelValue.length && multiple && !noList\" :accept=\"accept\" class=\"list-unstyled m-0\">\n\t\t\t<dms-item\n\t\t\t\tv-for=\"(file, index) in modelValue\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tv-model=\"file\"\n\t\t\t\tclass=\"d-flex mx-1 mt-1 align-items-start\"\n\t\t\t\t@delete=\"removeFile(index)\"\n\t\t\t\t>\n\t\t\t</dms-item>\n\t\t</ul>\n\t</div>`\n}","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {studentFormatters} from \"../../formatters/formatters.js\";\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport Upload from '../../../../../js/components/Form/Upload/Dms.js';\nimport VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport ApiProfil from '../../api/factory/profil.js'\nexport default {\n\tname: 'StudentEntschuldigungComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient,\n\t\tCoreFilterCmpt,\n\t\tBsModal,\n\t\tUpload,\n\t\t\"datepicker\": VueDatePicker,\n\t\tCheckbox: primevue.checkbox\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tnoFileUpload: false,\n\t\t\teditEntschuldigung: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\tentschuldigung: this.initEntschuldigungForm(),\n\t\t\tminDate: this.calcMinDate(),\n\t\t\ttableBuiltPromise: null,\n\t\t\tentschuldigungsViewTabulatorOptions: {\n\t\t\t\tajaxURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router+'/extensions/FHC-Core-Anwesenheiten/api/ProfilApi/getEntschuldigungenByPersonID',\n\t\t\t\tajaxResponse: (url, params, response) => {\n\t\t\t\t\treturn response.data.retval\n\t\t\t\t},\n\t\t\t\theight: this.$entryParams.tabHeights.studentEnt,\n\t\t\t\tajaxConfig: \"POST\",\n\t\t\t\tajaxContentType: {\n\t\t\t\t\theaders:{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody:()=>{\n\t\t\t\t\t\treturn JSON.stringify({\n\t\t\t\t\t\t\tperson_id: this.$entryParams.selected_student_info ? this.$entryParams.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tplaceholder: this._.root.appContext.config.globalProperties.$p.t('global/noDataAvailable'),\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\tlayout:\"fitDataStretch\",\n\t\t\t\tpagination: true,\n\t\t\t\tpaginationSize: 100,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/status')), field: 'akzeptiert', formatter: this.entschuldigungstatusFormatter, minWidth: 200, tooltip: false, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/von')), field: 'von', formatter: studentFormatters.formDate, minWidth: 200, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/bis')), field: 'bis', formatter: studentFormatters.formDate, minWidth: 200, widthGrow: 1},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('ui/aktion')), field: 'dms_id', formatter: this.formAction, widthGrow: 1, minWidth: 200, tooltip: false},\n\t\t\t\t\t{title: this.$capitalize(this.$p.t('global/begruendungAnw')), field: 'notiz', tooltip:false}\n\t\t\t\t],\n\t\t\t\tpersistence: {\n\t\t\t\t\tsort: false,\n\t\t\t\t\tfilter: true,\n\t\t\t\t\theaderFilter: false,\n\t\t\t\t\tgroup: true,\n\t\t\t\t\tpage: true,\n\t\t\t\t\tcolumns: true,\n\t\t\t\t},\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-studentEntschuldigungenTable\"\n\t\t\t},\n\t\t\tentschuldigungsViewTabulatorEventHandlers: [{\n\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\thandler: async () => {\n\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\n\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t}\n\t\t\t}],\n\t\t\tfilterTitle: \"\"\n\t\t};\n\t},\n\tmethods: {\n\t\tinitEntschuldigungForm() {\n\t\t\treturn{\n\t\t\t\tvon: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate(), 0, 0, 0, 0),\n\t\t\t\tbis: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate() + 1, 23, 59, 0, 0),\n\t\t\t\tfiles: []\n\t\t\t}\n\t\t},\n\t\tformatDate(dateParam) {\n\t\t\tconst date = new Date(dateParam)\n\t\t\t// handle missing leading 0\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1); // Months are zero-based\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tformatDateEntschuldigungEdit(date) {\n\t\t\tconst padZero = (num) => String(num).padStart(2, '0');\n\n\t\t\tconst month = padZero(date.getMonth() + 1);\n\t\t\tconst day = padZero(date.getDate());\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hours = padZero(date.getHours());\n\t\t\tconst minutes = padZero(date.getMinutes());\n\n\t\t\treturn `${day}.${month}.${year} ${hours}:${minutes}`;\n\t\t},\n\t\tcalcMinDate(){\n\t\t\t// calc max reach offset into workdays\n\t\t\tlet d = new Date();\n\t\t\tfor (let x = this.$entryParams.permissions.entschuldigungMaxReach; x > 0; x--) {\n\t\t\t\t// step 3 times on monday, else step once per counter\n\t\t\t\td.setDate(d.getDate() - (d.getDay() === 1 ? 3 : 1));\n\t\t\t}\n\n\t\t\treturn d\n\t\t},\n\t\tisValidDateObj(date) {\n\t\t\treturn date instanceof Date && !isNaN(date.getTime());\n\t\t},\n\t\tentschuldigungstatusFormatter(cell) {\n\t\t\tlet data = cell.getValue()\n\t\t\tif (data == null) {\n\t\t\t\tcell.getElement().style.color = \"#17a2b8\"\n\t\t\t\treturn this.$p.t('global/entschuldigungOffen')\n\t\t\t} else if (data === true) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn this.$p.t('global/entschuldigungAkzeptiert')\n\t\t\t} else if (data === false) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn this.$p.t('global/entschuldigungAbgelehnt')\n\t\t\t}\n\t\t},\n\t\ttriggerEdit() {\n\n\t\t\tif(!this.entschuldigung.files.length) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tconst formData = new FormData();\n\t\t\t\n\t\t\tfor (let i = 0; i < this.entschuldigung.files.length; i++) {\n\t\t\t\tformData.append('files', this.entschuldigung.files[i]);\n\t\t\t}\n\n\t\t\tformData.append('von', this.isValidDateObj(this.editEntschuldigung.von) ? this.editEntschuldigung.von.toISOString() : this.editEntschuldigung.von);\n\t\t\tformData.append('bis', this.isValidDateObj(this.editEntschuldigung.bis) ? this.editEntschuldigung.bis.toISOString() : this.editEntschuldigung.bis);\n\t\t\tformData.append('entschuldigung_id', this.editEntschuldigung.entschuldigung_id)\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tformData.append('person_id', person_id);\n\n\n\t\t\tthis.$api.call(ApiProfil.editEntschuldigung(formData))\n\t\t\t\t.then(response => {\n\n\t\t\t\tif (response.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tconst rows = this.$refs.entschuldigungsTable.tabulator.getRows()\n\n\t\t\t\t\tlet targetRow = rows.find(row => row.getData().entschuldigung_id == response.data.entschuldigung_id);\n\n\t\t\t\t\tif (targetRow) {\n\t\t\t\t\t\ttargetRow.update({dms_id: response.data.dms_id});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungUploaded'));\n\t\t\t\t}\n\t\t\t}).finally(()=> {\n\t\t\t\tthis.$refs.modalContainerEntschuldigungEdit.hide()\n\t\t\t});\n\n\t\t},\n\t\ttriggerUpload() {\n\t\t\tif (!this.validate())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst formData = new FormData();\n\t\t\tif(!this.noFileUpload) {\n\t\t\t\tfor (let i = 0; i < this.entschuldigung.files.length; i++) {\n\t\t\t\t\tformData.append('files', this.entschuldigung.files[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformData.append('noFileUpload', this.noFileUpload)\n\t\t\t}\n\t\t\t\n\t\t\tformData.append('von', this.entschuldigung.von.toISOString());\n\t\t\tformData.append('bis', this.entschuldigung.bis.toISOString());\n\n\t\t\tconst person_id = this.$entryParams.selected_student_info ? this.$entryParams?.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\n\t\t\tformData.append('person_id', person_id);\n\n\t\t\tthis.$api.call(ApiProfil.addEntschuldigung(formData))\n\t\t\t\t.then(res => {\n\t\t\t\tlet rowData = res.data\n\t\t\t\tthis.$refs.entschuldigungsTable.tabulator.addRow(\n\t\t\t\t\t{\n\t\t\t\t\t\t'dms_id': rowData.dms_id,\n\t\t\t\t\t\t'akzeptiert': null,\n\t\t\t\t\t\t'von': rowData.von,\n\t\t\t\t\t\t'bis': rowData.bis,\n\t\t\t\t\t\t'entschuldigung_id': rowData.entschuldigung_id\n\t\t\t\t\t}\n\t\t\t\t\t, true);\n\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungUploaded'));\n\t\t\t\tthis.entschuldigung = this.initEntschuldigungForm();\n\n\t\t\t})\n\n\t\t\tthis.$refs.modalContainerEntschuldigungUpload.hide()\n\t\t},\n\t\tformAction: function(cell) {\n\t\t\tlet download = document.createElement('div');\n\t\t\tdownload.className = \"d-flex gap-3\";\n\n\t\t\tlet button = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tconst minwidth = '40px';\n\t\t\t\n\t\t\tif(cell.getData().dms_id) {\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-download\"></i>';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.addEventListener('click', () => this.downloadEntschuldigung(cell.getData().dms_id));\n\t\t\t\tbutton.title = this.$p.t('global/download');\n\t\t\t\tdownload.append(button);\n\t\t\t} else {\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-upload\"></i>';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.addEventListener('click', () => this.addEntschuldigungFile(cell.getData()));\n\t\t\t\tbutton.title = this.$p.t('global/upload');\n\t\t\t\tdownload.append(button);\n\t\t\t}\n\n\t\t\tif (cell.getData().akzeptiert == null)\n\t\t\t{\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\t\tbutton.title = this.$p.t('global/entschuldigungLöschen');\n\t\t\t\tbutton.addEventListener('click', () => this.deleteEntschuldigung(cell, 'decline'));\n\t\t\t\tdownload.append(button);\n\t\t\t}\n\n\t\t\treturn download;\n\t\t},\n\t\taddEntschuldigungFile(entschuldigung) {\n\t\t\tthis.editEntschuldigung = entschuldigung\n\t\t\tthis.$refs.modalContainerEntschuldigungEdit.show()\n\t\t},\n\t\tdownloadEntschuldigung: function(dms_id)\n\t\t{\n\t\t\twindow.location = CoreRESTClient._generateRouterURI('extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile?entschuldigung=' + dms_id);\n\t\t},\n\t\tasync deleteEntschuldigung(cell) {\n\t\t\tif (await this.$fhcAlert.confirmDelete() === false)\n\t\t\t\treturn;\n\n\t\t\tlet entschuldigung_id = cell.getData().entschuldigung_id;\n\t\t\tthis.$api.call(ApiProfil.deleteEntschuldigung(entschuldigung_id, this.$entryParams.selected_student_info?.person_id))\n\t\t\t\t.then(response => {\n\n\t\t\t\tif (response.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tcell.getRow().delete()\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/entschuldigungLöschenErfolg'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tstartUploadEntschuldigung(){\n\t\t\tthis.$refs.modalContainerEntschuldigungUpload.show()\n\t\t},\n\t\tvalidate: function() {\n\t\t\t// todo: check for von/bis input never toched => von still exists as initialized hours minutes object\n\t\t\tif(!this.entschuldigung.von) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningEnterVonZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif(!this.entschuldigung.bis) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningEnterBisZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif(!this.entschuldigung.files.length && !this.noFileUpload) {\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/warningChooseFile'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tif (this.entschuldigung.bis < this.entschuldigung.von)\n\t\t\t{\n\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/errorValidateTimes'));\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\treload(){\n\t\t\tconst id = this.$entryParams.selected_student_info ? this.$entryParams.selected_student_info.person_id : this.$entryParams.viewDataStudent.person_id\n\t\t\tthis.$api.call(ApiProfil.getEntschuldigungenByPersonID(id))\n\t\t\t\t.then(res => {\n\t\t\t\tthis.$refs.entschuldigungsTable.tabulator.setData(res.data.retval)\n\t\t\t})\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs?.entschuldigungsTable?.tabulator) this.$refs.entschuldigungsTable.tabulator.redraw(true)\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.setupPromise\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\n\t\t\tconst cols = this.$refs.entschuldigungsTable.tabulator.getColumns()\n\n\t\t\t// phrasen bandaid\n\n\t\t\tcols.find(e => e.getField() === 'von').updateDefinition({title: this.$p.t('global/status')})\n\t\t\tcols.find(e => e.getField() === 'bis').updateDefinition({title: this.$capitalize(this.$p.t('ui/von'))})\n\t\t\tcols.find(e => e.getField() === 'student_status').updateDefinition({title: this.$capitalize(this.$p.t('global/bis'))})\n\t\t\tcols.find(e => e.getField() === 'von').updateDefinition({title: this.$p.t('ui/aktion')})\n\t\t\tcols.find(e => e.getField() === 'bis').updateDefinition({title: this.$p.t('global/notiz')})\n\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[0].title = this.$capitalize(this.$p.t('global/status'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[1].title = this.$capitalize(this.$p.t('ui/von'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[2].title = this.$capitalize(this.$p.t('global/bis'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[1].title = this.$capitalize(this.$p.t('ui/aktion'))\n\t\t\tthis.entschuldigungsViewTabulatorOptions.columns[2].title = this.$capitalize(this.$p.t('global/notiz'))\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tcalculateTableHeight() {\n\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['studentEnt'].value = screenY - rect.top\n\n\t\t\tif(this.$refs.entschuldigungsTable.tabulator) this.$refs.entschuldigungsTable.tabulator.redraw(true)\n\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.minDate = new Date(this.minDate).setHours(0,0)\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.setup()\n\n\t\tthis.calculateTableHeight()\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\twatch: {\n\t\t'entschuldigung.files'(newVal) {\n\t\t\tif(newVal == [] || newVal === null || newVal === undefined) return\n\n\t\t\t// check filetype on input change\n\t\t\tconst file = newVal[0]\n\t\t\tif(!file) return\n\n\t\t\tif(file.type && !file.name.includes('jfif') && (\n\t\t\t\tfile.type.includes('jpg')\n\t\t\t\t|| file.type.includes('jpeg')\n\t\t\t\t|| file.type.includes('pdf')\n\t\t\t\t|| file.type.includes('png'))\n\t\t\t) {\n\t\t\t\t// all fine\n\t\t\t} else {\n\t\t\t\t// clear and alert for filetypes\n\t\t\t\tthis.$fhcAlert.alertInfo(this.$p.t('global/allowedEntschuldigungFileTypes'))\n\t\t\t\tthis.entschuldigung.files = []\n\t\t\t}\n\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetTooltipObj() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipStudentEntschuldigung', [this.$entryParams.permissions.entschuldigungMaxReach]),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\n\t<core-base-layout\n\t\t:title=\"filterTitle\">\n\t\t<template #main>\n\t\t\t<bs-modal ref=\"modalContainerEntschuldigungUpload\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t{{$p.t('global/addEntschuldigung')}}\n\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('ui/von'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"von\"\n\t\t\t\t\t\t\t\tv-model=\"entschuldigung.von\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t\t\t:start-time=\"entschuldigung.von\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:min-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:start-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('global/bis'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"bis\"\n\t\t\t\t\t\t\t\tv-model=\"entschuldigung.bis\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t\t\t:start-time=\"entschuldigung.bis\"\n\t\t\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t\t\t:min-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:start-date=\"new Date(minDate)\"\n\t\t\t\t\t\t\t\t:text-input=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-8\">\n\t\t\t\t\t\t\t<Upload :disabled=\"noFileUpload\" accept=\".jpg,.png,.pdf\" v-model=\"entschuldigung.files\"></Upload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-4\">\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<div class=\"col-2\"></div>\n\t\t\t\t\t\t\t\t<div class=\"col-2\"><Checkbox v-model=\"noFileUpload\" :binary=\"true\"></Checkbox></div>\n\t\t\t\t\t\t\t\t<div class=\"col-8\"><span>{{$p.t('global/excuseUploadNoFile')}}</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button class=\"btn btn-primary\" @click=\"triggerUpload\">{{$p.t('ui/hochladen')}}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\t\t\t\n\t\t\t<bs-modal ref=\"modalContainerEntschuldigungEdit\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t{{$p.t('global/editEntschuldigung')}}\n\t\t\t\t\t\t<i class=\"fa fa-circle-question\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default v-if=\"editEntschuldigung\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\" >\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('ui/von'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"vonEdit\"\n\t\t\t\t\t\t\t\tv-model=\"editEntschuldigung.von\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDateEntschuldigungEdit\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:disabled=\"true\">\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<div class=\"col-2 align-items-center\"><label for=\"von\" class=\"form-label\">{{$capitalize($p.t('global/bis'))}}</label></div>\n\t\t\t\t\t\t<div class=\"col-10\">\n\t\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\t\tid=\"bisEdit\"\n\t\t\t\t\t\t\t\tv-model=\"editEntschuldigung.bis\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:format=\"formatDateEntschuldigungEdit\"\n\t\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t\t:disabled=\"true\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</datepicker>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-12\">\n\t\t\t\t\t\t\t<Upload accept=\".jpg,.png,.pdf\" v-model=\"entschuldigung.files\"></Upload>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button class=\"btn btn-primary\" @click=\"triggerEdit\">{{$p.t('ui/hochladen')}}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\t\t\t\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"entschuldigungsTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"entschuldigungsViewTabulatorOptions\"\n\t\t\t\t:table-only=\"true\"\n\t\t\t\t:newBtnShow=\"true\"\n\t\t\t\t:newBtnLabel=\"$p.t('global/entschuldigungHochladen')\"\n\t\t\t\t@click:new=\"startUploadEntschuldigung\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\t</core-base-layout>\n`\n};","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\n\nimport ApiProfil from '../../api/factory/profil.js';\n\nexport default {\n\tname: 'ScanComponent',\n\tcomponents: {\n\t\tCoreNavigationCmpt,\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tinternalZugangscode: this.zugangscode,\n\t\t\tzugangscodeProcessed: false,\n\t\t\tcodeMaxlength: 8,\n\t\t\tviewData: null,\n\t\t\tcodeButtonDisabled: true\n\t\t};\n\t},\n\tprops: {\n\t\tzugangscode: null\n\t},\n\tmethods: {\n\t\tsendCode() {\n\t\t\tthis.processAnwesenheit()\n\t\t},\n\t\tprocessAnwesenheit() {\n\n\t\t\tthis.$api.call(ApiProfil.checkInAnwesenheit(this.internalZugangscode))\n\t\t\t\t.then(\n\t\t\t\tres => {\n\t\t\t\t\tif(res.meta.status === \"success\" && res.data) {\n\n\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('global/eintragErfolgreich'))\n\n\t\t\t\t\t\tthis.von = new Date(JSON.parse(res.data.von))\n\t\t\t\t\t\tthis.bis = new Date(JSON.parse(res.data.bis))\n\n\t\t\t\t\t\tthis.viewData = JSON.parse(res.data.viewData).retval[0]\n\n\t\t\t\t\t\tthis.zugangscodeProcessed = true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$fhcAlert.alertError(res.data.data)\n\t\t\t\t\t\tthis.internalZugangscode = ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\n\t\t},\n\t\tcheckValue(event) {\n\t\t\tthis.internalZugangscode = event.target.value\n\t\t\tthis.codeButtonDisabled = !(this.internalZugangscode && this.internalZugangscode.length === this.codeMaxlength)\n\t\t}\n\t},\n\tmounted() {\n\t\tif(this.internalZugangscode) {\n\t\t\tthis.processAnwesenheit()\n\t\t}\n\t},\n\tcomputed: {\n\t\tcalculatedMaxLength() {\n\t\t\treturn '' + this.codeMaxlength\n\t\t},\n\t\tgetBaseLayoutTitle() {\n\t\t\tif (this.internalZugangscode && this.zugangscodeProcessed) {\n\t\t\t\treturn this.$p.t('global/eintragErfolgreich')\n\t\t\t} else return this.$p.t('global/bitteZugangscodeEingeben')\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"row-cols mb-4\">\n\t\t<div class=\"row-col-4 mt-3 text-center\">\n\t\t\t<core-base-layout\n\t\t\t\t:title=getBaseLayoutTitle>\n\t\t\t\t<template #main>\n\t\t\t\t\t<template v-if=\"!zugangscodeProcessed\">\n\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t<div class=\"col-sm-10 col-10 mx-auto\">\n\t\t\t\t\t\t\t\t<input :maxlength=\"calculatedMaxLength\" class=\"form-control\" :value=\"internalZugangscode\" @input=\"checkValue($event)\" :placeholder=\"$p.t('global/code')\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"row mt-3\">\n\t\t\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t\t\t<button @click=\"sendCode\" role=\"button\" class=\"btn btn-primary align-self-center\" :disabled=codeButtonDisabled>\n\t\t\t\t\t\t\t\t\t{{ $p.t('global/codeSenden') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else> \n\t\t\t\t\t\t<div v-if=\"viewData\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p>{{viewData.bezeichnung}} ({{viewData.kurzbz}})</p>\n\t\t\t\t\t\t\t\t<p>{{von.toLocaleDateString()}}:  {{von.toLocaleTimeString()}} - {{bis.toLocaleTimeString()}}</p>\n\t\t\t\t\t\t\t\t<p>{{viewData.vorname}} {{viewData.nachname}} {{$p.t('global/wurdeRegistriert')}}.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</core-base-layout>\n\t\t</div>\n\t</div>\n\n\n\n\t\n\t\t\n`\n};\n\n\n","import ApiInfo from '../../api/factory/info.js';\n\nexport const StudiengangDropdown = {\n\tname: \"StudiengangDropdown\",\n\tcomponents: {\n\t\tDropdown: primevue.dropdown,\n\t},\n\temits: [\n\t\t'sgChanged'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\toptions: [],\n\t\t\tselectedOption: [],\n\t\t\terrors: null,\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.loadDropdown();\n\t},\n\tprops: {\n\t\tallowedStg: {\n\t\t\ttype: Array,\n\t\t\tdefault: null\n\t\t},\n\t\tisAdmin: false,\n\t},\n\tmethods: {\n\t\tloadDropdown() {\n\t\t\tthis.$api.call(ApiInfo.getStudiengaenge(this.allowedStg))\n\t\t\t\t.then(res => {\n\t\t\t\tif(res.meta.status !== \"success\") return\n\t\t\t\t\t\n\t\t\t\tconst data =res.data.retval ?? [];\n\n\t\t\t\t// apply this last resort filter if an assistenz who has simultaneous admin rights\n\t\t\t\t// finds that they see too many stg's\n\t\t\t\tif(this.allowedStg) {\n\t\t\t\t\tthis.options = data.filter(d => {\n\t\t\t\t\t\treturn this.allowedStg.includes(String(d.studiengang_kz))\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthis.options = data\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.$entryParams.studiengaengeAdmin = res.data.retval.map(e => e.studiengang_kz)\n\t\t\t});\n\t\t},\n\t\tsgChanged(e) {\n\t\t\tthis.$emit(\"sgChanged\", e);\n\t\t},\n\t\tgetOptionLabel(option) {\n\t\t\treturn option.kurzbzlang + ' ' + option.bezeichnung\n\t\t}\n\t},\n\n\ttemplate: `\n\t\t<div class=\"col-12\">\n\t\t\t<Dropdown @change=\"sgChanged\" :placeholder=\"$p.t('lehre/studiengang')\" :style=\"{'width': '100%'}\" :optionLabel=\"getOptionLabel\" v-model=\"selectedOption\" :options=\"options\" showClear>\n\t\t\t\t<template #optionsgroup=\"slotProps\">\n\t\t\t\t\t<div> {{ option.kurzbzlang }} {{ option.bezeichnung }} </div>\n\t\t\t\t</template>\n\t\t\t</Dropdown>\n\t\t</div>\n\t`\n}","import VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\n\nexport const EntschuldigungEdit = {\n\tname: \"EntschuldigungEdit\",\n\tcomponents: {\n\t\tDatepicker: VueDatePicker,\n\t\tTextarea: primevue.textarea,\n\t\tTristate: primevue.tristatecheckbox\n\t},\n\temits: [\n\t\t'validate'\n\t],\n\tdata () {\n\t\treturn {\n\t\t\tminDate: this.calcMinDate(),\n\t\t\tform: Vue.reactive({\n\t\t\t\tvon: null,\n\t\t\t\tbis: null,\n\t\t\t\tnotiz: '',\n\t\t\t\takzeptiert: '',\n\t\t\t\t// todo: column examberechtigt default false?\n\t\t\t})\n\t\t};\n\t},\n\tprops: {\n\t\tmodelValue: null\n\t},\n\tcreated() {\n\n\t},\n\t\n\tmethods: {\n\t\tsetForm(newVal) {\n\t\t\tthis.form.von = new Date(newVal.von)\n\t\t\tthis.form.bis = new Date(newVal.bis)\n\t\t\tthis.form.uploaddatum = new Date(newVal.uploaddatum)\n\t\t\tthis.form.notiz = newVal.notiz\n\t\t\tthis.form.akzeptiert = newVal.akzeptiert\n\t\t},\n\t\tcalcMinDate(){\n\t\t\t// assistenz minDate further in the past than students by design\n\t\t\tlet d = new Date();\n\n\t\t\td.setFullYear(d.getFullYear() - 1)\n\n\t\t\treturn d\n\t\t},\n\t\tformatDate(date) {\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst hrs = String(date.getHours()).padStart(2, '0')\n\t\t\tconst min = String(date.getMinutes()).padStart(2, '0')\n\t\t\t\n\t\t\treturn `${day}.${month}.${year} ${hrs}:${min}`;\n\t\t},\n\t\tvalidate(entschuldigung) {\n\t\t\tif (entschuldigung === null) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!entschuldigung.von) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\t// this.$fhcAlert.alertWarning(this.$p.t('global/warningEnterVonZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (!entschuldigung.bis) {\n\t\t\t\tthis.$emit('validate', false)\n\t\t\t\t// this.$fhcAlert.alertWarning(this.$p.t('global/warningEnterBisZeit'));\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tthis.$emit('validate', true)\n\t\t}\n\t},\n\twatch:{\n\t\tmodelValue: {\n\t\t\thandler(newVal) {\n\t\t\t\tif(!this.validate(newVal)) return\n\t\t\t\tthis.setForm(newVal)\n\t\t\t},\n\t\t\tdeep: true\n\t\t},\n\t\tform: {\n\t\t\thandler(newVal) {\n\t\t\t\tthis.validate(newVal)\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetStatusLabel() {\n\t\t\tif(this.modelValue.akzeptiert === null) {\n\t\t\t\treturn 'Entschuldigung Status offen'\n\t\t\t} else if (this.modelValue.akzeptiert === true) {\n\t\t\t\treturn 'Entschuldigung akzeptiert'\n\t\t\t} else {\n\t\t\t\treturn 'Entschuldigung abgelehnt'\n\t\t\t}\n\t\t}\t\n\t},\n\ttemplate: `\n\t\t<div v-if=\"modelValue\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<p>\n\t\t\t\t\t{{ modelValue.vorname }} {{ modelValue.nachname }}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{{ modelValue.kurzbzlang }} {{ modelValue.bezeichnung }} {{ modelValue.studentorgform }}\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{{$p.t('global/uploaddatum')}}: {{modelValue.uploaddatum }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-6 d-flex align-items-center\">\n\t\t\t\t\t<Tristate v-model=\"modelValue.akzeptiert\" :disabled=\"true\"></Tristate>\n\t\t\t\t\t<span class=\"ms-2\">{{getStatusLabel}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"!modelValue.dms_id\" class=\"col-6\">\n\t\t\t\t\t<span class=\"ms-2\" style=\"color: red\">{{$p.t('global/missingEntschuldigungFile')}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-4\">\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"von\"\n\t\t\t\t\t\tv-model=\"modelValue.von\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:disabled=\"modelValue.akzeptiert !== null\"\n\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t:min-date=\"minDate\"\n\t\t\t\t\t\t:start-date=\"minDate\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<datepicker\n\t\t\t\t\t\tid=\"bis\"\n\t\t\t\t\t\tv-model=\"modelValue.bis\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:disabled=\"modelValue.akzeptiert !== null\"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:format=\"formatDate\"\n\t\t\t\t\t\t:enable-time-picker=\"true\"\n\t\t\t\t\t\t:min-date=\"minDate\"\n\t\t\t\t\t\t:start-date=\"minDate\">\n\t\t\t\t\t</datepicker>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row mt-4\">\n\t\t\t\t<Textarea v-model=\"modelValue.notiz\" rows=\"5\" maxlength=\"255\"></Textarea>\n\t\t\t\t<p>{{ modelValue.notiz?.length ? modelValue.notiz.length : 0 }} / 255 characters</p>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t`\n}","if (!primevue) {\n\tconsole.error('PrimeVue not loaded!');\n}\n\n// NOTE(chris): Click on clear button gives an error. This is a bug in primevue => fixed in current version\nTabulator.extendModule('filter', 'filters', {\n\t\"dates\": (headerValue, rowValue) => {\n\t\tif (!headerValue)\n\t\t\treturn true;\n\n\t\tlet rowDate = new Date(rowValue);\n\n\t\tif (Array.isArray(headerValue))\n\t\t{\n\t\t\tlet startDate = new Date(headerValue[0]);\n\t\t\tif (headerValue[1])\n\t\t\t{\n\t\t\t\tlet endDate = new Date(headerValue[1]);\n\n\t\t\t\tendDate.setHours(23, 59, 59, 999);\n\n\t\t\t\treturn rowDate >= startDate && rowDate <= endDate;\n\t\t\t}\n\n\t\t\treturn rowDate.toDateString() === startDate.toDateString();\n\t\t}\n\t\tlet singleDate = new Date(headerValue);\n\t\treturn rowDate.toDateString() === singleDate.toDateString();\n\t}\n});\n\nfunction dateFilter(cell, onRendered, success) {\n\tlet div = document.createElement('div');\n\n\tlet initialValue = null;\n\n\tlet val = cell.getValue();\n\n\tif (Array.isArray(val))\n\t{\n\t\tconst start = val[0] ? new Date(val[0]) : null;\n\t\tconst end   = val[1] ? new Date(val[1]) : null;\n\t\tinitialValue = [start, end];\n\t}\n\n\tVue.createApp({\n\t\tcomponents: {\n\t\t\tPrimevueCalendar: primevue.calendar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tval: initialValue\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tval(n) {\n\t\t\t\tsuccess(n);\n\t\t\t}\n\t\t},\n\t\ttemplate: `<primevue-calendar \n\t\t\t\t\tv-model=\"val\" \n\t\t\t\t\tselection-mode=\"range\" \n\t\t\t\t\t:manual-input=\"false\" \n\t\t\t\t\tshow-button-bar \n\t\t\t\t\t:showIcon=\"true\"\n\t\t\t\t\tdateFormat=\"dd.mm.yy\">\n\t\t\t\t   </primevue-calendar>`\n\t}).use(primevue.config.default).mount(div);\n\n\treturn div;\n}\nexport { dateFilter };","export default {\n\n\tgetEntschuldigungen(stg_kz_arr, von, bis) {\n\n\t\tconst params = {stg_kz_arr, von, bis}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getEntschuldigungen';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tupdateEntschuldigung(entschuldigung_id, status, notiz, von, bis) {\n\n\t\tconst params = {entschuldigung_id, status, notiz, von, bis}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/updateEntschuldigung';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\n\t},\n\tgetTimeline(person_id) {\n\t\tconst params = {person_id}\n\t\tconst url = 'extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getTimeline';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t}\n\t}\n\n}","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport {studentFormatters} from \"../../formatters/formatters.js\";\nimport VueDatePicker from '../../../../../js/components/vueDatepicker.js.php';\nimport {StudiengangDropdown} from \"../Student/StudiengangDropdown.js\";\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport {EntschuldigungEdit} from \"./EntschuldigungEdit.js\";\nimport {dateFilter} from \"../../../../../js/tabulator/filters/Dates.js\"\nimport AnwTimeline from \"./AnwTimeline.js\";\nimport ApiAdmin from '../../api/factory/administration.js';\n\nexport const AssistenzComponent = {\n\tname: 'AssistenzComponent',\n\tcomponents: {\n\t\tBsModal,\n\t\tCoreBaseLayout,\n\t\tCoreNavigationCmpt,\n\t\tCoreFilterCmpt,\n\t\tCoreRESTClient,\n\t\tDatepicker: VueDatePicker,\n\t\tStudiengangDropdown,\n\t\tEntschuldigungEdit,\n\t\tAnwTimeline\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\theaderFiltersRestored: false,\n\t\t\tfiltersRestored: false,\n\t\t\tcolLayoutRestored: false,\n\t\t\tsortRestored: false,\n\t\t\tstateRestored: false,\n\t\t\tselectedEntschuldigung: null,\n\t\t\tselectedEntschuldigungValid: false,\n\t\t\tselectedAnwArray: null,\n\t\t\tselectedEntArray: null,\n\t\t\ttabulatorUuid: Vue.ref(0),\n\t\t\theaderMenuEntries: {},\n\t\t\tsideMenuEntries: {},\n\t\t\teditCellValue: '',\n\t\t\ttableData: null,\n\t\t\tzeitraum: {\n\t\t\t\tvon: this.$formatTime(new Date(Date.now()).setDate((new Date(Date.now()).getDate() - (30)))),\n\t\t\t\tbis: this.$formatTime(new Date(Date.now()).setDate((new Date(Date.now()).getDate() + (60))))\n\t\t\t},\n\t\t\tpermissionsLoaded: false,\n\t\t\ttableBuiltPromise: null,\n\t\t\tassistenzViewTabulatorOptions: {\n\t\t\t\tajaxURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router+'/extensions/FHC-Core-Anwesenheiten/api/AdministrationApi/getEntschuldigungen',\n\t\t\t\tajaxResponse: (url, params, response) => {\n\t\t\t\t\tthis.tableData = response.data\n\t\t\t\t\treturn response.data\n\t\t\t\t},\n\t\t\t\tajaxConfig: \"POST\",\n\t\t\t\tajaxContentType:{\n\t\t\t\t\theaders:{\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody:()=> {\n\t\t\t\t\t\tconst berechtigungenArrayAdmin = this.$entryParams.permissions.admin && Array.isArray(this.$entryParams.permissions.studiengaengeAdmin) ? this.$entryParams.permissions.studiengaengeAdmin : []\n\t\t\t\t\t\tconst berechtigungenArrayAssistenz = this.$entryParams.permissions.assistenz && Array.isArray(this.$entryParams.permissions.studiengaengeAssistenz) ? this.$entryParams.permissions.studiengaengeAssistenz : []\n\t\t\t\t\t\tconst joined = [... new Set([... berechtigungenArrayAssistenz, ... berechtigungenArrayAdmin])]\n\t\t\t\t\t\treturn JSON.stringify({\n\t\t\t\t\t\t\tstg_kz_arr: joined,\n\t\t\t\t\t\t\tvon: this.zeitraum.von,\n\t\t\t\t\t\t\tbis: this.zeitraum.bis\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdebugInvalidComponentFuncs:false,\n\t\t\t\t// debugEventsExternal: true,\n\t\t\t\t// debugEventsInternal: true,\n\t\t\t\tlayout: 'fitData',\n\t\t\t\tselectable: false,\n\t\t\t\tplaceholder: this.$p.t('global/noDataAvailable'),\n\t\t\t\tpagination: true,\n\t\t\t\tpaginationSize: 50,\n\t\t\t\theight: this.$entryParams.tabHeights.assistenz,\n\t\t\t\tcolumns: [\n\t\t\t\t\t{title: Vue.computed(() => this.$capitalize(this.$p.t('ui/student_uid'))), field: 'student_uid',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('person/vorname'))), field: 'vorname',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('person/nachname'))), field: 'nachname',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/ausbildungssemester'))), field: 'semester',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\theaderSort: true,\n\t\t\t\t\t\ttooltip:false\n\t\t\t\t\t} ,\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/status'))), field: 'akzeptiert',\n\t\t\t\t\t\theaderFilter:'list',\n\t\t\t\t\t\theaderFilterParams:{values: {'true': 'Akzeptiert', 'false': 'Abgelehnt', 'null': 'Offen', '':'Alle'}},\n\t\t\t\t\t\theaderFilterFunc: this.akzeptiertFilterFunc,\n\t\t\t\t\t\tformatter: this.entschuldigungstatusFormatter,\n\t\t\t\t\t\ttooltip: false,\n\t\t\t\t\t\theaderSort: true\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/file'))), headerSort: true,field: 'dms_id', formatter: studentFormatters.formFile},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('ui/von'))), headerSort: true,field: 'von', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/bis'))),headerSort: true, field: 'bis', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/antragsdatum'))),headerSort: true, field: 'entuploaddatum', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/fileuploaddatum'))),headerSort: true, field: 'fileuploaddatum', formatter: studentFormatters.formDate, headerFilterFunc: 'dates', headerFilter: dateFilter},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/organisationsform'))),headerSort: true, field: 'studentorgform',\n\t\t\t\t\t\theaderFilter: true,\n\t\t\t\t\t\ttooltip: false\n\t\t\t\t\t},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('lehre/studiengang'))), headerSort: true,field: 'studiengang_kz', formatter: studentFormatters.formStudiengangKz, tooltip:false},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('ui/aktion'))), headerSort: true,field: 'entschuldigung_id', formatter: this.formAction, tooltip:false, minWidth: 260},\n\t\t\t\t\t{title: Vue.computed(()=>this.$capitalize(this.$p.t('global/begruendungAnw'))), headerSort: true,field: 'notiz', editor: \"input\", headerFilter: true, tooltip:false, maxWidth: 300}\n\t\t\t\t],\n\t\t\t\tpersistence: false,\n\t\t\t\tpersistenceID: this.$entryParams.patchdate + \"-assistenzTable\"\n\t\t\t},\n\t\t\tassistenzViewTabulatorEventHandlers: [\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellEditing\",\n\t\t\t\t\thandler: (cell) => {\n\t\t\t\t\t\tthis.editCellValue = cell.getData().notiz\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellEdited\",\n\t\t\t\t\thandler: (cell) => {\n\t\t\t\t\t\tconst data = cell.getData()\n\t\t\t\t\t\tif((data.notiz === '' || data.notiz === null) && (this.editCellValue === '' || this.editCellValue === null)) return\n\n\t\t\t\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(data.entschuldigung_id), data.akzeptiert, data.notiz))\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"tableBuilt\",\n\t\t\t\t\thandler: async () => {\n\t\t\t\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\t\t\t\tthis.tableBuiltResolve()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tevent: \"cellClick\",\n\t\t\t\t\thandler: async (e, cell) => {\n\n\t\t\t\t\t\tif (cell.getColumn().getField() === \"dms_id\") {\n\t\t\t\t\t\t\tconst val = cell.getValue()\n\n\t\t\t\t\t\t\tif(val !== '-' && val !== null) this.downloadEntschuldigung(val)\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.stopPropagation()\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tnotiz: '',\n\t\t\tstudiengang: null,\n\t\t\ttitleText: ''\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: []\n\t},\n\tmethods: {\n\t\tformatForSql(date) {\n\t\t\tif(typeof date === 'string') return date\n\t\t\telse if (date instanceof Date) {\n\t\t\t\tconst pad = n => String(n).padStart(2, \"0\");\n\n\t\t\t\treturn (\n\t\t\t\t\tdate.getFullYear() + \"-\" +\n\t\t\t\t\tpad(date.getMonth() + 1) + \"-\" +\n\t\t\t\t\tpad(date.getDate()) + \" \" +\n\t\t\t\t\tpad(date.getHours()) + \":\" +\n\t\t\t\t\tpad(date.getMinutes()) + \":\" +\n\t\t\t\t\tpad(date.getSeconds())\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tsaveEditEntschuldigung() {\n\t\t\tif(!this.selectedEntschuldigung) return\n\t\t\t\tthis.selectedEntschuldigung.von = this.formatForSql(this.selectedEntschuldigung.von)\n\t\t\t\tthis.selectedEntschuldigung.bis = this.formatForSql(this.selectedEntschuldigung.bis)\n\t\t\t\n\t\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(this.selectedEntschuldigung.entschuldigung_id),\n\t\t\t\t\tthis.selectedEntschuldigung.akzeptiert, this.selectedEntschuldigung.notiz,\n\t\t\t\t\tthis.selectedEntschuldigung.von, this.selectedEntschuldigung.bis))\n\t\t\t.then(res => {\n\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t\t\n\t\t\t\t\tObject.keys(this.selectedEntschuldigung).forEach(key => {\n\t\t\t\t\t\tthis.selectedEntschuldigungCellRef[key] = this.selectedEntschuldigung[key];\n\t\t\t\t\t});\n\t\t\t\t\tthis.$refs.assistenzTable.tabulator.redraw(true);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}).finally(()=>{\n\t\t\t\tthis.$refs.modalContainerEditEntschuldigung.hide()\n\t\t\t\tthis.selectedEntschuldigung = null\n\t\t\t\tthis.selectedEntschuldigungCellRef = null\n\t\t\t});\n\t\t},\n\t\tcancelEdit() {\n\t\t\tthis.$refs.modalContainerEditEntschuldigung.hide()\n\t\t\tthis.selectedEntschuldigung = null\n\t\t\tthis.selectedEntschuldigungCellRef = null\n\t\t},\n\t\topenEditEntschuldigungModal(data) {\n\t\t\tthis.selectedEntschuldigungCellRef = data\n\t\t\tthis.selectedEntschuldigung = {...data}\n\n\t\t\tthis.$refs.modalContainerEditEntschuldigung.show()\n\t\t},\n\t\tcloseTimelineModal() {\n\t\t\tthis.selectedAnwArray = null\n\t\t\tthis.selectedEntArray = null\n\t\t\t\n\t\t\tthis.$refs.modalContainerTimeline.hide()\n\t\t},\n\t\topenTimelineModal(data) {\n\t\t\tthis.selectedEntschuldigungCellRef = data\n\t\t\tthis.selectedEntschuldigung = {...data}\n\n\t\t\t// TODO: save fetched anw and check if we already fetched timeline for person_id\n\t\t\t// if that is the case just open modal with saved anwArray and overlay selected entschuldigung together with all others\n\t\t\t\n\t\t\t// keep track of ent updates for that person -> if ent was updated fetch again\n\t\t\tthis.$api.call(ApiAdmin.getTimeline(this.selectedEntschuldigung.person_id))\n\t\t\t\t.then(\n\t\t\t\t(res) => {\n\t\t\t\t\t\n\t\t\t\t\tthis.selectedAnwArray = res.data[0].retval\n\t\t\t\t\tthis.selectedEntArray = res.data[1].retval\n\t\t\t\t}\n\t\t\t)\n\t\t\t\n\t\t\tthis.$refs.modalContainerTimeline.show()\n\t\t},\n\t\takzeptiertFilterFunc(filterVal, rowVal) {\n\t\t\t// 400 iq code\n\t\t\tif(filterVal === 'null') return rowVal === null\n\t\t\telse if(filterVal === 'true') return rowVal === true\n\t\t\telse if(filterVal === 'false') return rowVal === false\n\t\t},\n\t\tentschuldigungstatusFormatter(cell) {\n\t\t\tlet data = cell.getValue()\n\t\t\tif (data == null) {\n\t\t\t\tcell.getElement().style.color = \"#17a2b8\"\n\t\t\t\treturn this.$p.t('global/offen')\n\t\t\t} else if (data === true) {\n\t\t\t\tcell.getElement().style.color = \"#28a745\";\n\t\t\t\treturn this.$p.t('global/akzeptiert')\n\t\t\t} else if (data === false) {\n\t\t\t\tcell.getElement().style.color = \"#dc3545\";\n\t\t\t\treturn this.$p.t('global/abgelehnt')\n\t\t\t}\n\t\t},\n\t\tupdateEntschuldigung: function(cell, status, notizParam = '')\n\t\t{\n\n\t\t\tconst entschuldigung_id = cell.getData().entschuldigung_id\n\t\t\tconst existingNotiz = cell.getData().notiz\n\t\t\tconst notiz = notizParam !== '' ? notizParam : (existingNotiz !== null && existingNotiz !== undefined) ? existingNotiz : ''\n\t\t\tthis.$api.call(ApiAdmin.updateEntschuldigung(String(entschuldigung_id), status, notiz))\n\t\t\t\t.then(res => {\n\n\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tcell.getRow().update({'akzeptiert': status, 'notiz': notiz});\n\t\t\t\t\tthis.$fhcAlert.alertSuccess(this.$p.t('ui/gespeichert'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdownloadEntschuldigung: function(dms_id)\n\t\t{\n\t\t\twindow.location = CoreRESTClient._generateRouterURI('extensions/FHC-Core-Anwesenheiten/Profil/getEntschuldigungFile?entschuldigung=' + dms_id);\n\t\t},\n\t\tformAction: function(cell)\n\t\t{\n\t\t\tlet actionwrapper = document.createElement('div');\n\t\t\tactionwrapper.className = \"d-flex gap-3\";\n\t\t\tconst minwidth = '40px';\n\t\t\tconst cellData = cell.getData()\n\t\t\tlet button = null\n\t\t\t\n\t\t\tif(cellData.dms_id){\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-download\"></i>';\n\t\t\t\tbutton.addEventListener('click', () => this.downloadEntschuldigung(cell.getData().dms_id));\n\t\t\t\tbutton.title = this.$p.t('table/download');\n\t\t\t\tactionwrapper.append(button);\n\t\t\t}\n\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-pen-to-square\"></i>';\n\t\t\tbutton.addEventListener('click', () => this.openEditEntschuldigungModal(cell.getData()));\n\t\t\tbutton.title = this.$p.t('global/entschuldigungEditieren');\n\t\t\tactionwrapper.append(button);\n\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-timeline\"></i>';\n\t\t\tbutton.addEventListener('click', () => this.openTimelineModal(cell.getData()));\n\t\t\tbutton.title = this.$p.t('global/anwTimeline');\n\t\t\tactionwrapper.append(button);\n\n\t\t\tif(cellData.dms_id) {\n\t\t\t\tbutton = document.createElement('button');\n\t\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\t\tbutton.style.minWidth = minwidth;\n\t\t\t\tbutton.innerHTML = '<i class=\"fa fa-check\"></i>';\n\t\t\t\tbutton.title = this.$p.t('global/entschuldigungAkzeptieren');\n\t\t\t\tbutton.addEventListener('click', () => this.updateEntschuldigung(cell, true));\n\t\t\t\tactionwrapper.append(button);\n\t\t\t}\n\t\t\t\n\t\t\tbutton = document.createElement('button');\n\t\t\tbutton.className = 'btn btn-outline-secondary';\n\t\t\tbutton.style.minWidth = minwidth;\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n\t\t\tbutton.title = this.$p.t('global/entschuldigungAblehnen');\n\t\t\tbutton.addEventListener('click', () => this.openRejectionModal(cell));\n\t\t\tactionwrapper.append(button);\n\n\t\t\treturn actionwrapper;\n\t\t},\n\t\tbisFilter: function (data, filterParams) {\n\t\t\treturn new Date(data.bis).getTime() <= new Date(filterParams.bis).getTime()\n\t\t},\n\t\tvonFilter: function (data, filterParams) {\n\t\t\treturn new Date(data.von).getTime() >= new Date(filterParams.von).getTime()\n\t\t},\n\t\tstudiengangFilter: function (data, filterParams) {\n\t\t\treturn data.studiengang_kz === Number(filterParams.studiengang)\n\t\t},\n\t\tfiltern: function()\n\t\t{\n\t\t\tthis.$refs.assistenzTable.tabulator.clearFilter()\n\n\t\t\t// if (this.zeitraum.von) this.$refs.assistenzTable.tabulator.addFilter(this.vonFilter, {von: this.zeitraum.von})\n\t\t\t// if (this.zeitraum.bis) this.$refs.assistenzTable.tabulator.addFilter(this.bisFilter, {bis: this.zeitraum.bis})\n\t\t\tif (this.studiengang) this.$refs.assistenzTable.tabulator.addFilter(this.studiengangFilter, {studiengang: this.studiengang})\n\n\t\t},\n\t\thandleInputNotiz(e) {\n\t\t\tthis.notiz = e.target.value;\n\t\t},\n\t\trejectEntschuldigung() {\n\t\t\tthis.updateEntschuldigung(this.rejectCell, false, this.notiz)\n\t\t\tthis.rejectCell = null\n\t\t\tthis.notiz = ''\n\n\t\t\tthis.$refs.modalContainerRejectionReason.hide()\n\t\t},\n\t\topenRejectionModal(cell) {\n\t\t\tthis.rejectCell = cell\n\n\t\t\tthis.notiz = cell.getData().notiz\n\t\t\tthis.$refs.modalContainerRejectionReason.show()\n\t\t},\n\t\tsgChangedHandler: function(e) {\n\t\t\tthis.studiengang = e.value ? e.value.studiengang_kz : null\n\t\t},\n\t\tcheckEntryParamPermissions() {\n\t\t\tif(this.$entryParams.permissions === undefined) { // routed into app inner component skipping init in landing page\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(this.permissions)\n\t\t\t}\n\n\t\t\tthis.permissionsLoaded = true\n\n\t\t\tif(this.$entryParams.phrasenPromise === undefined) {\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['global', 'person', 'lehre', 'table', 'filter', 'ui'])\n\t\t\t}\n\t\t},\n\t\tasync setup() {\n\t\t\tawait this.$entryParams.phrasenPromise\n\t\t\tawait this.tableBuiltPromise\n\t\t\t\n\t\t},\n\t\ttableResolve(resolve) {\n\t\t\tthis.tableBuiltResolve = resolve\n\t\t},\n\t\trefetchData() {\n\t\t\tconst stg_kz_arr =  this.$entryParams.permissions.assistenz ?\n\t\t\t\tthis.$entryParams.permissions.studiengaengeAssistenz :\n\t\t\t\tthis.$entryParams.permissions.admin ? this.$entryParams.permissions.studiengaengeAdmin : []\n\n\t\t\t\tthis.$api.call(ApiAdmin.getEntschuldigungen(stg_kz_arr, this.zeitraum.von, this.zeitraum.bis))\n\t\t\t\t\t.then(res => {\n\t\t\t\tthis.$refs.assistenzTable.tabulator.setData(res.data)\n\t\t\t})\n\t\t},\n\t\thandleUuidDefined(uuid) {\n\t\t\tthis.tabulatorUuid = uuid\n\t\t},\n\t\tredrawTable() {\n\t\t\tif(this.$refs.assistenzTable?.tabulator) this.$refs.assistenzTable.tabulator.redraw(true)\n\t\t},\n\t\thandleSelectedEntschuldigungValidate(valid) {\n\t\t\tthis.selectedEntschuldigungValid = valid\n\t\t},\n\t\tcalculateTableHeight() {\n\t\t\tconst tableID = this.tabulatorUuid ? ('-' + this.tabulatorUuid) : ''\n\t\t\tconst tableDataSet = document.getElementById('filterTableDataset' + tableID);\n\t\t\tif(!tableDataSet) return\n\t\t\tconst rect = tableDataSet.getBoundingClientRect();\n\n\t\t\tconst screenY = this.$entryParams.isInFrame ? window.frameElement.clientHeight :  window.visualViewport.height\n\t\t\tthis.$entryParams.tabHeights['assistenz'].value = screenY - rect.top\n\t\t},\n\t\tsaveState(table) {\n\t\t\t// avoid storing state after first restore part happened\n\t\t\tif(!this.stateRestored) return \n\t\t\tconst rawLayout = table.getColumnLayout();\n\t\t\tconst state = {\n\t\t\t\tcolumns: rawLayout.map(col => ({\n\t\t\t\t\tfield: col.field,\n\t\t\t\t\tvisible: col.visible,\n\t\t\t\t\twidth: col.width,\n\t\t\t\t})),\n\t\t\t\t\tsort: table.getSorters().map(s => ({\n\t\t\t\t\tfield: s.field,\n\t\t\t\t\tdir: s.dir,\n\t\t\t\t})),\n\t\t\t\tfilters: table.getFilters(),\n\t\t\t\theaderFilters: table.getHeaderFilters()\n\t\t\t};\n\t\t\t\n\t\t\tlocalStorage.setItem(this.assistenzViewTabulatorOptions.persistenceID, JSON.stringify(state));\n\t\t},\n\t\thandleTableBuilt() {\n\t\t\tconst table = this.$refs.assistenzTable.tabulator\n\t\t\ttable.on(\"columnMoved\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnResized\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnVisibilityChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"filterChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"headerFilterChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"dataSorted\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"columnSorted\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\ttable.on(\"sortersChanged\", () => {\n\t\t\t\tthis.saveState(table);\n\t\t\t});\n\n\t\t\tconst saved = this.loadState();\n\n\t\t\ttable.on(\"renderComplete\", () => {\n\t\t\t\tif(!this.stateRestored) {\n\t\t\t\t\t\n\t\t\t\t\t\tif (saved?.columns && !this.colLayoutRestored) {\n\t\t\t\t\t\t\tconst layout = saved.columns.map(col => ({\n\t\t\t\t\t\t\t\tfield: col.field,\n\t\t\t\t\t\t\t\twidth: col.width,\n\t\t\t\t\t\t\t\tvisible: col.visible,\n\t\t\t\t\t\t\t\t// add more if needed, but keep it simple\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\t\ttable.setColumnLayout(layout);\n\t\t\t\t\t\t\tthis.colLayoutRestored = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (saved?.filters && !this.filtersRestored) {\n\t\t\t\t\t\t\tthis.filtersRestored = true // instantly avoid retriggers\n\t\t\t\t\t\t\ttable.setFilter(saved.filters);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (saved?.headerFilters && !this.headerFiltersRestored) {\n\t\t\t\t\t\t\tthis.headerFiltersRestored = true // instantly avoid retriggers\n\t\t\t\t\t\t\tfor (let hf of saved.headerFilters) {\n\t\t\t\t\t\t\t\ttable.setHeaderFilterValue(hf.field, hf.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (saved?.sort?.length && !this.sortRestored) {\n\t\t\t\t\t\t\tthis.sortRestored = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst sortList = saved.sort.map(s => {\n\t\t\t\t\t\t\t\t\tconst col = table.columnManager.findColumn(s.field);\n\t\t\t\t\t\t\t\t\tif (!col) {\n\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn { column: col, dir: s.dir };\n\t\t\t\t\t\t\t\t}).filter(Boolean);\n\n\t\t\t\t\t\t\t\ttable.setSort(sortList);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.stateRestored = true\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t},\n\t\tloadState() {\n\t\t\treturn JSON.parse(localStorage.getItem(this.assistenzViewTabulatorOptions.persistenceID) || \"null\");\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.tableBuiltPromise = new Promise(this.tableResolve)\n\t\tthis.checkEntryParamPermissions()\n\t\tthis.setup()\n\t\t\n\t\tthis.calculateTableHeight()\n\t\t\n\t\t\n\t\t\n\t\twindow.addEventListener('resize', this.calculateTableHeight)\n\t\twindow.addEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tunmounted() {\n\t\twindow.removeEventListener('resize', this.calculateTableHeight)\n\t\twindow.removeEventListener('orientationchange', this.calculateTableHeight)\n\t},\n\tbeforeMounted() {\n\t\tif(!this.$entryParams?.permissions?.entschuldigungen_enabled) {\n\t\t\t// TODO: route to some 404 page or show entschuldigung disabled status\n\t\t\tthis.$router.back()\n\t\t}\n\t},\n\twatch: {\n\t\t'zeitraum.von'() {\n\t\t\tthis.refetchData()\n\t\t},\n\t\t'zeitraum.bis'() {\n\t\t\tthis.refetchData()\n\t\t},\n\t\tstudiengang() {\n\t\t\tthis.filtern()\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetAllowedStg() {\n\t\t\treturn this.$entryParams?.permissions?.assistenz ? this.$entryParams?.permissions?.studiengaengeAssistenz\n\t\t\t\t: this.$entryParams?.permissions?.admin ? this.$entryParams?.permissions?.studiengaengeAdmin : []\n\t\t},\n\t\tgetTooltipObj(){\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzV2'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipVonDatum() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzVonDatum'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t},\n\t\tgetTooltipBisDatum() {\n\t\t\treturn {\n\t\t\t\tvalue: this.$p.t('global/tooltipAssistenzBisDatum'),\n\t\t\t\tclass: \"custom-tooltip\"\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\n\t<core-base-layout>\n\t\t<template #main>\n\t\t\t<bs-modal ref=\"modalContainerRejectionReason\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>{{ $p.t('global/entschuldigungNotizAblehnen') }}</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"mt-2\">\n\t\t\t\t\t\t\t<input maxlength=255 class=\"form-control\" :value=\"notiz\" @input=\"handleInputNotiz\" :placeholder=\"$p.t('global/begruendungAnw')\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" :disabled=\"!notiz\" @click=\"rejectEntschuldigung\">{{ $p.t('global/reject') }}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\n\n\n\t\t\t<bs-modal ref=\"modalContainerTimeline\" class=\"bootstrap-prompt\" bodyClass=\"px-4 py-0\" dialogClass=\"modal-dialog modal-fullscreen\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ $p.t('global/anwTimeline') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\n\t\t\t\t\t<AnwTimeline v-model=\"selectedEntschuldigung\" :anwArray=\"selectedAnwArray\" :entArray=\"selectedEntArray\"></AnwTimeline>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary \" @click=\"closeTimelineModal\">{{$p.t('ui','cancel')}}</button>    \n\t\t\t\t</template>\n\t\t\t</bs-modal>\t\n\n\t\t\t<bs-modal ref=\"modalContainerEditEntschuldigung\" class=\"bootstrap-prompt\" dialogClass=\"modal-lg\">\n\t\t\t\t<template v-slot:title>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ $p.t('global/entschuldigungEdit') }}\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:default>\n\t\t\t\t\t\n\t\t\t\t\t<EntschuldigungEdit v-model=\"selectedEntschuldigung\" @validate=\"handleSelectedEntschuldigungValidate\"></EntschuldigungEdit>\n\t\t\t\t\t\n\t\t\t\t</template>\n\t\t\t\t<template v-slot:footer>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary \" @click=\"cancelEdit\">{{$p.t('ui','cancel')}}</button>    \n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" :disabled=\"!selectedEntschuldigungValid\" @click=\"saveEditEntschuldigung\">{{ $p.t('ui', 'speichern') }}</button>\n\t\t\t\t</template>\n\t\t\t</bs-modal>\t\n\n\t\t\t<div class=\"row\">\n\t\t\t\n\t\t\t\t<div class=\"col-6\" style=\"display: flex; align-items: center;\">\n\t\t\t\t\t<h1 class=\"h4 mb-5\" style=\"margin-right: 10px;\">{{ $p.t('global/entschuldigungsmanagement') }}</h1>\n\t\t\t\t\t<div style=\"max-width: 25%; align-self: normal;\" v-tooltip.bottom=\"getTooltipObj\">\n\t\t\t\t\t\t<h4 style=\"margin: 0;\"><i class=\"fa fa-circle-question\"></i></h4>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<StudiengangDropdown\n\t\t\t\t\t\t\t:allowedStg=\"getAllowedStg\" @sgChanged=\"sgChangedHandler\">\n\t\t\t\t\t\t</StudiengangDropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\tv-model=\"zeitraum.von\"\n\t\t\t\t\t\t\t:placeholder=\"$capitalize($p.t('ui/von'))\"\n\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t\t></datepicker>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t<div class=\"row mb-3 align-items-center\">\n\t\t\t\t\t\t<datepicker\n\t\t\t\t\t\t\tv-model=\"zeitraum.bis\"\n\t\t\t\t\t\t\t:placeholder=\"$capitalize($p.t('global/bis'))\"\n\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t\t:enable-time-picker=\"false\"\n\t\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t\t></datepicker>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<core-filter-cmpt\n\t\t\t\tref=\"assistenzTable\"\n\t\t\t\t@uuidDefined=\"handleUuidDefined\"\n\t\t\t\t:tabulator-options=\"assistenzViewTabulatorOptions\"\n\t\t\t\t:tabulator-events=\"assistenzViewTabulatorEventHandlers\"\n\t\t\t\t@tableBuilt=\"handleTableBuilt\"\n\t\t\t\t:sideMenu=\"false\"\n\t\t\t\t:table-only=\"true\"\n\t\t\t></core-filter-cmpt>\n\t\t</template>\n\t</core-base-layout>\n`\n};\n\nexport default AssistenzComponent","import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport CoreBaseLayout from '../../../../../js/components/layout/BaseLayout.js';\nimport CoreTabs from '../../../../../js/components/Tabs.js';\n\nimport BsModal from '../../../../../js/components/Bootstrap/Modal.js';\nimport StudentComponent from \"../Student/StudentComponent.js\"\nimport LektorComponent from \"../Lektor/LektorComponent.js\"\nimport AssistenzComponent from \"../Assistenz/AssistenzComponent.js\";\n\nimport ApiInfo from '../../api/factory/info.js';\nimport ApiKontrolle from '../../api/factory/kontrolle.js';\n\nexport default {\n\tname: 'LandingPageComponent',\n\tcomponents: {\n\t\tCoreBaseLayout,\n\t\tCoreRESTClient,\n\t\tCoreTabs,\n\t\tBsModal,\n\t\tStudentComponent,\n\t\tLektorComponent,\n\t\tAssistenzComponent\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\theaderMenuEntries: {},\n\t\t\tsideMenuEntries: {},\n\t\t\tcurrentTab: 0,\n\t\t\ttabs: this.initTabs(),\n\t\t\tloaded: false,\n\t\t\tphrasenResolved: false,\n\t\t\tpermissioncount: Vue.ref(0),\n\t\t\tanwKontrolleMinDate: null,\n\t\t\tanwKontrolleMaxDate: null,\n\t\t};\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tminDate: Vue.computed(() =>\n\t\t\t\tthis.anwKontrolleMinDate ? this.anwKontrolleMinDate : null\n\t\t\t),\n\t\t\tmaxDate: Vue.computed(() =>\n\t\t\t\tthis.anwKontrolleMaxDate ? this.anwKontrolleMaxDate : null\n\t\t\t)\n\t\t};\n\t},\n\tprops: {\n\t\tpermissions: {\n\t\t\tdefault: '',\n\t\t\ttype: String\n\t\t},\n\t\tactivetabstudent: null\n\t},\n\tmethods: {\n\t\tinitTabs() {\n\t\t\tconst tabs = []\n\t\t\tconst permissions = JSON.parse(this.permissions)\n\n\t\t\tthis.$entryParams.activetabstudent = this.activetabstudent ?? null\n\n\t\t\t// check for missing url params here and block Kontrolle & Profil Tabs if they are not useable\n\t\t\tconst queryString = window.location.search;\n\t\t\tconst searchParams = new URLSearchParams(queryString)\n\t\t\tconst lv_id = searchParams.get('lvid')\n\t\t\tconst stg_kz = searchParams.get('stg_kz')\n\t\t\tconst sem_kurzbz = searchParams.get('sem_kurzbz')\n\t\t\tconst notMissingParams = (lv_id && stg_kz && sem_kurzbz) || this.$entryParams.notMissingParams\n\n\t\t\t// redeclare function since at this point globalProperties are not ready\n\t\t\tfunction capitalize(string) {\n\t\t\t\tif (!string) return ''\n\t\t\t\treturn string[0].toUpperCase() + string.slice(1);\n\t\t\t}\n\n\t\t\tif ((permissions.lektor || permissions.admin) && notMissingParams) {\n\t\t\t\tconst kontrolleTitle = Vue.computed(() => {\n\t\t\t\t\treturn this.phrasenResolved ? capitalize(this.$p.t('global/kontrolle')) : 'K'\n\t\t\t\t})\n\t\t\t\ttabs.push({\n\t\t\t\t\tkey: 'Kontrolle',\n\t\t\t\t\ttitle: kontrolleTitle,\n\t\t\t\t\tcomponent: '../../extensions/FHC-Core-Anwesenheiten/js/components/Lektor/LektorComponent.js'\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif ((permissions.student || permissions.admin) && notMissingParams) {\n\t\t\t\tconst profilTitle = Vue.computed(() => {\n\t\t\t\t\treturn this.phrasenResolved ? capitalize(this.$p.t('global/profil')) : 'P'\n\t\t\t\t})\n\n\t\t\t\ttabs.push({\n\t\t\t\t\tkey: 'Profil',\n\t\t\t\t\ttitle: profilTitle,\n\t\t\t\t\tcomponent: '../../extensions/FHC-Core-Anwesenheiten/js/components/Student/StudentComponent.js'\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif ((permissions.admin || permissions.assistenz) && permissions.entschuldigungen_enabled) {\n\t\t\t\tconst adminTitle = Vue.computed(() => {\n\t\t\t\t\treturn this.phrasenResolved ? capitalize(this.$p.t('global/admin')) : 'A'\n\t\t\t\t})\n\n\t\t\t\ttabs.push({\n\t\t\t\t\tkey: 'Admin',\n\t\t\t\t\ttitle: adminTitle,\n\t\t\t\t\tcomponent: '../../extensions/FHC-Core-Anwesenheiten/js/components/Assistenz/AssistenzComponent.js'\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst ret = {}\n\t\t\ttabs.forEach((tab, i) => {\n\t\t\t\tret['tab' + i] = tab\n\t\t\t})\n\n\t\t\tthis.setCurrentTab(permissions.controller, tabs)\n\n\t\t\tthis.setDefaultTabHeight()\n\n\t\t\treturn ret\n\t\t},\n\t\tsetDefaultTabHeight() {\n\t\t\tthis.$entryParams.tabHeights = {}\n\t\t\tthis.$entryParams.tabHeights.studentByLva = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.lektor = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.studentAnw = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.studentEnt = Vue.ref(400)\n\t\t\tthis.$entryParams.tabHeights.assistenz = Vue.ref(400)\n\t\t},\n\t\tsetCurrentTab(controller, tabs) {\n\n\t\t\tswitch (controller) {\n\t\t\t\tcase 'Admin':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Admin')\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Kontrolle':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Kontrolle')\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Profil':\n\t\t\t\t\tthis.currentTab = tabs.findIndex(t => t.key === 'Profil')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.currentTab = 0\n\t\t\t}\n\t\t},\n\t\tasync createdSetup() {\n\t\t\tawait new Promise(resolve => {\n\n\t\t\t\tconst queryString = window.location.search;\n\t\t\t\tconst searchParams = new URLSearchParams(queryString)\n\t\t\t\tthis.$entryParams.lv_id = searchParams.get('lvid')\n\t\t\t\tthis.$entryParams.stg_kz = searchParams.get('stg_kz')\n\t\t\t\tthis.$entryParams.sem_kurzbz = searchParams.get('sem_kurzbz')\n\t\t\t\tthis.$entryParams.sem = searchParams.get('sem')\n\n\t\t\t\tthis.$entryParams.handleLeSetup = this.handleLeSetup\n\t\t\t\tthis.$entryParams.findClosestTermin = this.findClosestTermin\n\t\t\t\tthis.$entryParams.notMissingParams = !!(this.$entryParams.lv_id && this.$entryParams.stg_kz && this.$entryParams.sem_kurzbz)\n\n\t\t\t\tthis.setupViewDataRefs()\n\n\t\t\t\tif (this.$entryParams.lv_id) {\n\t\t\t\t\tthis.loadLvViewData()\n\t\t\t\t}\n\n\t\t\t\tthis.$entryParams.phrasenPromise = this.$p.loadCategory(['ui', 'person', 'lehre', 'table', 'filter', 'global'])\n\t\t\t\tthis.$entryParams.phrasenPromise.then(() => {\n\t\t\t\t\tthis.phrasenResolved = true\n\t\t\t\t})\n\t\t\t\tconst el = document.getElementById(\"main\");\n\t\t\t\tthis.$entryParams.permissions = JSON.parse(el.attributes.permissions.nodeValue)\n\t\t\t\tthis.$entryParams.cis4 = JSON.parse(el.attributes.cis4.nodeValue)\n\n\t\t\t\t// console.log('$entryParams', this.$entryParams)\n\n\t\t\t\tthis.anwKontrolleMinDate = new Date(Date.now()).setDate((new Date(Date.now()).getDate() - (this.$entryParams.permissions.kontrolleCreateMaxReachPast)))\n\t\t\t\tthis.anwKontrolleMaxDate = new Date(Date.now()).setDate((new Date(Date.now()).getDate() + (this.$entryParams.permissions.kontrolleCreateMaxReachFuture)))\n\n\t\t\t\tel.removeAttribute('permissions')\n\n\t\t\t\tresolve()\n\t\t\t})\n\t\t},\n\t\tsetupViewDataRefs() {\n\t\t\tthis.$entryParams.viewDataLv = {}\n\t\t\tthis.$entryParams.viewDataLv.benotung = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.bezeichnung = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.lehrveranstaltung_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.oe_kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.orgform_kurzbz = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataLv.raumtyp_kurzbz = Vue.ref('')\n\n\t\t\tthis.$entryParams.viewDataStudent = {}\n\t\t\tthis.$entryParams.viewDataStudent.vorname = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.nachname = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.uid = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.person_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.prestudent_id = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.gruppe = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.verband = Vue.ref('')\n\t\t\tthis.$entryParams.viewDataStudent.semester = Vue.ref('')\n\t\t},\n\t\tloadLvViewData() {\n\t\t\tthis.$api.call(ApiInfo.getLvViewDataInfo(this.$entryParams.lv_id))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res?.data?.retval?.[0]) this.setLvViewData(res.data.retval[0])\n\t\t\t\t})\n\t\t},\n\t\tasync handleSetup() {\n\t\t\tif (this.$entryParams.setupPromise) return\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst ma_uid = this.$entryParams.permissions.authID\n\t\t\t\tconst sem_kurzbz = this.$entryParams.sem_kurzbz\n\t\t\t\tconst lv_id = this.$entryParams.lv_id\n\t\t\t\tconst le_ids = []\n\n\t\t\t\tconst promises = []\n\t\t\t\t// load lektors teaching the lva aswell as students attending the lva in case of admin or assistenz rights\n\t\t\t\tif (this.$entryParams.permissions.admin && lv_id && sem_kurzbz && le_ids) {\n\t\t\t\t\tconst maProm = this.handleMaSetup(lv_id, sem_kurzbz, ma_uid)\n\n\t\t\t\t\tmaProm.then(() => {\n\n\t\t\t\t\t\tpromises.push(this.handleLeSetup(lv_id, this.$entryParams.selected_maUID.value?.mitarbeiter_uid, sem_kurzbz, le_ids))\n\t\t\t\t\t\tpromises.push(this.handleStudentsSetup(lv_id, sem_kurzbz))\n\t\t\t\t\t\tPromise.all(promises).then(() => {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\n\t\t\t\t\t// load teaching units/lehreinheiten of provided lektor maUID in case of lektor rights\n\t\t\t\t} else if (this.$entryParams.permissions.lektor && lv_id && sem_kurzbz && le_ids) {\n\t\t\t\t\tthis.handleLeSetup(lv_id, ma_uid, sem_kurzbz, le_ids).finally(() => {\n\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tresolve(true)\n\t\t\t\t}\n\n\t\t\t})\n\t\t},\n\t\thandleStudentsSetup(lv_id, sem_kurzbz) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.$api.call(ApiInfo.getStudentsForLvaInSemester(lv_id, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tthis.$entryParams.availableStudents = []\n\n\t\t\t\t\t\tres?.data?.retval?.forEach(e => {\n\t\t\t\t\t\t\tconst infoString = e.semester + e.verband + e.gruppe + ' ' + e.vorname + ' ' + e.nachname\n\t\t\t\t\t\t\tthis.$entryParams.availableStudents.push({\n\t\t\t\t\t\t\t\tvorname: e.vorname, nachname: e.nachname,\n\t\t\t\t\t\t\t\tprestudent_id: e.prestudent_id, studiensemester_kurzbz: e.studiensemester_kurzbz,\n\t\t\t\t\t\t\t\tlehreinheit_id: e.lehreinheit_id, lehrveranstaltung_id: e.lehrveranstaltung_id,\n\t\t\t\t\t\t\t\tsemester: e.semester, verband: e.verband, gruppe: e.gruppe,\n\t\t\t\t\t\t\t\tuid: e.uid, person_id: e.person_id,\n\t\t\t\t\t\t\t\tinfoString\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tthis.$entryParams.selected_student_info = this.$entryParams.availableStudents.length ? this.$entryParams.availableStudents[0] : null\n\n\t\t\t\t\t}).finally(() => {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\thandleMaSetup(lv_id, sem_kurzbz, ma_uid) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$api.call(ApiInfo.getLektorsForLvaInSemester(lv_id, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\n\t\t\t\t\t\tthis.$entryParams.available_maUID.value.splice(0, this.$entryParams.available_maUID.value.length)\n\n\t\t\t\t\t\tconst found = res.data?.retval?.find(lektor => lektor.mitarbeiter_uid === ma_uid)\n\n\t\t\t\t\t\tconst lektor = found ?? res.data.retval[0]\n\t\t\t\t\t\tconst anrede = lektor.anrede !== null && lektor.anrede !== undefined && lektor.anrede !== '' ? lektor.anrede + ' ' : ''\n\t\t\t\t\t\tconst infoString = anrede + (lektor.titelpre ? lektor.titelpre + ' ' : '')\n\t\t\t\t\t\t\t+ lektor.vorname + (lektor.vornamen ? ' ' + lektor.vornamen : '') + ' ' + lektor.nachname\n\t\t\t\t\t\t\t+ (lektor.titelpost ? ' ' + lektor.titelpost : '')\n\t\t\t\t\t\tthis.$entryParams.selected_maUID.value = lektor ? {\n\t\t\t\t\t\t\tmitarbeiter_uid: lektor.mitarbeiter_uid,\n\t\t\t\t\t\t\tinfoString\n\t\t\t\t\t\t} : null\n\n\n\t\t\t\t\t\tres.data?.retval?.forEach(lektor => {\n\t\t\t\t\t\t\tconst anrede = lektor.anrede !== null && lektor.anrede !== undefined && lektor.anrede !== '' ? lektor.anrede + ' ' : ''\n\t\t\t\t\t\t\tconst infoString = anrede + (lektor.titelpre ? lektor.titelpre + ' ' : '')\n\t\t\t\t\t\t\t\t+ lektor.vorname + (lektor.vornamen ? ' ' + lektor.vornamen : '') + ' ' + lektor.nachname\n\t\t\t\t\t\t\t\t+ (lektor.titelpost ? ' ' + lektor.titelpost : '')\n\n\t\t\t\t\t\t\tthis.$entryParams.available_maUID.value.push({\n\t\t\t\t\t\t\t\tmitarbeiter_uid: lektor.mitarbeiter_uid,\n\t\t\t\t\t\t\t\tinfoString\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}).finally(() => {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\thandleLeSetup(lv_id, ma_uid, sem_kurzbz, le_ids) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis.$api.call(ApiKontrolle.getLehreinheitenForLehrveranstaltungAndMaUid(lv_id, ma_uid, sem_kurzbz))\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t// merge entries with same LE\n\t\t\t\t\t\tconst data = []\n\n\t\t\t\t\t\tif (res.data[1]) {\n\t\t\t\t\t\t\t// res.data[1] = null\n\t\t\t\t\t\t\tObject.keys(res.data[1]).forEach(key => {\n\t\t\t\t\t\t\t\tconst val = res.data[1][key]\n\n\t\t\t\t\t\t\t\tif (val && val.length) {\n\t\t\t\t\t\t\t\t\tval.forEach(v => v.le_id = key)\n\t\t\t\t\t\t\t\t\t// spoof le termine to test with\n\t\t\t\t\t\t\t\t\t// val.push({le_id: key, datum: '2025-04-17', beginn: '13:37:42', ende: '23:42:17'})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.$entryParams.allLeTermine = res.data[1] ?? []\n\n\t\t\t\t\t\tres.data[0].forEach(entry => {\n\n\t\t\t\t\t\t\tconst existing = data.find(e => e.lehreinheit_id === entry.lehreinheit_id)\n\t\t\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t\t\t// supplement info\n\t\t\t\t\t\t\t\texisting.infoString += ', '\n\t\t\t\t\t\t\t\tif (entry.gruppe_kurzbz !== null && entry.direktinskription == false) {\n\t\t\t\t\t\t\t\t\texisting.infoString += entry.gruppe_kurzbz\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\texisting.infoString += entry.kurzbzlang + '-' + entry.semester\n\t\t\t\t\t\t\t\t\t\t+ (entry.verband ? entry.verband : '')\n\t\t\t\t\t\t\t\t\t\t+ (entry.gruppe ? entry.gruppe : '')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// entries are supposed to be fetched ordered by non null gruppe_kurzbz first\n\t\t\t\t\t\t\t\t// so a new entry will always start with those groups, others are appended afterwards\n\t\t\t\t\t\t\t\tentry.infoString = entry.kurzbz + ' - ' + entry.lehrform_kurzbz + ' - '\n\t\t\t\t\t\t\t\tif (entry.gruppe_kurzbz !== null && entry.direktinskription == false) {\n\t\t\t\t\t\t\t\t\tentry.infoString += entry.gruppe_kurzbz\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tentry.infoString += entry.kurzbzlang + '-' + entry.semester\n\t\t\t\t\t\t\t\t\t\t+ (entry.verband ? entry.verband : '')\n\t\t\t\t\t\t\t\t\t\t+ (entry.gruppe ? entry.gruppe : '')\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdata.push(entry)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tres.data[0].forEach(entry => {\n\t\t\t\t\t\t\tentry.csvInfoString = entry.infoString\n\t\t\t\t\t\t\tentry.infoString += ' | 👥' + entry.studentcount + ' | 📅' + entry.termincount\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tthis.$entryParams.selected_le_info.value = this.$entryParams.selected_le_info.value ?? data.length ? this.findLeWithClosestTermin(data, this.$entryParams.allLeTermine) : null\n\t\t\t\t\t\tthis.$entryParams.available_le_info.value = [...data]\n\t\t\t\t\t\tdata.forEach(leEntry => le_ids.push(leEntry.lehreinheit_id))\n\n\t\t\t\t\t\tthis.$entryParams.selected_le_id.value = this.$entryParams.selected_le_info.value ? this.$entryParams.selected_le_info.value.lehreinheit_id : null\n\t\t\t\t\t\tthis.$entryParams.available_le_ids.value = [...le_ids]\n\n\t\t\t\t\t}).finally(() => {\n\t\t\t\t\tresolve()\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tsetLvViewData(data) {\n\t\t\tthis.$entryParams.viewDataLv.benotung = data.benotung\n\t\t\tthis.$entryParams.viewDataLv.bezeichnung = data.bezeichnung\n\t\t\tthis.$entryParams.viewDataLv.kurzbz = data.kurzbz\n\t\t\tthis.$entryParams.viewDataLv.lehrveranstaltung_id = data.lehrveranstaltung_id\n\t\t\tthis.$entryParams.viewDataLv.oe_kurzbz = data.oe_kurzbz\n\t\t\tthis.$entryParams.viewDataLv.orgform_kurzbz = data.orgform_kurzbz\n\t\t\tthis.$entryParams.viewDataLv.raumtyp_kurzbz = data.raumtyp_kurzbz\n\t\t},\n\t\thandleTabChanged(key) {\n\t\t\tif (this.$refs.tabsMain?._?.refs?.current) this.$refs.tabsMain._.refs.current.redrawTable()\n\t\t},\n\t\tfindLeWithClosestTermin(leChoices, leTermine) {\n\t\t\tconst flat = Object.values(leTermine).filter(Array.isArray).flat();\n\n\t\t\tif (flat && flat.length) {\n\t\t\t\tconst closest = this.findClosestTermin(flat)\n\n\t\t\t\tif (!closest) { // all possible termine are too far back in the past\n\t\t\t\t\tthis.$fhcAlert.alertWarning(this.$p.t('global/noLePreselectTermineTooOld'))\n\n\t\t\t\t\treturn leChoices[0]\n\t\t\t\t}\n\n\t\t\t\tconst choiceFound = leChoices.find(choice => choice.lehreinheit_id == closest.le_id)\n\t\t\t\treturn choiceFound\n\n\t\t\t} else if (leChoices && leChoices.length) { // no termine to determine closest le by\n\t\t\t\treturn leChoices[0]\n\t\t\t} else { // no termine and no le found\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\t\tfindClosestTermin(termine) {\n\t\t\tif (!termine || termine.length === 0) return null;\n\n\t\t\tconst now = luxon.DateTime.now().toUTC();\n\n\t\t\t// prepare luxon utc timestamps & priority ranking overall & ranking in same day\n\t\t\tconst scoredTermine = termine.map(termin => {\n\t\t\t\tconst start = luxon.DateTime.fromFormat(`${termin.datum} ${termin.beginn}`, 'yyyy-MM-dd HH:mm:ss', {zone: 'utc'});\n\t\t\t\tconst end = luxon.DateTime.fromFormat(`${termin.datum} ${termin.ende}`, 'yyyy-MM-dd HH:mm:ss', {zone: 'utc'});\n\n\t\t\t\tlet score = 100;\n\n\t\t\t\tif (start.hasSame(now, 'day')) {\n\t\t\t\t\tif (now >= start && now <= end) {\n\t\t\t\t\t\tscore = 1; // currently active lesson\n\t\t\t\t\t} else if (now < start) {\n\t\t\t\t\t\tscore = 3; // future lesson later today\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscore = 4; // today but already over\n\t\t\t\t\t}\n\t\t\t\t} else if (start > now) {\n\t\t\t\t\tscore = 5; // future not today\n\t\t\t\t} else {\n\t\t\t\t\tscore = 6; // past termine not today\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...termin,\n\t\t\t\t\tscore,\n\t\t\t\t\t// absolute distance from the start of the lesson\n\t\t\t\t\tdiff: Math.abs(start.diff(now).as('milliseconds'))\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn scoredTermine.reduce((best, current) => {\n\t\t\t\t// if ranks are different, lower rank wins\n\t\t\t\tif (current.score < best.score) return current;\n\t\t\t\tif (current.score > best.score) return best;\n\n\t\t\t\t// if they are in the same rank, pick the one closest to 'now' with the smallest absolute diff\n\t\t\t\treturn current.diff < best.diff ? current : best;\n\t\t\t});\n\t\t},\n\t},\n\tcreated(){\n\t\tif(!this.$entryParams.permissions) this.createdSetup()\n\t},\n\tmounted() {\n\t\tthis.$entryParams.setupPromise = this.handleSetup().then(()=>{\n\t\t\tthis.loaded = true\n\n\t\t\tthis.$entryParams.phrasenPromise.then(()=> this.phrasenResolved = true)\n\n\t\t})\n\t\tif(this.$entryParams.permissions.lektor) this.permissioncount++\n\t\tif(this.$entryParams.permissions.student) this.permissioncount++\n\t\tif(this.$entryParams.permissions.assistenz) this.permissioncount = 3\n\t\tif(this.$entryParams.permissions.admin) this.permissioncount = 3 // default has max permissions\n\n\t},\n\tcomputed: {\n\t\tgetSubtitle(){\n\t\t\tif(this.$entryParams?.viewDataLv?.kurzbz?.value && this.$entryParams?.viewDataLv?.bezeichnung?.value) {\n\t\t\t\treturn this.$entryParams.viewDataLv.kurzbz.value +' - '+ this.$entryParams.viewDataLv.bezeichnung.value\n\t\t\t} else return ''\n\t\t},\n\t\tgetCurrentTab() {\n\t\t\treturn 'tab' + this.currentTab\n\t\t}\n\t},\n\ttemplate: `\n\n\t<div style=\"position: relative;\" ref=\"appContainer\">\n\n\t\t<div v-if=\"$entryParams.permissions.show_guide\" style=\"position: absolute; top: 10px; right: 10px; z-index: 1000;\">\n\t\t\t<a :href=\"$entryParams.permissions.guide_link\" target=\"_blank\" class=\"ms-auto mb-2\">\n\t\t\t\tWiki <i class=\"fa fa-arrow-up-right-from-square me-1\"></i>\n\t\t\t</a>\n\t\t</div>\n\t\n\t\t<template  v-if=\"permissioncount > 1 && phrasenResolved\">\n\t\t\t<core-tabs :default=\"getCurrentTab\" :modelValue=\"currentTab\" :config=\"tabs\" @changed=\"handleTabChanged\" ref=\"tabsMain\"></core-tabs>\n\t\t</template>\n\t\t<template v-else-if=\"permissioncount === 1 && phrasenResolved\">\n\t\t\t<LektorComponent v-if=\"$entryParams?.permissions?.lektor\"></LektorComponent>\n\t\t\t<StudentComponent v-if=\"$entryParams?.permissions?.student\"></StudentComponent>\n\t\t\t<AssistenzComponent v-if=\"$entryParams?.permissions?.assistenz || $entryParams?.permissions?.admin\"></AssistenzComponent>\n\t\t</template>\n\t</div>\n\n`\n};\n","import LektorComponent from \"../components/Lektor/LektorComponent.js\";\n// plugin or plugins doesnt matter it all loads all legacy plugins anyway, switch to FhcBase for more sanity\nimport Phrasen from \"../../../../js/plugins/Phrasen.js\";\nimport {StudentByLvaComponent} from \"../components/Lektor/StudentByLvaComponent.js\";\nimport StudentComponent from \"../components/Student/StudentComponent.js\";\nimport StudentAnwesenheitComponent from \"../components/Student/StudentAnwesenheitComponent.js\";\nimport StudentEntschuldigungComponent from \"../components/Student/StudentEntschuldigungComponent.js\";\nimport ScanComponent from \"../components/Student/ScanComponent.js\";\nimport LandingPageComponent from \"../components/LandingPage/LandingPageComponent.js\";\n\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nconst router = VueRouter.createRouter({\n\thistory: VueRouter.createWebHistory(`/${ciPath}/extensions/FHC-Core-Anwesenheiten`),\n\troutes: [\n\t\t{\n\t\t\tpath: `/Administration`,\n\t\t\tname: 'Administration',\n\t\t\tcomponent: LandingPageComponent,\n\t\t},\n\t\t{\n\t\t\tpath: '/Profil/Scan/:zugangscode?',\n\t\t\tname: 'Scan',\n\t\t\tcomponent: ScanComponent,\n\t\t\tprops: true\n\t\t},\n\t\t{\n\t\t\tpath: '/Profil/Entschuldigung',\n\t\t\tname: 'Profil',\n\t\t\tcomponent: LandingPageComponent,\n\t\t\tprops: { activetabstudent: 'entschuldigungen'}\n\t\t},\n\n\t\t{\n\t\t\tpath: `/`,\n\t\t\tname: 'LandingPage',\n\t\t\tcomponent: LandingPageComponent\n\t\t},\n\t\t{\n\t\t\tpath: '/:catchAll(.*)',\n\t\t\tredirect: { name: 'LandingPage'},\n\t\t\tprops: true\n\t\t}\n\t]\n})\n\nconst anwesenheitApp = Vue.createApp({\n\tcomponents: {\n\t\tLektorComponent,\n\t\tStudentByLvaComponent,\n\t\tStudentComponent,\n\t\tStudentAnwesenheitComponent,\n\t\tStudentEntschuldigungComponent\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttitle: \"AnwesenheitApp\",\n\t\t}\n\t},\n\tprops: {\n\n\t},\n\tmethods: {\n\t},\n\tcreated(){\n\n\t}\n});\nanwesenheitApp.config.globalProperties.$entryParams = {\n\t// TODO: update every patch to keep renew persistenceID for tabulator tables\n\tpatchdate: '2026-01-29',\n\tisInFrame: !!window.frameElement,\n\tisMobile: Math.min(window.screen.width, window.screen.height) < 768 || navigator.userAgent.indexOf(\"Mobi\") > -1,\n\tavailable_le_ids: Vue.ref([]),\n\tavailable_le_info: Vue.ref([]),\n\tselected_le_id: Vue.ref(),\n\tselected_le_info: Vue.ref(),\n\tavailable_maUID: Vue.ref([]),\n\tselected_maUID: Vue.ref(),\n\tavailable_termine: Vue.ref(),\n\tselected_termin: Vue.ref()\n}\n\nanwesenheitApp.config.globalProperties.$capitalize = (string) => {\n\tif(!string) return ''\n\treturn string[0].toUpperCase() + string.slice(1);\n}\n\nanwesenheitApp.config.globalProperties.$formatTime = (timeStamp, delimiter = '-', format = 'YYYY-MM-DD') => {\n\tconst date = new Date(timeStamp)\n\tswitch (format) {\n\t\tcase 'YYYY-MM-DD':\n\t\t\treturn date.getFullYear() + delimiter + String(date.getMonth() + 1).padStart(2, '0') + delimiter + String(date.getDate()).padStart(2, '0');\n\t\tcase 'DD-MM-YYYY':\n\t\t\treturn String(date.getDate()).padStart(2, '0') + delimiter + String(date.getMonth() + 1).padStart(2, '0') + delimiter + date.getFullYear();\n\t}\n}\n\nanwesenheitApp.use(router)\n\nanwesenheitApp.use(primevue.config.default, {\n\t\t// TODO: set primevue locale with language\n\t\tzIndex: {\n\t\t\toverlay: 9000,\n\t\t\ttooltip: 8000\n\t\t}\n\t})\nanwesenheitApp.use(Phrasen)\n\nfunction getTarget(el) {\n\n\treturn primevue.utils.DomHandler.hasClass(el, \"p-inputwrapper\")\n\t\t? primevue.utils.DomHandler.findSingle(el, \"input\")\n\t\t: el;\n}\n\nanwesenheitApp.directive(\"tooltip\", {\n\n\tmounted(el) {\n\t\tconst target = getTarget(el);\n\t\ttarget.$_ptooltipZIndex ??=\n\t\t\tanwesenheitApp.config.globalProperties.$primevue.config.zIndex.tooltip;\n\t},\n\t...primevue.tooltip,\n});\n\nanwesenheitApp.mount(\"#main\");\n"],"names":["CoreFetchCmpt","emits","props","refresh","type","Boolean","apiFunction","required","Function","apiFunctionParameters","watch","newValue","oldValue","this","fetchData","data","loading","error","errorMessage","created","methods","apiFunctionResult","Promise","then","successHandler","catch","errorHandler","finally","finallyHandler","setError","response","$emit","undefined","retval","message","template","FILTER_COMPONENT_NEW_FILTER","FilterConfig","filters","Array","default","columns","fields","switchFilter","applyFilterConfig","saveCustomFilter","currentFields","computed","types","reduce","a","c","toLowerCase","indexOf","name","n","evt","currentTarget","value","filteredFields","filter","el","condition","length","alert","addField","push","removeField","index","splice","FilterColumns","selected","names","Object","hide","show","selectedFields","toggle","field","DEFAULT_ICONS","jsonLines","xlsx","pdf","html","json","csv","DEFAULT_LABELS","TableDownload","tabulator","config","String","iconClass","currentConfig","prototype","toString","call","split","isArray","newConfig","k","v","stringToFileFormatter","icon","label","formatter","map","validateFileFormatter","input","lcInput","includes","window","XLSX","jspdf","jsPDF","autoTable","download","file","options","elementDataMap","WeakMap","collapseAutoClose","mounted","binding","open","set","contains","target","collapse","bootstrap","Collapse","getInstance","addEventListener","document","get","beforeUnmount","removeEventListener","collapsibleAutoHideFunc","Tabulator","extendModule","fitDataStretchFrozen","forced","colsWidth","tableWidth","table","rowManager","element","clientWidth","gap","lastCol","forEach","column","i","widthFixed","reinitializeWidth","responsiveLayout","modules","responsive","visible","definition","frozen","getWidth","modExists","setWidth","update","ApiFilter","wsParams","method","url","params","filterUniqueId","filterType","customFilterName","removeCustomFilter","filterId","applyFilterFields","filterFields","addFilterField","filterField","removeFilterField","getFilterById","getFilter","_uuid","CoreFilterCmpt","components","directives","onNwNewEntry","title","description","sideMenu","tabulatorOptions","tabulatorEvents","tableOnly","noColumnFilter","reload","reloadBtnInfotext","newBtnShow","newBtnClass","newBtnDisabled","newBtnLabel","uniqueId","idField","parentIdField","countOnly","useSelectionSpan","uuid","filterName","filterActive","dataset","datasetMetadata","availableFilters","selectedFilter","fetchCmptRefresh","fetchCmptApiFunction","fetchCmptApiFunctionParams","fetchCmptDataFetched","fetchResult","tableBuilt","tabulatorHasSelector","selectedData","persistence","sort","headerFilter","group","page","notSelectedFields","x","filteredData","JSON","parse","stringify","filteredColumns","hasOwnProperty","col","resizable","fieldIdsForVisibilty","getColumns","def","getDefinition","getField","fieldNames","res","idExtra","columnsForFilter","filterTitles","reloadTable","setData","initTabulator","placeholder","$p","loadCategory","t","resolve","location","hash","slice","resolvePromiseFunc","setRenderData","startFetchCmpt","$api","layout","movableColumns","columnDefaults","tooltip","height","minHeight","maxHeight","selectable","dataTree","$refs","on","event","handler","toDelete","childIdx","child","appendChild","counter","cols","isVisible","_setHeaderFilter","updateTabulator","_updateTabulator","setColumns","clearFilters","getHeaderFilters","setHeaderFilterValue","clearFilter","render","j","setSideMenu","setDropDownMenu","personalFilters","filtersArray","filtersCount","link","id","filter_id","desc","onClickCall","handlerGetFilterById","subscriptDescription","subscriptLinkClass","subscriptLinkValue","onClickSubscriptCall","handlerRemoveCustomFilter","children","option","dataFetchedCallback","FHC_JS_DATA_STORAGE_OBJECT","called_path","called_method","handlerSaveCustomFilter","getAttribute","substring","attr","parentId","parentIdx","parent","_children","beforeCreate","$props","ApiNavigation","getHeader","navigation_page","getMenu","CoreNavigationCmpt","addHeaderMenuEntries","addSideMenuEntries","hideTopMenu","leftNavCssClasses","headerMenu","headerMenuEntries","hm","keys","sideMenuEntries","sm","getNavigationPage","fetchCmptApiFunctionHeader","fetchCmptApiFunctionSideMenu","fetchCmptDataFetchedHeader","fetchCmptDataFetchedMenu","getDataBsToggle","header","CoreBaseLayout","subtitle","mainCols","asideCols","mainGridCols","asideGridCols","lektorFormatters","centeredFormatter","cell","getValue","formDateOnly","date","Date","getDate","padStart","getMonth","getFullYear","fotoFormatter","dateOnlyTimeFormatter","hours","getHours","minutes","getMinutes","studentFormatters","formFile","formDate","formStudiengangKz","rowData","getRow","getData","kurzbzlang","bezeichnung","BsModal","modal","fullscreen","backdrop","validator","focus","keyboard","noCloseBtn","dialogClass","headerClass","bodyClass","footerClass","allowFullscreenExpand","dispose","handleUpdate","relatedTarget","toggleFullscreen","Modal","popup","body","footer","slots","includedPrimevue","primevue","reject","instance","Vue","createApp","setup","h","class","ref","unmount","result","unmounted","wrapper","parentElement","removeChild","createElement","use","zIndex","overlay","Phrasen$1","Phrasen","mount","LehreinheitenDropdown","Dropdown","dropdown","leChanged","e","$entryParams","selected_le_id","lehreinheit_id","selected_le_info","getSelected","infoString","getOptionLabel","MaUIDDropdown","maUIDChanged","selected_maUID","handleLeSetup","lv_id","mitarbeiter_uid","sem_kurzbz","KontrollenDropdown","errors","internal_available_kontrolle","internal_selected_kontrolle","setKontrollen","kontrolleChanged","datum","von","bis","checkDisabled","permissions","admin","assistenz","setDate","kontrolleDeleteMaxReach","TermineDropdown","terminChanged","selected_termin","datumFrontend","beginn","ende","AnwCountDisplay","anwHovered","abwHovered","entHovered","anwesend","abwesend","entschuldigt","KontrolleDisplay","hovered","kontrolle","Statuslegende","ApiKontrolle","fetchAllAnwesenheitenByLvaAssigned","le_id","ma_uid","getAllAnwesenheitenByStudentByLva","prestudent_id","updateAnwesenheiten","changedAnwesenheiten","getExistingQRCode","regenerateQRCode","anwesenheit_id","degenerateQRCode","zugangscode","getNewQRCode","deleteQRCode","deleteAnwesenheitskontrolle","pollAnwesenheiten","getAnwQuoteForPrestudentIds","ids","restartKontrolle","updateKontrolle","getLehreinheitenForLehrveranstaltungAndMaUid","lva_id","insertAnwWithoutQR","ApiProfil","getAllAnwQuotasForLvaByUID","studiensemester","uid","getAllAnwByUID","person_id","getProfileViewData","checkInAnwesenheit","addEntschuldigung","formData","headers","Headers","editEntschuldigung","deleteEntschuldigung","entschuldigung_id","getEntschuldigungenByPersonID","getAnwesenheitSumByLva","sem_kz","getAnwesenheitenByLva","ApiInfo","getAktuellesSemester","getViewDataStudent","getEntschuldigungFile","dms_id","getStunden","getStudiensemester","getStudentInfo","getStudiengaenge","allowed_stg","getLektorsForLvaInSemester","sem","getStudentsForLvaInSemester","getLvViewDataInfo","StudentByLvaComponent","tabulatorUuid","appSideMenuEntries","tableBuiltPromise","cellEditing","anwesenheitenByStudentByLvaTabulatorOptions","tabHeights","studentByLva","selectableCheck","rowFormatter","unselectableFormatter","debugInvalidComponentFuncs","titleFormatter","titleFormatterParams","rowRange","headerSort","width","$capitalize","widthGrow","anwesenheitFormatterValue","minWidth","bottomCalcFormatter","sumBottomCalcFormatter","bottomCalc","anwCalc","percentFormatter","einheitenCalc","einheitenFormatter","editor","persistenceID","patchdate","anwesenheitenByStudentByLvaTabulatorEventHandlers","notiz","meta","status","$fhcAlert","alertSuccess","async","phrasenPromise","tableBuiltResolve","filterTitle","filterSubtitle","changedData","tableData","initialTableData","vorname","nachname","semester","verband","gruppe","sum","foto","anteil","val","Number","parseFloat","isNaN","positiveRatingThreshold","getElement","style","setProperty","values","formatMinutes","acc","cur","row","entschuldigt_status","valInEh","einheitDauer","toFixed","replace","valInMin","remove","setRowStatus","newRow","anwesenheit_user_id","handleChange","existingEntryIndex","findIndex","formAction","className","setCheckedButton","innerHTML","anwesend_status","append","setCrossedButton","abwesend_status","saveChanges","alertError","lektorState","students","find","s","anwesenheitenByStudentByLvaTable","recalc","setFilterTitle","setSelectedRowsAnwesend","getSelectedData","selectedRows","getSelectedRows","changedRows","newData","toggleSelect","setSelectedRowsAbwesend","routeToLandingPage","$router","color","handleUuidDefined","tableResolve","setupMounted","arr","dauer","isLowResolution","imgSrc","img","Image","src","calculateTableHeight","tableID","tableDataSet","getElementById","rect","getBoundingClientRect","screenY","isInFrame","frameElement","clientHeight","visualViewport","top","redraw","load","dataChanged","getTooltipObj","LektorComponent","Divider","divider","datepicker","VueDatePicker","showQRLoadingSpinner","selectedStudent","kontrolleVonBis","editKontrolle","highlightMode","selectedDateCount","externalModalContainer","externalWindow","stunden","studentsData","anwEntries","stsem","entschuldigtStati","kontrollen","viewData","dates","termine","showAllVar","tableStudentData","tabulatorCols","gruppen","kontrollZeitSourceStundenplanBeginn","kontrollZeitSourceStundenplanEnde","kontrollDatumSourceStundenplan","anwesenheitenTabulatorOptions","rowHeight","entschuldigtColoring","lektor","maxWidth","tooltipTableRow","headerFilterParams","valuesLookup","clearable","autocomplete","editorParams","editable","checkCellEditability","hozAlign","anwesenheitenTabulatorEventHandlers","getColumn","Reflect","confirm","acceptLabel","acceptClass","rejectLabel","rejectClass","changes","nextTick","modalContainerStudentByLva","changeAnwStatus","d","backgroundColor","boundRegenerateQR","boundProgressCounter","deleteData","selectedDate","now","qr","code","timerIDPolling","progressTimerID","regenerateProgress","progressMax","polling","checkInCount","abwesendCount","entschuldigtCount","studentCount","inject","minDate","maxDate","translateOffset","handleAutoApply","outsideDateSelect","closeMenu","insideDateSelect","anwColTitleFormatter","titleParts","dateParts","trimEnd","selectedDateFrontendFormatted","container","textAlign","onRendered","padding","fontFamily","fontWeight","marginBottom","borderBottom","paddingBottom","count","entschuldigungen","shownNumber","innerText","grid","display","gridTemplateColumns","columnGap","rowGap","ent","dateSpan","formatEntschuldigungZeit","statusSpan","akzeptiert","formatAkzeptiertStatus","none","today","areDatesSame","ret","anwTooltip","valueFormatted","svg","showQR","pollAnwesenheit","startPollingAnwesenheiten","setInterval","boundPollAnwesenheit","stopPollingAnwesenheiten","clearInterval","handleKontrolleChanged","handleShowAllToggle","toggleShowAll","alertInfo","setAllColsAndData","anwesenheitenTable","clearSort","setShowAll","newCols","setupAllData","student","allEntStudent","zusatz","student_uid","entry","date1","date2","date1Date","date2Date","date1Month","date2Month","date1Year","date2Year","wait","ms","setTimeout","formatQRTime","vp","datumParts","modalContainerQR","useRegenerateQR","startRegenerateQR","year","month","day","modalContainerNewKontrolle","handleTerminChanged","setTimespanForKontrolleTermin","regenerateQR","oldCode","progressCounter","changedStudents","Set","changedStudentsArr","change","valueToChange","oldVal","kontrolleToUpdate","updateSumData","setCurrentCountsFromTableData","progressTimerInterval","stopRegenerateQR","handleChangeDatum","padZero","num","searchStr","terminFound","available_termine","termin","handleChangeEnde","seconds","handleChangeBeginn","queryOnlyKontrolleShown","sYear","sMonth","sDate","kOnDate","kYear","jsDate","kMonth","kDate","setTimespanForKontrolleNow","getSeconds","isSameDay","startNewAnwesenheitskontrolle","validateTimespan","datefetch","formatDateToDbString","reloadState","stopAnwesenheitskontrolle","close","setupData","openEditModal","modalContainerEditKontrolle","openLegend","modalContainerLegende","confirmDelete","dataparts","dateobj","dateAnwFormat","alertWarning","editAnwesenheitskontrolle","vonSplit","editVon","bisSplit","editBis","getTime","getTimezoneOffset","toISOString","formatZusatzDate","parts","formatZusatz","stsemdatumvon","start","stsemdatumbis","entryVon","entryBis","studienstatus","bisio_id","lkt_ueberschreibbar","anmerkung","stg_kz_student","a_o_kz","mobilitaetstyp_kurzbz","doubledegree","ddtype","linkKontrollData","sumAnw","anw","abw","groupSet","setEntries","b","setupLektorComponent","closestTermin","findClosestTermin","closestTerminSameDay","Map","determineDates","anwCols","buildColsForDates","titel","setupLektorState","updateQueryParam","key","URL","searchParams","history","replaceState","stg_kz","dateparts","getAvailableTermine","allLeTermine","maUIDchangedHandler","handleLEChanged","openNewAnwesenheitskontrolleModal","arrWrapped","found","newEntry","original","updateFoundIndex","newAnwVonDate","newAnwBisDate","minDiff","threshold","kontrollenToCheck","len","kVonParts","kBisParts","kVonDate","setupPromise","bind","regenerateQRTimer","showAllTickbox","checked","downloadCSV","getCSVFilename","bom","redrawTable","entForSelectedDate","vonDate","bisDate","isEntschuldigt","entCurDate","togglePopOut","toClone","head","querySelectorAll","clone","cloneNode","handleCloseExternalWindow","checkForBetreuungAndAlert","alertConfig","alert_lehrform","lehrform_kurzbz","text","lang","german_alert_text","english_alert_text","selectedDateDBFormatted","startsWith","kdate","openKontrolleInfo","handleTitleSet","handleUpdateAnwesenheit","authID","newVal","currentLEhasRightToSkipQR","no_qr_lehrform","getTitle","getTabulatorStyle","getTooltipKontrolleLoeschen","getTooltipKontrolleNeu","getTooltipZeitFromStundenplan","getTooltipDatumFromStundenplan","getTooltipLegende","getTooltipCsv","getTooltipEdit","getTooltipSaveChanges","getTooltipRestartKontrolle","getTooltipDeleteKontrolle","getTooltipEditKontrollzeiten","getSaveBtnClass","getEditBtnClass","str","csvInfoString","viewDataLv","toDateString","highlights","current","search","searchsettings","$fhcApi","post","searchAdvanced","searchdummy","phrasen$1","category","setLanguage","categories","language","payload","getLanguage","getActiveDbLanguages","navigation","filter$1","studstatus","abmeldung","getDetails","antrag_id","create","stdsem","grund","errorHandling","cancel","allSettled","antrag","studierendenantrag_id","errorHeader","unterbrechung","datum_wiedereinstieg","attachment","wiederholung","getLvs","saveLvs","forbiddenLvs","mandatoryLvs","leitung","getStgs","getAntraege","getHistory","getPrestudents","query","signal","timeout","approve","reopen","pause","unpause","object","approveObjection","denyObjection","profil","getView","app_root","ci_router","fotoSperre","isStudent","isMitarbeiter","getZustellAdresse","getZustellKontakt","getGemeinden","nation","zip","getAllNationen","profilUpdate","getStatus","getTopic","acceptProfilRequest","profil_update_id","status_message","topic","requested_change","denyProfilRequest","insertFile","dms","getProfilRequestFiles","requestID","selectProfilRequest","insertProfilRequest","fileID","updateProfilRequest","ID","deleteProfilRequest","lvPlan","getRoomInfo","ort_kurzbz","start_date","end_date","getOrtReservierungen","getLvPlanReservierungen","getLehreinheitStudiensemester","studiensemesterDateInterval","LvPlanEvents","stv","favorites","studiensemester_kurzbz","encodeURIComponent","getUri","prestudent","person","relative_path","getStg","setStg","studiengang_kz","konto","tabulatorConfig","self","ajaxURL","ajaxParams","modelValue","only_open","studiengang_kz_intern","ajaxRequestFunc","ajaxResponse","checkDoubles","form","confirmErrorHandler","insert","edit","delete","buchungsnr","getBuchungstypen","getGruppen","deleteGroup","kontakt","getAdressen","addNewAddress","loadAddress","address_id","updateAddress","deleteAddress","getPlaces","plz","getFirmen","searchString","getNations","getAdressentypen","getBankverbindung","addNewBankverbindung","loadBankverbindung","bankverbindung_id","updateBankverbindung","deleteBankverbindung","getKontakte","addNewContact","loadContact","kontakt_id","updateContact","deleteContact","getStandorteByFirma","getKontakttypen","updatePrestudent","getBezeichnungZGV","getBezeichnungMZgv","getBezeichnungDZgv","getAusbildung","getAufmerksamdurch","getBerufstaetigkeit","getTypenStg","getBisstandort","getHistoryPrestudent","getMaxSem","studiengang_kzs","advanceStatus","status_kurzbz","ausbildungssemester","confirmStatus","isLastStatus","deleteStatus","getLastBismeldestichtag","getHistoryPrestudents","insertStatus","loadStatus","updateStatus","getStudienplaene","getStudiengang","getStatusgruende","getStati","addStudent","changeStatus","getStatusarray","details","save","exam","getPruefungen","loadPruefung","pruefung_id","getTypenPruefungen","getAllLehreinheiten","getLvsByStudent","getLvsandLesByStudent","getLvsAndMas","getMitarbeiterLv","getNoten","checkZeugnisnoteLv","addPruefung","updatePruefung","deletePruefung","abschlusspruefung","getAbschlusspruefung","addNewAbschlusspruefung","loadAbschlusspruefung","updateAbschlusspruefung","deleteAbschlusspruefung","getTypenAbschlusspruefung","getTypenAntritte","getBeurteilungen","getAkadGrade","getTypStudiengang","getMitarbeiter","getPruefer","checkForExistingExams","uids","grades","list","getCertificate","getTeacherProposal","getRepeaterGrades","updateCertificate","lehrveranstaltung_id","note","lehrveranstaltung_bezeichnung","deleteCertificate","copyTeacherProposalToCertificate","copyRepeaterGradeToCertificate","studierendenantrag_lehrveranstaltung_id","lv_bezeichnung","getGradeFromPoints","points","manualErrorHandling","mobility","getMobilitaeten","getProgramsMobility","addNewMobility","loadMobility","updateMobility","deleteMobility","getLVList","getPurposes","getSupports","getListPurposes","getListSupports","deleteMobilityPurpose","addMobilityPurpose","deleteMobilitySupport","addMobilitySupport","archiv","getArchivVorlagen","archive","archiveSigned","akte_id","documents","getDocumentsUnaccepted","getDocumentsAccepted","deleteZuordnung","dokument_kurzbz","createZuordnung","loadAkte","getDoktypen","updateFile","deleteFile","uploadFile","exemptions","getAnrechnungen","getLehrveranstaltungen","getBegruendungen","getLvsKompatibel","getLektoren","addNewAnrechnung","loadAnrechnung","anrechnung_id","editAnrechnung","deleteAnrechnung","jointstudies","getStudies","getTypenMobility","getStudyprograms","getListPartner","getStatiPrestudent","loadStudy","insertStudy","updateStudy","deleteStudy","courselist","getCourselist","group_consecutiveHours","dbStundenplanTable","configStudent","configStudents","getNotizen","getUid","addNewNotiz","loadNotiz","notiz_id","loadDokumente","deleteNotiz","type_id","updateNotiz","isBerechtigt","betriebsmittel","getAllBetriebsmittel","addNewBetriebsmittel","loadBetriebsmittel","betriebsmittelperson_id","updateBetriebsmittel","deleteBetriebsmittel","getTypenBetriebsmittel","loadInventarliste","checkperson","updatePersonUnrulyStatus","unrulyParam","unruly","filterPerson","base","axios","ort","getContentID","ort_kurbz","getRooms","typ","personenanzahl","getRoomTypes","cms","content","content_id","version","sprache","sichtbar","getNews","page_size","news","limit","getNewsRowCount","getNewsExtra","lehre","getStudentenMail","getLvInfo","getStudentPruefungen","addons","getLvMenu","lvid","messages","getMessages","size","getVorlagen","getMsgVarsLoggedInUser","getMessageVarsPerson","getMsgVarsPrestudent","getPersonId","getDataVorlage","vorlage_kurzbz","getNameOfDefaultRecipient","getPreviewText","getReplyData","messageId","sendMessageFromModalContext","sendMessage","deleteMessage","vorlagen","getVorlagenByLoggedInUser","studium","getAllStudienSemester","studiengang","studienplan","getStudiengaengeForStudienSemester","getStudienplaeneBySemester","getLvPlanForStudiensemester","getLvEvaluierungInfo","FhcApiFactory","phrasen","dashboard","getViewData","bookmark","getBookmarks","bookmark_id","tag","ampeln","all","ampel_id","studiengangInformation","getStudiengangByKz","menu","authinfo","getAuthUID","getAuthInfo","getAll","OldFhcApi","install","app","globalProperties","factory","console","warn","addEndpoints","_get_config","uri","TypeError","clearValidation","setFeedback","_clean_return_value","fhcApiAxios","baseURL","interceptors","request","FormData","every","item","FileList","File","entries","nd","jsondata","err","_defaultErrorHandlers","handled","alertDefault","responseURL","validation","apply","general","php","filename","line","backtrace","function","severity","alertSystemError","exception","db","heading","sql","join","auth","controller","required_permissions","FhcApiFactoryWrapper","constructor","factorypart","root","defineProperty","noWarn","provide","CORE_REST_CLIENT_ERROR","CORE_REST_CLIENT_RETVAL","CoreRESTClient","wsURL","wsParameters","axiosParameters","_axiosCall","isSuccess","isError","hasData","trim","getError","getErrorCode","_generateRouterURI","_printDebug","parameters","errorThrown","axiosCallObj","prop","helperAppContainer","helperApp","PvToast","PvConfirm","mailToUrl","slotProps","systemerror_mailto","detail","openMessagecard","getOrCreateInstance","showmaillink","PvConfig","PvConfirmationService","helperAppInstance","FhcAlert","FhcPhrasen","toast","add","summary","life","$confirm","require","accept","sticky","alertMultiple","messageArray","handleSystemError","errMsg","toUpperCase","stack","handleSystemMessage","msg","resetFormValidation","Event","dispatchEvent","handleFormValidation","nodeType","Node","ELEMENT_NODE","notFound","querySelector","CustomEvent","PluginsApi","_send_array_or_object","func","errs","DEFAULT_ERROR_CONFIG","success","fail","combine","_format_toast","_default","msgs","n_errors","get_config","clean_return_value","_merge_error_config","get_error_handler","formHandler","get_error_list","popHandleableErrors","copy","pop","newType","newTypeCombinesType","newTypeHasHandler","errorConfig","remaining","configoverwrite","typedErrors","allowed","reason","errType","getErrorHandler","ApiPhrasen","reactive","loadingModules","user_language","user_locale","server_languages","LC_Time","catArray","phrase","obj","elem","extractCategory","t_ref","match","p1","getValueForLoadedPhrase","cat","CoreTabs","tabview","TabView","tabpanel","TabPanel","accessibility","arg","cursor","prev","next","modifiers","vertical","act","parentNode","tabIndex","ariaSelected","previousSibling","nextSibling","click","activetab","from","node","ariaSetSize","ariaPosInSet","classList","pos","parseInt","Symbol","border","useprimevue","tabs","currentTab","component","calcActiveIndex","initConfig","handleTabClick","$nextTick","_addToTabs","suffix","showSuffix","markRaw","defineAsyncComponent","import","suffixhelper","updateSuffix","getTabSuffix","removeInvalidCountTabs","countIst","tabsToDelete","validCountMulti","tab","countSoll","getSuffix","getTabSuffixes","updated","StudentDropdown","internal_available_student_info","internal_selected_student_info","studentChanged","selected_student","selected_student_info","availableStudents","resetData","StudentAnwesenheitComponent","StudiensemesterDropdown","selectedOption","loadDropdown","aktuell","_","appContext","ssChanged","studentViewTabulatorOptions","studentAnw","renderVerticalBuffer","bottomCalcParams","bottomCalcParamLookup","formAnwesenheit","groupBy","groupStartOpen","groupHeader","customGroupHeader","groupToggleElement","studentViewTabulatorEventHandlers","sums","bezeichnung_english","anwesenheit","first","returnValue","hasOffene","hasAbgelehnte","ssChangedHandler","loadAnwesenheitenByUID","profileViewDataPromise","viewDataStudent","processedAnw","processAnw","uebersichtTable","percentage","entschuldigungen_enabled","offene","abgelehnte","o","student_status","abg","collapsables","Range","modelKeys","AnwTimeline","Datepicker","Timeline","timeline","timelineStart","timelineEnd","hourWidth","selectedRange","anwArray","entArray","formatDateTimelineStart","formatDateTimelineEnd","formatEntTime","formatDate","highlightEntschuldigung","scrollIntoView","behavior","block","highlightKontrolle","showRangeDetails","range","dateToPercentage","dateStr","getDaysBetweenDates","getRangeColor","getRangeColorAnw","getOverlayStyleEnt","end","offsetDays","rangeLength","rangeTime","offsetHours","zOffset","Math","round","position","left","dayWidth","transform","borderRadius","getOverlayStyleAnw","diffTime","abs","floor","dateParam","getTimelineEventStyle","handleScrollTimeline","wheelDelta","goToday","yyyy","mm","dd","scrollToDate","datestr","anwDateFormat","vonparts","bisparts","deep","getTooltipAnwTimeline","timelineWidth","entTimeRanges","anwTimeRanges","events","days","formattedDate","getTimelineStyle","StudentComponent","tabsStudent","getTabsStudent","componentPath","tabPaths","anwesenheiten","entCompPath","timelinePath","routeToCodeScan","checkEntryParamPermissions","handleTabChanged","refs","studentChangedHandler","awaitPhrasen","activetabstudent","Upload","DmsItem","preview","multiple","inputClass","noList","disabled","stringifyFile","lastModified","lastModifiedDate","addFiles","files","dt","DataTransfer","doubles","items","removeFile","fileToRemove","upload","dmsFile","StudentEntschuldigungComponent","Checkbox","checkbox","noFileUpload","entschuldigung","initEntschuldigungForm","calcMinDate","entschuldigungsViewTabulatorOptions","studentEnt","ajaxConfig","ajaxContentType","pagination","paginationSize","entschuldigungstatusFormatter","entschuldigungsViewTabulatorEventHandlers","formatDateEntschuldigungEdit","entschuldigungMaxReach","getDay","isValidDateObj","triggerEdit","targetRow","entschuldigungsTable","getRows","modalContainerEntschuldigungEdit","triggerUpload","validate","addRow","modalContainerEntschuldigungUpload","button","minwidth","downloadEntschuldigung","addEntschuldigungFile","startUploadEntschuldigung","updateDefinition","setHours","ScanComponent","internalZugangscode","zugangscodeProcessed","codeMaxlength","codeButtonDisabled","sendCode","processAnwesenheit","checkValue","calculatedMaxLength","getBaseLayoutTitle","StudiengangDropdown","allowedStg","isAdmin","studiengaengeAdmin","sgChanged","EntschuldigungEdit","Textarea","textarea","Tristate","tristatecheckbox","setForm","uploaddatum","setFullYear","getStatusLabel","dateFilter","div","initialValue","PrimevueCalendar","calendar","headerValue","rowValue","rowDate","startDate","endDate","singleDate","ApiAdmin","getEntschuldigungen","stg_kz_arr","updateEntschuldigung","getTimeline","AssistenzComponent","headerFiltersRestored","filtersRestored","colLayoutRestored","sortRestored","stateRestored","selectedEntschuldigung","selectedEntschuldigungValid","selectedAnwArray","selectedEntArray","editCellValue","zeitraum","$formatTime","permissionsLoaded","assistenzViewTabulatorOptions","berechtigungenArrayAdmin","berechtigungenArrayAssistenz","studiengaengeAssistenz","joined","true","false","null","headerFilterFunc","akzeptiertFilterFunc","assistenzViewTabulatorEventHandlers","stopPropagation","titleText","formatForSql","pad","saveEditEntschuldigung","selectedEntschuldigungCellRef","assistenzTable","modalContainerEditEntschuldigung","cancelEdit","openEditEntschuldigungModal","closeTimelineModal","modalContainerTimeline","openTimelineModal","filterVal","rowVal","notizParam","existingNotiz","actionwrapper","cellData","openRejectionModal","bisFilter","filterParams","vonFilter","studiengangFilter","filtern","addFilter","handleInputNotiz","rejectEntschuldigung","rejectCell","modalContainerRejectionReason","sgChangedHandler","refetchData","handleSelectedEntschuldigungValidate","valid","saveState","state","getColumnLayout","getSorters","dir","getFilters","headerFilters","localStorage","setItem","handleTableBuilt","saved","loadState","setColumnLayout","setFilter","hf","sortList","columnManager","findColumn","setSort","getItem","beforeMounted","back","getAllowedStg","getTooltipVonDatum","getTooltipBisDatum","LandingPageComponent","initTabs","loaded","phrasenResolved","permissioncount","anwKontrolleMinDate","anwKontrolleMaxDate","queryString","URLSearchParams","notMissingParams","capitalize","string","kontrolleTitle","profilTitle","adminTitle","setCurrentTab","setDefaultTabHeight","createdSetup","setupViewDataRefs","loadLvViewData","attributes","nodeValue","cis4","kontrolleCreateMaxReachPast","kontrolleCreateMaxReachFuture","removeAttribute","benotung","kurzbz","oe_kurzbz","orgform_kurzbz","raumtyp_kurzbz","setLvViewData","handleSetup","le_ids","promises","handleMaSetup","handleStudentsSetup","available_maUID","anrede","titelpre","vornamen","titelpost","existing","gruppe_kurzbz","direktinskription","studentcount","termincount","findLeWithClosestTermin","available_le_info","leEntry","available_le_ids","tabsMain","leChoices","leTermine","flat","closest","choice","luxon","DateTime","toUTC","fromFormat","zone","score","hasSame","diff","as","best","getSubtitle","getCurrentTab","ciPath","router","VueRouter","createRouter","createWebHistory","routes","path","redirect","anwesenheitApp","isMobile","min","screen","navigator","userAgent","timeStamp","delimiter","format","directive","utils","DomHandler","hasClass","findSingle","getTarget","$_ptooltipZIndex","$primevue"],"mappings":"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"}